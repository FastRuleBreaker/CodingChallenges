(window.webpackJsonp=window.webpackJsonp||[]).push([[57],{"1aeH":function(e,t,n){},"6w5V":function(e,t,n){},KLSP:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return m}));n("HAE/"),n("WLL4"),n("jm62"),n("8+KV"),n("0l/t"),n("ioFf");var i=n("lSNA"),a=n.n(i),o=(n("eM6i"),n("rGqo"),n("yt8O"),n("Btvt"),n("RW0V"),n("DNiP"),n("ZaSc")),r=n("7fp8");function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u={QUESTION_LIST_VIEW:2,QUESTION_VIEW:3,FIRST_TYPE:25,BLUR:7,FOCUS:8,PASTE:9,MULTI_LINE_DELETE:30},l={questionId:"qid",metadata:"metadata",pastedText:"pasted_text",truncated:"truncated"};function m(e){var t=[],n=Object(r.c)("logActivity",{attemptId:e});function i(e,i,a){var r={eid:e,inserttime:a?new Date(Date.now()-a):new Date};if(i){var s=function(e){return Object.keys(e).reduce((function(t,n){return l[n]?(t[l[n]]=e[n],t):t}),{})}(i);r=c(c({},s),r)}Object(o.e)({url:n,data:r,error:function(){t.push(r)}})}return i.getFailedEvents=function(){return t},i}},PsKZ:function(e,t,n){},Td56:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return o}));n("f3/d");function i(e,t){return t.sectional&&t.currentSection!==e}function a(e){var t=e.section,n=e.index,i=e.showName,a=e.defaultLabel,r=void 0===a?"Section":a;return!o(e.currentSection)||i?t.name:"".concat(r," ").concat(n+1)}function o(e){return-1!==e}},UE0f:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return r}));var i=n("cDcd"),a=Object(i.createContext)(),o=a.Provider,r=a.Consumer},WfZi:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return r}));var i=n("cDcd"),a=Object(i.createContext)(),o=a.Provider,r=a.Consumer},XcW5:function(e,t,n){"use strict";n.r(t);n("2Spj");var i=n("cDcd"),a=n.n(i),o=n("TSYQ"),r=n.n(o),s=n("/MKj"),c=n("eHHv"),u=n("vmXh"),l=n.n(u),m=n("H59Z"),d=n("EfbJ"),h=n("viIQ"),f=n("Ojj1"),p=n("rVpR"),v=n("6454"),g=n("4RdN"),b=n("bfiW"),T=(n("rGqo"),n("yt8O"),n("RW0V"),n("a1Th"),n("h7Nl"),n("Btvt"),n("I5cv"),n("f3/d"),n("pVnL")),y=n.n(T),I=n("lwsE"),S=n.n(I),w=n("W8MJ"),O=n.n(w),E=n("PJYZ"),D=n.n(E),k=n("7W2i"),C=n.n(k),L=n("a1gu"),_=n.n(L),j=n("Nsbk"),P=n.n(j),N=n("lSNA"),R=n.n(N),x=n("9kay"),A=n("OEX3"),q=n("iiin"),U=n("bIS8"),W=n("WfZi"),F=n("57B8"),M=n("MGin"),Q=n("LD1s"),V=n("2Ica"),B=n("hF3m"),K=n("ayy4"),H=n("QgMK"),G=n("AGYi"),z=n("kV2S");n("PsKZ");var Y=Object(c.a)(Object(x.c)(["testview"]),d.a,Object(K.a)("UserInfo can only be used inside TestLifecycle scope",W.a,"lifeCycleContext"))((function(e){var t=e.fullName,n=e.hideSubmitTest,i=e.appUtil.params,o=e.t,r=e.lifeCycleContext,s=r.endTest,c=r.pageEventCategory;return a.a.createElement("nav",{className:"d-flex userinfo","aria-label":o("user.account")},a.a.createElement(Q.a,{className:"userinfo__dropdown",closeHandleSelector:".userinfo__link"},a.a.createElement(V.a,{className:"align-items-center justify-content-center userinfo__handle"},a.a.createElement(A.b,y()({className:"align-items-center userinfo__name"},Object(G.a)({category:c,action:z.a.Click,label:z.c.ProfileSettings}),{"aria-label":o("user.account")}),a.a.createElement("i",{className:"ui-icon-user userinfo__icon"}),a.a.createElement("span",null,t),a.a.createElement("i",{className:"ui-icon-arrow-down-filled userinfo__icon"}))),a.a.createElement(B.a,{className:"userinfo__options"},a.a.createElement("div",{className:"dropdown-menu pull-right"},a.a.createElement("ul",{className:"userinfo__list","aria-label":o("user.account")},a.a.createElement("li",null,a.a.createElement(M.Link,y()({className:"d-flex userinfo__link",to:Object(H.c)("/".concat(i.testId,"/instructions"))},Object(G.a)({category:c,action:z.a.Click,label:z.c.InstructionsSettings})),o("instructions.label"))),!n&&a.a.createElement("li",null,a.a.createElement(A.b,y()({role:"link",to:"",className:"d-flex userinfo__logout-btn",onClick:s},Object(G.a)({category:c,action:z.a.Click,label:z.c.SubmitAndLogOutSettings})),o("submitTest"))))))))})),Z=n("Td56"),X=n("QfwD"),J=n("214P");n("1aeH");function $(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=P()(e);if(t){var a=P()(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return _()(this,n)}}var ee=function(e){C()(n,e);var t=$(n);function n(e){var i;S()(this,n),i=t.call(this,e),R()(D()(i),"handleCountdown",(function(e){i.setState(e)})),R()(D()(i),"toggleTimer",(function(){var e=i.props,t=e.attemptId;(0,e.toggleTimer)(t)})),R()(D()(i),"toggleTheme",(function(){var e=i.props,t=e.user.theme,n=e.setUserTheme;t===b.j.DARK?(n(b.j.LIGHT),l.a.set("hacker_editor_theme",b.j.LIGHT),document.documentElement.classList.remove("theme-dark")):(n(b.j.DARK),l.a.set("hacker_editor_theme",b.j.DARK),document.documentElement.classList.add("theme-dark"))}));var a=e.currentTimeLeft;return i.state={showTimeInfo:!1,currentTimeLeft:a,approxTimeString:"",bypassTimerHide:!1,fullTimeString:""},i}return O()(n,[{key:"componentDidMount",value:function(){this.setState({showTimeInfo:!0}),X.c.on(J.i.COUNTDOWN,this.handleCountdown)}},{key:"componentWillUnmount",value:function(){X.c.off(J.i.COUNTDOWN,this.handleCountdown)}},{key:"renderTimer",value:function(){var e=this.props,t=e.t,n=e.test.showTimer,o=e.currentSection,r=this.state,s=r.currentTimeLeft,c=r.approxTimeString,u=r.bypassTimerHide,l="testend.done",m="remainingTime";return Object(Z.c)(o)&&(m="remainingTimeInSection",l="testend.sectionDone"),s<=0?a.a.createElement("span",{className:"main-header__info-text"},t(l)):n||u?a.a.createElement(i.Fragment,null,t(m)," ",a.a.createElement("strong",{className:"main-header__timer"},c)):null}},{key:"renderRemainingTime",value:function(){var e=this.props,t=e.test,n=e.t,i=e.lifeCycleContext.pageEventCategory,o=this.state,r=o.fullTimeString,s=o.bypassTimerHide;return a.a.createElement("div",{className:"main-header__test-time","aria-label":r||void 0,"data-balloon-pos":"down"},this.renderTimer(),!s&&a.a.createElement(A.b,y()({className:"main-header__toggle-timer","aria-label":t.showTimer?n("timer.hideFull"):n("timer.showFull"),onClick:this.toggleTimer},Object(G.a)({category:i,action:z.a.Click,label:t.showTimer?z.c.HideRemainingTime:z.c.ShowRemainingTime})),t.showTimer?n("timer.hide"):n("timer.show"),a.a.createElement("i",{className:"ui-icon-timer-visibility"})))}},{key:"renderThemeSwitch",value:function(){var e=this.props,t=e.lifeCycleContext.pageEventCategory,n=e.user.theme,i=e.t,o=n===b.j.LIGHT;return a.a.createElement("div",{className:"main-header__theme-switch"},a.a.createElement(q.a,y()({btnText:i("questionview:actions.switch_theme"),"aria-label":i("questionview:actions.switch_theme"),"data-balloon-pos":"down",className:"main-header__theme-switch__button",Icon:o?U.MoonIcon:U.SunIcon,onClick:this.toggleTheme,tooltip:!0},Object(G.a)({category:t,action:z.a.Click,label:o?z.c.SwitchToDarkMode:z.c.SwitchToLightMode}))))}},{key:"render",value:function(){var e=this.state.showTimeInfo,t=this.props,n=t.user,i=n.fullName,o=n.email,r=t.test,s=t.t,c=t.totalSubmissions,u=t.totalQuestions,l=t.userAgent,m=Object(H.c)("/".concat(r.uniqueId,"/questions")),d=Object(p.a)(r.questionsTypes,l);return a.a.createElement("header",{className:"d-flex flex-column main-header"},a.a.createElement("nav",{className:"d-flex align-items-center main-header__nav"},a.a.createElement("div",{className:"justify-content-center"},a.a.createElement("a",{href:m},a.a.createElement(F.a,{className:"d-flex main-header__logo",logoUrl:r.logo,alt:r.name}))),a.a.createElement("div",{className:"d-flex align-items-center main-header__test"},a.a.createElement("h1",{className:"main-header__title"},r.name),a.a.createElement("div",{className:"d-flex align-items-center main-header__test-info"},e&&this.renderRemainingTime(),a.a.createElement("div",{className:"main-header__test-attempts"},s("questions.attempted")," ",a.a.createElement("strong",{className:"main-header__info-text"},c," / ",u)),d&&this.renderThemeSwitch())),a.a.createElement(Y,{email:o,fullName:i,hideSubmitTest:r.isCompetitionTest})))}}]),n}(i.PureComponent);R()(ee,"defaultProps",{showTimer:!0});var te=Object(c.a)(Object(s.connect)((function(e){var t=e.test,n=e.user,i=e.candidate,a=i.attempt,o=i.sections,r=i.questions,s=e.metadata.userAgent;return{test:t,user:n,totalQuestions:r.ids.length,totalSubmissions:Object.keys(r.submissions).length,currentSection:o.currentSection,currentTimeLeft:o.currentSectionTimeLeft,attemptId:a.id,userAgent:s}}),(function(e){return{toggleTimer:function(t){return e(Object(v.toggleTimer)(t))},setUserTheme:function(t){return e(Object(v.setUserTheme)(t))}}})),Object(x.c)(["testview","questionview"]),Object(K.a)("Header can only be used inside TestLifecycle scope",W.a,"lifeCycleContext"))(ee),ne=(n("HAE/"),n("WLL4"),n("jm62"),n("8+KV"),n("0l/t"),n("ioFf"),n("bWfx"),n("dZ+Y"),n("DNiP"),n("GEYT")),ie=n.n(ne),ae=n("sSFG");n("6w5V");function oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function re(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(n),!0).forEach((function(t){R()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function se(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=P()(e);if(t){var a=P()(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return _()(this,n)}}var ce=function(e){C()(n,e);var t=se(n);function n(e){var i;S()(this,n),i=t.call(this,e),R()(D()(i),"questionRefs",void 0),R()(D()(i),"handleCountdown",(function(e){var t=i.props.sections,n=t.sectional,a=t.currentSection,o=t.sectionTimesLeft,r=e.currentTimeLeft,s=null;n&&(r=o.reduce((function(e,t,n){return n===a-1?e+r:e+t}),0)),ae.s.BLINK.some((function(e){return r<e&&r>e-4}))?s=ae.r.BLINK:r<ae.s.STEADY&&(s=ae.r.STEADY),i.setState(re(re({},e),{},{notifyTimerState:s}))})),R()(D()(i),"toggleTimer",(function(){if(!i.state.bypassTimerHide){var e=i.props,t=e.attemptId,n=e.toggleTimer;i.setState({hovered:!1}),n(t)}})),R()(D()(i),"onTimerMouseOver",(function(){i.state.hovered||i.setState({hovered:!0})})),R()(D()(i),"onTimerMouseOut",(function(){i.setState({hovered:!1})}));var o=e.questions,r=e.sections.currentSectionTimeLeft;return i.questionRefs=o.ids.reduce((function(e,t){return e[t]=a.a.createRef(),e}),{}),i.state={hovered:!1,showTimeInfo:!1,bypassTimerHide:!1,shorterTimeString:"",fullTimeString:"",currentTimeLeft:r,notifyTimerState:null},i}return O()(n,[{key:"componentDidMount",value:function(){X.c.on(J.i.COUNTDOWN,this.handleCountdown),this.setState({showTimeInfo:!0}),this.scrollQuestionInView()}},{key:"componentDidUpdate",value:function(e){var t=e.appUtil.params.questionId;this.props.appUtil.params.questionId!==t&&this.scrollQuestionInView()}},{key:"componentWillUnmount",value:function(){X.c.off(J.i.COUNTDOWN,this.handleCountdown)}},{key:"scrollQuestionInView",value:function(){var e=this.props.appUtil.params.questionId,t=this.questionRefs[e];t&&t.current&&ie.a(t.current,{time:0,align:{top:.5}})}},{key:"renderTabItem",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this.props,o=i.testId,s=i.t,c=i.questions,u=c.ids,l=c.submissions,m=c.disabledQuestionMap,d=this.questionRefs,h=u.slice(e,t);return h.map((function(t,i){var c=!!l[t],u=n||m[t],h=r()("d-block question-tab__list-item",{"question-tab__list-item--answered":c,"question-tab__list-item--disabled":u}),f=e+i+1,p=s(c?"questions.modifySubmissionAria":"questions.solveQuestionAria",{index:f});return u?a.a.createElement("li",{key:t,ref:d[t],className:h},f):a.a.createElement("li",{key:t,ref:d[t]},a.a.createElement(M.Link,{className:h,activeClassName:"question-tab__list-item--active",to:Object(H.c)("/".concat(o,"/questions/").concat(t)),"aria-label":p},f))}))}},{key:"renderSectionTabItems",value:function(){var e=this,t=this.props.sections,n=0;return t.items.map((function(o,r){var s=o.questions,c=n,u=n+s,l=e.renderTabItem(c,u,Object(Z.b)(r+1,t));return n+=s,a.a.createElement(i.Fragment,{key:r},l,a.a.createElement("li",{className:"question-tab__separator"}))}))}},{key:"renderQuestionTabItems",value:function(){var e=this.props.questions;return this.renderTabItem(0,e.ids.length)}},{key:"renderTabItems",value:function(){return this.props.sections.items.length?this.renderSectionTabItems():this.renderQuestionTabItems()}},{key:"renderTimer",value:function(){var e=this.state,t=e.hovered,n=e.showTimeInfo,i=e.currentTimeLeft,o=e.shorterTimeString,s=e.bypassTimerHide,c=e.notifyTimerState;if(!n)return null;var u,l=this.props,m=l.sections.currentSection,d=l.t,h=l.showTimer,f=Object(Z.c)(m);return u=i<=0?d(f?"testend.sectionDone":"testend.done"):s?d("timer.withLabel",{timeLeft:o}):h?t?d("timer.hideTimer"):d("timer.withLabel",{timeLeft:o}):d("timer.show"),a.a.createElement(A.b,{className:r()("question-tab__timer-toggle-btn",c),onClick:this.toggleTimer,onMouseOver:this.onTimerMouseOver,onMouseOut:this.onTimerMouseOut,onFocus:this.onTimerMouseOver,onBlur:this.onTimerMouseOut},u)}},{key:"render",value:function(){var e=this.props,t=e.testId,n=e.showTimerTab,i=e.t,o=this.state.fullTimeString;return a.a.createElement("div",{className:"d-flex question-tab"},a.a.createElement("ul",{className:"question-tab__list"},n&&a.a.createElement("li",{className:"d-flex flex-column align-items-center justify-content-center question-tab__timer","aria-label":i("timer.withLabel",{timeLeft:o}),"data-balloon-pos":"right"},this.renderTimer()),a.a.createElement("li",null,a.a.createElement(M.Link,{className:"d-block question-tab__list-item",activeClassName:"question-tab__list-item--active",onlyActiveOnIndex:!0,to:Object(H.c)("/".concat(t,"/questions")),title:i("questions.listLabel")},i("common:label.all"))),a.a.createElement("li",null,a.a.createElement(M.Link,{className:"d-block question-tab__list-item",activeClassName:"question-tab__list-item--active",to:Object(H.c)("/".concat(t,"/instructions")),"aria-label":i("common:instructions.view")},a.a.createElement("i",{className:"ui-icon-info question-tab__list-item-icon"}))),a.a.createElement("li",{className:"question-tab__separator"})),a.a.createElement("ul",{className:"question-tab__list question-tab__list--scrollable"},this.renderTabItems()))}}]),n}(i.PureComponent),ue=Object(s.connect)((function(e){var t=e.candidate,n=t.sections,i=t.questions,a=t.attempt,o=e.test;return{sections:n,questions:i,testId:o.uniqueId,showTimer:o.showTimer,attemptId:a.id}}),(function(e){return{toggleTimer:function(t){return e(Object(v.toggleTimer)(t))}}})),le=Object(c.a)(ue,Object(x.c)(["testview","common"]),d.a)(ce),me=n("5FRD"),de=n("SiKo"),he=n("f4Vd"),fe=n("g2mX"),pe=n("eOGF"),ve=function(){function e(t){var n=this;S()(this,e),R()(this,"isPaused",void 0),R()(this,"counter",void 0),R()(this,"initialTimeLeft",void 0),R()(this,"intervalID",void 0),R()(this,"pauseTimeoutID",void 0),R()(this,"listeners",void 0),R()(this,"handleInterval",(function(){n.isPaused||(n.counter++,n.fireListeners())})),R()(this,"restartTimer",(function(){n.isPaused=!1})),this.isPaused=!1,this.initialTimeLeft=t,this.counter=0,this.listeners={},this.start()}return O()(e,[{key:"start",value:function(){Object(pe.k)()||(this.intervalID=setInterval(this.handleInterval,e.DEFAULT_INTERVAL))}},{key:"getSecondsLeft",value:function(){return this.initialTimeLeft-this.counter}},{key:"fireListeners",value:function(){var e=this,t=this.initialTimeLeft-this.counter;Object.keys(this.listeners).forEach((function(n){var i=e.listeners[n],a=parseInt(n,10);t%a==0&&i.forEach((function(e){return e(t)}))})),t<=0&&this.dispose()}},{key:"addListener",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.listeners[t]=this.listeners[t]||[],this.listeners[t].push(e)}},{key:"removeListener",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.listeners[t]=this.listeners[t].filter((function(t){return e!==t}))}},{key:"pause",value:function(e){this.isPaused&&this.pauseTimeoutID&&clearTimeout(this.pauseTimeoutID),this.isPaused=!0,this.pauseTimeoutID=setTimeout(this.restartTimer,1e3*e)}},{key:"dispose",value:function(){this.intervalID&&clearInterval(this.intervalID),this.pauseTimeoutID&&clearTimeout(this.pauseTimeoutID),this.listeners={}}}]),e}();R()(ve,"DEFAULT_INTERVAL",1e3);var ge=n("MrcO"),be=n("oRS0"),Te=n("cSN9"),ye=(n("VRzm"),n("CX2u"),n("lSCD")),Ie=n.n(ye),Se=n("vN+2"),we=n.n(Se),Oe=n("O766"),Ee=n("JoEb"),De=n("oaCn");n("kTy2");function ke(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=P()(e);if(t){var a=P()(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return _()(this,n)}}var Ce=function(e){C()(n,e);var t=ke(n);function n(e){var i;return S()(this,n),i=t.call(this,e),R()(D()(i),"countdown",null),R()(D()(i),"webcamRef",a.a.createRef()),R()(D()(i),"setSnapshot",(function(e){var t=i.state.count;i.setState({snap:e,count:t+1})})),R()(D()(i),"resetModal",(function(){var e=i.props.webcamContext.webcamLib;e&&e.reset(),i.stopTimer(),i.setState({saving:!1,open:!1,count:0,snap:null})})),R()(D()(i),"handleTimerUpdate",(function(e){i.setState({timeLeft:e}),0===e&&i.submitSnapshot(!0)})),R()(D()(i),"handleCaptureSnapshot",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we.a,t=i.props.webcamContext,n=t.webcamLib,a=t.snap;if(!n)return null;try{a((function(t){i.setSnapshot(t),Ie()(e)&&e(t)}))}catch(e){return console.error(e),i.resetModal(),null}})),R()(D()(i),"handleResetSnapshot",(function(){i.setState({snap:null})})),R()(D()(i),"handleSubmitSnapshot",(function(){i.submitSnapshot()})),i.state={getLiveFeed:!1,timeLeft:ae.l,count:0,snap:null,open:!0,saving:!1},i}return O()(n,[{key:"componentDidMount",value:function(){var e=this.state.open,t=this.props.attemptId,n=!!ge.a.get(Object(Ee.i)(t));e&&!n?this.setState({getLiveFeed:!0}):this.resetModal()}},{key:"componentDidUpdate",value:function(e,t){var n=this.props,i=n.webcamContext,a=i.webcamLib,o=i.webcamStatus,r=i.loadStatus,s=n.appUtil.assetPath,c=n.attemptId,u=this.state,l=u.getLiveFeed,m=u.snap,d=this.webcamRef.current,h=e.webcamContext;if((l&&!t.getLiveFeed||r!==h.loadStatus)&&a&&d){a.reset();var f=d.getBoundingClientRect().width,p=3*f/4;a.set({width:f,height:p,swfURL:s("webcam.swf")}),a.attach(d)}else l&&h.webcamStatus!==o&&(o===De.c.FOUND?(this.startCountdown(),ge.a.set(Object(Ee.i)(c),!0)):o!==De.c.DENIED&&o!==De.c.UNAVAILABLE||m||this.resetModal())}},{key:"componentWillUnmount",value:function(){var e=this.props.webcamContext.webcamLib;e&&e.reset(),this.stopTimer()}},{key:"submitSnapshot",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.state,i=n.count,a=n.snap,o=this.props,r=o.saveAttemptState,s=o.attemptId;this.setState({saving:!0}),a?r(s,{identity_verification_image:a,identity_verification_count:i}).finally(this.resetModal):t&&this.handleCaptureSnapshot((function(t){r(s,{identity_verification_image:t,identity_verification_count:i+1}).finally(e.resetModal)}))}},{key:"startCountdown",value:function(){this.countdown=new ve(ae.l),this.countdown.addListener(this.handleTimerUpdate)}},{key:"stopTimer",value:function(){this.countdown&&(this.countdown.dispose(),this.countdown=null)}},{key:"renderLiveFeed",value:function(){var e=this.props.t,t=this.state.snap;return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:r()("photo-verification__live-feed",{"d-none":!!t}),ref:this.webcamRef}),a.a.createElement("div",{className:r()("photo-verification__snap-wrapper",{"d-none":!t})},a.a.createElement("img",{className:"photo-verification__snap",src:t,alt:e("proctor.snapshotAlt")})))}},{key:"renderMessage",value:function(){var e=this.props.t,t=this.state,n=t.timeLeft,i=t.snap,o=e("proctor.noSnapshotTakenTitle"),r=a.a.createElement(x.b,{i18nKey:"proctor.noSnapshotTakenDesc",count:n},"This photo will be used during your hiring process. We will take your photo automatically after ",a.a.createElement("span",{className:"photo-verification__message__time"},{timeLeft:n})," seconds");return i&&(o=a.a.createElement(a.a.Fragment,null,a.a.createElement(U.CheckCircleIcon,{className:"photo-verification__success-icon"}),a.a.createElement("span",null,e("proctor.snapshotTakenTitle"))),r=a.a.createElement(x.b,{i18nKey:"proctor.snapshotTakenDesc",count:n},"'Starting test automatically in '",a.a.createElement("span",{className:"photo-verification__message__time"},{timeLeft:n})," seconds")),a.a.createElement("div",{className:"photo-verification__content"},a.a.createElement("h2",{className:"d-flex align-items-center photo-verification__heading"},o),a.a.createElement("div",{className:"photo-verification__message"},a.a.createElement("span",null,r)))}},{key:"renderActions",value:function(){var e=this.props,t=e.webcamContext.webcamStatus,n=e.t,i=this.state,o=i.saving,r=i.snap,s=t!==De.c.FOUND;return r?a.a.createElement(a.a.Fragment,null,a.a.createElement(A.c,{onClick:this.handleSubmitSnapshot,loading:o},n("proctor.submit")),a.a.createElement(A.d,{onClick:this.handleResetSnapshot,Icon:U.ShowIcon,disabled:s,iconAlignment:"left"},n("proctor.retakeSnap"))):a.a.createElement(A.c,{onClick:this.handleCaptureSnapshot,Icon:U.ShowIcon,disabled:s,iconAlignment:"left"},n("proctor.takeSnap"))}},{key:"render",value:function(){var e=this.state.open;return a.a.createElement(Oe.a,{open:e,size:"medium",theme:"theme-m",modalClass:"photo-verification__dialog"},this.renderLiveFeed(),this.renderMessage(),a.a.createElement("div",{className:"d-flex align-items-center photo-verification__actions"},this.renderActions()))}}]),n}(a.a.PureComponent);var Le=Object(c.a)(Object(s.connect)((function(e){return{attemptId:e.candidate.attempt.id}}),(function(e){return{saveAttemptState:function(t,n){return e(Object(v.saveAttemptState)(t,n))}}})),Object(x.c)(["testview"]),d.a)(Ce),_e=n("tX8B"),je=n("ADy/");n("tHjC");function Pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pe(Object(n),!0).forEach((function(t){R()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Re(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=P()(e);if(t){var a=P()(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return _()(this,n)}}var xe=function(e){C()(n,e);var t=Re(n);function n(e){var a;S()(this,n),a=t.call(this,e),R()(D()(a),"counter",void 0),R()(D()(a),"getReadableTime",void 0),R()(D()(a),"getReadableShortTime",void 0),R()(D()(a),"webcamRef",Object(i.createRef)()),R()(D()(a),"lastSnapSignature",""),R()(D()(a),"cameraAttachTimeout",void 0),R()(D()(a),"showModal",(function(){a.props.webcamContext.webcamStatus===De.c.CHECKING&&a.setState({showWebcamDialog:!0,noCamFeed:!1})})),R()(D()(a),"reattachCamera",(function(){a.setState({showWebcamDialog:!1,noCamFeed:!1})})),R()(D()(a),"timerTickListener",(function(e){var t=Object(fe.a)(e),n=a.getReadableTime(t),i={fullTimeString:n,approxTimeString:n,bypassTimerHide:!0,currentTimeLeft:e,shorterTimeString:""},o=!0;e>ae.q&&(i.bypassTimerHide=!1,i.approxTimeString=a.getReadableTime(t,!0),o=!1),i.shorterTimeString=a.getReadableShortTime(t,o),X.c.emit(J.i.COUNTDOWN,i),(e+ae.x)%ae.k==0&&a.snapImageAndSave()}));var o=e.t;return a.state={showWebcamDialog:!1,noCamFeed:!1,noSnap:!1},a.getReadableTime=Object(_e.b)(o),a.getReadableShortTime=Object(_e.a)(o),a}return O()(n,[{key:"componentDidMount",value:function(){this.emitInitialTimeLeft(),this.adjustTimerVisibility(),this.createCounter()}},{key:"componentDidUpdate",value:function(e,t){var n=e.sections,i=e.attempt,a=e.webcamContext,o=t.showWebcamDialog,r=this.props,s=r.sections,c=r.attempt;this.attachWebcam(a,o),s.currentSection===n.currentSection&&i.timeLeft===c.timeLeft||(this.counter.dispose(),this.emitInitialTimeLeft(),this.createCounter())}},{key:"componentWillUnmount",value:function(){var e=this.props.webcamContext.webcamLib;e&&e.reset(),this.counter.dispose(),this.counter=null,clearTimeout(this.cameraAttachTimeout)}},{key:"attachWebcam",value:function(e,t){var n=this.props,i=n.appUtil.assetPath,a=n.webcamContext,o=n.singleImageProctoring,r=n.continuousImageProctoring,s=a.webcamLib,c=a.webcamStatus,u=a.loadStatus;if(r){if(a!==e){var l=this.state.showWebcamDialog;c!==e.webcamStatus&&c===De.c.FOUND&&l?this.setState({showWebcamDialog:!1,noCamFeed:!1}):l||c!==De.c.UNAVAILABLE&&c!==De.c.DENIED?(u!==e.loadStatus||!l&&t)&&s&&this.webcamRef.current&&(s.set(Ne(Ne({},De.a),{},{swfURL:i("webcam.swf")})),s.attach(this.webcamRef.current),this.cameraAttachTimeout=setTimeout(this.showModal,1e3*ae.b)):this.setState({showWebcamDialog:!0,noCamFeed:!1})}}else s&&!o&&s.reset()}},{key:"createCounter",value:function(){this.counter=new ve(this.getTimeLeft()),this.counter.addListener(this.timerTickListener)}},{key:"emitInitialTimeLeft",value:function(){var e=this.getTimeLeft(),t=Object(fe.a)(e),n=e<ae.q,i=this.getReadableTime(t),a=n?i:this.getReadableTime(t,!0),o=this.getReadableShortTime(t,n);X.c.emit(J.i.COUNTDOWN,{bypassTimerHide:n,fullTimeString:i,approxTimeString:a,currentTimeLeft:e,shorterTimeString:o})}},{key:"snapImageAndSave",value:function(){var e=this,t=this.state.noCamFeed,n=this.props,i=n.continuousImageProctoring,a=n.webcamContext,o=a.loadStatus,r=a.webcamLib,s=a.webcamStatus,c=a.snap,u=n.saveWebcamSnap,l=n.attempt;if(i&&!t&&o===je.a.LOADED&&s===De.c.FOUND&&r)try{c((function(t){var n=t.length>=1600?"".concat(t.length,"-").concat(t[800],"-").concat(t[1200],"-").concat(t[1500],"-").concat(t[1600]):"signature";n!==e.lastSnapSignature?(e.lastSnapSignature=n,u(l.id,t)):e.setState({showWebcamDialog:!0,noCamFeed:!0})}))}catch(e){console.error(e),this.setState({showWebcamDialog:!0,noSnap:!0})}}},{key:"adjustTimerVisibility",value:function(){var e=this.props,t=e.attempt,n=e.setTimerVisibility,i=ge.a.get(Object(Ee.l)(t.id));n("boolean"!=typeof i||i)}},{key:"getTimeLeft",value:function(){return this.props.sections.currentSectionTimeLeft}},{key:"renderCamPermissionDialog",value:function(){var e=this.state,t=e.noSnap,n=e.showWebcamDialog,i=e.noCamFeed;if(!n)return null;var o=this.props.webcamContext;return a.a.createElement(Te.a,{webcamContext:o,onCameraFound:this.reattachCamera,noCamFeed:i,noSnap:t})}},{key:"renderWebcamNode",value:function(){return this.props.continuousImageProctoring?a.a.createElement(i.Fragment,null,a.a.createElement("div",{className:"webcam-node",ref:this.webcamRef}),this.renderCamPermissionDialog()):null}},{key:"renderPhotoVerificationModal",value:function(){var e=this.props,t=e.attempt.identityVerificationDone,n=e.arrivedFromLogin,i=e.singleImageProctoring,o=e.webcamContext;return i&&!t&&n?a.a.createElement(Le,{webcamContext:o}):null}},{key:"render",value:function(){return a.a.createElement(i.Fragment,null,this.renderWebcamNode(),this.renderPhotoVerificationModal(),this.props.children)}}]),n}(a.a.PureComponent),Ae=Object(c.a)(Object(s.connect)((function(e){var t=e.candidate;return{attempt:t.attempt,sections:t.sections,arrivedFromLogin:e.user.arrivedFromLogin}}),(function(e){return{setTimerVisibility:function(t){return e(Object(v.setTimerVisibility)(t))},saveWebcamSnap:function(t,n){return e(Object(v.saveWebcamSnap)(t,n))}}})),Object(x.c)(["common"]),Object(K.a)("TestCoundown should be used inside WebcamWrapper",be.a,"webcamContext"),d.a)(xe),qe=(n("pIFo"),n("rvZc"),n("Wwog")),Ue=n("f0wr"),We=n("ovno"),Fe=n("g+WX"),Me=n("ZaSc"),Qe=n("QILm"),Ve=n.n(Qe);function Be(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=P()(e);if(t){var a=P()(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return _()(this,n)}}var Ke=function(e){C()(n,e);var t=Be(n);function n(){var e;S()(this,n);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),R()(D()(e),"state",{show:!0}),R()(D()(e),"timeoutID",null),R()(D()(e),"onTimeout",(function(){e.setState({show:!1}),e.props.onTimeout()})),e}return O()(n,[{key:"componentDidMount",value:function(){var e=this.props.timeout;this.timeoutID=setTimeout(this.onTimeout,1e3*e)}},{key:"componentWillUnmount",value:function(){this.timeoutID&&(clearTimeout(this.timeoutID),this.timeoutID=null)}},{key:"render",value:function(){if(!this.state.show)return null;var e=this.props,t=(e.timeout,e.onTimeout),n=e.children,i=Ve()(e,["timeout","onTimeout","children"]);return a.a.createElement(We.a,y()({},i,{onConfirm:t}),n)}}]),n}(i.PureComponent);R()(Ke,"defaultProps",{onTimeout:we.a});var He=n("KLSP");function Ge(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=P()(e);if(t){var a=P()(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return _()(this,n)}}var ze=function(e){C()(n,e);var t=Ge(n);function n(e){var i;return S()(this,n),i=t.call(this,e),R()(D()(i),"saveAnswerErrorToast",void 0),R()(D()(i),"currentTimeLeft",void 0),R()(D()(i),"prevQuestionRouteId",""),R()(D()(i),"state",{saveLastChanges:!1,savingCurrentQuestion:!1,showSectionCloseDialog:!1,showLogoutConfirmationDialog:!1,showStateChangeDialog:!1,logoutInProgress:!1,showTestEndDialog:!1,showBlockUserActionsDialog:!1}),R()(D()(i),"firstLoad",!0),R()(D()(i),"isWindowBlurred",!1),R()(D()(i),"informOnFocus",!1),R()(D()(i),"fastPingStarted",!1),R()(D()(i),"currentQuestionData",null),R()(D()(i),"pingIntervalID",null),R()(D()(i),"blurTimeoutID",null),R()(D()(i),"focusTimoutID",null),R()(D()(i),"activityLogger",void 0),R()(D()(i),"getContextValueMemoized",Object(qe.a)(i.getContextValue.bind(D()(i)))),R()(D()(i),"onErrorCallback",(function(e){e.resStatus!==b.d.UNAUTHORIZED||i.setState({showBlockUserActionsDialog:!0})})),R()(D()(i),"handleCountdown",(function(e){var t=e.currentTimeLeft,n=i.currentTimeLeft;i.currentTimeLeft=t,0!==t||n===t?i.startPing(t):i.refreshAttemptState()})),R()(D()(i),"updateSavingState",(function(e){var t=i.props,n=t.t,a=t.attemptId;if(e.model&&e.model.id!==a){var o={type:"error_strong",message:n("questionview:save_answer_error"),duration:0,closable:!1};i.saveAnswerErrorToast?i.saveAnswerErrorToast.update():(i.saveAnswerErrorToast=new Ue.default(o),i.saveAnswerErrorToast.show())}i.state.savingCurrentQuestion&&i.setState({savingCurrentQuestion:!1})})),R()(D()(i),"onWindowBlur",(function(){i.isWindowBlurred=!0,i.props.monitorWindowActivity&&(i.blurTimeoutID=i.startActivityTimer(He.a.BLUR))})),R()(D()(i),"onWindowFocus",(function(){i.isWindowBlurred=!1,i.informOnFocus&&i.setState({showStateChangeDialog:!0}),i.informOnFocus=!1,i.props.monitorWindowActivity&&(i.focusTimoutID=i.startActivityTimer(He.a.FOCUS))})),R()(D()(i),"confirmAndEndTest",i.updateDialog.bind(D()(i),"showLogoutConfirmationDialog",!0)),R()(D()(i),"handleForcedLogout",i.logoutFromTest.bind(D()(i),!0)),R()(D()(i),"handleLogoutCancel",i.updateDialog.bind(D()(i),"showLogoutConfirmationDialog",!1)),R()(D()(i),"handleLogoutConfirm",i.logoutFromTest.bind(D()(i),!1)),R()(D()(i),"handleTestStateUpdate",i.refreshTestState.bind(D()(i))),R()(D()(i),"handleSectionCloseConfirm",(function(){i.informOnFocus=!1,i.setState({showSectionCloseDialog:!1,showStateChangeDialog:!1}),i.clearPingInterval(),i.redirectToQuestionListing()})),R()(D()(i),"handleLastChangeCheck",(function(e){i.setState({saveLastChanges:e.target.checked})})),R()(D()(i),"cancelLogger",(function(e){switch(e){case J.j:i.focusTimoutID&&(clearTimeout(i.focusTimoutID),i.focusTimoutID=null);break;case J.m:i.blurTimeoutID&&(clearTimeout(i.blurTimeoutID),i.blurTimeoutID=null)}})),R()(D()(i),"onQuestionListMount",(function(){var e=i.props.currentSection,t=i.prevQuestionRouteId?"question-".concat(i.prevQuestionRouteId):"section-".concat(e),n=document.getElementById(t);ie()(n,J.t)})),R()(D()(i),"setCurrentQuestionData",(function(e){i.currentQuestionData=e})),i.currentTimeLeft=e.currentTimeLeft,i}return O()(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.attemptId,n=e.appUtil;this.activityLogger=Object(He.b)(t),this.handleRouteChange(n),window.addEventListener("blur",this.onWindowBlur),window.addEventListener("focus",this.onWindowFocus),X.c.on(J.i.COUNTDOWN,this.handleCountdown),Object(Me.i)(this.onErrorCallback)}},{key:"componentDidUpdate",value:function(e,t){var n=e.currentSection,i=e.appUtil,a=this.currentTimeLeft,o=this.props,r=o.attemptTimeLeft,s=o.attemptDone,c=o.currentSection,u=o.appUtil,l=t.logoutInProgress,m=t.showSectionCloseDialog,d=this.state,h=d.showSectionCloseDialog,f=d.showTestEndDialog,p=d.logoutInProgress;(!h&&m||c!==n)&&this.scrollToSection(c),this.handleRouteChange(u,i),p||l||h||f||(this.checkWindowActivity(this.props,e),Object(X.h)(s,r)?this.updateDialog("showTestEndDialog",!0):c===n||a||this.updateDialog("showSectionCloseDialog",!0))}},{key:"componentWillUnmount",value:function(){this.clearPingInterval(),clearTimeout(this.blurTimeoutID),clearTimeout(this.focusTimoutID),window.removeEventListener(J.j,this.onWindowBlur),window.removeEventListener(J.m,this.onWindowFocus),X.c.off(J.i.COUNTDOWN,this.handleCountdown),Object(Me.h)(this.onErrorCallback)}},{key:"scrollToSection",value:function(e){this.prevQuestionRouteId=void 0;var t=document.getElementById("section-".concat(e));ie()(t,J.t)}},{key:"handleRouteChange",value:function(e,t){var n,i,a=e.params,o=e.location.pathname;t&&(n=t.params.questionId,i=t.location.pathname);var r=a.questionId;if(r&&r!==n)return this.prevQuestionRouteId=r,void this.activityLogger(He.a.QUESTION_VIEW,{questionId:r});if(o.endsWith("/questions")&&o!==i){var s=this.props.loadTest;this.activityLogger(He.a.QUESTION_LIST_VIEW),t&&s(a.testId)}}},{key:"checkWindowActivity",value:function(e,t){var n=e.attemptDone,i=e.currentSection,a=t.attemptDone,o=t.currentSection;!this.isWindowBlurred||n===a&&i===o||(this.informOnFocus=!0)}},{key:"refreshAttemptState",value:function(){var e=this.props,t=e.loadTest,n=e.appUtil.params.testId;this.fastPingStarted=!1,this.clearPingInterval(),t(n)}},{key:"startPing",value:function(e){if(e<ae.f&&!this.fastPingStarted)this.startFastPing();else if(!this.pingIntervalID){var t=this.props.longPingInterval;this.startPingWith(t)}}},{key:"startPingWith",value:function(e){var t=this;this.pingIntervalID=setInterval((function(){t.saveAttemptState()}),1e3*e)}},{key:"startFastPing",value:function(){this.fastPingStarted=!0,this.clearPingInterval(),this.startPingWith(ae.n)}},{key:"updateDialog",value:function(e,t){this.setState(R()({},e,t))}},{key:"saveAttemptState",value:function(){var e=this.props,t=e.attemptId,n=e.candidateFrontendMessage,i=e.saveAttemptState,a=e.appUtil.params.questionId,o=window.localStorage.jStorage,r=R()({pong:!0,storageSize:o?o.length:0},"clear-candidate-message",!1);if(a&&(r.to_save_code=this.currentQuestionData,r.qid=a,this.setState({savingCurrentQuestion:!0})),this.firstLoad&&n){var s="c-msg-".concat(n);!!ge.a.get(s)&&(r["clear-candidate-message"]=!0,ge.a.set(s,void 0))}return this.firstLoad=!1,i(t,{data:r}).then(this.updateSavingState,this.updateSavingState)}},{key:"redirectToQuestionListing",value:function(){var e=this.props.appUtil,t=e.router,n=e.params;this.updateDialog("showSectionCloseDialog",!1);var i="/".concat(n.testId,"/questions");t.replace(Object(H.c)(i))}},{key:"refresh",value:function(){window.location.reload()}},{key:"logoutFromTest",value:function(e){var t=this.state,n=t.savingCurrentQuestion,i=t.saveLastChanges,a=this.props,o=a.endTest,r=a.appUtil,s=r.params,c=s.questionId,u=s.testId,l=r.router,m=a.darkModeEnabled,d=a.theme,h=a.t,f=a.isSampleTest,p=this.getContextValueMemoized(n,this.activityLogger,c).pageEventCategory,v=z.c.EndTestWithNoDarkModeSupport;m&&(v=d===b.j.LIGHT?z.c.EndTestWithLightMode:z.c.EndTestWithDarkMode),this.setState({logoutInProgress:!0});var g={};g.how=e?"forced":"userclick",c&&(g.currentQuestion=c),i&&(g.submit_last=i),o(u,g).then((function(){Object(G.b)({category:p,label:v}),f&&window.opener?window.close():l.replace(Object(H.c)("/".concat(u,"/feedback")))})).catch((function(){new Ue.default({type:"error_strong",message:h("testdone.logoutError"),duration:10,onClose:function(){return window.location.reload()}}).show()}))}},{key:"refreshTestState",value:function(){var e=this.props,t=e.appUtil.params.testId,n=e.loadTest;this.updateDialog("showStateChangeDialog",!1),n(t)}},{key:"clearPingInterval",value:function(){this.pingIntervalID&&(clearInterval(this.pingIntervalID),this.pingIntervalID=null)}},{key:"startActivityTimer",value:function(e){var t=this;return setTimeout((function(){t.activityLogger(e,void 0,n.LOG_DELAY_TIME)}),n.LOG_DELAY_TIME)}},{key:"getContextValue",value:function(e,t,n){return{endTest:this.confirmAndEndTest,setQuestionData:this.setCurrentQuestionData,onQuestionListMount:this.onQuestionListMount,cancelLogger:this.cancelLogger,pageEventCategory:n?z.b.QuestionDetailsPage:z.b.QuestionListingPage,savingCurrentQuestion:e,activityLogger:t}}},{key:"renderSectionCloseDialog",value:function(){var e=this.props.t;return a.a.createElement(Ke,{open:!0,size:"small",title:e("sections.closedTitle"),cancelText:"",confirmText:e("ok"),timeout:ae.v,onTimeout:this.handleSectionCloseConfirm},a.a.createElement("div",{role:"document"},e("sections.closedMessage")))}},{key:"renderStateChangeDialog",value:function(){var e=this.state,t=e.showTestEndDialog,n=e.showStateChangeDialog,i=e.showSectionCloseDialog;if(t||i||!n)return null;var o=this.props.t;return a.a.createElement(Ke,{open:!0,size:"small",title:o("teststate.title"),cancelText:"",confirmText:o("ok"),timeout:ae.v,onTimeout:this.handleTestStateUpdate},a.a.createElement("div",{role:"document"},o("teststate.message")))}},{key:"renderLogoutConfirmationDialog",value:function(){var e=this.props.t,t=this.state.logoutInProgress;return a.a.createElement(We.a,{title:e("testdone.confirm.title"),open:!0,size:"small",cancelText:e("testdone.confirm.cancelText"),confirmText:e("testdone.confirm.confirmText"),cancelBtnProps:J.c,confirmBtnProps:J.f,onClose:this.handleLogoutCancel,onCancel:this.handleLogoutCancel,onConfirm:this.handleLogoutConfirm,inProgress:t},a.a.createElement("div",{role:"document"},e("testdone.confirm.message")))}},{key:"renderTestEndDialog",value:function(){var e=this.state,t=e.logoutInProgress,n=e.saveLastChanges,i=this.props,o=i.t,r=i.submittable;return a.a.createElement(Ke,{open:!0,size:"small",title:o("testend.title"),cancelText:"",confirmText:o("proceed"),timeout:ae.t,inProgress:t,onTimeout:this.handleForcedLogout},a.a.createElement("div",{role:"document"},o("testend.message"),r&&a.a.createElement("p",null,o("testend.submittableMessage"),a.a.createElement(Fe.a,{label:o("testend.submittableConfirmMessage"),checked:n,onChange:this.handleLastChangeCheck}))))}},{key:"renderBlockUserActionsDialog",value:function(){var e=this.props.t;return a.a.createElement(We.a,{open:!0,size:"small",title:e("unauthorized_login.title"),"data-automation":"unauthorized-login",cancelText:"",confirmText:e("proceed"),onConfirm:this.refresh},a.a.createElement("div",{role:"document"},e("unauthorized_login.content")))}},{key:"render",value:function(){var e=this.state,t=e.showSectionCloseDialog,n=e.showLogoutConfirmationDialog,o=e.showTestEndDialog,r=e.savingCurrentQuestion,s=e.showBlockUserActionsDialog,c=this.props.appUtil.params.questionId;return a.a.createElement(W.b,{value:this.getContextValueMemoized(r,this.activityLogger,c)},a.a.createElement(i.Fragment,null,this.props.children,t&&this.renderSectionCloseDialog(),n&&this.renderLogoutConfirmationDialog(),this.renderStateChangeDialog(),o&&this.renderTestEndDialog(),s&&this.renderBlockUserActionsDialog()))}}]),n}(i.PureComponent);R()(ze,"LOG_DELAY_TIME",2e3);var Ye=Object(c.a)(Object(s.connect)((function(e){var t=e.candidate,n=t.sections,i=n.currentSectionTimeLeft,a=n.currentSection,o=t.attempt,r=e.test,s=r.longPingInterval,c=r.monitorWindowActivity,u=r.questionsTypes,l=r.isSampleTest,m=e.metadata.userAgent,d=e.user.theme;return{darkModeEnabled:Object(p.a)(u,m),attemptId:o.id,attemptDone:o.done,currentSection:a,currentTimeLeft:i,attemptTimeLeft:o.timeLeft,submittable:o.submittable,longPingInterval:s,monitorWindowActivity:c,theme:d,isSampleTest:l}}),(function(e){return{saveAttemptState:function(t,n){return e(Object(v.saveAttemptState)(t,n))},endTest:function(t,n){return e(Object(v.endTest)(t,n))},loadTest:function(t){return e(Object(v.loadTest)(t))}}})),Object(x.c)(["testview","questionview"]),d.a)(ze),Ze=(n("Z2Ku"),n("L9s1"),n("eM6i"),n("bSd7")),Xe=n("UE0f");function Je(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=P()(e);if(t){var a=P()(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return _()(this,n)}}var $e=function(e){C()(n,e);var t=Je(n);function n(e){var i;S()(this,n),i=t.call(this,e),R()(D()(i),"inactiveTimeStart",void 0),R()(D()(i),"inactiveTimeEnd",void 0),R()(D()(i),"cumulativeInactivityTime",void 0),R()(D()(i),"lastResetTime",void 0),R()(D()(i),"inactivityIntervalId",void 0),R()(D()(i),"inactiveTimeKey",void 0),R()(D()(i),"attemptId",void 0),R()(D()(i),"questionId",void 0),R()(D()(i),"memoizedGetValue",void 0),R()(D()(i),"startTrackingInactivity",(function(){var e=Date.now();i.inactiveTimeStart?i.inactiveTimeEnd?(i.cumulativeInactivityTime+=i.getTimeInSeconds(i.inactiveTimeEnd-i.inactiveTimeStart),i.trackIfThresholdExceeded(e),i.inactiveTimeEnd=null,i.inactiveTimeStart=null,i.cleanUp(),i.restartInactivityTimerIfNeeded(e),i.setUpTracking()):i.trackIfThresholdExceeded(e):i.restartInactivityTimerIfNeeded(e)})),R()(D()(i),"startInactivityTimer",(function(){i.inactiveTimeStart=Date.now()})),R()(D()(i),"resetInactivityTimer",(function(){i.lastResetTime=Date.now(),i.inactiveTimeStart&&(i.inactiveTimeEnd=i.lastResetTime)}));var a=i.props,o=a.attemptId,r=a.questionId;return i.attemptId=o,i.questionId=r,i.updateStorageKey(),i.cumulativeInactivityTime=0,i.memoizedGetValue=Object(qe.a)(i.getValue.bind(D()(i))),i}return O()(n,[{key:"componentDidMount",value:function(){this.trackInactivityIfSupported()}},{key:"componentDidUpdate",value:function(e){var t=this.props.questionId,n=e.questionId;if(n!==t){var i=Date.now();n&&this.cleanUpOldQuestion(n,i),t&&this.setUpNewQuestion(t)}}},{key:"componentWillUnmount",value:function(){var e=Date.now(),t=this.props.questionId;t&&this.cleanUpOldQuestion(t,e)}},{key:"cleanUpOldQuestion",value:function(e,t){this.trackRemainingInactivity(e,t),this.cleanUp()}},{key:"setUpNewQuestion",value:function(e){this.questionId=e,this.updateStorageKey(),this.trackInactivityIfSupported()}},{key:"updateStorageKey",value:function(){this.questionId?this.inactiveTimeKey=Object(Ee.h)(this.attemptId,this.questionId):this.inactiveTimeKey=null}},{key:"trackInactivityIfSupported",value:function(){if(this.shouldTrackInactivity()){var e=ge.a.get(this.inactiveTimeKey);this.cumulativeInactivityTime=e||0,this.setUpTracking()}}},{key:"cleanUp",value:function(){this.inactivityIntervalId&&(clearInterval(this.inactivityIntervalId),this.inactivityIntervalId=null)}},{key:"trackRemainingInactivity",value:function(e,t){var n=0;this.inactiveTimeStart&&(n=this.getTimeInSeconds(t-this.inactiveTimeStart));var i=this.cumulativeInactivityTime+n;i>0&&Object(v.trackInactivity)(this.attemptId,e,i),this.inactiveTimeStart=null,this.inactiveTimeEnd=null,this.lastResetTime=null,this.cumulativeInactivityTime=0,ge.a.set(this.inactiveTimeKey,0)}},{key:"shouldTrackInactivity",value:function(){var e=this.props,t=e.enableCandidateInactivity,n=e.questionType;return!(!t||!Ze.i.includes(n))}},{key:"trackIfThresholdExceeded",value:function(e){if(this.inactiveTimeStart&&this.questionId)if(this.inactiveTimeEnd)this.cumulativeInactivityTime>=ae.h&&(Object(v.trackInactivity)(this.attemptId,this.questionId,this.cumulativeInactivityTime),this.cumulativeInactivityTime=0),ge.a.set(this.inactiveTimeKey,this.cumulativeInactivityTime);else{var t=this.getTimeInSeconds(e-this.inactiveTimeStart),n=this.cumulativeInactivityTime+t;ge.a.set(this.inactiveTimeKey,n),n>=ae.h&&(Object(v.trackInactivity)(this.attemptId,this.questionId,n),this.cumulativeInactivityTime=0),(n>=ae.h||t>ae.h)&&(this.restartInactivityTimerIfNeeded(e),ge.a.set(this.inactiveTimeKey,0))}}},{key:"restartInactivityTimerIfNeeded",value:function(e){this.lastResetTime&&(this.getTimeInSeconds(e-this.lastResetTime)>=ae.g&&this.startInactivityTimer())}},{key:"setUpTracking",value:function(){this.inactivityIntervalId=setInterval(this.startTrackingInactivity,1e3*ae.g)}},{key:"getValue",value:function(){return{resetInactivityTimer:this.resetInactivityTimer}}},{key:"getTimeInSeconds",value:function(e){return Math.round(e/1e3)}},{key:"render",value:function(){var e=this.props.children;return a.a.createElement(Xe.b,{value:this.memoizedGetValue()},e)}}]),n}(i.PureComponent);n("biKL");function et(e){var t=e.loadOfflineJS,n=e.children,o=e.imageProctoring,s=e.continuousProctoring,c=e.enableCandidateInactivity,u=e.appUtil.params.questionId,d=e.questionsTypes,v=e.questionsData,T=e.theme,y=e.setUserTheme,I=e.userAgent,S=e.attemptId,w=Object(h.p)(v,u),O=function(e){e.preventDefault(),T===b.j.DARK?y(b.j.LIGHT):y(b.j.DARK)},E=u?v[u].type:void 0;return a.a.useEffect((function(){if(Object(p.a)(d,I))return T===b.j.DARK?(l.a.set("hacker_editor_theme",b.j.DARK),Object(f.n)(f.a.THEME,b.j.DARK),document.documentElement.classList.add("theme-dark")):(l.a.set("hacker_editor_theme",b.j.LIGHT),Object(f.n)(f.a.THEME,b.j.LIGHT),document.documentElement.classList.remove("theme-dark")),function(){document.documentElement&&document.documentElement.classList.remove("theme-dark")}}),[T]),a.a.useEffect((function(){if(Object(p.a)(d,I))return m.a.bind(["mod","shift","d"],O),function(){m.a.unbind(["mod","shift","d"],O)}}),[T]),a.a.createElement(de.b,null,a.a.createElement(me.a,{loadOfflineJS:t},a.a.createElement(he.a,{enable:Object(g.c)(s,o)},a.a.createElement(Ae,{singleImageProctoring:Object(g.d)(o),continuousImageProctoring:Object(g.b)(s)},a.a.createElement(Ye,null,a.a.createElement($e,{enableCandidateInactivity:c,questionType:E,attemptId:S,questionId:u},a.a.createElement(i.Fragment,null,w&&a.a.createElement(te,null),a.a.createElement("div",{className:r()("d-flex flex-row test-container",{"test-container--fullscreen":!w})},a.a.createElement(le,{showTimerTab:!w}),a.a.createElement("div",{className:"d-flex flex-column test-container__content"},n)))))))))}n.d(t,"PureBaseComponent",(function(){return et})),n.d(t,"mapStateToProps",(function(){return tt})),n.d(t,"mapDispatchToProps",(function(){return nt}));var tt=function(e){var t=e.test,n=t.disableOfflineCheck,i=t.questionsTypes,a=t.imageProctoring,o=t.continuousProctoring,r=t.enableCandidateInactivity,s=e.candidate;return{loadOfflineJS:!n,continuousProctoring:o,imageProctoring:a,enableCandidateInactivity:r,questionsTypes:i,questionsData:s.questions.dataMap,attemptId:s.attempt.id,theme:e.user.theme,userAgent:e.metadata.userAgent}},nt=function(e){return{setUserTheme:function(t){return e(Object(v.setUserTheme)(t))}}};t.default=Object(c.a)(Object(s.connect)(tt,nt),d.a)(et)},ZY3w:function(e,t,n){},biKL:function(e,t,n){},g2mX:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return r}));n("pIFo"),n("rGqo"),n("yt8O"),n("Btvt"),n("RW0V"),n("Oyvg"),n("Tze0");var i=n("eOGF"),a=["days","hours","minutes","seconds"];function o(e){return function(t){for(var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o="",r=!1,s=0;s<a.length;s++){var c=a[s],u=t[c];if(void 0!==u&&(r||u)){var l=u>1?e[c].plural:e[c].normal;if(o+="".concat(Object(i.e)(u)," ").concat(l," "),r=!0,n)break}}return o.trim()}}function r(e){var t=Math.floor(e/60),n=Math.floor(t/60);return{days:Math.floor(n/24),hours:n%24,minutes:t%60,seconds:e%60}}},kTy2:function(e,t,n){},ovno:function(e,t,n){"use strict";var i=n("pVnL"),a=n.n(i),o=n("QILm"),r=n.n(o),s=n("cDcd"),c=n("TSYQ"),u=n.n(c),l=n("O766"),m=n("OEX3");n("ZY3w");function d(e){var t=e.confirmText,n=e.cancelText,i=e.onConfirm,o=e.onCancel,c=e.inProgress,d=e.children,h=e.cancelBtnProps,f=e.confirmBtnProps,p=r()(e,["confirmText","cancelText","onConfirm","onCancel","inProgress","children","cancelBtnProps","confirmBtnProps"]),v="theme-m"===p.theme?"ui-btn-secondary":"ui-btn-default";return s.createElement(l.a,a()({modalClass:"confirm-dialog"},p),d,s.createElement("div",{className:"confirm-button-group"},n&&s.createElement(m.g,a()({className:u()("cancel-button",v),disabled:!!c,loading:"cancel"===c,onClick:o},h),n),t&&s.createElement(m.g,a()({className:"ui-btn-primary confirm-button",disabled:!!c,loading:!0===c||"confirm"===c},f,{onClick:i}),t)))}d.defaultProps={theme:"theme-m",confirmText:"Yes",cancelText:"No",cancelBtnProps:{},confirmBtnProps:{}},t.a=d},tHjC:function(e,t,n){},tX8B:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return l}));n("HAE/"),n("WLL4"),n("jm62"),n("8+KV"),n("0l/t"),n("ioFf"),n("rGqo"),n("yt8O"),n("Btvt"),n("RW0V"),n("pIFo"),n("Tze0");var i=n("lSNA"),a=n.n(i),o=n("g2mX");function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=s({},e);return n&&0!==e.seconds||delete i.seconds,i.days&&delete i.minutes,0===i.hours&&delete i.hours,t(i,!1)}function u(e){var t=Object(o.b)({days:{normal:e("common:time.day"),plural:e("common:time.day_plural")},hours:{normal:e("common:time.hour"),plural:e("common:time.hour_plural")},minutes:{normal:e("common:time.minute"),plural:e("common:time.minute_plural")},seconds:{normal:e("common:time.second"),plural:e("common:time.second_plural")}});return function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return n?c(e,t):t(e,n)}}function l(e){var t=Object(o.b)({days:{normal:e("common:time.day_short"),plural:e("common:time.day_short")},hours:{normal:e("common:time.hour_short"),plural:e("common:time.hour_short")},minutes:{normal:e("common:time.minute_short"),plural:e("common:time.minute_short")},seconds:{normal:e("common:time.second_short"),plural:e("common:time.second_short")}});return function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=c(e,t,n);return i.replace(/0([0-9])/gm,"$1").replace(/([0-9])\s/gm,"$1").trim()}}}}]);
//# sourceMappingURL=https://hrcdn.net/candidate-site/assets/sourcemaps/testbase-13c32f92.js.map