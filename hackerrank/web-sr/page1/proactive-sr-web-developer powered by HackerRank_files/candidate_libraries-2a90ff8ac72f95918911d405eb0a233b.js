/*!
 * jQuery UI Widget 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/jQuery.widget/
 */
function hrClipboard(clipboard_data){"use strict";function display_popup(){var ele=$button;return ele.popover("show"),clearTimeout(timer),timer=setTimeout(function(){return ele.popover("hide")},2e3)}var timer,button=clipboard_data.copy_button,$button=$(button),target=clipboard_data.target,container=clipboard_data.container,success_message=clipboard_data.success_message,onSuccess=clipboard_data.onSuccess,error_message=clipboard_data.error_message,getTarget=clipboard_data.getTarget,getText=clipboard_data.getText,options={};getText?options={text:getText}:(getTarget||(getTarget=function(){return target}),options={target:getTarget});var client=new Clipboard(button,options);return $button.popover({trigger:"none",container:container,animation:!1,placement:"bottom"}),client.on("success",function(){return $button.attr("data-content",success_message).data("bs.popover").setContent(),onSuccess&&onSuccess(),display_popup()}),client.on("error",function(){return $button.attr("data-content",error_message).data("bs.popover").setContent(),display_popup()})}function require__(path,parent,orig){var resolved=require__.resolve(path);if(null==resolved){orig=orig||path,parent=parent||"root";var err=new Error('Failed to require__ "'+orig+'" from "'+parent+'"');throw err.path=orig,err.parent=parent,err.require__=!0,err}var module=require__.modules[resolved];if(!module._resolving&&!module.exports){var mod={exports:{}};mod.client=mod.component=!0,module._resolving=!0,module.call(this,mod.exports,require__.relative(resolved),mod),delete module._resolving,module.exports=mod.exports}return module.exports}
/*! onloadCSS: adds onload support for asynchronous stylesheets loaded with loadCSS. [c]2016 @zachleat, Filament Group, Inc. Licensed MIT */
function onloadCSS(ss,callback){function newcb(){!called&&callback&&(called=!0,callback.call(ss))}var called;ss.addEventListener&&ss.addEventListener("load",newcb),ss.attachEvent&&ss.attachEvent("onload",newcb),"isApplicationInstalled"in navigator&&"onloadcssdefined"in ss&&ss.onloadcssdefined(newcb)}!function(factory){"function"==typeof define&&define.amd?define(["jquery"],factory):factory(jQuery)}(function($){var orig,widget_uuid=0,widget_slice=Array.prototype.slice;return $.cleanData=(orig=$.cleanData,function(elems){var events,elem,i;for(i=0;null!=(elem=elems[i]);i++)try{(events=$._data(elem,"events"))&&events.remove&&$(elem).triggerHandler("remove")}catch(e){}orig(elems)}),$.widget=function(name,base,prototype){var fullName,existingConstructor,constructor,basePrototype,proxiedPrototype={},namespace=name.split(".")[0];return name=name.split(".")[1],fullName=namespace+"-"+name,prototype||(prototype=base,base=$.Widget),$.expr[":"][fullName.toLowerCase()]=function(elem){return!!$.data(elem,fullName)},$[namespace]=$[namespace]||{},existingConstructor=$[namespace][name],constructor=$[namespace][name]=function(options,element){if(!this._createWidget)return new constructor(options,element);arguments.length&&this._createWidget(options,element)},$.extend(constructor,existingConstructor,{version:prototype.version,_proto:$.extend({},prototype),_childConstructors:[]}),(basePrototype=new base).options=$.widget.extend({},basePrototype.options),$.each(prototype,function(prop,value){var _super,_superApply;$.isFunction(value)?proxiedPrototype[prop]=(_super=function(){return base.prototype[prop].apply(this,arguments)},_superApply=function(args){return base.prototype[prop].apply(this,args)},function(){var returnValue,__super=this._super,__superApply=this._superApply;return this._super=_super,this._superApply=_superApply,returnValue=value.apply(this,arguments),this._super=__super,this._superApply=__superApply,returnValue}):proxiedPrototype[prop]=value}),constructor.prototype=$.widget.extend(basePrototype,{widgetEventPrefix:existingConstructor&&basePrototype.widgetEventPrefix||name},proxiedPrototype,{constructor:constructor,namespace:namespace,widgetName:name,widgetFullName:fullName}),existingConstructor?($.each(existingConstructor._childConstructors,function(i,child){var childPrototype=child.prototype;$.widget(childPrototype.namespace+"."+childPrototype.widgetName,constructor,child._proto)}),delete existingConstructor._childConstructors):base._childConstructors.push(constructor),$.widget.bridge(name,constructor),constructor},$.widget.extend=function(target){for(var key,value,input=widget_slice.call(arguments,1),inputIndex=0,inputLength=input.length;inputIndex<inputLength;inputIndex++)for(key in input[inputIndex])value=input[inputIndex][key],input[inputIndex].hasOwnProperty(key)&&value!==undefined&&($.isPlainObject(value)?target[key]=$.isPlainObject(target[key])?$.widget.extend({},target[key],value):$.widget.extend({},value):target[key]=value);return target},$.widget.bridge=function(name,object){var fullName=object.prototype.widgetFullName||name;$.fn[name]=function(options){var isMethodCall="string"==typeof options,args=widget_slice.call(arguments,1),returnValue=this;return isMethodCall?this.each(function(){var methodValue,instance=$.data(this,fullName);return"instance"===options?(returnValue=instance,!1):instance?$.isFunction(instance[options])&&"_"!==options.charAt(0)?(methodValue=instance[options].apply(instance,args))!==instance&&methodValue!==undefined?(returnValue=methodValue&&methodValue.jquery?returnValue.pushStack(methodValue.get()):methodValue,!1):void 0:$.error("no such method '"+options+"' for "+name+" widget instance"):$.error("cannot call methods on "+name+" prior to initialization; attempted to call method '"+options+"'")}):(args.length&&(options=$.widget.extend.apply(null,[options].concat(args))),this.each(function(){var instance=$.data(this,fullName);instance?(instance.option(options||{}),instance._init&&instance._init()):$.data(this,fullName,new object(options,this))})),returnValue}},$.Widget=function(){},$.Widget._childConstructors=[],$.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(options,element){element=$(element||this.defaultElement||this)[0],this.element=$(element),this.uuid=widget_uuid++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=$(),this.hoverable=$(),this.focusable=$(),element!==this&&($.data(element,this.widgetFullName,this),this._on(!0,this.element,{remove:function(event){event.target===element&&this.destroy()}}),this.document=$(element.style?element.ownerDocument:element.document||element),this.window=$(this.document[0].defaultView||this.document[0].parentWindow)),this.options=$.widget.extend({},this.options,this._getCreateOptions(),options),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:$.noop,_getCreateEventData:$.noop,_create:$.noop,_init:$.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData($.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:$.noop,widget:function(){return this.element},option:function(key,value){var parts,curOption,i,options=key;if(0===arguments.length)return $.widget.extend({},this.options);if("string"==typeof key)if(options={},key=(parts=key.split(".")).shift(),parts.length){for(curOption=options[key]=$.widget.extend({},this.options[key]),i=0;i<parts.length-1;i++)curOption[parts[i]]=curOption[parts[i]]||{},curOption=curOption[parts[i]];if(key=parts.pop(),1===arguments.length)return curOption[key]===undefined?null:curOption[key];curOption[key]=value}else{if(1===arguments.length)return this.options[key]===undefined?null:this.options[key];options[key]=value}return this._setOptions(options),this},_setOptions:function(options){var key;for(key in options)this._setOption(key,options[key]);return this},_setOption:function(key,value){return this.options[key]=value,"disabled"===key&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!value),value&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(suppressDisabledCheck,element,handlers){var delegateElement,instance=this;"boolean"!=typeof suppressDisabledCheck&&(handlers=element,element=suppressDisabledCheck,suppressDisabledCheck=!1),handlers?(element=delegateElement=$(element),this.bindings=this.bindings.add(element)):(handlers=element,element=this.element,delegateElement=this.widget()),$.each(handlers,function(event,handler){function handlerProxy(){if(suppressDisabledCheck||!0!==instance.options.disabled&&!$(this).hasClass("ui-state-disabled"))return("string"==typeof handler?instance[handler]:handler).apply(instance,arguments)}"string"!=typeof handler&&(handlerProxy.guid=handler.guid=handler.guid||handlerProxy.guid||$.guid++);var match=event.match(/^([\w:-]*)\s*(.*)$/),eventName=match[1]+instance.eventNamespace,selector=match[2];selector?delegateElement.delegate(selector,eventName,handlerProxy):element.bind(eventName,handlerProxy)})},_off:function(element,eventName){eventName=(eventName||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,element.unbind(eventName).undelegate(eventName),this.bindings=$(this.bindings.not(element).get()),this.focusable=$(this.focusable.not(element).get()),this.hoverable=$(this.hoverable.not(element).get())},_delay:function(handler,delay){function handlerProxy(){return("string"==typeof handler?instance[handler]:handler).apply(instance,arguments)}var instance=this;return setTimeout(handlerProxy,delay||0)},_hoverable:function(element){this.hoverable=this.hoverable.add(element),this._on(element,{mouseenter:function(event){$(event.currentTarget).addClass("ui-state-hover")},mouseleave:function(event){$(event.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(element){this.focusable=this.focusable.add(element),this._on(element,{focusin:function(event){$(event.currentTarget).addClass("ui-state-focus")},focusout:function(event){$(event.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(type,event,data){var prop,orig,callback=this.options[type];if(data=data||{},(event=$.Event(event)).type=(type===this.widgetEventPrefix?type:this.widgetEventPrefix+type).toLowerCase(),event.target=this.element[0],orig=event.originalEvent)for(prop in orig)prop in event||(event[prop]=orig[prop]);return this.element.trigger(event,data),!($.isFunction(callback)&&!1===callback.apply(this.element[0],[event].concat(data))||event.isDefaultPrevented())}},$.each({show:"fadeIn",hide:"fadeOut"},function(method,defaultEffect){$.Widget.prototype["_"+method]=function(element,options,callback){"string"==typeof options&&(options={effect:options});var hasOptions,effectName=options?!0===options||"number"==typeof options?defaultEffect:options.effect||defaultEffect:method;"number"==typeof(options=options||{})&&(options={duration:options}),hasOptions=!$.isEmptyObject(options),options.complete=callback,options.delay&&element.delay(options.delay),hasOptions&&$.effects&&$.effects.effect[effectName]?element[method](options):effectName!==method&&element[effectName]?element[effectName](options.duration,options.easing,callback):element.queue(function(next){$(this)[method](),callback&&callback.call(element[0]),next()})}}),$.widget}),
/*!
 * jQuery UI Progressbar 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/progressbar/
 */
function(factory){"function"==typeof define&&define.amd?define(["jquery","./core","./widget"],factory):factory(jQuery)}(function($){return $.widget("ui.progressbar",{version:"1.11.4",options:{max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min}),this.valueDiv=$("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(newValue){if(newValue===undefined)return this.options.value;this.options.value=this._constrainedValue(newValue),this._refreshValue()},_constrainedValue:function(newValue){return newValue===undefined&&(newValue=this.options.value),this.indeterminate=!1===newValue,"number"!=typeof newValue&&(newValue=0),!this.indeterminate&&Math.min(this.options.max,Math.max(this.min,newValue))},_setOptions:function(options){var value=options.value;delete options.value,this._super(options),this.options.value=this._constrainedValue(value),this._refreshValue()},_setOption:function(key,value){"max"===key&&(value=Math.max(this.min,value)),"disabled"===key&&this.element.toggleClass("ui-state-disabled",!!value).attr("aria-disabled",value),this._super(key,value)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var value=this.options.value,percentage=this._percentage();this.valueDiv.toggle(this.indeterminate||value>this.min).toggleClass("ui-corner-right",value===this.options.max).width(percentage.toFixed(0)+"%"),this.element.toggleClass("ui-progressbar-indeterminate",this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=$("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":value}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==value&&(this.oldValue=value,this._trigger("change")),value===this.options.max&&this._trigger("complete")}})}),function($){"use strict";$(function(){var transitionEnd;$.support.transition=(transitionEnd=function(){var name,el=document.createElement("bootstrap"),transEndEventNames={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(name in transEndEventNames)if(el.style[name]!==undefined)return transEndEventNames[name]}())&&{end:transitionEnd}})}(window.jQuery),function($){"use strict";var Modal=function(element,options){this.options=options,this.$element=$(element).delegate('[data-dismiss="modal"]',"click.dismiss.modal",$.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};Modal.prototype={constructor:Modal,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var that=this,e=$.Event("show");this.$element.trigger(e),this.isShown||e.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.backdrop(function(){var transition=$.support.transition&&that.$element.hasClass("fade");that.$element.parent().length||that.$element.appendTo(document.body),that.$element.show(),transition&&that.$element[0].offsetWidth,that.$element.addClass("in").attr("aria-hidden",!1),that.enforceFocus(),transition?that.$element.one($.support.transition.end,function(){that.$element.focus().trigger("shown")}):that.$element.focus().trigger("shown")}))},hide:function(e){e&&e.preventDefault();e=$.Event("hide"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),$(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),$.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal())},enforceFocus:function(){var that=this;$(document).on("focusin.modal",function(e){that.$element[0]===e.target||that.$element.has(e.target).length||that.$element.focus()})},escape:function(){var that=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",function(e){27==e.which&&that.hide()}):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var that=this,timeout=setTimeout(function(){that.$element.off($.support.transition.end),that.hideModal()},500);this.$element.one($.support.transition.end,function(){clearTimeout(timeout),that.hideModal()})},hideModal:function(){var that=this;this.$element.hide(),this.backdrop(function(){that.removeBackdrop(),that.$element.trigger("hidden")})},removeBackdrop:function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},backdrop:function(callback){var animate=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var doAnimate=$.support.transition&&animate;if(this.$backdrop=$('<div class="modal-backdrop '+animate+'" />').appendTo(document.body),this.$backdrop.click("static"==this.options.backdrop?$.proxy(this.$element[0].focus,this.$element[0]):$.proxy(this.hide,this)),doAnimate&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!callback)return;doAnimate?this.$backdrop.one($.support.transition.end,callback):callback()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),$.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one($.support.transition.end,callback):callback()):callback&&callback()}};var old=$.fn.modal;$.fn.modal=function(option){return this.each(function(){var $this=$(this),data=$this.data("modal"),options=$.extend({},$.fn.modal.defaults,$this.data(),"object"==typeof option&&option);data||$this.data("modal",data=new Modal(this,options)),"string"==typeof option?data[option]():options.show&&data.show()})},$.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},$.fn.modal.Constructor=Modal,$.fn.modal.noConflict=function(){return $.fn.modal=old,this},$(document).on("click.modal.data-api",'[data-toggle="modal"]',function(e){var $this=$(this),href=$this.attr("href"),$target=$($this.attr("data-target")||href&&href.replace(/.*(?=#[^\s]+$)/,"")),option=$target.data("modal")?"toggle":$.extend({remote:!/#/.test(href)&&href},$target.data(),$this.data());e.preventDefault(),$target.modal(option).one("hide",function(){$this.focus()})})}(window.jQuery),function($){"use strict";var Tooltip=function(element,options){this.init("tooltip",element,options)};Tooltip.prototype={constructor:Tooltip,init:function(type,element,options){var eventIn,eventOut,triggers,trigger,i;for(this.type=type,this.$element=$(element),this.options=this.getOptions(options),this.enabled=!0,i=(triggers=this.options.trigger.split(" ")).length;i--;)"click"==(trigger=triggers[i])?this.$element.on("click."+this.type,this.options.selector,$.proxy(this.toggle,this)):"manual"!=trigger&&(eventIn="hover"==trigger?"mouseenter":"focus",eventOut="hover"==trigger?"mouseleave":"blur",this.$element.on(eventIn+"."+this.type,this.options.selector,$.proxy(this.enter,this)),this.$element.on(eventOut+"."+this.type,this.options.selector,$.proxy(this.leave,this)));this.options.selector?this._options=$.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(options){return(options=$.extend({},$.fn[this.type].defaults,this.$element.data(),options)).delay&&"number"==typeof options.delay&&(options.delay={show:options.delay,hide:options.delay}),options},enter:function(e){var self,defaults=$.fn[this.type].defaults,options={};if(this._options&&$.each(this._options,function(key,value){defaults[key]!=value&&(options[key]=value)},this),!(self=$(e.currentTarget)[this.type](options).data(this.type)).options.delay||!self.options.delay.show)return self.show();clearTimeout(this.timeout),self.hoverState="in",this.timeout=setTimeout(function(){"in"==self.hoverState&&self.show()},self.options.delay.show)},leave:function(e){var self=$(e.currentTarget)[this.type](this._options).data(this.type);if(this.timeout&&clearTimeout(this.timeout),!self.options.delay||!self.options.delay.hide)return self.hide();self.hoverState="out",this.timeout=setTimeout(function(){"out"==self.hoverState&&self.hide()},self.options.delay.hide)},show:function(){var $tip,pos,actualWidth,actualHeight,placement,tp,e=$.Event("show");if(this.hasContent()&&this.enabled){if(this.$element.trigger(e),e.isDefaultPrevented())return;switch($tip=this.tip(),this.setContent(),this.options.animation&&$tip.addClass("fade"),placement="function"==typeof this.options.placement?this.options.placement.call(this,$tip[0],this.$element[0]):this.options.placement,$tip.detach().css({top:0,left:0,display:"block"}),this.options.container?$tip.appendTo(this.options.container):$tip.insertAfter(this.$element),pos=this.getPosition(),actualWidth=$tip[0].offsetWidth,actualHeight=$tip[0].offsetHeight,placement){case"bottom":tp={top:pos.top+pos.height,left:pos.left+pos.width/2-actualWidth/2};break;case"top":tp={top:pos.top-actualHeight,left:pos.left+pos.width/2-actualWidth/2};break;case"left":tp={top:pos.top+pos.height/2-actualHeight/2,left:pos.left-actualWidth};break;case"right":tp={top:pos.top+pos.height/2-actualHeight/2,left:pos.left+pos.width}}this.applyPlacement(tp,placement),this.$element.trigger("shown")}},applyPlacement:function(offset,placement){var actualWidth,actualHeight,delta,replace,$tip=this.tip(),width=$tip[0].offsetWidth,height=$tip[0].offsetHeight;$tip.offset(offset).addClass(placement).addClass("in"),actualWidth=$tip[0].offsetWidth,actualHeight=$tip[0].offsetHeight,"top"==placement&&actualHeight!=height&&(offset.top=offset.top+height-actualHeight,replace=!0),"bottom"==placement||"top"==placement?(delta=0,offset.left<0&&(delta=-2*offset.left,offset.left=0,$tip.offset(offset),actualWidth=$tip[0].offsetWidth,actualHeight=$tip[0].offsetHeight),this.replaceArrow(delta-width+actualWidth,actualWidth,"left")):this.replaceArrow(actualHeight-height,actualHeight,"top"),replace&&$tip.offset(offset)},replaceArrow:function(delta,dimension,position){this.arrow().css(position,delta?50*(1-delta/dimension)+"%":"")},setContent:function(){var $tip=this.tip(),title=this.getTitle();$tip.find(".tooltip-inner")[this.options.html?"html":"text"](title),$tip.removeClass("fade in top bottom left right")},hide:function(){function removeWithAnimation(){var timeout=setTimeout(function(){$tip.off($.support.transition.end).detach()},500);$tip.one($.support.transition.end,function(){clearTimeout(timeout),$tip.detach()})}var $tip=this.tip(),e=$.Event("hide");if(this.$element.trigger(e),!e.isDefaultPrevented())return $tip.removeClass("in"),$.support.transition&&this.$tip.hasClass("fade")?removeWithAnimation():$tip.detach(),this.$element.trigger("hidden"),this},fixTitle:function(){var $e=this.$element;($e.attr("title")||"string"!=typeof $e.attr("data-original-title"))&&$e.attr("data-original-title",$e.attr("title")||"").attr("title","")},hasContent:function(){return this.getTitle()},getPosition:function(){var el=this.$element[0];return $.extend({},"function"==typeof el.getBoundingClientRect?el.getBoundingClientRect():{width:el.offsetWidth,height:el.offsetHeight},this.$element.offset())},getTitle:function(){var $e=this.$element,o=this.options;return $e.attr("data-original-title")||("function"==typeof o.title?o.title.call($e[0]):o.title)},tip:function(){return this.$tip=this.$tip||$(this.options.template)},arrow:function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(e){var self=e?$(e.currentTarget)[this.type](this._options).data(this.type):this;self.tip().hasClass("in")?self.hide():self.show()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var old=$.fn.tooltip;$.fn.tooltip=function(option){return this.each(function(){var $this=$(this),data=$this.data("tooltip"),options="object"==typeof option&&option;data||$this.data("tooltip",data=new Tooltip(this,options)),"string"==typeof option&&data[option]()})},$.fn.tooltip.Constructor=Tooltip,$.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},$.fn.tooltip.noConflict=function(){return $.fn.tooltip=old,this}}(window.jQuery),function($){"use strict";function clearMenus(){$(".dropdown-backdrop").remove(),$(toggle).each(function(){getParent($(this)).removeClass("open")})}function getParent($this){var $parent,selector=$this.attr("data-target");return selector||(selector=(selector=$this.attr("href"))&&/#/.test(selector)&&selector.replace(/.*(?=#[^\s]*$)/,"")),($parent=selector&&$(selector))&&$parent.length||($parent=$this.parent()),$parent}var toggle="[data-toggle=dropdown]",Dropdown=function(element){var $el=$(element).on("click.dropdown.data-api",this.toggle);$("html").on("click.dropdown.data-api",function(){$el.parent().removeClass("open")})};Dropdown.prototype={constructor:Dropdown,toggle:function(){var $parent,isActive,$this=$(this);if(!$this.is(".disabled, :disabled"))return isActive=($parent=getParent($this)).hasClass("open"),clearMenus(),isActive||("ontouchstart"in document.documentElement&&$('<div class="dropdown-backdrop"/>').insertBefore($(this)).on("click",clearMenus),$parent.toggleClass("open")),$this.focus(),!1},keydown:function(e){var $this,$items,$parent,isActive,index;if(/(38|40|27)/.test(e.keyCode)&&($this=$(this),e.preventDefault(),e.stopPropagation(),!$this.is(".disabled, :disabled"))){if(!(isActive=($parent=getParent($this)).hasClass("open"))||isActive&&27==e.keyCode)return 27==e.which&&$parent.find(toggle).focus(),$this.click();($items=$("[role=menu] li:not(.divider):visible a",$parent)).length&&(index=$items.index($items.filter(":focus")),38==e.keyCode&&index>0&&index--,40==e.keyCode&&index<$items.length-1&&index++,~index||(index=0),$items.eq(index).focus())}}};var old=$.fn.dropdown;$.fn.dropdown=function(option){return this.each(function(){var $this=$(this),data=$this.data("dropdown");data||$this.data("dropdown",data=new Dropdown(this)),"string"==typeof option&&data[option].call($this)})},$.fn.dropdown.Constructor=Dropdown,$.fn.dropdown.noConflict=function(){return $.fn.dropdown=old,this},$(document).on("click.dropdown.data-api",clearMenus).on("click.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.dropdown.data-api",toggle,Dropdown.prototype.toggle).on("keydown.dropdown.data-api",toggle+", [role=menu]",Dropdown.prototype.keydown)}(window.jQuery),function($){"use strict";var dismiss='[data-dismiss="alert"]',Alert=function(el){$(el).on("click",dismiss,this.close)};Alert.prototype.close=function(e){function removeElement(){$parent.trigger("closed").remove()}var $parent,$this=$(this),selector=$this.attr("data-target");selector||(selector=(selector=$this.attr("href"))&&selector.replace(/.*(?=#[^\s]*$)/,"")),$parent=$(selector),e&&e.preventDefault(),$parent.length||($parent=$this.hasClass("alert")?$this:$this.parent()),$parent.trigger(e=$.Event("close")),e.isDefaultPrevented()||($parent.removeClass("in"),$.support.transition&&$parent.hasClass("fade")?$parent.on($.support.transition.end,removeElement):removeElement())};var old=$.fn.alert;$.fn.alert=function(option){return this.each(function(){var $this=$(this),data=$this.data("alert");data||$this.data("alert",data=new Alert(this)),"string"==typeof option&&data[option].call($this)})},$.fn.alert.Constructor=Alert,$.fn.alert.noConflict=function(){return $.fn.alert=old,this},$(document).on("click.alert.data-api",dismiss,Alert.prototype.close)}(window.jQuery),function($){"use strict";var Button=function(element,options){this.$element=$(element),this.options=$.extend({},$.fn.button.defaults,options)};Button.prototype.setState=function(state){var d="disabled",$el=this.$element,data=$el.data(),val=$el.is("input")?"val":"html";state+="Text",data.resetText||$el.data("resetText",$el[val]()),$el[val](data[state]||this.options[state]),setTimeout(function(){"loadingText"==state?$el.addClass(d).attr(d,d):$el.removeClass(d).removeAttr(d)},0)},Button.prototype.toggle=function(){var $parent=this.$element.closest('[data-toggle="buttons-radio"]');$parent&&$parent.find(".active").removeClass("active"),this.$element.toggleClass("active")};var old=$.fn.button;$.fn.button=function(option){return this.each(function(){var $this=$(this),data=$this.data("button"),options="object"==typeof option&&option;data||$this.data("button",data=new Button(this,options)),"toggle"==option?data.toggle():option&&data.setState(option)})},$.fn.button.defaults={loadingText:"loading..."},$.fn.button.Constructor=Button,$.fn.button.noConflict=function(){return $.fn.button=old,this},$(document).on("click.button.data-api","[data-toggle^=button]",function(e){var $btn=$(e.target);$btn.hasClass("btn")||($btn=$btn.closest(".btn")),$btn.button("toggle")})}(window.jQuery),function(){var root=this,previousUnderscore=root._,breaker={},ArrayProto=Array.prototype,ObjProto=Object.prototype,FuncProto=Function.prototype,push=ArrayProto.push,slice=ArrayProto.slice,concat=ArrayProto.concat,toString=ObjProto.toString,hasOwnProperty=ObjProto.hasOwnProperty,nativeForEach=ArrayProto.forEach,nativeMap=ArrayProto.map,nativeReduce=ArrayProto.reduce,nativeReduceRight=ArrayProto.reduceRight,nativeFilter=ArrayProto.filter,nativeEvery=ArrayProto.every,nativeSome=ArrayProto.some,nativeIndexOf=ArrayProto.indexOf,nativeLastIndexOf=ArrayProto.lastIndexOf,nativeIsArray=Array.isArray,nativeKeys=Object.keys,nativeBind=FuncProto.bind,_=function(obj){return obj instanceof _?obj:this instanceof _?void(this._wrapped=obj):new _(obj)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=_),exports._=_):root._=_,_.VERSION="1.4.3";var each=_.each=_.forEach=function(obj,iterator,context){if(null!=obj)if(nativeForEach&&obj.forEach===nativeForEach)obj.forEach(iterator,context);else if(obj.length===+obj.length){for(var i=0,l=obj.length;i<l;i++)if(iterator.call(context,obj[i],i,obj)===breaker)return}else for(var key in obj)if(_.has(obj,key)&&iterator.call(context,obj[key],key,obj)===breaker)return};_.map=_.collect=function(obj,iterator,context){var results=[];return null==obj?results:nativeMap&&obj.map===nativeMap?obj.map(iterator,context):(each(obj,function(value,index,list){results[results.length]=iterator.call(context,value,index,list)}),results)};var reduceError="Reduce of empty array with no initial value";_.reduce=_.foldl=_.inject=function(obj,iterator,memo,context){var initial=arguments.length>2;if(null==obj&&(obj=[]),nativeReduce&&obj.reduce===nativeReduce)return context&&(iterator=_.bind(iterator,context)),initial?obj.reduce(iterator,memo):obj.reduce(iterator);if(each(obj,function(value,index,list){initial?memo=iterator.call(context,memo,value,index,list):(memo=value,initial=!0)}),!initial)throw new TypeError(reduceError);return memo},_.reduceRight=_.foldr=function(obj,iterator,memo,context){var initial=arguments.length>2;if(null==obj&&(obj=[]),nativeReduceRight&&obj.reduceRight===nativeReduceRight)return context&&(iterator=_.bind(iterator,context)),initial?obj.reduceRight(iterator,memo):obj.reduceRight(iterator);var length=obj.length;if(length!==+length){var keys=_.keys(obj);length=keys.length}if(each(obj,function(value,index,list){index=keys?keys[--length]:--length,initial?memo=iterator.call(context,memo,obj[index],index,list):(memo=obj[index],initial=!0)}),!initial)throw new TypeError(reduceError);return memo},_.find=_.detect=function(obj,iterator,context){var result;return any(obj,function(value,index,list){if(iterator.call(context,value,index,list))return result=value,!0}),result},_.filter=_.select=function(obj,iterator,context){var results=[];return null==obj?results:nativeFilter&&obj.filter===nativeFilter?obj.filter(iterator,context):(each(obj,function(value,index,list){iterator.call(context,value,index,list)&&(results[results.length]=value)}),results)},_.reject=function(obj,iterator,context){return _.filter(obj,function(value,index,list){return!iterator.call(context,value,index,list)},context)},_.every=_.all=function(obj,iterator,context){iterator||(iterator=_.identity);var result=!0;return null==obj?result:nativeEvery&&obj.every===nativeEvery?obj.every(iterator,context):(each(obj,function(value,index,list){if(!(result=result&&iterator.call(context,value,index,list)))return breaker}),!!result)};var any=_.some=_.any=function(obj,iterator,context){iterator||(iterator=_.identity);var result=!1;return null==obj?result:nativeSome&&obj.some===nativeSome?obj.some(iterator,context):(each(obj,function(value,index,list){if(result||(result=iterator.call(context,value,index,list)))return breaker}),!!result)};_.contains=_.include=function(obj,target){return null!=obj&&(nativeIndexOf&&obj.indexOf===nativeIndexOf?-1!=obj.indexOf(target):any(obj,function(value){return value===target}))},_.invoke=function(obj,method){var args=slice.call(arguments,2);return _.map(obj,function(value){return(_.isFunction(method)?method:value[method]).apply(value,args)})},_.pluck=function(obj,key){return _.map(obj,function(value){return value[key]})},_.where=function(obj,attrs){return _.isEmpty(attrs)?[]:_.filter(obj,function(value){for(var key in attrs)if(attrs[key]!==value[key])return!1;return!0})},_.max=function(obj,iterator,context){if(!iterator&&_.isArray(obj)&&obj[0]===+obj[0]&&obj.length<65535)return Math.max.apply(Math,obj);if(!iterator&&_.isEmpty(obj))return-Infinity;var result={computed:-Infinity,value:-Infinity};return each(obj,function(value,index,list){var computed=iterator?iterator.call(context,value,index,list):value;computed>=result.computed&&(result={value:value,computed:computed})}),result.value},_.min=function(obj,iterator,context){if(!iterator&&_.isArray(obj)&&obj[0]===+obj[0]&&obj.length<65535)return Math.min.apply(Math,obj);if(!iterator&&_.isEmpty(obj))return Infinity;var result={computed:Infinity,value:Infinity};return each(obj,function(value,index,list){var computed=iterator?iterator.call(context,value,index,list):value;computed<result.computed&&(result={value:value,computed:computed})}),result.value},_.shuffle=function(obj){var rand,index=0,shuffled=[];return each(obj,function(value){rand=_.random(index++),shuffled[index-1]=shuffled[rand],shuffled[rand]=value}),shuffled};var lookupIterator=function(value){return _.isFunction(value)?value:function(obj){return obj[value]}};_.sortBy=function(obj,value,context){var iterator=lookupIterator(value);return _.pluck(_.map(obj,function(value,index,list){return{value:value,index:index,criteria:iterator.call(context,value,index,list)}}).sort(function(left,right){var a=left.criteria,b=right.criteria;if(a!==b){if(a>b||void 0===a)return 1;if(a<b||void 0===b)return-1}return left.index<right.index?-1:1}),"value")};var group=function(obj,value,context,behavior){var result={},iterator=lookupIterator(value||_.identity);return each(obj,function(value,index){var key=iterator.call(context,value,index,obj);behavior(result,key,value)}),result};_.groupBy=function(obj,value,context){return group(obj,value,context,function(result,key,value){(_.has(result,key)?result[key]:result[key]=[]).push(value)})},_.countBy=function(obj,value,context){return group(obj,value,context,function(result,key){_.has(result,key)||(result[key]=0),result[key]++})},_.sortedIndex=function(array,obj,iterator,context){for(var value=(iterator=null==iterator?_.identity:lookupIterator(iterator)).call(context,obj),low=0,high=array.length;low<high;){var mid=low+high>>>1;iterator.call(context,array[mid])<value?low=mid+1:high=mid}return low},_.toArray=function(obj){return obj?_.isArray(obj)?slice.call(obj):obj.length===+obj.length?_.map(obj,_.identity):_.values(obj):[]},_.size=function(obj){return null==obj?0:obj.length===+obj.length?obj.length:_.keys(obj).length},_.first=_.head=_.take=function(array,n,guard){if(null!=array)return null==n||guard?array[0]:slice.call(array,0,n)},_.initial=function(array,n,guard){return slice.call(array,0,array.length-(null==n||guard?1:n))},_.last=function(array,n,guard){if(null!=array)return null==n||guard?array[array.length-1]:slice.call(array,Math.max(array.length-n,0))},_.rest=_.tail=_.drop=function(array,n,guard){return slice.call(array,null==n||guard?1:n)},_.compact=function(array){return _.filter(array,_.identity)};var flatten=function(input,shallow,output){return each(input,function(value){_.isArray(value)?shallow?push.apply(output,value):flatten(value,shallow,output):output.push(value)}),output};_.flatten=function(array,shallow){return flatten(array,shallow,[])},_.without=function(array){return _.difference(array,slice.call(arguments,1))},_.uniq=_.unique=function(array,isSorted,iterator,context){_.isFunction(isSorted)&&(context=iterator,iterator=isSorted,isSorted=!1);var initial=iterator?_.map(array,iterator,context):array,results=[],seen=[];return each(initial,function(value,index){(isSorted?index&&seen[seen.length-1]===value:_.contains(seen,value))||(seen.push(value),results.push(array[index]))}),results},_.union=function(){return _.uniq(concat.apply(ArrayProto,arguments))},_.intersection=function(array){var rest=slice.call(arguments,1);return _.filter(_.uniq(array),function(item){return _.every(rest,function(other){return _.indexOf(other,item)>=0})})},_.difference=function(array){var rest=concat.apply(ArrayProto,slice.call(arguments,1));return _.filter(array,function(value){return!_.contains(rest,value)})},_.zip=function(){for(var args=slice.call(arguments),length=_.max(_.pluck(args,"length")),results=new Array(length),i=0;i<length;i++)results[i]=_.pluck(args,""+i);return results},_.object=function(list,values){if(null==list)return{};for(var result={},i=0,l=list.length;i<l;i++)values?result[list[i]]=values[i]:result[list[i][0]]=list[i][1];return result},_.indexOf=function(array,item,isSorted){if(null==array)return-1;var i=0,l=array.length;if(isSorted){if("number"!=typeof isSorted)return array[i=_.sortedIndex(array,item)]===item?i:-1;i=isSorted<0?Math.max(0,l+isSorted):isSorted}if(nativeIndexOf&&array.indexOf===nativeIndexOf)return array.indexOf(item,isSorted);for(;i<l;i++)if(array[i]===item)return i;return-1},_.lastIndexOf=function(array,item,from){if(null==array)return-1;var hasIndex=null!=from;if(nativeLastIndexOf&&array.lastIndexOf===nativeLastIndexOf)return hasIndex?array.lastIndexOf(item,from):array.lastIndexOf(item);for(var i=hasIndex?from:array.length;i--;)if(array[i]===item)return i;return-1},_.range=function(start,stop,step){arguments.length<=1&&(stop=start||0,start=0),step=arguments[2]||1;for(var len=Math.max(Math.ceil((stop-start)/step),0),idx=0,range=new Array(len);idx<len;)range[idx++]=start,start+=step;return range};var ctor=function(){};_.bind=function(func,context){var args,bound;if(func.bind===nativeBind&&nativeBind)return nativeBind.apply(func,slice.call(arguments,1));if(!_.isFunction(func))throw new TypeError;return args=slice.call(arguments,2),bound=function(){if(!(this instanceof bound))return func.apply(context,args.concat(slice.call(arguments)));ctor.prototype=func.prototype;var self=new ctor;ctor.prototype=null;var result=func.apply(self,args.concat(slice.call(arguments)));return Object(result)===result?result:self}},_.bindAll=function(obj){var funcs=slice.call(arguments,1);return 0==funcs.length&&(funcs=_.functions(obj)),each(funcs,function(f){obj[f]=_.bind(obj[f],obj)}),obj},_.memoize=function(func,hasher){var memo={};return hasher||(hasher=_.identity),function(){var key=hasher.apply(this,arguments);return _.has(memo,key)?memo[key]:memo[key]=func.apply(this,arguments)}},_.delay=function(func,wait){var args=slice.call(arguments,2);return setTimeout(function(){return func.apply(null,args)},wait)},_.defer=function(func){return _.delay.apply(_,[func,1].concat(slice.call(arguments,1)))},_.throttle=function(func,wait){var context,args,timeout,result,previous=0,later=function(){previous=new Date,timeout=null,result=func.apply(context,args)};return function(){var now=new Date,remaining=wait-(now-previous);return context=this,args=arguments,remaining<=0?(clearTimeout(timeout),timeout=null,previous=now,result=func.apply(context,args)):timeout||(timeout=setTimeout(later,remaining)),result}},_.debounce=function(func,wait,immediate){var timeout,result;return function(){var context=this,args=arguments,later=function(){timeout=null,immediate||(result=func.apply(context,args))},callNow=immediate&&!timeout;return clearTimeout(timeout),timeout=setTimeout(later,wait),callNow&&(result=func.apply(context,args)),result}},_.once=function(func){var memo,ran=!1;return function(){return ran?memo:(ran=!0,memo=func.apply(this,arguments),func=null,memo)}},_.wrap=function(func,wrapper){return function(){var args=[func];return push.apply(args,arguments),wrapper.apply(this,args)}},_.compose=function(){var funcs=arguments;return function(){for(var args=arguments,i=funcs.length-1;i>=0;i--)args=[funcs[i].apply(this,args)];return args[0]}},_.after=function(times,func){return times<=0?func():function(){if(--times<1)return func.apply(this,arguments)}},_.keys=nativeKeys||function(obj){if(obj!==Object(obj))throw new TypeError("Invalid object");var keys=[];for(var key in obj)_.has(obj,key)&&(keys[keys.length]=key);return keys},_.values=function(obj){var values=[];for(var key in obj)_.has(obj,key)&&values.push(obj[key]);return values},_.pairs=function(obj){var pairs=[];for(var key in obj)_.has(obj,key)&&pairs.push([key,obj[key]]);return pairs},_.invert=function(obj){var result={};for(var key in obj)_.has(obj,key)&&(result[obj[key]]=key);return result},_.functions=_.methods=function(obj){var names=[];for(var key in obj)_.isFunction(obj[key])&&names.push(key);return names.sort()},_.extend=function(obj){return each(slice.call(arguments,1),function(source){if(source)for(var prop in source)obj[prop]=source[prop]}),obj},_.pick=function(obj){var copy={},keys=concat.apply(ArrayProto,slice.call(arguments,1));return each(keys,function(key){key in obj&&(copy[key]=obj[key])}),copy},_.omit=function(obj){var copy={},keys=concat.apply(ArrayProto,slice.call(arguments,1));for(var key in obj)_.contains(keys,key)||(copy[key]=obj[key]);return copy},_.defaults=function(obj){return each(slice.call(arguments,1),function(source){if(source)for(var prop in source)null==obj[prop]&&(obj[prop]=source[prop])}),obj},_.clone=function(obj){return _.isObject(obj)?_.isArray(obj)?obj.slice():_.extend({},obj):obj},_.tap=function(obj,interceptor){return interceptor(obj),obj};var eq=function(a,b,aStack,bStack){if(a===b)return 0!==a||1/a==1/b;if(null==a||null==b)return a===b;a instanceof _&&(a=a._wrapped),b instanceof _&&(b=b._wrapped);var className=toString.call(a);if(className!=toString.call(b))return!1;switch(className){case"[object String]":return a==String(b);case"[object Number]":return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case"[object Date]":case"[object Boolean]":return+a==+b;case"[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if("object"!=typeof a||"object"!=typeof b)return!1;for(var length=aStack.length;length--;)if(aStack[length]==a)return bStack[length]==b;aStack.push(a),bStack.push(b);var size=0,result=!0;if("[object Array]"==className){if(result=(size=a.length)==b.length)for(;size--&&(result=eq(a[size],b[size],aStack,bStack)););}else{var aCtor=a.constructor,bCtor=b.constructor;if(aCtor!==bCtor&&!(_.isFunction(aCtor)&&aCtor instanceof aCtor&&_.isFunction(bCtor)&&bCtor instanceof bCtor))return!1;for(var key in a)if(_.has(a,key)&&(size++,!(result=_.has(b,key)&&eq(a[key],b[key],aStack,bStack))))break;if(result){for(key in b)if(_.has(b,key)&&!size--)break;result=!size}}return aStack.pop(),bStack.pop(),result};_.isEqual=function(a,b){return eq(a,b,[],[])},_.isEmpty=function(obj){if(null==obj)return!0;if(_.isArray(obj)||_.isString(obj))return 0===obj.length;for(var key in obj)if(_.has(obj,key))return!1;return!0},_.isElement=function(obj){return!(!obj||1!==obj.nodeType)},_.isArray=nativeIsArray||function(obj){return"[object Array]"==toString.call(obj)},_.isObject=function(obj){return obj===Object(obj)},each(["Arguments","Function","String","Number","Date","RegExp"],function(name){_["is"+name]=function(obj){return toString.call(obj)=="[object "+name+"]"}}),
_.isArguments(arguments)||(_.isArguments=function(obj){return!(!obj||!_.has(obj,"callee"))}),"function"!=typeof/./&&(_.isFunction=function(obj){return"function"==typeof obj}),_.isFinite=function(obj){return isFinite(obj)&&!isNaN(parseFloat(obj))},_.isNaN=function(obj){return _.isNumber(obj)&&obj!=+obj},_.isBoolean=function(obj){return!0===obj||!1===obj||"[object Boolean]"==toString.call(obj)},_.isNull=function(obj){return null===obj},_.isUndefined=function(obj){return void 0===obj},_.has=function(obj,key){return hasOwnProperty.call(obj,key)},_.noConflict=function(){return root._=previousUnderscore,this},_.identity=function(value){return value},_.times=function(n,iterator,context){for(var accum=Array(n),i=0;i<n;i++)accum[i]=iterator.call(context,i);return accum},_.random=function(min,max){return null==max&&(max=min,min=0),min+(0|Math.random()*(max-min+1))};var entityMap={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};entityMap.unescape=_.invert(entityMap.escape);var entityRegexes={escape:new RegExp("["+_.keys(entityMap.escape).join("")+"]","g"),unescape:new RegExp("("+_.keys(entityMap.unescape).join("|")+")","g")};_.each(["escape","unescape"],function(method){_[method]=function(string){return null==string?"":(""+string).replace(entityRegexes[method],function(match){return entityMap[method][match]})}}),_.result=function(object,property){if(null==object)return null;var value=object[property];return _.isFunction(value)?value.call(object):value},_.mixin=function(obj){each(_.functions(obj),function(name){var func=_[name]=obj[name];_.prototype[name]=function(){var args=[this._wrapped];return push.apply(args,arguments),result.call(this,func.apply(_,args))}})};var idCounter=0;_.uniqueId=function(prefix){var id=""+ ++idCounter;return prefix?prefix+id:id},_.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var noMatch=/(.)^/,escapes={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},escaper=/\\|'|\r|\n|\t|\u2028|\u2029/g;_.template=function(text,data,settings){settings=_.defaults({},settings,_.templateSettings);var matcher=new RegExp([(settings.escape||noMatch).source,(settings.interpolate||noMatch).source,(settings.evaluate||noMatch).source].join("|")+"|$","g"),index=0,source="__p+='";text.replace(matcher,function(match,escape,interpolate,evaluate,offset){return source+=text.slice(index,offset).replace(escaper,function(match){return"\\"+escapes[match]}),escape&&(source+="'+\n((__t=("+escape+"))==null?'':_.escape(__t))+\n'"),interpolate&&(source+="'+\n((__t=("+interpolate+"))==null?'':__t)+\n'"),evaluate&&(source+="';\n"+evaluate+"\n__p+='"),index=offset+match.length,match}),source+="';\n",settings.variable||(source="with(obj||{}){\n"+source+"}\n"),source="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+source+"return __p;\n";try{var render=new Function(settings.variable||"obj","_",source)}catch(e){throw e.source=source,e}if(data)return render(data,_);var template=function(data){return render.call(this,data,_)};return template.source="function("+(settings.variable||"obj")+"){\n"+source+"}",template},_.chain=function(obj){return _(obj).chain()};var result=function(obj){return this._chain?_(obj).chain():obj};_.mixin(_),each(["pop","push","reverse","shift","sort","splice","unshift"],function(name){var method=ArrayProto[name];_.prototype[name]=function(){var obj=this._wrapped;return method.apply(obj,arguments),"shift"!=name&&"splice"!=name||0!==obj.length||delete obj[0],result.call(this,obj)}}),each(["concat","join","slice"],function(name){var method=ArrayProto[name];_.prototype[name]=function(){return result.call(this,method.apply(this._wrapped,arguments))}}),_.extend(_.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this),function(){var Backbone,root=this,previousBackbone=root.Backbone,array=[],push=array.push,slice=array.slice,splice=array.splice;(Backbone="undefined"!=typeof exports?exports:root.Backbone={}).VERSION="1.0.0";var _=root._;_||"undefined"==typeof require||(_=require("underscore")),Backbone.$=root.jQuery||root.Zepto||root.ender||root.$,Backbone.noConflict=function(){return root.Backbone=previousBackbone,this},Backbone.emulateHTTP=!1,Backbone.emulateJSON=!1;var Events=Backbone.Events={on:function(name,callback,context){return eventsApi(this,"on",name,[callback,context])&&callback?(this._events||(this._events={}),(this._events[name]||(this._events[name]=[])).push({callback:callback,context:context,ctx:context||this}),this):this},once:function(name,callback,context){if(!eventsApi(this,"once",name,[callback,context])||!callback)return this;var self=this,once=_.once(function(){self.off(name,once),callback.apply(this,arguments)});return once._callback=callback,this.on(name,once,context)},off:function(name,callback,context){var retain,ev,events,names,i,l,j,k;if(!this._events||!eventsApi(this,"off",name,[callback,context]))return this;if(!name&&!callback&&!context)return this._events={},this;for(i=0,l=(names=name?[name]:_.keys(this._events)).length;i<l;i++)if(name=names[i],events=this._events[name]){if(this._events[name]=retain=[],callback||context)for(j=0,k=events.length;j<k;j++)ev=events[j],(callback&&callback!==ev.callback&&callback!==ev.callback._callback||context&&context!==ev.context)&&retain.push(ev);retain.length||delete this._events[name]}return this},trigger:function(name){if(!this._events)return this;var args=slice.call(arguments,1);if(!eventsApi(this,"trigger",name,args))return this;var events=this._events[name],allEvents=this._events.all;return events&&triggerEvents(events,args),allEvents&&triggerEvents(allEvents,arguments),this},stopListening:function(obj,name,callback){var listeners=this._listeners;if(!listeners)return this;var deleteListener=!name&&!callback;for(var id in"object"==typeof name&&(callback=this),obj&&((listeners={})[obj._listenerId]=obj),listeners)listeners[id].off(name,callback,this),deleteListener&&delete this._listeners[id];return this}},eventSplitter=/\s+/,eventsApi=function(obj,action,name,rest){if(!name)return!0;if("object"==typeof name){for(var key in name)obj[action].apply(obj,[key,name[key]].concat(rest));return!1}if(eventSplitter.test(name)){for(var names=name.split(eventSplitter),i=0,l=names.length;i<l;i++)obj[action].apply(obj,[names[i]].concat(rest));return!1}return!0},triggerEvents=function(events,args){var ev,i=-1,l=events.length,a1=args[0],a2=args[1],a3=args[2];switch(args.length){case 0:for(;++i<l;)(ev=events[i]).callback.call(ev.ctx);return;case 1:for(;++i<l;)(ev=events[i]).callback.call(ev.ctx,a1);return;case 2:for(;++i<l;)(ev=events[i]).callback.call(ev.ctx,a1,a2);return;case 3:for(;++i<l;)(ev=events[i]).callback.call(ev.ctx,a1,a2,a3);return;default:for(;++i<l;)(ev=events[i]).callback.apply(ev.ctx,args)}},listenMethods={listenTo:"on",listenToOnce:"once"};_.each(listenMethods,function(implementation,method){Events[method]=function(obj,name,callback){return(this._listeners||(this._listeners={}))[obj._listenerId||(obj._listenerId=_.uniqueId("l"))]=obj,"object"==typeof name&&(callback=this),obj[implementation](name,callback,this),this}}),Events.bind=Events.on,Events.unbind=Events.off,_.extend(Backbone,Events);var Model=Backbone.Model=function(attributes,options){var defaults,attrs=attributes||{};options||(options={}),this.cid=_.uniqueId("c"),this.attributes={},_.extend(this,_.pick(options,modelOptions)),options.parse&&(attrs=this.parse(attrs,options)||{}),(defaults=_.result(this,"defaults"))&&(attrs=_.defaults({},attrs,defaults)),this.set(attrs,options),this.changed={},this.initialize.apply(this,arguments)},modelOptions=["url","urlRoot","collection"];_.extend(Model.prototype,Events,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return _.clone(this.attributes)},sync:function(){return Backbone.sync.apply(this,arguments)},get:function(attr){return this.attributes[attr]},escape:function(attr){return _.escape(this.get(attr))},has:function(attr){return null!=this.get(attr)},set:function(key,val,options){var attr,attrs,unset,changes,silent,changing,prev,current;if(null==key)return this;if("object"==typeof key?(attrs=key,options=val):(attrs={})[key]=val,options||(options={}),!this._validate(attrs,options))return!1;for(attr in unset=options.unset,silent=options.silent,changes=[],changing=this._changing,this._changing=!0,changing||(this._previousAttributes=_.clone(this.attributes),this.changed={}),current=this.attributes,prev=this._previousAttributes,this.idAttribute in attrs&&(this.id=attrs[this.idAttribute]),attrs)val=attrs[attr],_.isEqual(current[attr],val)||changes.push(attr),_.isEqual(prev[attr],val)?delete this.changed[attr]:this.changed[attr]=val,unset?delete current[attr]:current[attr]=val;if(!silent){changes.length&&(this._pending=!0);for(var i=0,l=changes.length;i<l;i++)this.trigger("change:"+changes[i],this,current[changes[i]],options)}if(changing)return this;if(!silent)for(;this._pending;)this._pending=!1,this.trigger("change",this,options);return this._pending=!1,this._changing=!1,this},unset:function(attr,options){return this.set(attr,void 0,_.extend({},options,{unset:!0}))},clear:function(options){var attrs={};for(var key in this.attributes)attrs[key]=void 0;return this.set(attrs,_.extend({},options,{unset:!0}))},hasChanged:function(attr){return null==attr?!_.isEmpty(this.changed):_.has(this.changed,attr)},changedAttributes:function(diff){if(!diff)return!!this.hasChanged()&&_.clone(this.changed);var val,changed=!1,old=this._changing?this._previousAttributes:this.attributes;for(var attr in diff)_.isEqual(old[attr],val=diff[attr])||((changed||(changed={}))[attr]=val);return changed},previous:function(attr){return null!=attr&&this._previousAttributes?this._previousAttributes[attr]:null},previousAttributes:function(){return _.clone(this._previousAttributes)},fetch:function(options){void 0===(options=options?_.clone(options):{}).parse&&(options.parse=!0);var model=this,success=options.success;return options.success=function(resp){if(!model.set(model.parse(resp,options),options))return!1;success&&success(model,resp,options),model.trigger("sync",model,resp,options)},wrapError(this,options),this.sync("read",this,options)},save:function(key,val,options){var attrs,method,xhr,attributes=this.attributes;if(null==key||"object"==typeof key?(attrs=key,options=val):(attrs={})[key]=val,attrs&&(!options||!options.wait)&&!this.set(attrs,options))return!1;if(options=_.extend({validate:!0},options),!this._validate(attrs,options))return!1;attrs&&options.wait&&(this.attributes=_.extend({},attributes,attrs)),void 0===options.parse&&(options.parse=!0);var model=this,success=options.success;return options.success=function(resp){model.attributes=attributes;var serverAttrs=model.parse(resp,options);if(options.wait&&(serverAttrs=_.extend(attrs||{},serverAttrs)),_.isObject(serverAttrs)&&!model.set(serverAttrs,options))return!1;success&&success(model,resp,options),model.trigger("sync",model,resp,options)},wrapError(this,options),"patch"===(method=this.isNew()?"create":options.patch?"patch":"update")&&(options.attrs=attrs),xhr=this.sync(method,this,options),attrs&&options.wait&&(this.attributes=attributes),xhr},destroy:function(options){options=options?_.clone(options):{};var model=this,success=options.success,destroy=function(){model.trigger("destroy",model,model.collection,options)};if(options.success=function(resp){(options.wait||model.isNew())&&destroy(),success&&success(model,resp,options),model.isNew()||model.trigger("sync",model,resp,options)},this.isNew())return options.success(),!1;wrapError(this,options);var xhr=this.sync("delete",this,options);return options.wait||destroy(),xhr},url:function(){var base=_.result(this,"urlRoot")||_.result(this.collection,"url")||urlError();return this.isNew()?base:base+("/"===base.charAt(base.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(resp){return resp},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(options){return this._validate({},_.extend(options||{},{validate:!0}))},_validate:function(attrs,options){if(!options.validate||!this.validate)return!0;attrs=_.extend({},this.attributes,attrs);var error=this.validationError=this.validate(attrs,options)||null;return!error||(this.trigger("invalid",this,error,_.extend(options||{},{validationError:error})),!1)}});var modelMethods=["keys","values","pairs","invert","pick","omit"];_.each(modelMethods,function(method){Model.prototype[method]=function(){var args=slice.call(arguments);return args.unshift(this.attributes),_[method].apply(_,args)}});var Collection=Backbone.Collection=function(models,options){options||(options={}),options.url&&(this.url=options.url),options.model&&(this.model=options.model),void 0!==options.comparator&&(this.comparator=options.comparator),this._reset(),this.initialize.apply(this,arguments),models&&this.reset(models,_.extend({silent:!0},options))},setOptions={add:!0,remove:!0,merge:!0},addOptions={add:!0,merge:!1,remove:!1};_.extend(Collection.prototype,Events,{model:Model,initialize:function(){},toJSON:function(options){return this.map(function(model){return model.toJSON(options)})},sync:function(){return Backbone.sync.apply(this,arguments)},add:function(models,options){return this.set(models,_.defaults(options||{},addOptions))},remove:function(models,options){var i,l,index,model;for(options||(options={}),i=0,l=(models=_.isArray(models)?models.slice():[models]).length;i<l;i++)(model=this.get(models[i]))&&(delete this._byId[model.id],delete this._byId[model.cid],index=this.indexOf(model),this.models.splice(index,1),this.length--,options.silent||(options.index=index,model.trigger("remove",model,this,options)),this._removeReference(model));return this},set:function(models,options){var i,l,model,existing,sort;(options=_.defaults(options||{},setOptions)).parse&&(models=this.parse(models,options)),_.isArray(models)||(models=models?[models]:[]);var at=options.at,sortable=this.comparator&&null==at&&!1!==options.sort,sortAttr=_.isString(this.comparator)?this.comparator:null,toAdd=[],toRemove=[],modelMap={};for(i=0,l=models.length;i<l;i++)(model=this._prepareModel(models[i],options))&&((existing=this.get(model))?(options.remove&&(modelMap[existing.cid]=!0),options.merge&&(existing.set(model.attributes,options),sortable&&!sort&&existing.hasChanged(sortAttr)&&(sort=!0))):options.add&&(toAdd.push(model),model.on("all",this._onModelEvent,this),this._byId[model.cid]=model,null!=model.id&&(this._byId[model.id]=model)));if(options.remove){for(i=0,l=this.length;i<l;++i)modelMap[(model=this.models[i]).cid]||toRemove.push(model);toRemove.length&&this.remove(toRemove,options)}if(toAdd.length&&(sortable&&(sort=!0),this.length+=toAdd.length,null!=at?splice.apply(this.models,[at,0].concat(toAdd)):push.apply(this.models,toAdd)),sort&&this.sort({silent:!0}),options.silent)return this;for(i=0,l=toAdd.length;i<l;i++)(model=toAdd[i]).trigger("add",model,this,options);return sort&&this.trigger("sort",this,options),this},reset:function(models,options){options||(options={});for(var i=0,l=this.models.length;i<l;i++)this._removeReference(this.models[i]);return options.previousModels=this.models,this._reset(),this.add(models,_.extend({silent:!0},options)),options.silent||this.trigger("reset",this,options),this},push:function(model,options){return model=this._prepareModel(model,options),this.add(model,_.extend({at:this.length},options)),model},pop:function(options){var model=this.at(this.length-1);return this.remove(model,options),model},unshift:function(model,options){return model=this._prepareModel(model,options),this.add(model,_.extend({at:0},options)),model},shift:function(options){var model=this.at(0);return this.remove(model,options),model},slice:function(begin,end){return this.models.slice(begin,end)},get:function(obj){if(null!=obj)return this._byId[null!=obj.id?obj.id:obj.cid||obj]},at:function(index){return this.models[index]},where:function(attrs,first){return _.isEmpty(attrs)?first?void 0:[]:this[first?"find":"filter"](function(model){for(var key in attrs)if(attrs[key]!==model.get(key))return!1;return!0})},findWhere:function(attrs){return this.where(attrs,!0)},sort:function(options){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return options||(options={}),_.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(_.bind(this.comparator,this)),options.silent||this.trigger("sort",this,options),this},sortedIndex:function(model,value,context){value||(value=this.comparator);var iterator=_.isFunction(value)?value:function(model){return model.get(value)};return _.sortedIndex(this.models,model,iterator,context)},pluck:function(attr){return _.invoke(this.models,"get",attr)},fetch:function(options){void 0===(options=options?_.clone(options):{}).parse&&(options.parse=!0);var success=options.success,collection=this;return options.success=function(resp){var method=options.reset?"reset":"set";collection[method](resp,options),success&&success(collection,resp,options),collection.trigger("sync",collection,resp,options)},wrapError(this,options),this.sync("read",this,options)},create:function(model,options){if(options=options?_.clone(options):{},!(model=this._prepareModel(model,options)))return!1;options.wait||this.add(model,options);var collection=this,success=options.success;return options.success=function(resp){options.wait&&collection.add(model,options),success&&success(model,resp,options)},model.save(null,options),model},parse:function(resp){return resp},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(attrs,options){if(attrs instanceof Model)return attrs.collection||(attrs.collection=this),attrs;options||(options={}),options.collection=this;var model=new this.model(attrs,options);return model._validate(attrs,options)?model:(this.trigger("invalid",this,attrs,options),!1)},_removeReference:function(model){this===model.collection&&delete model.collection,model.off("all",this._onModelEvent,this)},_onModelEvent:function(event,model,collection,options){("add"!==event&&"remove"!==event||collection===this)&&("destroy"===event&&this.remove(model,options),model&&event==="change:"+model.idAttribute&&(delete this._byId[model.previous(model.idAttribute)],null!=model.id&&(this._byId[model.id]=model)),this.trigger.apply(this,arguments))}});var methods=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];_.each(methods,function(method){Collection.prototype[method]=function(){var args=slice.call(arguments);return args.unshift(this.models),_[method].apply(_,args)}});var attributeMethods=["groupBy","countBy","sortBy"];_.each(attributeMethods,function(method){Collection.prototype[method]=function(value,context){var iterator=_.isFunction(value)?value:function(model){return model.get(value)};return _[method](this.models,iterator,context)}});var View=Backbone.View=function(options){this.cid=_.uniqueId("view"),this._configure(options||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},delegateEventSplitter=/^(\S+)\s*(.*)$/,viewOptions=["model","collection","el","id","attributes","className","tagName","events"];_.extend(View.prototype,Events,{tagName:"div",$:function(selector){return this.$el.find(selector)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(element,delegate){return this.$el&&this.undelegateEvents(),this.$el=element instanceof Backbone.$?element:Backbone.$(element),this.el=this.$el[0],!1!==delegate&&this.delegateEvents(),this},delegateEvents:function(events){if(!events&&!(events=_.result(this,"events")))return this;for(var key in this.undelegateEvents(),events){var method=events[key];if(_.isFunction(method)||(method=this[events[key]]),method){var match=key.match(delegateEventSplitter),eventName=match[1],selector=match[2];method=_.bind(method,this),eventName+=".delegateEvents"+this.cid,""===selector?this.$el.on(eventName,method):this.$el.on(eventName,selector,method)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_configure:function(options){this.options&&(options=_.extend({},_.result(this,"options"),options)),_.extend(this,_.pick(options,viewOptions)),this.options=options},_ensureElement:function(){if(this.el)this.setElement(_.result(this,"el"),!1);else{var attrs=_.extend({},_.result(this,"attributes"));this.id&&(attrs.id=_.result(this,"id")),this.className&&(attrs["class"]=_.result(this,"className"));var $el=Backbone.$("<"+_.result(this,"tagName")+">").attr(attrs);this.setElement($el,!1)}}}),Backbone.sync=function(method,model,options){var type=methodMap[method];_.defaults(options||(options={}),{emulateHTTP:Backbone.emulateHTTP,emulateJSON:Backbone.emulateJSON});var params={type:type,dataType:"json"};if(options.url||(params.url=_.result(model,"url")||urlError()),null!=options.data||!model||"create"!==method&&"update"!==method&&"patch"!==method||(params.contentType="application/json",params.data=JSON.stringify(options.attrs||model.toJSON(options))),options.emulateJSON&&(params.contentType="application/x-www-form-urlencoded",params.data=params.data?{model:params.data}:{}),options.emulateHTTP&&("PUT"===type||"DELETE"===type||"PATCH"===type)){params.type="POST",options.emulateJSON&&(params.data._method=type);var beforeSend=options.beforeSend;options.beforeSend=function(xhr){if(xhr.setRequestHeader("X-HTTP-Method-Override",type),beforeSend)return beforeSend.apply(this,arguments)}}"GET"===params.type||options.emulateJSON||(params.processData=!1),"PATCH"!==params.type||!window.ActiveXObject||window.external&&window.external.msActiveXFilteringEnabled||(params.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var xhr=options.xhr=Backbone.ajax(_.extend(params,options));return model.trigger("request",model,xhr,options),xhr};var methodMap={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};Backbone.ajax=function(){return Backbone.$.ajax.apply(Backbone.$,arguments)};var Router=Backbone.Router=function(options){options||(options={}),options.routes&&(this.routes=options.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},optionalParam=/\((.*?)\)/g,namedParam=/(\(\?)?:\w+/g,splatParam=/\*\w+/g,escapeRegExp=/[\-{}\[\]+?.,\\\^$|#\s]/g;_.extend(Router.prototype,Events,{initialize:function(){},route:function(route,name,callback){_.isRegExp(route)||(route=this._routeToRegExp(route)),_.isFunction(name)&&(callback=name,name=""),callback||(callback=this[name]);var router=this;return Backbone.history.route(route,function(fragment){var args=router._extractParameters(route,fragment);callback&&callback.apply(router,args),router.trigger.apply(router,["route:"+name].concat(args)),router.trigger("route",name,args),Backbone.history.trigger("route",router,name,args)}),this},navigate:function(fragment,options){return Backbone.history.navigate(fragment,options),this},_bindRoutes:function(){if(this.routes){this.routes=_.result(this,"routes");for(var route,routes=_.keys(this.routes);null!=(route=routes.pop());)this.route(route,this.routes[route])}},_routeToRegExp:function(route){return route=route.replace(escapeRegExp,"\\$&").replace(optionalParam,"(?:$1)?").replace(namedParam,function(match,optional){return optional?match:"([^/]+)"}).replace(splatParam,"(.*?)"),new RegExp("^"+route+"$")},_extractParameters:function(route,fragment){var params=route.exec(fragment).slice(1);return _.map(params,function(param){return param?decodeURIComponent(param):null})}});var History=Backbone.History=function(){this.handlers=[],_.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},routeStripper=/^[#\/]|\s+$/g,rootStripper=/^\/+|\/+$/g,isExplorer=/msie [\w.]+/,trailingSlash=/\/$/;History.started=!1,_.extend(History.prototype,Events,{interval:50,getHash:function(window){var match=(window||this).location.href.match(/#(.*)$/);return match?match[1]:""},getFragment:function(fragment,forcePushState){if(null==fragment)if(this._hasPushState||!this._wantsHashChange||forcePushState){fragment=this.location.pathname;var root=this.root.replace(trailingSlash,"");fragment.indexOf(root)||(fragment=fragment.substr(root.length))}else fragment=this.getHash();return fragment.replace(routeStripper,"")},start:function(options){if(History.started)throw new Error("Backbone.history has already been started");History.started=!0,this.options=_.extend({},{root:"/"},this.options,options),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var fragment=this.getFragment(),docMode=document.documentMode,oldIE=isExplorer.exec(navigator.userAgent.toLowerCase())&&(!docMode||docMode<=7);this.root=("/"+this.root+"/").replace(rootStripper,"/"),oldIE&&this._wantsHashChange&&(this.iframe=Backbone.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(fragment)),this._hasPushState?Backbone.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!oldIE?Backbone.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=fragment;var loc=this.location,atRoot=loc.pathname.replace(/[^\/]$/,"$&/")===this.root;return this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!atRoot?(this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0):(this._wantsPushState&&this._hasPushState&&atRoot&&loc.hash&&(this.fragment=this.getHash().replace(routeStripper,""),this.history.replaceState({},document.title,this.root+this.fragment+loc.search)),this.options.silent?void 0:this.loadUrl())},stop:function(){Backbone.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),History.started=!1},route:function(route,callback){this.handlers.unshift({route:route,callback:callback})},checkUrl:function(){var current=this.getFragment();if(current===this.fragment&&this.iframe&&(current=this.getFragment(this.getHash(this.iframe))),current===this.fragment)return!1;this.iframe&&this.navigate(current),this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(fragmentOverride){var fragment=this.fragment=this.getFragment(fragmentOverride);return _.any(this.handlers,function(handler){if(handler.route.test(fragment))return handler.callback(fragment),!0})},navigate:function(fragment,options){if(!History.started)return!1;if(options&&!0!==options||(options={trigger:options}),fragment=this.getFragment(fragment||""),this.fragment!==fragment){this.fragment=fragment;var url=this.root+fragment;if(this._hasPushState)this.history[options.replace?"replaceState":"pushState"]({},document.title,url);else{if(!this._wantsHashChange)return this.location.assign(url);this._updateHash(this.location,fragment,options.replace),this.iframe&&fragment!==this.getFragment(this.getHash(this.iframe))&&(options.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,fragment,options.replace))}options.trigger&&this.loadUrl(fragment)}},_updateHash:function(location,fragment,replace){if(replace){var href=location.href.replace(/(javascript:|#).*$/,"");location.replace(href+"#"+fragment)}else location.hash="#"+fragment}}),Backbone.history=new History;var extend=function(protoProps,staticProps){var child,parent=this;child=protoProps&&_.has(protoProps,"constructor")?protoProps.constructor:function(){return parent.apply(this,arguments)},_.extend(child,parent,staticProps);var Surrogate=function(){this.constructor=child};return Surrogate.prototype=parent.prototype,child.prototype=new Surrogate,protoProps&&_.extend(child.prototype,protoProps),child.__super__=parent.prototype,child};Model.extend=Collection.extend=Router.extend=View.extend=History.extend=extend;var urlError=function(){throw new Error('A "url" property or function must be specified')},wrapError=function(model,options){var error=options.error;options.error=function(resp){error&&error(model,resp,options),model.trigger("error",model,resp,options)}}}.call(this),
/*
Copyright 2012 Igor Vaynberg

Version: 3.4.0 Timestamp: Tue May 14 08:27:33 PDT 2013

This software is licensed under the Apache License, Version 2.0 (the "Apache License") or the GNU
General Public License version 2 (the "GPL License"). You may choose either license to govern your
use of this software only upon the condition that you accept all of the terms of either the Apache
License or the GPL License.

You may obtain a copy of the Apache License and the GPL License at:

    http://www.apache.org/licenses/LICENSE-2.0
    http://www.gnu.org/licenses/gpl-2.0.html

Unless required by applicable law or agreed to in writing, software distributed under the
Apache License or the GPL Licesnse is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR
CONDITIONS OF ANY KIND, either express or implied. See the Apache License and the GPL License for
the specific language governing permissions and limitations under the Apache License and the GPL License.
*/
function($){"undefined"==typeof $.fn.each2&&$.fn.extend({each2:function(c){for(var j=$([0]),i=-1,l=this.length;++i<l&&(j.context=j[0]=this[i])&&!1!==c.call(j[0],i,j););return this}})}(jQuery),function($,undefined){"use strict";function indexOf(value,array){for(var i=0,l=array.length;i<l;i+=1)if(equal(value,array[i]))return i;return-1}function measureScrollbar(){var $template=$(MEASURE_SCROLLBAR_TEMPLATE);$template.appendTo("body");var dim={width:$template.width()-$template[0].clientWidth,height:$template.height()-$template[0].clientHeight};return $template.remove(),dim}function equal(a,b){return a===b||a!==undefined&&b!==undefined&&(null!==a&&null!==b&&(a.constructor===String?a+""==b+"":b.constructor===String&&b+""==a+""))}function splitVal(string,separator){var val,i,l;if(null===string||string.length<1)return[];for(i=0,l=(val=string.split(separator)).length;i<l;i+=1)val[i]=$.trim(val[i]);return val}function getSideBorderPadding(element){return element.outerWidth(!1)-element.width()}function installKeyUpChangeEvent(element){var key="keyup-change-value";element.on("keydown",function(){$.data(element,key)===undefined&&$.data(element,key,element.val())}),element.on("keyup",function(){var val=$.data(element,key);val!==undefined&&element.val()!==val&&($.removeData(element,key),element.trigger("keyup-change"))})}function installFilteredMouseMove(element){element.on("mousemove",function(e){var lastpos=lastMousePosition;lastpos!==undefined&&lastpos.x===e.pageX&&lastpos.y===e.pageY||$(e.target).trigger("mousemove-filtered",e)})}function debounce(quietMillis,fn,ctx){var timeout;return ctx=ctx||undefined,function(){var args=arguments;window.clearTimeout(timeout),timeout=window.setTimeout(function(){fn.apply(ctx,args)},quietMillis)}}function thunk(formula){var value,evaluated=!1;return function(){return!1===evaluated&&(value=formula(),evaluated=!0),value}}function installDebouncedScroll(threshold,element){var notify=debounce(threshold,function(e){element.trigger("scroll-debounced",e)});element.on("scroll",function(e){indexOf(e.target,element.get())>=0&&notify(e)})}function focus($el){$el[0]!==document.activeElement&&window.setTimeout(function(){var range,el=$el[0],pos=$el.val().length;$el.focus(),$el.is(":visible")&&el===document.activeElement&&(el.setSelectionRange?el.setSelectionRange(pos,pos):el.createTextRange&&((range=el.createTextRange()).collapse(!1),range.select()))},0)}function getCursorInfo(el){var offset=0,length=0;if("selectionStart"in(el=$(el)[0]))offset=el.selectionStart,length=el.selectionEnd-offset;else if("selection"in document){el.focus();var sel=document.selection.createRange();length=document.selection.createRange().text.length,sel.moveStart("character",-el.value.length),offset=sel.text.length-length}return{offset:offset,length:length}}function killEvent(event){event.preventDefault(),event.stopPropagation()}function killEventImmediately(event){event.preventDefault(),event.stopImmediatePropagation()}function measureTextWidth(e){if(!sizer){var style=e[0].currentStyle||window.getComputedStyle(e[0],null);(sizer=$(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:style.fontSize,fontFamily:style.fontFamily,fontStyle:style.fontStyle,fontWeight:style.fontWeight,letterSpacing:style.letterSpacing,textTransform:style.textTransform,whiteSpace:"nowrap"})).attr("class","select2-sizer"),$("body").append(sizer)}return sizer.text(e.val()),sizer.width()}function syncCssClasses(dest,src,adapter){var classes,replacements=[];(classes=dest.attr("class"))&&$((classes=""+classes).split(" ")).each2(function(){0===this.indexOf("select2-")&&replacements.push(this)}),(classes=src.attr("class"))&&$((classes=""+classes).split(" ")).each2(function(){0!==this.indexOf("select2-")&&adapter(this)&&replacements.push(this)}),dest.attr("class",replacements.join(" "))}function markMatch(text,term,markup,escapeMarkup){var match=text.toUpperCase().indexOf(term.toUpperCase()),tl=term.length;match<0?markup.push(escapeMarkup(text)):(markup.push(escapeMarkup(text.substring(0,match))),markup.push("<span class='select2-match'>"),markup.push(escapeMarkup(text.substring(match,match+tl))),markup.push("</span>"),markup.push(escapeMarkup(text.substring(match+tl,text.length))))}function ajax(options){var timeout,requestSequence=0,handler=null,quietMillis=options.quietMillis||100,ajaxUrl=options.url,self=this;return function(query){window.clearTimeout(timeout),timeout=window.setTimeout(function(){var requestNumber=requestSequence+=1,data=options.data,url=ajaxUrl,transport=options.transport||$.fn.select2.ajaxDefaults.transport,deprecated={type:options.type||"GET",cache:options.cache||!1,jsonpCallback:options.jsonpCallback||undefined,dataType:options.dataType||"json"},params=$.extend({},$.fn.select2.ajaxDefaults.params,deprecated);data=data?data.call(self,query.term,query.page,query.context):null,url="function"==typeof url?url.call(self,query.term,query.page,query.context):url,null!==handler&&handler.abort(),options.params&&($.isFunction(options.params)?$.extend(params,options.params.call(self)):$.extend(params,options.params)),$.extend(params,{url:url,dataType:options.dataType,data:data,success:function(data){if(!(requestNumber<requestSequence)){var results=options.results(data,query.page);query.callback(results)}}}),handler=transport.call(self,params)},quietMillis)}}function local(options){var dataText,tmp,data=options,text=function(item){return""+item.text};$.isArray(data)&&(data={results:tmp=data}),!1===$.isFunction(data)&&(tmp=data,data=function(){return tmp});var dataItem=data();return dataItem.text&&(text=dataItem.text,$.isFunction(text)||(dataText=dataItem.text,text=function(item){return item[dataText]})),function(query){var process,t=query.term,filtered={results:[]};""!==t?(process=function(datum,collection){var group,attr;if((datum=datum[0]).children){for(attr in group={},datum)datum.hasOwnProperty(attr)&&(group[attr]=datum[attr]);group.children=[],$(datum.children).each2(function(i,childDatum){process(childDatum,group.children)}),(group.children.length||query.matcher(t,text(group),datum))&&collection.push(group)}else query.matcher(t,text(datum),datum)&&collection.push(datum)},$(data().results).each2(function(i,datum){process(datum,filtered.results)}),query.callback(filtered)):query.callback(data())}}function tags(data){var isFunc=$.isFunction(data);return function(query){var t=query.term,filtered={results:[]};$(isFunc?data():data).each(function(){var isObject=this.text!==undefined,text=isObject?this.text:this;(""===t||query.matcher(t,text))&&filtered.results.push(isObject?this:{id:this,text:this})}),query.callback(filtered)}}function checkFormatter(formatter){if($.isFunction(formatter))return!0;if(!formatter)return!1;throw new Error("formatterName must be a function or a falsy value")}function evaluate(val){return $.isFunction(val)?val():val}function countResults(results){var count=0;return $.each(results,function(i,item){item.children?count+=countResults(item.children):count++}),count}function defaultTokenizer(input,selection,selectCallback,opts){var token,index,i,l,separator,original=input,dupe=!1;if(!opts.createSearchChoice||!opts.tokenSeparators||opts.tokenSeparators.length<1)return undefined;for(;;){for(index=-1,i=0,l=opts.tokenSeparators.length;i<l&&(separator=opts.tokenSeparators[i],!((index=input.indexOf(separator))>=0));i++);if(index<0)break;if(token=input.substring(0,index),input=input.substring(index+separator.length),token.length>0&&(token=opts.createSearchChoice(token,selection))!==undefined&&null!==token&&opts.id(token)!==undefined&&null!==opts.id(token)){for(dupe=!1,i=0,l=selection.length;i<l;i++)if(equal(opts.id(token),opts.id(selection[i]))){dupe=!0;break}dupe||selectCallback(token)}}return original!==input?input:void 0}function clazz(SuperClass,methods){var constructor=function(){};return constructor.prototype=new SuperClass,constructor.prototype.constructor=constructor,constructor.prototype.parent=SuperClass.prototype,constructor.prototype=$.extend(constructor.prototype,methods),constructor}if(window.Select2===undefined){var AbstractSelect2,SingleSelect2,MultiSelect2,nextUid,sizer,lastMousePosition,$document,scrollBarDimensions,counter,KEY={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(k){switch(k=k.which?k.which:k){case KEY.LEFT:case KEY.RIGHT:case KEY.UP:case KEY.DOWN:return!0}return!1},isControl:function(e){switch(e.which){case KEY.SHIFT:case KEY.CTRL:case KEY.ALT:return!0}return!!e.metaKey},isFunctionKey:function(k){return(k=k.which?k.which:k)>=112&&k<=123}},MEASURE_SCROLLBAR_TEMPLATE="<div class='select2-measure-scrollbar'></div>";$document=$(document),counter=1,nextUid=function(){return counter++},$document.on("mousemove",function(e){lastMousePosition={x:e.pageX,y:e.pageY}}),AbstractSelect2=clazz(Object,{bind:function(func){var self=this;return function(){func.apply(self,arguments)}},init:function(opts){var results,search,disabled,readonly,resultsSelector=".select2-results";this.opts=opts=this.prepareOpts(opts),this.id=opts.id,opts.element.data("select2")!==undefined&&null!==opts.element.data("select2")&&this.destroy(),this.container=this.createContainer(),this.containerId="s2id_"+(opts.element.attr("id")||"autogen"+nextUid()),this.containerSelector="#"+this.containerId.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.body=thunk(function(){return opts.element.closest("body")}),syncCssClasses(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.css(evaluate(opts.containerCss)),this.container.addClass(evaluate(opts.containerCssClass)),this.elementTabIndex=this.opts.element.attr("tabindex"),this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),this.dropdown.addClass(evaluate(opts.dropdownCssClass)),this.dropdown.data("select2",this),this.results=results=this.container.find(resultsSelector),this.search=search=this.container.find("input.select2-input"),this.resultsPage=0,this.context=null,this.initContainer(),installFilteredMouseMove(this.results),this.dropdown.on("mousemove-filtered touchstart touchmove touchend",resultsSelector,this.bind(this.highlightUnderEvent)),installDebouncedScroll(80,this.results),this.dropdown.on("scroll-debounced",resultsSelector,this.bind(this.loadMoreIfNeeded)),$(this.container).on("change",".select2-input",function(e){e.stopPropagation()}),$(this.dropdown).on("change",".select2-input",function(e){e.stopPropagation()}),$.fn.mousewheel&&results.mousewheel(function(e,delta,deltaX,deltaY){var top=results.scrollTop();deltaY>0&&top-deltaY<=0?(results.scrollTop(0),killEvent(e)):deltaY<0&&results.get(0).scrollHeight-results.scrollTop()+deltaY<=results.height()&&(results.scrollTop(results.get(0).scrollHeight-results.height()),killEvent(e))}),installKeyUpChangeEvent(search),search.on("keyup-change input paste",this.bind(this.updateResults)),search.on("focus",function(){search.addClass("select2-focused")}),search.on("blur",function(){search.removeClass("select2-focused")}),this.dropdown.on("mouseup",resultsSelector,this.bind(function(e){$(e.target).closest(".select2-result-selectable").length>0&&(this.highlightUnderEvent(e),this.selectHighlighted(e))})),this.dropdown.on("click mouseup mousedown",function(e){e.stopPropagation()}),$.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),null!==opts.maximumInputLength&&this.search.attr("maxlength",opts.maximumInputLength),(disabled=opts.element.prop("disabled"))===undefined&&(disabled=!1),this.enable(!disabled),(readonly=opts.element.prop("readonly"))===undefined&&(readonly=!1),this.readonly(readonly),scrollBarDimensions=scrollBarDimensions||measureScrollbar(),this.autofocus=opts.element.prop("autofocus"),opts.element.prop("autofocus",!1),this.autofocus&&this.focus()},destroy:function(){var select2=this.opts.element.data("select2");this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),select2!==undefined&&(select2.container.remove(),select2.dropdown.remove(),select2.opts.element.removeClass("select2-offscreen").removeData("select2").off(".select2").attr({tabindex:this.elementTabIndex}).prop("autofocus",this.autofocus||!1).show())},optionToData:function(element){return element.is("option")?{id:element.prop("value"),text:element.text(),element:element.get(),css:element.attr("class"),disabled:element.prop("disabled"),locked:equal(element.attr("locked"),"locked")}:element.is("optgroup")?{text:element.attr("label"),children:[],element:element.get(),css:element.attr("class")}:void 0},prepareOpts:function(opts){var element,select,idKey,ajaxUrl,self=this;if("select"===(element=opts.element).get(0).tagName.toLowerCase()&&(this.select=select=opts.element),select&&$.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in opts)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}),"function"!=typeof(opts=$.extend({},{populateResults:function(container,results,query){var populate,id=this.opts.id;(populate=function(results,container,depth){var i,l,result,selectable,disabled,compound,node,label,innerContainer,formatted;for(i=0,l=(results=opts.sortResults(results,container,query)).length;i<l;i+=1)selectable=!(disabled=!0===(result=results[i]).disabled)&&id(result)!==undefined,compound=result.children&&result.children.length>0,(node=$("<li></li>")).addClass("select2-results-dept-"+depth),node.addClass("select2-result"),node.addClass(selectable?"select2-result-selectable":"select2-result-unselectable"),node.addClass(result["new"]?"new-tag":""),disabled&&node.addClass("select2-disabled"),compound&&node.addClass("select2-result-with-children"),node.addClass(self.opts.formatResultCssClass(result)),(label=$(document.createElement("div"))).addClass("select2-result-label"),(formatted=opts.formatResult(result,label,query,self.opts.escapeMarkup))!==undefined&&label.html(formatted),node.append(label),compound&&((innerContainer=$("<ul></ul>")).addClass("select2-result-sub"),populate(result.children,innerContainer,depth+1),node.append(innerContainer)),node.data("select2-data",result),container.append(node)})(results,container,0)}},$.fn.select2.defaults,opts)).id&&(idKey=opts.id,opts.id=function(e){return e[idKey]}),$.isArray(opts.element.data("select2Tags"))){if("tags"in opts)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+opts.element.attr("id");opts.tags=opts.element.data("select2Tags")}if(select?(opts.query=this.bind(function(query){var children,firstChild,process,data={results:[],more:!1},term=query.term;process=function(element,collection){var group;element.is("option")?query.matcher(term,element.text(),element)&&collection.push(self.optionToData(element)):element.is("optgroup")&&(group=self.optionToData(element),element.children().each2(function(i,elm){process(elm,group.children)}),group.children.length>0&&collection.push(group))},children=element.children(),this.getPlaceholder()!==undefined&&children.length>0&&(firstChild=children[0],""===$(firstChild).text()&&(children=children.not(firstChild))),children.each2(function(i,elm){process(elm,data.results)}),query.callback(data)}),opts.id=function(e){return e.id},opts.formatResultCssClass=function(data){return data.css}):"query"in opts||("ajax"in opts?((ajaxUrl=opts.element.data("ajax-url"))&&ajaxUrl.length>0&&(opts.ajax.url=ajaxUrl),opts.query=ajax.call(opts.element,opts.ajax)):"data"in opts?opts.query=local(opts.data):"tags"in opts&&(opts.query=tags(opts.tags),opts.createSearchChoice===undefined&&(opts.createSearchChoice=function(term){return{id:term,text:term}}),opts.initSelection===undefined&&(opts.initSelection=function(element,callback){var data=[];$(splitVal(element.val(),opts.separator)).each(function(){var id=this,text=this,tags=opts.tags;$.isFunction(tags)&&(tags=tags()),$(tags).each(function(){if(equal(this.id,id))return text=this.text,!1}),data.push({id:id,text:text})}),callback(data)}))),"function"!=typeof opts.query)throw"query function not defined for Select2 "+opts.element.attr("id");if("top"===opts.createSearchChoicePosition)opts.createSearchChoicePosition=function(list,item){list.unshift(item)};else if("bottom"===opts.createSearchChoicePosition)opts.createSearchChoicePosition=function(list,item){list.push(item)};else if("function"!=typeof opts.createSearchChoicePosition)throw"invalid createSearchChoicePosition option must be 'top', 'bottom' or a custom function";return opts},monitorSource:function(){var sync,el=this.opts.element;el.on("change.select2",this.bind(function(){!0!==this.opts.element.data("select2-change-triggered")&&this.initSelection()})),sync=this.bind(function(){var readonly,disabled=el.prop("disabled");disabled===undefined&&(disabled=!1),this.enable(!disabled),(readonly=el.prop("readonly"))===undefined&&(readonly=!1),this.readonly(readonly),syncCssClasses(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(evaluate(this.opts.containerCssClass)),syncCssClasses(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(evaluate(this.opts.dropdownCssClass))}),el.on("propertychange.select2 DOMAttrModified.select2",sync),this.mutationCallback===undefined&&(this.mutationCallback=function(mutations){mutations.forEach(sync)}),"undefined"!=typeof WebKitMutationObserver&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new WebKitMutationObserver(this.mutationCallback),this.propertyObserver.observe(el.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(data){var evt=$.Event("select2-selecting",{val:this.id(data),object:data});return this.opts.element.trigger(evt),!evt.isDefaultPrevented()},triggerChange:function(details){details=details||{},details=$.extend({},details,{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(details),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return!0===this.enabledInterface},enableInterface:function(){var enabled=this._enabled&&!this._readonly,disabled=!enabled;return enabled!==this.enabledInterface&&(this.container.toggleClass("select2-container-disabled",disabled),this.close(),this.enabledInterface=enabled,!0)},enable:function(enabled){return enabled===undefined&&(enabled=!0),this._enabled!==enabled&&(this._enabled=enabled,this.opts.element.prop("disabled",!enabled),this.enableInterface(),!0)},readonly:function(enabled){return enabled===undefined&&(enabled=!1),this._readonly!==enabled&&(this._readonly=enabled,this.opts.element.prop("readonly",enabled),this.enableInterface(),!0)},opened:function(){return this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var bodyOffset,above,css,resultsListNode,$dropdown=this.dropdown,offset=this.container.offset(),height=this.container.outerHeight(!1),width=this.container.outerWidth(!1),dropHeight=$dropdown.outerHeight(!1),viewPortRight=$(window).scrollLeft()+$(window).width(),viewportBottom=$(window).scrollTop()+$(window).height(),dropTop=offset.top+height,dropLeft=offset.left,enoughRoomBelow=dropTop+dropHeight<=viewportBottom,enoughRoomAbove=offset.top-dropHeight>=this.body().scrollTop(),dropWidth=$dropdown.outerWidth(!1),enoughRoomOnRight=dropLeft+dropWidth<=viewPortRight,aboveNow=$dropdown.hasClass("select2-drop-above");this.opts.dropdownAutoWidth?(resultsListNode=$(".select2-results",$dropdown)[0],$dropdown.addClass("select2-drop-auto-width"),$dropdown.css("width",""),(dropWidth=$dropdown.outerWidth(!1)+(resultsListNode.scrollHeight===resultsListNode.clientHeight?0:scrollBarDimensions.width))>width?width=dropWidth:dropWidth=width,enoughRoomOnRight=dropLeft+dropWidth<=viewPortRight):this.container.removeClass("select2-drop-auto-width"),"static"!==this.body().css("position")&&(dropTop-=(bodyOffset=this.body().offset()).top,dropLeft-=bodyOffset.left),aboveNow?(above=!0,!enoughRoomAbove&&enoughRoomBelow&&(above=!1)):(above=!1,!enoughRoomBelow&&enoughRoomAbove&&(above=!0)),enoughRoomOnRight||(dropLeft=offset.left+width-dropWidth),above?(dropTop=offset.top-dropHeight,this.container.addClass("select2-drop-above"),$dropdown.addClass("select2-drop-above")):(this.container.removeClass("select2-drop-above"),$dropdown.removeClass("select2-drop-above")),css=$.extend({top:dropTop,left:dropLeft,width:width},evaluate(this.opts.dropdownCss)),$dropdown.css(css)},shouldOpen:function(){var event;return!this.opened()&&(!1!==this._enabled&&!0!==this._readonly&&(event=$.Event("select2-opening"),this.opts.element.trigger(event),!event.isDefaultPrevented()))},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return!!this.shouldOpen()&&(this.opening(),!0)},opening:function(){function _makeMaskCss(){return{width:Math.max(document.documentElement.scrollWidth,$(window).width()),height:Math.max(document.documentElement.scrollHeight,$(window).height())}}var mask,cid=this.containerId,scroll="scroll."+cid,resize="resize."+cid,orient="orientationchange."+cid;this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.clearDropdownAlignmentPreference(),this.dropdown[0]!==this.body().children().last()[0]&&this.dropdown.detach().appendTo(this.body()),0==(mask=$("#select2-drop-mask")).length&&((mask=$(document.createElement("div"))).attr("id","select2-drop-mask").attr("class","select2-drop-mask"),mask.hide(),mask.appendTo(this.body()),mask.on("mousedown touchstart",function(e){var self,dropdown=$("#select2-drop");dropdown.length>0&&((self=dropdown.data("select2")).opts.selectOnBlur&&self.selectHighlighted({noFocus:!0}),self.close(),e.preventDefault(),e.stopPropagation())})),this.dropdown.prev()[0]!==mask[0]&&this.dropdown.before(mask),$("#select2-drop").removeAttr("id"),this.dropdown.attr("id","select2-drop"),mask.css(_makeMaskCss()),mask.show(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active"),this.ensureHighlightVisible();var that=this;this.container.parents().add(window).each(function(){$(this).on(resize+" "+scroll+" "+orient,function(){$("#select2-drop-mask").css(_makeMaskCss()),that.positionDropdown()})})},close:function(){if(this.opened()){var cid=this.containerId,scroll="scroll."+cid,resize="resize."+cid,orient="orientationchange."+cid;this.container.parents().add(window).each(function(){$(this).off(scroll).off(resize).off(orient)}),this.clearDropdownAlignmentPreference(),$("#select2-drop-mask").hide(),this.dropdown.removeAttr("id"),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open"),this.results.empty(),this.clearSearch(),this.search.removeClass("select2-active"),this.opts.element.trigger($.Event("select2-close"))}},clearSearch:function(){},getMaximumSelectionSize:function(){return evaluate(this.opts.maximumSelectionSize)},ensureHighlightVisible:function(){var children,index,child,hb,rb,y,more,results=this.results;(index=this.highlight())<0||(0!=index?(children=this.findHighlightableChoices().find(".select2-result-label"),hb=(child=$(children[index])).offset().top+child.outerHeight(!0),index===children.length-1&&(more=results.find("li.select2-more-results")).length>0&&(hb=more.offset().top+more.outerHeight(!0)),hb>(rb=results.offset().top+results.outerHeight(!0))&&results.scrollTop(results.scrollTop()+(hb-rb)),(y=child.offset().top-results.offset().top)<0&&"none"!=child.css("display")&&results.scrollTop(results.scrollTop()+y)):results.scrollTop(0))},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-selected):not(.select2-disabled)")},moveHighlight:function(delta){for(var choices=this.findHighlightableChoices(),index=this.highlight();index>-1&&index<choices.length;){var choice=$(choices[index+=delta]);if(choice.hasClass("select2-result-selectable")&&!choice.hasClass("select2-disabled")&&!choice.hasClass("select2-selected")){this.highlight(index);break}}},highlight:function(index){var choice,data,choices=this.findHighlightableChoices();if(0===arguments.length)return indexOf(choices.filter(".select2-highlighted")[0],choices.get());index>=choices.length&&(index=choices.length-1),index<0&&(index=0),this.results.find(".select2-highlighted").removeClass("select2-highlighted"),(choice=$(choices[index])).addClass("select2-highlighted"),this.ensureHighlightVisible(),(data=choice.data("select2-data"))&&this.opts.element.trigger({type:"select2-highlight",val:this.id(data),choice:data})},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(event){var el=$(event.target).closest(".select2-result-selectable");if(el.length>0&&!el.is(".select2-highlighted")){var choices=this.findHighlightableChoices();this.highlight(choices.index(el))}else 0==el.length&&this.results.find(".select2-highlighted").removeClass("select2-highlighted")},loadMoreIfNeeded:function(){var results=this.results,more=results.find("li.select2-more-results"),page=this.resultsPage+1,self=this,term=this.search.val(),context=this.context;0!==more.length&&more.offset().top-results.offset().top-results.height()<=this.opts.loadMorePadding&&(more.addClass("select2-active"),this.opts.query({element:this.opts.element,term:term,page:page,context:context,matcher:this.opts.matcher,callback:this.bind(function(data){self.opened()&&(self.opts.populateResults.call(this,results,data.results,{term:term,page:page,context:context}),self.postprocessResults(data,!1,!1),!0===data.more?(more.detach().appendTo(results).text(self.opts.formatLoadMore(page+1)),window.setTimeout(function(){self.loadMoreIfNeeded()},10)):more.remove(),self.positionDropdown(),self.resultsPage=page,self.context=data.context)})}))},tokenize:function(){},updateResults:function(initial){function postRender(){results.scrollTop(0),search.removeClass("select2-active"),self.positionDropdown()}function render(html){results.html(html),postRender()}var data,input,search=this.search,results=this.results,opts=this.opts,self=this,term=search.val(),lastTerm=$.data(this.container,"select2-last-term");if((!0===initial||!lastTerm||!equal(term,lastTerm))&&($.data(this.container,"select2-last-term",term),!0===initial||!1!==this.showSearchInput&&this.opened())){var maxSelSize=this.getMaximumSelectionSize();if(!(maxSelSize>=1&&(data=this.data(),$.isArray(data)&&data.length>=maxSelSize&&checkFormatter(opts.formatSelectionTooBig,"formatSelectionTooBig"))))return search.val().length<opts.minimumInputLength?(checkFormatter(opts.formatInputTooShort,"formatInputTooShort")?render("<li class='select2-no-results'>"+opts.formatInputTooShort(search.val(),opts.minimumInputLength)+"</li>"):render(""),void(initial&&this.showSearch(!0))):void(opts.maximumInputLength&&search.val().length>opts.maximumInputLength?checkFormatter(opts.formatInputTooLong,"formatInputTooLong")?render("<li class='select2-no-results'>"+opts.formatInputTooLong(search.val(),opts.maximumInputLength)+"</li>"):render(""):(opts.formatSearching&&0===this.findHighlightableChoices().length&&render("<li class='select2-searching'>"+opts.formatSearching()+"</li>"),search.addClass("select2-active"),(input=this.tokenize())!=undefined&&null!=input&&search.val(input),this.resultsPage=1,opts.query({element:opts.element,term:search.val(),page:this.resultsPage,context:null,matcher:opts.matcher,callback:this.bind(function(data){var def;this.opened()?(this.context=data.context===undefined?null:data.context,this.opts.createSearchChoice&&""!==search.val()&&(def=this.opts.createSearchChoice.call(null,search.val(),data.results))!==undefined&&null!==def&&self.id(def)!==undefined&&null!==self.id(def)&&0===$(data.results).filter(function(){return equal(self.id(this),self.id(def))}).length&&this.opts.createSearchChoicePosition(data.results,def),0===data.results.length&&checkFormatter(opts.formatNoMatches,"formatNoMatches")?render("<li class='select2-no-results'>"+opts.formatNoMatches(search.val())+"</li>"):(results.empty(),self.opts.populateResults.call(this,results,data.results,{term:search.val(),page:this.resultsPage,context:null}),!0===data.more&&checkFormatter(opts.formatLoadMore,"formatLoadMore")&&(results.append("<li class='select2-more-results'>"+self.opts.escapeMarkup(opts.formatLoadMore(this.resultsPage))+"</li>"),window.setTimeout(function(){self.loadMoreIfNeeded()},10)),this.postprocessResults(data,initial),postRender(),this.opts.element.trigger({type:"select2-loaded",data:data}))):this.search.removeClass("select2-active")})})));render("<li class='select2-selection-limit'>"+opts.formatSelectionTooBig(maxSelSize)+"</li>")}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass("select2-container-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){focus(this.search)},selectHighlighted:function(options){var index=this.highlight(),data=this.results.find(".select2-highlighted").closest(".select2-result").data("select2-data");data&&(this.highlight(index),this.onSelect(data,options))},getPlaceholder:function(){return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder},initContainerWidth:function(){function resolveContainerWidth(){var style,attrs,matches,i,l;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"===this.opts.width||"resolve"===this.opts.width){if((style=this.opts.element.attr("style"))!==undefined)for(i=0,l=(attrs=style.split(";")).length;i<l;i+=1)if(null!==(matches=attrs[i].replace(/\s/g,"").match(/width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i))&&matches.length>=1)return matches[1];return(style=this.opts.element.css("width"))&&style.length>0?style:"resolve"===this.opts.width?0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px":null}return $.isFunction(this.opts.width)?this.opts.width():this.opts.width}var width=resolveContainerWidth.call(this);null!==width&&this.container.css("width",width)}}),SingleSelect2=clazz(AbstractSelect2,{createContainer:function(){return $(document.createElement("div")).attr({"class":"select2-container"}).html(["<a href='javascript:void(0)' onclick='return false;' class='select2-choice' tabindex='-1'>","   <span>&nbsp;</span><abbr class='select2-search-choice-close'></abbr>","   <div><b></b></div>","</a>","<input class='select2-focusser select2-offscreen' type='text'/>","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <input type='text' autocomplete='off' autocorrect='off' autocapitilize='off' spellcheck='false' class='select2-input'/>","   </div>","   <ul class='select2-results'>","   </ul>","</div>"].join(""))},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var el,range;this.parent.opening.apply(this,arguments),!1!==this.showSearchInput&&this.search.val(this.focusser.val()),this.search.focus(),(el=this.search.get(0)).createTextRange&&((range=el.createTextRange()).collapse(!1),range.select()),this.focusser.prop("disabled",!0).val(""),this.updateResults(!0),this.opts.element.trigger($.Event("select2-open"))},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.focusser.removeAttr("disabled"),this.focusser.focus())},focus:function(){this.opened()?this.close():(this.focusser.removeAttr("disabled"),this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.removeAttr("disabled"),this.focusser.focus()},initContainer:function(){var selection,container=this.container,dropdown=this.dropdown;this.showSearch(!1),this.selection=selection=container.find(".select2-choice"),this.focusser=container.find(".select2-focusser"),this.focusser.attr("id","s2id_autogen"+nextUid()),$("label[for='"+this.opts.element.attr("id")+"']").attr("for",this.focusser.attr("id")),
this.focusser.attr("tabindex",this.elementTabIndex),this.search.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled())if(e.which!==KEY.PAGE_UP&&e.which!==KEY.PAGE_DOWN)switch(e.which){case KEY.UP:case KEY.DOWN:return this.moveHighlight(e.which===KEY.UP?-1:1),void killEvent(e);case KEY.ENTER:return this.selectHighlighted(),void killEvent(e);case KEY.TAB:return void this.selectHighlighted({noFocus:!0});case KEY.ESC:return this.cancel(e),void killEvent(e)}else killEvent(e)})),this.search.on("blur",this.bind(function(){document.activeElement===this.body().get(0)&&window.setTimeout(this.bind(function(){this.search.focus()}),0)})),this.focusser.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()&&e.which!==KEY.TAB&&!KEY.isControl(e)&&!KEY.isFunctionKey(e)&&e.which!==KEY.ESC){if(!1!==this.opts.openOnEnter||e.which!==KEY.ENTER)return e.which==KEY.DOWN||e.which==KEY.UP||e.which==KEY.ENTER&&this.opts.openOnEnter?(this.open(),void killEvent(e)):e.which==KEY.DELETE||e.which==KEY.BACKSPACE?(this.opts.allowClear&&this.clear(),void killEvent(e)):void 0;killEvent(e)}})),installKeyUpChangeEvent(this.focusser),this.focusser.on("keyup-change input",this.bind(function(e){e.stopPropagation(),this.opened()||this.open()})),selection.on("mousedown","abbr",this.bind(function(e){this.isInterfaceEnabled()&&(this.clear(),killEventImmediately(e),this.close(),this.selection.focus())})),selection.on("mousedown",this.bind(function(e){this.container.hasClass("select2-container-active")||this.opts.element.trigger($.Event("select2-focus")),this.opened()?this.close():this.isInterfaceEnabled()&&this.open(),killEvent(e)})),dropdown.on("mousedown",this.bind(function(){this.search.focus()})),selection.on("focus",this.bind(function(e){killEvent(e)})),this.focusser.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger($.Event("select2-focus")),this.container.addClass("select2-container-active")})).on("blur",this.bind(function(){this.opened()||(this.container.removeClass("select2-container-active"),this.opts.element.trigger($.Event("select2-blur")))})),this.search.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger($.Event("select2-focus")),this.container.addClass("select2-container-active")})),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.setPlaceholder()},clear:function(triggerChange){var data=this.selection.data("select2-data");data&&(this.opts.element.val(""),this.selection.find("span").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),!1!==triggerChange&&(this.opts.element.trigger({type:"select2-removed",val:this.id(data),choice:data}),this.triggerChange({removed:data})))},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text())this.updateSelection([]),this.close(),this.setPlaceholder();else{var self=this;this.opts.initSelection.call(null,this.opts.element,function(selected){selected!==undefined&&null!==selected&&(self.updateSelection(selected),self.close(),self.setPlaceholder())})}},prepareOpts:function(){var opts=this.parent.prepareOpts.apply(this,arguments),self=this;return"select"===opts.element.get(0).tagName.toLowerCase()?opts.initSelection=function(element,callback){var selected=element.find(":selected");callback(self.optionToData(selected))}:"data"in opts&&(opts.initSelection=opts.initSelection||function(element,callback){var id=element.val(),match=null;opts.query({matcher:function(term,text,el){var is_match=equal(id,opts.id(el));return is_match&&(match=el),is_match},callback:$.isFunction(callback)?function(){callback(match)}:$.noop})}),opts},getPlaceholder:function(){return this.select&&""!==this.select.find("option").first().text()?undefined:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var placeholder=this.getPlaceholder();if(""===this.opts.element.val()&&placeholder!==undefined){if(this.select&&""!==this.select.find("option:first").text())return;this.selection.find("span").html(this.opts.escapeMarkup(placeholder)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear")}},postprocessResults:function(data,initial,noHighlightUpdate){var selected=0,self=this;if(this.findHighlightableChoices().each2(function(i,elm){if(equal(self.id(elm.data("select2-data")),self.opts.element.val()))return selected=i,!1}),!1!==noHighlightUpdate&&this.highlight(selected),!0===initial&&!1===this.showSearchInput){var min=this.opts.minimumResultsForSearch;min>=0&&this.showSearch(countResults(data.results)>=min)}},showSearch:function(showSearchInput){this.showSearchInput=showSearchInput,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!showSearchInput),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!showSearchInput),$(this.dropdown,this.container).toggleClass("select2-with-searchbox",showSearchInput)},onSelect:function(data,options){if(this.triggerSelect(data)){var old=this.opts.element.val(),oldData=this.data();this.opts.element.val(this.id(data)),this.updateSelection(data),this.opts.element.trigger({type:"select2-selected",val:this.id(data),choice:data}),this.close(),options&&options.noFocus||this.selection.focus(),equal(old,this.id(data))||this.triggerChange({added:data,removed:oldData})}},updateSelection:function(data){var formatted,container=this.selection.find("span");this.selection.data("select2-data",data),container.empty(),(formatted=this.opts.formatSelection(data,container))!==undefined&&container.append(this.opts.escapeMarkup(formatted)),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==undefined&&this.container.addClass("select2-allowclear")},val:function(){var val,triggerChange=!1,data=null,self=this,oldData=this.data();if(0===arguments.length)return this.opts.element.val();if(val=arguments[0],arguments.length>1&&(triggerChange=arguments[1]),this.select)this.select.val(val).find(":selected").each2(function(i,elm){return data=self.optionToData(elm),!1}),this.updateSelection(data),this.setPlaceholder(),triggerChange&&this.triggerChange({added:data,removed:oldData});else{if(this.opts.initSelection===undefined)throw new Error("cannot call val() if initSelection() is not defined");if(!val&&0!==val)return void this.clear(triggerChange);this.opts.element.val(val),this.opts.initSelection(this.opts.element,function(data){self.opts.element.val(data?self.id(data):""),self.updateSelection(data),self.setPlaceholder(),triggerChange&&self.triggerChange({added:data,removed:oldData})})}},clearSearch:function(){this.search.val(""),this.focusser.val("")},data:function(value,triggerChange){var data;if(0===arguments.length)return(data=this.selection.data("select2-data"))==undefined&&(data=null),data;value&&""!==value?(data=this.data(),this.opts.element.val(value?this.id(value):""),this.updateSelection(value),triggerChange&&this.triggerChange({added:value,removed:data})):this.clear(triggerChange)}}),MultiSelect2=clazz(AbstractSelect2,{createContainer:function(){return $(document.createElement("div")).attr({"class":"select2-container select2-container-multi"}).html(["    <ul class='select2-choices'>","  <li class='select2-search-field'>","    <input type='text' autocomplete='off' autocorrect='off' autocapitilize='off' spellcheck='false' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""))},prepareOpts:function(){var opts=this.parent.prepareOpts.apply(this,arguments),self=this;return"select"===opts.element.get(0).tagName.toLowerCase()?opts.initSelection=function(element,callback){var data=[];element.find(":selected").each2(function(i,elm){data.push(self.optionToData(elm))}),callback(data)}:"data"in opts&&(opts.initSelection=opts.initSelection||function(element,callback){var ids=splitVal(element.val(),opts.separator),matches=[];opts.query({matcher:function(term,text,el){var is_match=$.grep(ids,function(id){return equal(id,opts.id(el))}).length;return is_match&&matches.push(el),is_match},callback:$.isFunction(callback)?function(){for(var ordered=[],i=0;i<ids.length;i++)for(var id=ids[i],j=0;j<matches.length;j++){var match=matches[j];if(equal(id,opts.id(match))){ordered.push(match),matches.splice(j,1);break}}callback(ordered)}:$.noop})}),opts},selectChoice:function(choice){var selected=this.container.find(".select2-search-choice-focus");selected.length&&choice&&choice[0]==selected[0]||(selected.length&&this.opts.element.trigger("choice-deselected",selected),selected.removeClass("select2-search-choice-focus"),choice&&choice.length&&(this.close(),choice.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",choice)))},initContainer:function(){var selection,selector=".select2-choices";this.searchContainer=this.container.find(".select2-search-field"),this.selection=selection=this.container.find(selector);var _this=this;this.selection.on("mousedown",".select2-search-choice",function(){_this.search[0].focus(),_this.selectChoice($(this))}),this.search.attr("id","s2id_autogen"+nextUid()),$("label[for='"+this.opts.element.attr("id")+"']").attr("for",this.search.attr("id")),this.search.on("input paste",this.bind(function(){this.isInterfaceEnabled()&&(this.opened()||this.open())})),this.search.attr("tabindex",this.elementTabIndex),this.keydowns=0,this.search.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()){++this.keydowns;var selected=selection.find(".select2-search-choice-focus"),prev=selected.prev(".select2-search-choice:not(.select2-locked)"),next=selected.next(".select2-search-choice:not(.select2-locked)"),pos=getCursorInfo(this.search);if(selected.length&&(e.which==KEY.LEFT||e.which==KEY.RIGHT||e.which==KEY.BACKSPACE||e.which==KEY.DELETE||e.which==KEY.ENTER)){var selectedChoice=selected;return e.which==KEY.LEFT&&prev.length?selectedChoice=prev:e.which==KEY.RIGHT?selectedChoice=next.length?next:null:e.which===KEY.BACKSPACE?(this.unselect(selected.first()),this.search.width(10),selectedChoice=prev.length?prev:next):e.which==KEY.DELETE?(this.unselect(selected.first()),this.search.width(10),selectedChoice=next.length?next:null):e.which==KEY.ENTER&&(selectedChoice=null),this.selectChoice(selectedChoice),killEvent(e),void(selectedChoice&&selectedChoice.length||this.open())}if((e.which===KEY.BACKSPACE&&1==this.keydowns||e.which==KEY.LEFT)&&0==pos.offset&&!pos.length)return this.selectChoice(selection.find(".select2-search-choice:not(.select2-locked)").last()),void killEvent(e);if(this.selectChoice(null),this.opened())switch(e.which){case KEY.UP:case KEY.DOWN:return this.moveHighlight(e.which===KEY.UP?-1:1),void killEvent(e);case KEY.ENTER:return this.selectHighlighted(),void killEvent(e);case KEY.TAB:return void this.selectHighlighted({noFocus:!0});case KEY.ESC:return this.cancel(e),void killEvent(e)}if(e.which!==KEY.TAB&&!KEY.isControl(e)&&!KEY.isFunctionKey(e)&&e.which!==KEY.BACKSPACE&&e.which!==KEY.ESC){if(e.which===KEY.ENTER){if(!1===this.opts.openOnEnter)return;if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return}this.open(),e.which!==KEY.PAGE_UP&&e.which!==KEY.PAGE_DOWN||killEvent(e),e.which===KEY.ENTER&&killEvent(e)}}})),this.search.on("keyup",this.bind(function(){this.keydowns=0,this.resizeSearch()})),this.search.on("blur",this.bind(function(e){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.selectChoice(null),this.opened()||this.clearSearch(),e.stopImmediatePropagation(),this.opts.element.trigger($.Event("select2-blur"))})),this.container.on("mousedown",selector,this.bind(function(e){this.isInterfaceEnabled()&&($(e.target).closest(".select2-search-choice").length>0||(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger($.Event("select2-focus")),this.open(),this.focusSearch(),e.preventDefault()))})),this.container.on("focus",selector,this.bind(function(){this.isInterfaceEnabled()&&(this.container.hasClass("select2-container-active")||this.opts.element.trigger($.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())})),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),this.select||""!==this.opts.element.val()){var self=this;this.opts.initSelection.call(null,this.opts.element,function(data){data!==undefined&&null!==data&&(self.updateSelection(data),self.close(),self.clearSearch())})}},clearSearch:function(){var placeholder=this.getPlaceholder(),maxWidth=this.getMaxSearchWidth();placeholder!==undefined&&0===this.getVal().length&&!1===this.search.hasClass("select2-focused")?(this.search.val(placeholder).addClass("select2-default"),this.search.width(maxWidth>0?maxWidth:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder(),this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),this.updateResults(!0),this.search.focus(),this.opts.element.trigger($.Event("select2-open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(data){var ids=[],filtered=[],self=this;$(data).each(function(){indexOf(self.id(this),ids)<0&&(ids.push(self.id(this)),filtered.push(this))}),data=filtered,this.selection.find(".select2-search-choice").remove(),$(data).each(function(){self.addSelectedChoice(this)}),self.postprocessResults()},tokenize:function(){var input=this.search.val();null!=(input=this.opts.tokenizer(input,this.data(),this.bind(this.onSelect),this.opts))&&input!=undefined&&(this.search.val(input),input.length>0&&this.open())},onSelect:function(data,options){this.triggerSelect(data)&&(this.addSelectedChoice(data),this.opts.element.trigger({type:"selected",val:this.id(data),choice:data}),!this.select&&this.opts.closeOnSelect||this.postprocessResults(),this.opts.closeOnSelect?(this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()&&this.updateResults(!0),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:data}),options&&options.noFocus||this.focusSearch())},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(data){var formatted,enableChoice=!data.locked,enabledItem=$("<li class='select2-search-choice'>    <div></div>    <a href='#' onclick='return false;' class='select2-search-choice-close' tabindex='-1'></a></li>"),disabledItem=$("<li class='select2-search-choice select2-locked'><div></div></li>"),choice=enableChoice?enabledItem:disabledItem,id=this.id(data),val=this.getVal();(formatted=this.opts.formatSelection(data,choice.find("div")))!=undefined&&choice.find("div").replaceWith("<div title='"+this.opts.escapeMarkup(formatted)+"'>"+this.opts.escapeMarkup(formatted)+"</div>"),enableChoice&&choice.find(".select2-search-choice-close").on("mousedown",killEvent).on("click dblclick",this.bind(function(e){this.isInterfaceEnabled()&&($(e.target).closest(".select2-search-choice").fadeOut("fast",this.bind(function(){this.unselect($(e.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),this.close(),this.focusSearch()})).dequeue(),killEvent(e))})).on("focus",this.bind(function(){this.isInterfaceEnabled()&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))})),choice.data("select2-data",data),choice.insertBefore(this.searchContainer),val.push(id),this.setVal(val)},unselect:function(selected){var data,index,val=this.getVal();if(0===(selected=selected.closest(".select2-search-choice")).length)throw"Invalid argument: "+selected+". Must be .select2-search-choice";(data=selected.data("select2-data"))&&((index=indexOf(this.id(data),val))>=0&&(val.splice(index,1),this.setVal(val),this.select&&this.postprocessResults()),selected.remove(),this.opts.element.trigger({type:"removed",val:this.id(data),choice:data}),this.triggerChange({removed:data}))},postprocessResults:function(data,initial,noHighlightUpdate){var val=this.getVal(),choices=this.results.find(".select2-result"),compound=this.results.find(".select2-result-with-children"),self=this;choices.each2(function(i,choice){indexOf(self.id(choice.data("select2-data")),val)>=0&&(choice.addClass("select2-selected"),choice.find(".select2-result-selectable").addClass("select2-selected"))}),compound.each2(function(i,choice){choice.is(".select2-result-selectable")||0!==choice.find(".select2-result-selectable:not(.select2-selected)").length||choice.addClass("select2-selected")}),-1==this.highlight()&&!1!==noHighlightUpdate&&self.highlight(0),!this.opts.createSearchChoice&&!choices.filter(".select2-result:not(.select2-selected)").length>0&&this.results.append("<li class='select2-no-results'>"+self.opts.formatNoMatches(self.search.val())+"</li>")},getMaxSearchWidth:function(){return this.selection.width()-getSideBorderPadding(this.search)},resizeSearch:function(){var minimumWidth,left,maxWidth,searchWidth,sideBorderPadding=getSideBorderPadding(this.search);minimumWidth=measureTextWidth(this.search)+10,left=this.search.offset().left,(searchWidth=(maxWidth=this.selection.width())-(left-this.selection.offset().left)-sideBorderPadding)<minimumWidth&&(searchWidth=maxWidth-sideBorderPadding),searchWidth<40&&(searchWidth=maxWidth-sideBorderPadding),searchWidth<=0&&(searchWidth=minimumWidth),this.search.width(searchWidth)},getVal:function(){var val;return this.select?null===(val=this.select.val())?[]:val:splitVal(val=this.opts.element.val(),this.opts.separator)},setVal:function(val){var unique;this.select?this.select.val(val):(unique=[],$(val).each(function(){indexOf(this,unique)<0&&unique.push(this)}),this.opts.element.val(0===unique.length?"":unique.join(this.opts.separator)))},buildChangeDetails:function(old,current){current=current.slice(0),old=old.slice(0);for(var i=0;i<current.length;i++)for(var j=0;j<old.length;j++)equal(this.opts.id(current[i]),this.opts.id(old[j]))&&(current.splice(i,1),i--,old.splice(j,1),j--);return{added:current,removed:old}},val:function(val,triggerChange){var oldData,self=this;if(0===arguments.length)return this.getVal();if((oldData=this.data()).length||(oldData=[]),!val&&0!==val)return this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),void(triggerChange&&this.triggerChange({added:this.data(),removed:oldData}));if(this.setVal(val),this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),triggerChange&&this.triggerChange(this.buildChangeDetails(oldData,this.data()));else{if(this.opts.initSelection===undefined)throw new Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,function(data){var ids=$(data).map(self.id);self.setVal(ids),self.updateSelection(data),self.clearSearch(),triggerChange&&self.triggerChange(this.buildChangeDetails(oldData,this.data()))})}this.clearSearch()},onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var val=[],self=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each(function(){val.push(self.opts.id($(this).data("select2-data")))}),this.setVal(val),this.triggerChange()},data:function(values,triggerChange){var ids,old,self=this;if(0===arguments.length)return this.selection.find(".select2-search-choice").map(function(){return $(this).data("select2-data")}).get();old=this.data(),values||(values=[]),ids=$.map(values,function(e){return self.opts.id(e)}),this.setVal(ids),this.updateSelection(values),this.clearSearch(),triggerChange&&this.triggerChange(this.buildChangeDetails(old,this.data()))}}),$.fn.select2=function(){var opts,select2,value,multiple,args=Array.prototype.slice.call(arguments,0),allowedMethods=["val","destroy","opened","open","close","focus","isFocused","container","onSortStart","onSortEnd","enable","readonly","positionDropdown","data"],valueMethods=["val","opened","isFocused","container","data"];return this.each(function(){if(0===args.length||"object"==typeof args[0])(opts=0===args.length?{}:$.extend({},args[0])).element=$(this),"select"===opts.element.get(0).tagName.toLowerCase()?multiple=opts.element.prop("multiple"):(multiple=opts.multiple||!1,"tags"in opts&&(opts.multiple=multiple=!0)),(select2=multiple?new MultiSelect2:new SingleSelect2).init(opts);else{if("string"!=typeof args[0])throw"Invalid arguments to select2 plugin: "+args;if(indexOf(args[0],allowedMethods)<0)throw"Unknown method: "+args[0];if(value=undefined,(select2=$(this).data("select2"))===undefined)return;if(value="container"===args[0]?select2.container:select2[args[0]].apply(select2,args.slice(1)),indexOf(args[0],valueMethods)>=0)return!1}}),value===undefined?this:value},$.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(result,container,query,escapeMarkup){var markup=[];return markMatch(result.text,query.term,markup,escapeMarkup),markup.join("")},formatSelection:function(data){return data?data.text:undefined},sortResults:function(results){return results},formatResultCssClass:function(){return undefined},formatNoMatches:function(){return"No matches found"},formatInputTooShort:function(input,min){var n=min-input.length;return"Please enter "+n+" more character"+(1==n?"":"s")},formatInputTooLong:function(input,max){var n=input.length-max;return"Please delete "+n+" character"+(1==n?"":"s")},formatSelectionTooBig:function(limit){return"You can only select "+limit+" item"+(1==limit?"":"s")},formatLoadMore:function(){return"Loading more results..."},formatSearching:function(){return"Searching..."},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(e){return e.id},matcher:function(term,text){return(""+text).toUpperCase().indexOf((""+term).toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:defaultTokenizer,escapeMarkup:function(markup){var replace_map={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(markup).replace(/[&<>"'\/\\]/g,function(match){return replace_map[match]})},blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(c){return c},adaptDropdownCssClass:function(){return null},createSearchChoicePosition:"top"},$.fn.select2.ajaxDefaults={transport:$.ajax,params:{type:"GET",cache:!1,dataType:"json"}},window.Select2={query:{ajax:ajax,local:local,tags:tags},util:{debounce:debounce,markMatch:markMatch},"class":{abstract:AbstractSelect2,single:SingleSelect2,multi:MultiSelect2}}}}(jQuery),function($){var methodMap={create:"POST",update:"PUT","delete":"DELETE",read:"GET"},getUrl=function(object){return object&&object.url?_.isFunction(object.url)?object.url():object.url:null},urlError=function(){throw new Error("A 'url' property or function must be specified")};Backbone.sync=function(method,model,options){var type=methodMap[method],params=_.extend({type:type,dataType:"json",beforeSend:function(xhr){if(!options.noCSRF){var token=$('meta[name="csrf-token"]').attr("content");token&&xhr.setRequestHeader("X-CSRF-Token",token)}model.trigger("sync:start")}},options);if(params.url||(params.url=getUrl(model)||urlError()),!params.data&&model&&("create"==method||"update"==method)){params.contentType="application/json";var data={};model.paramRoot?data[model.paramRoot]=model.toJSON():data=model.toJSON(),params.data=JSON.stringify(data)}"GET"!==params.type&&(params.processData=!1);var complete=options.complete;return params.complete=function(jqXHR,textStatus){model.trigger("sync:end"),complete&&complete(jqXHR,textStatus)},$.ajax(params)}}(jQuery),
//! moment.js
//! version : 2.10.6
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory():"function"==typeof define&&define.amd?define(factory):global.moment=factory()}(this,function(){"use strict";function utils_hooks__hooks(){return hookCallback.apply(null,arguments)}function setHookCallback(callback){hookCallback=callback}function isArray(input){return"[object Array]"===Object.prototype.toString.call(input)}function isDate(input){return input instanceof Date||"[object Date]"===Object.prototype.toString.call(input)}function map(arr,fn){var i,res=[];for(i=0;i<arr.length;++i)res.push(fn(arr[i],i));return res}function hasOwnProp(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function extend(a,b){for(var i in b)hasOwnProp(b,i)&&(a[i]=b[i]);return hasOwnProp(b,"toString")&&(a.toString=b.toString),hasOwnProp(b,"valueOf")&&(a.valueOf=b.valueOf),a}function create_utc__createUTC(input,format,locale,strict){return createLocalOrUTC(input,format,locale,strict,!0).utc()}function defaultParsingFlags(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function getParsingFlags(m){return null==m._pf&&(m._pf=defaultParsingFlags()),m._pf}function valid__isValid(m){if(null==m._isValid){var flags=getParsingFlags(m);m._isValid=!(isNaN(m._d.getTime())||!(flags.overflow<0)||flags.empty||flags.invalidMonth||flags.invalidWeekday||flags.nullInput||flags.invalidFormat||flags.userInvalidated),m._strict&&(m._isValid=m._isValid&&0===flags.charsLeftOver&&0===flags.unusedTokens.length&&flags.bigHour===undefined)}return m._isValid}function valid__createInvalid(flags){var m=create_utc__createUTC(NaN);return null!=flags?extend(getParsingFlags(m),flags):getParsingFlags(m).userInvalidated=!0,m}function copyConfig(to,from){var i,prop,val;if("undefined"!=typeof from._isAMomentObject&&(to._isAMomentObject=from._isAMomentObject),"undefined"!=typeof from._i&&(to._i=from._i),"undefined"!=typeof from._f&&(to._f=from._f),"undefined"!=typeof from._l&&(to._l=from._l),"undefined"!=typeof from._strict&&(to._strict=from._strict),"undefined"!=typeof from._tzm&&(to._tzm=from._tzm),"undefined"!=typeof from._isUTC&&(to._isUTC=from._isUTC),"undefined"!=typeof from._offset&&(to._offset=from._offset),"undefined"!=typeof from._pf&&(to._pf=getParsingFlags(from)),"undefined"!=typeof from._locale&&(to._locale=from._locale),momentProperties.length>0)for(i in momentProperties)void 0!==(val=from[prop=momentProperties[i]])&&(to[prop]=val);return to}function Moment(config){copyConfig(this,config),this._d=new Date(null!=config._d?config._d.getTime():NaN),!1===updateInProgress&&(updateInProgress=!0,utils_hooks__hooks.updateOffset(this),updateInProgress=!1)}function isMoment(obj){return obj instanceof Moment||null!=obj&&null!=obj._isAMomentObject}function absFloor(number){return number<0?Math.ceil(number):Math.floor(number)}function toInt(argumentForCoercion){var coercedNumber=+argumentForCoercion,value=0;return 0!==coercedNumber&&isFinite(coercedNumber)&&(value=absFloor(coercedNumber)),value}function compareArrays(array1,array2,dontConvert){var i,len=Math.min(array1.length,array2.length),lengthDiff=Math.abs(array1.length-array2.length),diffs=0;for(i=0;i<len;i++)(dontConvert&&array1[i]!==array2[i]||!dontConvert&&toInt(array1[i])!==toInt(array2[i]))&&diffs++;return diffs+lengthDiff}function Locale(){}function normalizeLocale(key){return key?key.toLowerCase().replace("_","-"):key}function chooseLocale(names){for(var j,next,locale,split,i=0;i<names.length;){for(j=(split=normalizeLocale(names[i]).split("-")).length,next=(next=normalizeLocale(names[i+1]))?next.split("-"):null;j>0;){if(locale=loadLocale(split.slice(0,j).join("-")))return locale;if(next&&next.length>=j&&compareArrays(split,next,!0)>=j-1)break;j--}i++}return null}function loadLocale(name){var oldLocale=null;if(!locales[name]&&"undefined"!=typeof module&&module&&module.exports)try{oldLocale=globalLocale._abbr,require("./locale/"+name),locale_locales__getSetGlobalLocale(oldLocale)}catch(e){}return locales[name]}function locale_locales__getSetGlobalLocale(key,values){var data;return key&&(data=void 0===values?locale_locales__getLocale(key):defineLocale(key,values))&&(globalLocale=data),globalLocale._abbr}function defineLocale(name,values){return null!==values?(values.abbr=name,locales[name]=locales[name]||new Locale,locales[name].set(values),locale_locales__getSetGlobalLocale(name),locales[name]):(delete locales[name],null)}function locale_locales__getLocale(key){var locale;if(key&&key._locale&&key._locale._abbr&&(key=key._locale._abbr),!key)return globalLocale;if(!isArray(key)){if(locale=loadLocale(key))return locale;key=[key]}return chooseLocale(key)}function addUnitAlias(unit,shorthand){var lowerCase=unit.toLowerCase();aliases[lowerCase]=aliases[lowerCase+"s"]=aliases[shorthand]=unit}function normalizeUnits(units){return"string"==typeof units?aliases[units]||aliases[units.toLowerCase()]:undefined}function normalizeObjectUnits(inputObject){var normalizedProp,prop,normalizedInput={};for(prop in inputObject)hasOwnProp(inputObject,prop)&&(normalizedProp=normalizeUnits(prop))&&(normalizedInput[normalizedProp]=inputObject[prop]);return normalizedInput}function makeGetSet(unit,keepTime){return function(value){return null!=value?(get_set__set(this,unit,value),utils_hooks__hooks.updateOffset(this,keepTime),this):get_set__get(this,unit)}}function get_set__get(mom,unit){return mom._d["get"+(mom._isUTC?"UTC":"")+unit]()}function get_set__set(mom,unit,value){return mom._d["set"+(mom._isUTC?"UTC":"")+unit](value)}function getSet(units,value){var unit;if("object"==typeof units)for(unit in units)this.set(unit,units[unit]);else if("function"==typeof this[units=normalizeUnits(units)])return this[units](value);return this}function zeroFill(number,targetLength,forceSign){var absNumber=""+Math.abs(number),zerosToFill=targetLength-absNumber.length;return(number>=0?forceSign?"+":"":"-")+Math.pow(10,Math.max(0,zerosToFill)).toString().substr(1)+absNumber}function addFormatToken(token,padded,ordinal,callback){var func=callback;"string"==typeof callback&&(func=function(){return this[callback]()}),token&&(formatTokenFunctions[token]=func),padded&&(formatTokenFunctions[padded[0]]=function(){return zeroFill(func.apply(this,arguments),padded[1],padded[2])}),ordinal&&(formatTokenFunctions[ordinal]=function(){return this.localeData().ordinal(func.apply(this,arguments),token)})}function removeFormattingTokens(input){return input.match(/\[[\s\S]/)?input.replace(/^\[|\]$/g,""):input.replace(/\\/g,"")}function makeFormatFunction(format){var i,length,array=format.match(formattingTokens);for(i=0,length=array.length;i<length;i++)formatTokenFunctions[array[i]]?array[i]=formatTokenFunctions[array[i]]:array[i]=removeFormattingTokens(array[i]);return function(mom){var output="";for(i=0;i<length;i++)output+=array[i]instanceof Function?array[i].call(mom,format):array[i];return output}}function formatMoment(m,format){return m.isValid()?(format=expandFormat(format,m.localeData()),formatFunctions[format]=formatFunctions[format]||makeFormatFunction(format),formatFunctions[format](m)):m.localeData().invalidDate()}function expandFormat(format,locale){function replaceLongDateFormatTokens(input){return locale.longDateFormat(input)||input}var i=5;for(localFormattingTokens.lastIndex=0;i>=0&&localFormattingTokens.test(format);)format=format.replace(localFormattingTokens,replaceLongDateFormatTokens),localFormattingTokens.lastIndex=0,i-=1;return format}function isFunction(sth){return"function"==typeof sth&&"[object Function]"===Object.prototype.toString.call(sth)}function addRegexToken(token,regex,strictRegex){regexes[token]=isFunction(regex)?regex:function(isStrict){return isStrict&&strictRegex?strictRegex:regex}}function getParseRegexForToken(token,config){return hasOwnProp(regexes,token)?regexes[token](config._strict,config._locale):new RegExp(unescapeFormat(token))}function unescapeFormat(s){return s.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(matched,p1,p2,p3,p4){return p1||p2||p3||p4}).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function addParseToken(token,callback){var i,func=callback;for("string"==typeof token&&(token=[token]),"number"==typeof callback&&(func=function(input,array){array[callback]=toInt(input)}),i=0;i<token.length;i++)tokens[token[i]]=func}function addWeekParseToken(token,callback){addParseToken(token,function(input,array,config,token){config._w=config._w||{},callback(input,config._w,config,token)})}function addTimeToArrayFromToken(token,input,config){null!=input&&hasOwnProp(tokens,token)&&tokens[token](input,config._a,config,token)}function daysInMonth(year,month){return new Date(Date.UTC(year,month+1,0)).getUTCDate()}function localeMonths(m){return this._months[m.month()]}function localeMonthsShort(m){return this._monthsShort[m.month()]}function localeMonthsParse(monthName,format,strict){var i,mom,regex;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;i<12;i++){if(mom=create_utc__createUTC([2e3,i]),strict&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(mom,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(mom,"").replace(".","")+"$","i")),strict||this._monthsParse[i]||(regex="^"+this.months(mom,"")+"|^"+this.monthsShort(mom,""),this._monthsParse[i]=new RegExp(regex.replace(".",""),"i")),strict&&"MMMM"===format&&this._longMonthsParse[i].test(monthName))return i;if(strict&&"MMM"===format&&this._shortMonthsParse[i].test(monthName))return i;if(!strict&&this._monthsParse[i].test(monthName))return i}}function setMonth(mom,value){var dayOfMonth;return"string"==typeof value&&"number"!=typeof(value=mom.localeData().monthsParse(value))?mom:(dayOfMonth=Math.min(mom.date(),daysInMonth(mom.year(),value)),mom._d["set"+(mom._isUTC?"UTC":"")+"Month"](value,dayOfMonth),mom)}function getSetMonth(value){return null!=value?(setMonth(this,value),utils_hooks__hooks.updateOffset(this,!0),this):get_set__get(this,"Month")}function getDaysInMonth(){return daysInMonth(this.year(),this.month())}function checkOverflow(m){var overflow,a=m._a;return a&&-2===getParsingFlags(m).overflow&&(overflow=a[MONTH]<0||a[MONTH]>11?MONTH:a[DATE]<1||a[DATE]>daysInMonth(a[YEAR],a[MONTH])?DATE:a[HOUR]<0||a[HOUR]>24||24===a[HOUR]&&(0!==a[MINUTE]||0!==a[SECOND]||0!==a[MILLISECOND])?HOUR:a[MINUTE]<0||a[MINUTE]>59?MINUTE:a[SECOND]<0||a[SECOND]>59?SECOND:a[MILLISECOND]<0||a[MILLISECOND]>999?MILLISECOND:-1,getParsingFlags(m)._overflowDayOfYear&&(overflow<YEAR||overflow>DATE)&&(overflow=DATE),getParsingFlags(m).overflow=overflow),m}function warn(msg){!1===utils_hooks__hooks.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+msg)}function deprecate(msg,fn){var firstTime=!0;return extend(function(){return firstTime&&(warn(msg+"\n"+(new Error).stack),firstTime=!1),fn.apply(this,arguments)},fn)}function deprecateSimple(name,msg){deprecations[name]||(warn(msg),deprecations[name]=!0)}function configFromISO(config){var i,l,string=config._i,match=from_string__isoRegex.exec(string);if(match){for(getParsingFlags(config).iso=!0,i=0,l=isoDates.length;i<l;i++)if(isoDates[i][1].exec(string)){config._f=isoDates[i][0];break}for(i=0,l=isoTimes.length;i<l;i++)if(isoTimes[i][1].exec(string)){config._f+=(match[6]||" ")+isoTimes[i][0];break}string.match(matchOffset)&&(config._f+="Z"),configFromStringAndFormat(config)}else config._isValid=!1}function configFromString(config){var matched=aspNetJsonRegex.exec(config._i);null===matched?(configFromISO(config),!1===config._isValid&&(delete config._isValid,utils_hooks__hooks.createFromInputFallback(config))):config._d=new Date(+matched[1])}function createDate(y,m,d,h,M,s,ms){var date=new Date(y,m,d,h,M,s,ms);return y<1970&&date.setFullYear(y),date}function createUTCDate(y){var date=new Date(Date.UTC.apply(null,arguments));return y<1970&&date.setUTCFullYear(y),date}function daysInYear(year){return isLeapYear(year)?366:365}function isLeapYear(year){return year%4==0&&year%100!=0||year%400==0}function getIsLeapYear(){return isLeapYear(this.year())}function weekOfYear(mom,firstDayOfWeek,firstDayOfWeekOfYear){var adjustedMoment,end=firstDayOfWeekOfYear-firstDayOfWeek,daysToDayOfWeek=firstDayOfWeekOfYear-mom.day();return daysToDayOfWeek>end&&(daysToDayOfWeek-=7),daysToDayOfWeek<end-7&&(daysToDayOfWeek+=7),adjustedMoment=local__createLocal(mom).add(daysToDayOfWeek,"d"),{week:Math.ceil(adjustedMoment.dayOfYear()/7),year:adjustedMoment.year()}}function localeWeek(mom){return weekOfYear(mom,this._week.dow,this._week.doy).week}function localeFirstDayOfWeek(){return this._week.dow}function localeFirstDayOfYear(){return this._week.doy}function getSetWeek(input){var week=this.localeData().week(this);return null==input?week:this.add(7*(input-week),"d")}function getSetISOWeek(input){var week=weekOfYear(this,1,4).week;return null==input?week:this.add(7*(input-week),"d")}function dayOfYearFromWeeks(year,week,weekday,firstDayOfWeekOfYear,firstDayOfWeek){var dayOfYear,week1Jan=6+firstDayOfWeek-firstDayOfWeekOfYear,d=createUTCDate(year,0,1+week1Jan).getUTCDay();return d<firstDayOfWeek&&(d+=7),{year:(dayOfYear=1+week1Jan+7*(week-1)-d+(weekday=null!=weekday?1*weekday:firstDayOfWeek))>0?year:year-1,dayOfYear:dayOfYear>0?dayOfYear:daysInYear(year-1)+dayOfYear}}function getSetDayOfYear(input){var dayOfYear=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==input?dayOfYear:this.add(input-dayOfYear,"d")}function defaults(a,b,c){return null!=a?a:null!=b?b:c}function currentDateArray(config){var now=new Date;return config._useUTC?[now.getUTCFullYear(),now.getUTCMonth(),now.getUTCDate()]:[now.getFullYear(),now.getMonth(),now.getDate()]}function configFromArray(config){var i,date,currentDate,yearToUse,input=[];if(!config._d){for(currentDate=currentDateArray(config),config._w&&null==config._a[DATE]&&null==config._a[MONTH]&&dayOfYearFromWeekInfo(config),config._dayOfYear&&(yearToUse=defaults(config._a[YEAR],currentDate[YEAR]),config._dayOfYear>daysInYear(yearToUse)&&(getParsingFlags(config)._overflowDayOfYear=!0),date=createUTCDate(yearToUse,0,config._dayOfYear),config._a[MONTH]=date.getUTCMonth(),config._a[DATE]=date.getUTCDate()),i=0;i<3&&null==config._a[i];++i)config._a[i]=input[i]=currentDate[i];for(;i<7;i++)config._a[i]=input[i]=null==config._a[i]?2===i?1:0:config._a[i];24===config._a[HOUR]&&0===config._a[MINUTE]&&0===config._a[SECOND]&&0===config._a[MILLISECOND]&&(config._nextDay=!0,config._a[HOUR]=0),config._d=(config._useUTC?createUTCDate:createDate).apply(null,input),null!=config._tzm&&config._d.setUTCMinutes(config._d.getUTCMinutes()-config._tzm),config._nextDay&&(config._a[HOUR]=24)}}function dayOfYearFromWeekInfo(config){var w,weekYear,week,weekday,dow,doy,temp;null!=(w=config._w).GG||null!=w.W||null!=w.E?(dow=1,doy=4,weekYear=defaults(w.GG,config._a[YEAR],weekOfYear(local__createLocal(),1,4).year),week=defaults(w.W,1),weekday=defaults(w.E,1)):(dow=config._locale._week.dow,doy=config._locale._week.doy,weekYear=defaults(w.gg,config._a[YEAR],weekOfYear(local__createLocal(),dow,doy).year),week=defaults(w.w,1),null!=w.d?(weekday=w.d)<dow&&++week:weekday=null!=w.e?w.e+dow:dow),temp=dayOfYearFromWeeks(weekYear,week,weekday,doy,dow),config._a[YEAR]=temp.year,config._dayOfYear=temp.dayOfYear}function configFromStringAndFormat(config){if(config._f!==utils_hooks__hooks.ISO_8601){config._a=[],getParsingFlags(config).empty=!0;var i,parsedInput,tokens,token,skipped,string=""+config._i,stringLength=string.length,totalParsedInputLength=0;for(tokens=expandFormat(config._f,config._locale).match(formattingTokens)||[],i=0;i<tokens.length;i++)token=tokens[i],(parsedInput=(string.match(getParseRegexForToken(token,config))||[])[0])&&((skipped=string.substr(0,string.indexOf(parsedInput))).length>0&&getParsingFlags(config).unusedInput.push(skipped),string=string.slice(string.indexOf(parsedInput)+parsedInput.length),totalParsedInputLength+=parsedInput.length),formatTokenFunctions[token]?(parsedInput?getParsingFlags(config).empty=!1:getParsingFlags(config).unusedTokens.push(token),addTimeToArrayFromToken(token,parsedInput,config)):config._strict&&!parsedInput&&getParsingFlags(config).unusedTokens.push(token);getParsingFlags(config).charsLeftOver=stringLength-totalParsedInputLength,string.length>0&&getParsingFlags(config).unusedInput.push(string),!0===getParsingFlags(config).bigHour&&config._a[HOUR]<=12&&config._a[HOUR]>0&&(getParsingFlags(config).bigHour=undefined),config._a[HOUR]=meridiemFixWrap(config._locale,config._a[HOUR],config._meridiem),configFromArray(config),checkOverflow(config)}else configFromISO(config)}function meridiemFixWrap(locale,hour,meridiem){var isPm;return null==meridiem?hour:null!=locale.meridiemHour?locale.meridiemHour(hour,meridiem):null!=locale.isPM?((isPm=locale.isPM(meridiem))&&hour<12&&(hour+=12),isPm||12!==hour||(hour=0),hour):hour}function configFromStringAndArray(config){var tempConfig,bestMoment,scoreToBeat,i,currentScore;if(0===config._f.length)return getParsingFlags(config).invalidFormat=!0,void(config._d=new Date(NaN));for(i=0;i<config._f.length;i++)currentScore=0,tempConfig=copyConfig({},config),null!=config._useUTC&&(tempConfig._useUTC=config._useUTC),tempConfig._f=config._f[i],configFromStringAndFormat(tempConfig),valid__isValid(tempConfig)&&(currentScore+=getParsingFlags(tempConfig).charsLeftOver,currentScore+=10*getParsingFlags(tempConfig).unusedTokens.length,getParsingFlags(tempConfig).score=currentScore,(null==scoreToBeat||currentScore<scoreToBeat)&&(scoreToBeat=currentScore,bestMoment=tempConfig));extend(config,bestMoment||tempConfig)}function configFromObject(config){if(!config._d){var i=normalizeObjectUnits(config._i);config._a=[i.year,i.month,i.day||i.date,i.hour,i.minute,i.second,i.millisecond],configFromArray(config)}}function createFromConfig(config){var res=new Moment(checkOverflow(prepareConfig(config)));return res._nextDay&&(res.add(1,"d"),res._nextDay=undefined),res}function prepareConfig(config){var input=config._i,format=config._f;return config._locale=config._locale||locale_locales__getLocale(config._l),null===input||format===undefined&&""===input?valid__createInvalid({nullInput:!0}):("string"==typeof input&&(config._i=input=config._locale.preparse(input)),isMoment(input)?new Moment(checkOverflow(input)):(isArray(format)?configFromStringAndArray(config):format?configFromStringAndFormat(config):isDate(input)?config._d=input:configFromInput(config),config))}function configFromInput(config){var input=config._i;input===undefined?config._d=new Date:isDate(input)?config._d=new Date(+input):"string"==typeof input?configFromString(config):isArray(input)?(config._a=map(input.slice(0),function(obj){return parseInt(obj,10)}),configFromArray(config)):"object"==typeof input?configFromObject(config):"number"==typeof input?config._d=new Date(input):utils_hooks__hooks.createFromInputFallback(config)}function createLocalOrUTC(input,format,locale,strict,isUTC){var c={};return"boolean"==typeof locale&&(strict=locale,locale=undefined),c._isAMomentObject=!0,c._useUTC=c._isUTC=isUTC,c._l=locale,c._i=input,c._f=format,c._strict=strict,createFromConfig(c)}function local__createLocal(input,format,locale,strict){return createLocalOrUTC(input,format,locale,strict,!1)}function pickBy(fn,moments){var res,i;if(1===moments.length&&isArray(moments[0])&&(moments=moments[0]),!moments.length)return local__createLocal();for(res=moments[0],i=1;i<moments.length;++i)moments[i].isValid()&&!moments[i][fn](res)||(res=moments[i]);return res}function min(){return pickBy("isBefore",[].slice.call(arguments,0))}function max(){return pickBy("isAfter",[].slice.call(arguments,0))}function Duration(duration){var normalizedInput=normalizeObjectUnits(duration),years=normalizedInput.year||0,quarters=normalizedInput.quarter||0,months=normalizedInput.month||0,weeks=normalizedInput.week||0,days=normalizedInput.day||0,hours=normalizedInput.hour||0,minutes=normalizedInput.minute||0,seconds=normalizedInput.second||0,milliseconds=normalizedInput.millisecond||0;this._milliseconds=+milliseconds+1e3*seconds+6e4*minutes+36e5*hours,this._days=+days+7*weeks,this._months=+months+3*quarters+12*years,this._data={},this._locale=locale_locales__getLocale(),this._bubble()}function isDuration(obj){return obj instanceof Duration}function offset(token,separator){addFormatToken(token,0,0,function(){var offset=this.utcOffset(),sign="+";return offset<0&&(offset=-offset,sign="-"),sign+zeroFill(~~(offset/60),2)+separator+zeroFill(~~offset%60,2)})}function offsetFromString(string){var matches=(string||"").match(matchOffset)||[],parts=((matches[matches.length-1]||[])+"").match(chunkOffset)||["-",0,0],minutes=60*parts[1]+toInt(parts[2]);return"+"===parts[0]?minutes:-minutes}function cloneWithOffset(input,model){var res,diff;return model._isUTC?(res=model.clone(),diff=(isMoment(input)||isDate(input)?+input:+local__createLocal(input))-+res,res._d.setTime(+res._d+diff),utils_hooks__hooks.updateOffset(res,!1),res):local__createLocal(input).local()}function getDateOffset(m){return 15*-Math.round(m._d.getTimezoneOffset()/15)}function getSetOffset(input,keepLocalTime){var localAdjust,offset=this._offset||0;return null!=input?("string"==typeof input&&(input=offsetFromString(input)),Math.abs(input)<16&&(input*=60),!this._isUTC&&keepLocalTime&&(localAdjust=getDateOffset(this)),this._offset=input,this._isUTC=!0,null!=localAdjust&&this.add(localAdjust,"m"),offset!==input&&(!keepLocalTime||this._changeInProgress?add_subtract__addSubtract(this,create__createDuration(input-offset,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,utils_hooks__hooks.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?offset:getDateOffset(this)}function getSetZone(input,keepLocalTime){return null!=input?("string"!=typeof input&&(input=-input),this.utcOffset(input,keepLocalTime),this):-this.utcOffset()}function setOffsetToUTC(keepLocalTime){return this.utcOffset(0,keepLocalTime)}function setOffsetToLocal(keepLocalTime){return this._isUTC&&(this.utcOffset(0,keepLocalTime),this._isUTC=!1,keepLocalTime&&this.subtract(getDateOffset(this),"m")),this}function setOffsetToParsedOffset(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(offsetFromString(this._i)),this}function hasAlignedHourOffset(input){return input=input?local__createLocal(input).utcOffset():0,(this.utcOffset()-input)%60==0}function isDaylightSavingTime(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function isDaylightSavingTimeShifted(){if("undefined"!=typeof this._isDSTShifted)return this._isDSTShifted;var c={};if(copyConfig(c,this),(c=prepareConfig(c))._a){var other=c._isUTC?create_utc__createUTC(c._a):local__createLocal(c._a);this._isDSTShifted=this.isValid()&&compareArrays(c._a,other.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function isLocal(){return!this._isUTC}function isUtcOffset(){return this._isUTC}function isUtc(){return this._isUTC&&0===this._offset}function create__createDuration(input,key){var sign,ret,diffRes,duration=input,match=null;return isDuration(input)?duration={ms:input._milliseconds,d:input._days,M:input._months}:"number"==typeof input?(duration={},key?duration[key]=input:duration.milliseconds=input):(match=aspNetRegex.exec(input))?(sign="-"===match[1]?-1:1,duration={y:0,d:toInt(match[DATE])*sign,h:toInt(match[HOUR])*sign,m:toInt(match[MINUTE])*sign,s:toInt(match[SECOND])*sign,ms:toInt(match[MILLISECOND])*sign}):(match=create__isoRegex.exec(input))?(sign="-"===match[1]?-1:1,duration={y:parseIso(match[2],sign),M:parseIso(match[3],sign),d:parseIso(match[4],sign),h:parseIso(match[5],sign),m:parseIso(match[6],sign),s:parseIso(match[7],sign),w:parseIso(match[8],sign)}):null==duration?duration={}:"object"==typeof duration&&("from"in duration||"to"in duration)&&(diffRes=momentsDifference(local__createLocal(duration.from),local__createLocal(duration.to)),(duration={}).ms=diffRes.milliseconds,duration.M=diffRes.months),ret=new Duration(duration),isDuration(input)&&hasOwnProp(input,"_locale")&&(ret._locale=input._locale),ret}function parseIso(inp,sign){var res=inp&&parseFloat(inp.replace(",","."));return(isNaN(res)?0:res)*sign}function positiveMomentsDifference(base,other){var res={milliseconds:0,months:0};return res.months=other.month()-base.month()+12*(other.year()-base.year()),base.clone().add(res.months,"M").isAfter(other)&&--res.months,res.milliseconds=+other-+base.clone().add(res.months,"M"),res}function momentsDifference(base,other){var res;return other=cloneWithOffset(other,base),base.isBefore(other)?res=positiveMomentsDifference(base,other):((res=positiveMomentsDifference(other,base)).milliseconds=-res.milliseconds,res.months=-res.months),res}function createAdder(direction,name){return function(val,period){var tmp;return null===period||isNaN(+period)||(deprecateSimple(name,"moment()."+name+"(period, number) is deprecated. Please use moment()."+name+"(number, period)."),tmp=val,val=period,period=tmp),add_subtract__addSubtract(this,create__createDuration(val="string"==typeof val?+val:val,period),direction),this}}function add_subtract__addSubtract(mom,duration,isAdding,updateOffset){var milliseconds=duration._milliseconds,days=duration._days,months=duration._months;updateOffset=null==updateOffset||updateOffset,milliseconds&&mom._d.setTime(+mom._d+milliseconds*isAdding),days&&get_set__set(mom,"Date",get_set__get(mom,"Date")+days*isAdding),months&&setMonth(mom,get_set__get(mom,"Month")+months*isAdding),updateOffset&&utils_hooks__hooks.updateOffset(mom,days||months)}function moment_calendar__calendar(time,formats){var now=time||local__createLocal(),sod=cloneWithOffset(now,this).startOf("day"),diff=this.diff(sod,"days",!0),format=diff<-6?"sameElse":diff<-1?"lastWeek":diff<0?"lastDay":diff<1?"sameDay":diff<2?"nextDay":diff<7?"nextWeek":"sameElse";return this.format(formats&&formats[format]||this.localeData().calendar(format,this,local__createLocal(now)))}function clone(){return new Moment(this)}function isAfter(input,units){return"millisecond"===(units=normalizeUnits(void 0!==units?units:"millisecond"))?+this>+(input=isMoment(input)?input:local__createLocal(input)):(isMoment(input)?+input:+local__createLocal(input))<+this.clone().startOf(units)}function isBefore(input,units){var inputMs;return"millisecond"===(units=normalizeUnits(void 0!==units?units:"millisecond"))?+this<+(input=isMoment(input)?input:local__createLocal(input)):(inputMs=isMoment(input)?+input:+local__createLocal(input),+this.clone().endOf(units)<inputMs)}function isBetween(from,to,units){return this.isAfter(from,units)&&this.isBefore(to,units)}function isSame(input,units){var inputMs;return"millisecond"===(units=normalizeUnits(units||"millisecond"))?+this==+(input=isMoment(input)?input:local__createLocal(input)):(inputMs=+local__createLocal(input),+this.clone().startOf(units)<=inputMs&&inputMs<=+this.clone().endOf(units))}function diff(input,units,asFloat){var delta,output,that=cloneWithOffset(input,this),zoneDelta=6e4*(that.utcOffset()-this.utcOffset());return"year"===(units=normalizeUnits(units))||"month"===units||"quarter"===units?(output=monthDiff(this,that),"quarter"===units?output/=3:"year"===units&&(output/=12)):(delta=this-that,output="second"===units?delta/1e3:"minute"===units?delta/6e4:"hour"===units?delta/36e5:"day"===units?(delta-zoneDelta)/864e5:"week"===units?(delta-zoneDelta)/6048e5:delta),asFloat?output:absFloor(output)}function monthDiff(a,b){var wholeMonthDiff=12*(b.year()-a.year())+(b.month()-a.month()),anchor=a.clone().add(wholeMonthDiff,"months");return-(wholeMonthDiff+(b-anchor<0?(b-anchor)/(anchor-a.clone().add(wholeMonthDiff-1,"months")):(b-anchor)/(a.clone().add(wholeMonthDiff+1,"months")-anchor)))}function toString(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function moment_format__toISOString(){var m=this.clone().utc();return 0<m.year()&&m.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():formatMoment(m,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):formatMoment(m,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function format(inputString){var output=formatMoment(this,inputString||utils_hooks__hooks.defaultFormat);return this.localeData().postformat(output)}function from(time,withoutSuffix){return this.isValid()?create__createDuration({to:this,from:time}).locale(this.locale()).humanize(!withoutSuffix):this.localeData().invalidDate()}function fromNow(withoutSuffix){return this.from(local__createLocal(),withoutSuffix)}function to(time,withoutSuffix){return this.isValid()?create__createDuration({from:this,to:time}).locale(this.locale()).humanize(!withoutSuffix):this.localeData().invalidDate()}function toNow(withoutSuffix){return this.to(local__createLocal(),withoutSuffix)}function locale(key){var newLocaleData;return key===undefined?this._locale._abbr:(null!=(newLocaleData=locale_locales__getLocale(key))&&(this._locale=newLocaleData),this)}function localeData(){return this._locale}function startOf(units){switch(units=normalizeUnits(units)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===units&&this.weekday(0),"isoWeek"===units&&this.isoWeekday(1),"quarter"===units&&this.month(3*Math.floor(this.month()/3)),this}function endOf(units){return(units=normalizeUnits(units))===undefined||"millisecond"===units?this:this.startOf(units).add(1,"isoWeek"===units?"week":units).subtract(1,"ms")}function to_type__valueOf(){return+this._d-6e4*(this._offset||0)}function unix(){return Math.floor(+this/1e3)}function toDate(){return this._offset?new Date(+this):this._d}function toArray(){var m=this;return[m.year(),m.month(),m.date(),m.hour(),m.minute(),m.second(),m.millisecond()]}function toObject(){var m=this;return{years:m.year(),months:m.month(),date:m.date(),hours:m.hours(),minutes:m.minutes(),seconds:m.seconds(),milliseconds:m.milliseconds()}}function moment_valid__isValid(){return valid__isValid(this)}function parsingFlags(){return extend({},getParsingFlags(this))}function invalidAt(){return getParsingFlags(this).overflow}function addWeekYearFormatToken(token,getter){addFormatToken(0,[token,token.length],0,getter)}function weeksInYear(year,dow,doy){return weekOfYear(local__createLocal([year,11,31+dow-doy]),dow,doy).week}function getSetWeekYear(input){var year=weekOfYear(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==input?year:this.add(input-year,"y")}function getSetISOWeekYear(input){var year=weekOfYear(this,1,4).year;return null==input?year:this.add(input-year,"y")}function getISOWeeksInYear(){return weeksInYear(this.year(),1,4)}function getWeeksInYear(){var weekInfo=this.localeData()._week;return weeksInYear(this.year(),weekInfo.dow,weekInfo.doy)}function getSetQuarter(input){return null==input?Math.ceil((this.month()+1)/3):this.month(3*(input-1)+this.month()%3)}function parseWeekday(input,locale){return"string"!=typeof input?input:isNaN(input)?"number"==typeof(input=locale.weekdaysParse(input))?input:null:parseInt(input,10)}function localeWeekdays(m){return this._weekdays[m.day()]}function localeWeekdaysShort(m){return this._weekdaysShort[m.day()]}function localeWeekdaysMin(m){return this._weekdaysMin[m.day()]}function localeWeekdaysParse(weekdayName){var i,mom,regex;for(this._weekdaysParse=this._weekdaysParse||[],i=0;i<7;i++)if(this._weekdaysParse[i]||(mom=local__createLocal([2e3,1]).day(i),regex="^"+this.weekdays(mom,"")+"|^"+this.weekdaysShort(mom,"")+"|^"+this.weekdaysMin(mom,""),this._weekdaysParse[i]=new RegExp(regex.replace(".",""),"i")),this._weekdaysParse[i].test(weekdayName))return i}function getSetDayOfWeek(input){var day=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=input?(input=parseWeekday(input,this.localeData()),this.add(input-day,"d")):day}function getSetLocaleDayOfWeek(input){var weekday=(this.day()+7-this.localeData()._week.dow)%7;return null==input?weekday:this.add(input-weekday,"d")}function getSetISODayOfWeek(input){return null==input?this.day()||7:this.day(this.day()%7?input:input-7)}function meridiem(token,lowercase){addFormatToken(token,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),lowercase)})}function matchMeridiem(isStrict,locale){return locale._meridiemParse}function localeIsPM(input){return"p"===(input+"").toLowerCase().charAt(0)}function localeMeridiem(hours,minutes,isLower){return hours>11?isLower?"pm":"PM":isLower?"am":"AM"}
function parseMs(input,array){array[MILLISECOND]=toInt(1e3*("0."+input))}function getZoneAbbr(){return this._isUTC?"UTC":""}function getZoneName(){return this._isUTC?"Coordinated Universal Time":""}function moment__createUnix(input){return local__createLocal(1e3*input)}function moment__createInZone(){return local__createLocal.apply(null,arguments).parseZone()}function locale_calendar__calendar(key,mom,now){var output=this._calendar[key];return"function"==typeof output?output.call(mom,now):output}function longDateFormat(key){var format=this._longDateFormat[key],formatUpper=this._longDateFormat[key.toUpperCase()];return format||!formatUpper?format:(this._longDateFormat[key]=formatUpper.replace(/MMMM|MM|DD|dddd/g,function(val){return val.slice(1)}),this._longDateFormat[key])}function invalidDate(){return this._invalidDate}function ordinal(number){return this._ordinal.replace("%d",number)}function preParsePostFormat(string){return string}function relative__relativeTime(number,withoutSuffix,string,isFuture){var output=this._relativeTime[string];return"function"==typeof output?output(number,withoutSuffix,string,isFuture):output.replace(/%d/i,number)}function pastFuture(diff,output){var format=this._relativeTime[diff>0?"future":"past"];return"function"==typeof format?format(output):format.replace(/%s/i,output)}function locale_set__set(config){var prop,i;for(i in config)"function"==typeof(prop=config[i])?this[i]=prop:this["_"+i]=prop;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function lists__get(format,index,field,setter){var locale=locale_locales__getLocale(),utc=create_utc__createUTC().set(setter,index);return locale[field](utc,format)}function list(format,index,field,count,setter){if("number"==typeof format&&(index=format,format=undefined),format=format||"",null!=index)return lists__get(format,index,field,setter);var i,out=[];for(i=0;i<count;i++)out[i]=lists__get(format,i,field,setter);return out}function lists__listMonths(format,index){return list(format,index,"months",12,"month")}function lists__listMonthsShort(format,index){return list(format,index,"monthsShort",12,"month")}function lists__listWeekdays(format,index){return list(format,index,"weekdays",7,"day")}function lists__listWeekdaysShort(format,index){return list(format,index,"weekdaysShort",7,"day")}function lists__listWeekdaysMin(format,index){return list(format,index,"weekdaysMin",7,"day")}function duration_abs__abs(){var data=this._data;return this._milliseconds=mathAbs(this._milliseconds),this._days=mathAbs(this._days),this._months=mathAbs(this._months),data.milliseconds=mathAbs(data.milliseconds),data.seconds=mathAbs(data.seconds),data.minutes=mathAbs(data.minutes),data.hours=mathAbs(data.hours),data.months=mathAbs(data.months),data.years=mathAbs(data.years),this}function duration_add_subtract__addSubtract(duration,input,value,direction){var other=create__createDuration(input,value);return duration._milliseconds+=direction*other._milliseconds,duration._days+=direction*other._days,duration._months+=direction*other._months,duration._bubble()}function duration_add_subtract__add(input,value){return duration_add_subtract__addSubtract(this,input,value,1)}function duration_add_subtract__subtract(input,value){return duration_add_subtract__addSubtract(this,input,value,-1)}function absCeil(number){return number<0?Math.floor(number):Math.ceil(number)}function bubble(){var seconds,minutes,hours,years,monthsFromDays,milliseconds=this._milliseconds,days=this._days,months=this._months,data=this._data;return milliseconds>=0&&days>=0&&months>=0||milliseconds<=0&&days<=0&&months<=0||(milliseconds+=864e5*absCeil(monthsToDays(months)+days),days=0,months=0),data.milliseconds=milliseconds%1e3,seconds=absFloor(milliseconds/1e3),data.seconds=seconds%60,minutes=absFloor(seconds/60),data.minutes=minutes%60,hours=absFloor(minutes/60),data.hours=hours%24,months+=monthsFromDays=absFloor(daysToMonths(days+=absFloor(hours/24))),days-=absCeil(monthsToDays(monthsFromDays)),years=absFloor(months/12),months%=12,data.days=days,data.months=months,data.years=years,this}function daysToMonths(days){return 4800*days/146097}function monthsToDays(months){return 146097*months/4800}function as(units){var days,months,milliseconds=this._milliseconds;if("month"===(units=normalizeUnits(units))||"year"===units)return days=this._days+milliseconds/864e5,months=this._months+daysToMonths(days),"month"===units?months:months/12;switch(days=this._days+Math.round(monthsToDays(this._months)),units){case"week":return days/7+milliseconds/6048e5;case"day":return days+milliseconds/864e5;case"hour":return 24*days+milliseconds/36e5;case"minute":return 1440*days+milliseconds/6e4;case"second":return 86400*days+milliseconds/1e3;case"millisecond":return Math.floor(864e5*days)+milliseconds;default:throw new Error("Unknown unit "+units)}}function duration_as__valueOf(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*toInt(this._months/12)}function makeAs(alias){return function(){return this.as(alias)}}function duration_get__get(units){return this[(units=normalizeUnits(units))+"s"]()}function makeGetter(name){return function(){return this._data[name]}}function weeks(){return absFloor(this.days()/7)}function substituteTimeAgo(string,number,withoutSuffix,isFuture,locale){return locale.relativeTime(number||1,!!withoutSuffix,string,isFuture)}function duration_humanize__relativeTime(posNegDuration,withoutSuffix,locale){var duration=create__createDuration(posNegDuration).abs(),seconds=round(duration.as("s")),minutes=round(duration.as("m")),hours=round(duration.as("h")),days=round(duration.as("d")),months=round(duration.as("M")),years=round(duration.as("y")),a=seconds<thresholds.s&&["s",seconds]||1===minutes&&["m"]||minutes<thresholds.m&&["mm",minutes]||1===hours&&["h"]||hours<thresholds.h&&["hh",hours]||1===days&&["d"]||days<thresholds.d&&["dd",days]||1===months&&["M"]||months<thresholds.M&&["MM",months]||1===years&&["y"]||["yy",years];return a[2]=withoutSuffix,a[3]=+posNegDuration>0,a[4]=locale,substituteTimeAgo.apply(null,a)}function duration_humanize__getSetRelativeTimeThreshold(threshold,limit){return thresholds[threshold]!==undefined&&(limit===undefined?thresholds[threshold]:(thresholds[threshold]=limit,!0))}function humanize(withSuffix){var locale=this.localeData(),output=duration_humanize__relativeTime(this,!withSuffix,locale);return withSuffix&&(output=locale.pastFuture(+this,output)),locale.postformat(output)}function iso_string__toISOString(){var minutes,hours,seconds=iso_string__abs(this._milliseconds)/1e3,days=iso_string__abs(this._days),months=iso_string__abs(this._months);hours=absFloor((minutes=absFloor(seconds/60))/60),seconds%=60,minutes%=60;var Y=absFloor(months/12),M=months%=12,D=days,h=hours,m=minutes,s=seconds,total=this.asSeconds();return total?(total<0?"-":"")+"P"+(Y?Y+"Y":"")+(M?M+"M":"")+(D?D+"D":"")+(h||m||s?"T":"")+(h?h+"H":"")+(m?m+"M":"")+(s?s+"S":""):"P0D"}var hookCallback,globalLocale,momentProperties=utils_hooks__hooks.momentProperties=[],updateInProgress=!1,locales={},aliases={},formattingTokens=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,localFormattingTokens=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,formatFunctions={},formatTokenFunctions={},match1=/\d/,match2=/\d\d/,match3=/\d{3}/,match4=/\d{4}/,match6=/[+-]?\d{6}/,match1to2=/\d\d?/,match1to3=/\d{1,3}/,match1to4=/\d{1,4}/,match1to6=/[+-]?\d{1,6}/,matchUnsigned=/\d+/,matchSigned=/[+-]?\d+/,matchOffset=/Z|[+-]\d\d:?\d\d/gi,matchTimestamp=/[+-]?\d+(\.\d{1,3})?/,matchWord=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,regexes={},tokens={},YEAR=0,MONTH=1,DATE=2,HOUR=3,MINUTE=4,SECOND=5,MILLISECOND=6;addFormatToken("M",["MM",2],"Mo",function(){return this.month()+1}),addFormatToken("MMM",0,0,function(format){return this.localeData().monthsShort(this,format)}),addFormatToken("MMMM",0,0,function(format){return this.localeData().months(this,format)}),addUnitAlias("month","M"),addRegexToken("M",match1to2),addRegexToken("MM",match1to2,match2),addRegexToken("MMM",matchWord),addRegexToken("MMMM",matchWord),addParseToken(["M","MM"],function(input,array){array[MONTH]=toInt(input)-1}),addParseToken(["MMM","MMMM"],function(input,array,config,token){var month=config._locale.monthsParse(input,token,config._strict);null!=month?array[MONTH]=month:getParsingFlags(config).invalidMonth=input});var defaultLocaleMonths="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),defaultLocaleMonthsShort="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),deprecations={};utils_hooks__hooks.suppressDeprecationWarnings=!1;var from_string__isoRegex=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,isoDates=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],isoTimes=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],aspNetJsonRegex=/^\/?Date\((\-?\d+)/i;utils_hooks__hooks.createFromInputFallback=deprecate("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(config){config._d=new Date(config._i+(config._useUTC?" UTC":""))}),addFormatToken(0,["YY",2],0,function(){return this.year()%100}),addFormatToken(0,["YYYY",4],0,"year"),addFormatToken(0,["YYYYY",5],0,"year"),addFormatToken(0,["YYYYYY",6,!0],0,"year"),addUnitAlias("year","y"),addRegexToken("Y",matchSigned),addRegexToken("YY",match1to2,match2),addRegexToken("YYYY",match1to4,match4),addRegexToken("YYYYY",match1to6,match6),addRegexToken("YYYYYY",match1to6,match6),addParseToken(["YYYYY","YYYYYY"],YEAR),addParseToken("YYYY",function(input,array){array[YEAR]=2===input.length?utils_hooks__hooks.parseTwoDigitYear(input):toInt(input)}),addParseToken("YY",function(input,array){array[YEAR]=utils_hooks__hooks.parseTwoDigitYear(input)}),utils_hooks__hooks.parseTwoDigitYear=function(input){return toInt(input)+(toInt(input)>68?1900:2e3)};var getSetYear=makeGetSet("FullYear",!1);addFormatToken("w",["ww",2],"wo","week"),addFormatToken("W",["WW",2],"Wo","isoWeek"),addUnitAlias("week","w"),addUnitAlias("isoWeek","W"),addRegexToken("w",match1to2),addRegexToken("ww",match1to2,match2),addRegexToken("W",match1to2),addRegexToken("WW",match1to2,match2),addWeekParseToken(["w","ww","W","WW"],function(input,week,config,token){week[token.substr(0,1)]=toInt(input)});var defaultLocaleWeek={dow:0,doy:6};addFormatToken("DDD",["DDDD",3],"DDDo","dayOfYear"),addUnitAlias("dayOfYear","DDD"),addRegexToken("DDD",match1to3),addRegexToken("DDDD",match3),addParseToken(["DDD","DDDD"],function(input,array,config){config._dayOfYear=toInt(input)}),utils_hooks__hooks.ISO_8601=function(){};var prototypeMin=deprecate("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var other=local__createLocal.apply(null,arguments);return other<this?this:other}),prototypeMax=deprecate("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var other=local__createLocal.apply(null,arguments);return other>this?this:other});offset("Z",":"),offset("ZZ",""),addRegexToken("Z",matchOffset),addRegexToken("ZZ",matchOffset),addParseToken(["Z","ZZ"],function(input,array,config){config._useUTC=!0,config._tzm=offsetFromString(input)});var chunkOffset=/([\+\-]|\d\d)/gi;utils_hooks__hooks.updateOffset=function(){};var aspNetRegex=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,create__isoRegex=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;create__createDuration.fn=Duration.prototype;var add_subtract__add=createAdder(1,"add"),add_subtract__subtract=createAdder(-1,"subtract");utils_hooks__hooks.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";var lang=deprecate("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(key){return key===undefined?this.localeData():this.locale(key)});addFormatToken(0,["gg",2],0,function(){return this.weekYear()%100}),addFormatToken(0,["GG",2],0,function(){return this.isoWeekYear()%100}),addWeekYearFormatToken("gggg","weekYear"),addWeekYearFormatToken("ggggg","weekYear"),addWeekYearFormatToken("GGGG","isoWeekYear"),addWeekYearFormatToken("GGGGG","isoWeekYear"),addUnitAlias("weekYear","gg"),addUnitAlias("isoWeekYear","GG"),addRegexToken("G",matchSigned),addRegexToken("g",matchSigned),addRegexToken("GG",match1to2,match2),addRegexToken("gg",match1to2,match2),addRegexToken("GGGG",match1to4,match4),addRegexToken("gggg",match1to4,match4),addRegexToken("GGGGG",match1to6,match6),addRegexToken("ggggg",match1to6,match6),addWeekParseToken(["gggg","ggggg","GGGG","GGGGG"],function(input,week,config,token){week[token.substr(0,2)]=toInt(input)}),addWeekParseToken(["gg","GG"],function(input,week,config,token){week[token]=utils_hooks__hooks.parseTwoDigitYear(input)}),addFormatToken("Q",0,0,"quarter"),addUnitAlias("quarter","Q"),addRegexToken("Q",match1),addParseToken("Q",function(input,array){array[MONTH]=3*(toInt(input)-1)}),addFormatToken("D",["DD",2],"Do","date"),addUnitAlias("date","D"),addRegexToken("D",match1to2),addRegexToken("DD",match1to2,match2),addRegexToken("Do",function(isStrict,locale){return isStrict?locale._ordinalParse:locale._ordinalParseLenient}),addParseToken(["D","DD"],DATE),addParseToken("Do",function(input,array){array[DATE]=toInt(input.match(match1to2)[0],10)});var getSetDayOfMonth=makeGetSet("Date",!0);addFormatToken("d",0,"do","day"),addFormatToken("dd",0,0,function(format){return this.localeData().weekdaysMin(this,format)}),addFormatToken("ddd",0,0,function(format){return this.localeData().weekdaysShort(this,format)}),addFormatToken("dddd",0,0,function(format){return this.localeData().weekdays(this,format)}),addFormatToken("e",0,0,"weekday"),addFormatToken("E",0,0,"isoWeekday"),addUnitAlias("day","d"),addUnitAlias("weekday","e"),addUnitAlias("isoWeekday","E"),addRegexToken("d",match1to2),addRegexToken("e",match1to2),addRegexToken("E",match1to2),addRegexToken("dd",matchWord),addRegexToken("ddd",matchWord),addRegexToken("dddd",matchWord),addWeekParseToken(["dd","ddd","dddd"],function(input,week,config){var weekday=config._locale.weekdaysParse(input);null!=weekday?week.d=weekday:getParsingFlags(config).invalidWeekday=input}),addWeekParseToken(["d","e","E"],function(input,week,config,token){week[token]=toInt(input)});var defaultLocaleWeekdays="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),defaultLocaleWeekdaysShort="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),defaultLocaleWeekdaysMin="Su_Mo_Tu_We_Th_Fr_Sa".split("_");addFormatToken("H",["HH",2],0,"hour"),addFormatToken("h",["hh",2],0,function(){return this.hours()%12||12}),meridiem("a",!0),meridiem("A",!1),addUnitAlias("hour","h"),addRegexToken("a",matchMeridiem),addRegexToken("A",matchMeridiem),addRegexToken("H",match1to2),addRegexToken("h",match1to2),addRegexToken("HH",match1to2,match2),addRegexToken("hh",match1to2,match2),addParseToken(["H","HH"],HOUR),addParseToken(["a","A"],function(input,array,config){config._isPm=config._locale.isPM(input),config._meridiem=input}),addParseToken(["h","hh"],function(input,array,config){array[HOUR]=toInt(input),getParsingFlags(config).bigHour=!0});var defaultLocaleMeridiemParse=/[ap]\.?m?\.?/i,getSetHour=makeGetSet("Hours",!0);addFormatToken("m",["mm",2],0,"minute"),addUnitAlias("minute","m"),addRegexToken("m",match1to2),addRegexToken("mm",match1to2,match2),addParseToken(["m","mm"],MINUTE);var getSetMinute=makeGetSet("Minutes",!1);addFormatToken("s",["ss",2],0,"second"),addUnitAlias("second","s"),addRegexToken("s",match1to2),addRegexToken("ss",match1to2,match2),addParseToken(["s","ss"],SECOND);var token,getSetSecond=makeGetSet("Seconds",!1);for(addFormatToken("S",0,0,function(){return~~(this.millisecond()/100)}),addFormatToken(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),addFormatToken(0,["SSS",3],0,"millisecond"),addFormatToken(0,["SSSS",4],0,function(){return 10*this.millisecond()}),addFormatToken(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),addFormatToken(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),addFormatToken(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),addFormatToken(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),addFormatToken(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),addUnitAlias("millisecond","ms"),addRegexToken("S",match1to3,match1),addRegexToken("SS",match1to3,match2),addRegexToken("SSS",match1to3,match3),token="SSSS";token.length<=9;token+="S")addRegexToken(token,matchUnsigned);for(token="S";token.length<=9;token+="S")addParseToken(token,parseMs);var getSetMillisecond=makeGetSet("Milliseconds",!1);addFormatToken("z",0,0,"zoneAbbr"),addFormatToken("zz",0,0,"zoneName");var momentPrototype__proto=Moment.prototype;momentPrototype__proto.add=add_subtract__add,momentPrototype__proto.calendar=moment_calendar__calendar,momentPrototype__proto.clone=clone,momentPrototype__proto.diff=diff,momentPrototype__proto.endOf=endOf,momentPrototype__proto.format=format,momentPrototype__proto.from=from,momentPrototype__proto.fromNow=fromNow,momentPrototype__proto.to=to,momentPrototype__proto.toNow=toNow,momentPrototype__proto.get=getSet,momentPrototype__proto.invalidAt=invalidAt,momentPrototype__proto.isAfter=isAfter,momentPrototype__proto.isBefore=isBefore,momentPrototype__proto.isBetween=isBetween,momentPrototype__proto.isSame=isSame,momentPrototype__proto.isValid=moment_valid__isValid,momentPrototype__proto.lang=lang,momentPrototype__proto.locale=locale,momentPrototype__proto.localeData=localeData,momentPrototype__proto.max=prototypeMax,momentPrototype__proto.min=prototypeMin,momentPrototype__proto.parsingFlags=parsingFlags,momentPrototype__proto.set=getSet,momentPrototype__proto.startOf=startOf,momentPrototype__proto.subtract=add_subtract__subtract,momentPrototype__proto.toArray=toArray,momentPrototype__proto.toObject=toObject,momentPrototype__proto.toDate=toDate,momentPrototype__proto.toISOString=moment_format__toISOString,momentPrototype__proto.toJSON=moment_format__toISOString,momentPrototype__proto.toString=toString,momentPrototype__proto.unix=unix,momentPrototype__proto.valueOf=to_type__valueOf,momentPrototype__proto.year=getSetYear,momentPrototype__proto.isLeapYear=getIsLeapYear,momentPrototype__proto.weekYear=getSetWeekYear,momentPrototype__proto.isoWeekYear=getSetISOWeekYear,momentPrototype__proto.quarter=momentPrototype__proto.quarters=getSetQuarter,momentPrototype__proto.month=getSetMonth,momentPrototype__proto.daysInMonth=getDaysInMonth,momentPrototype__proto.week=momentPrototype__proto.weeks=getSetWeek,momentPrototype__proto.isoWeek=momentPrototype__proto.isoWeeks=getSetISOWeek,momentPrototype__proto.weeksInYear=getWeeksInYear,momentPrototype__proto.isoWeeksInYear=getISOWeeksInYear,momentPrototype__proto.date=getSetDayOfMonth,momentPrototype__proto.day=momentPrototype__proto.days=getSetDayOfWeek,momentPrototype__proto.weekday=getSetLocaleDayOfWeek,momentPrototype__proto.isoWeekday=getSetISODayOfWeek,momentPrototype__proto.dayOfYear=getSetDayOfYear,momentPrototype__proto.hour=momentPrototype__proto.hours=getSetHour,momentPrototype__proto.minute=momentPrototype__proto.minutes=getSetMinute,momentPrototype__proto.second=momentPrototype__proto.seconds=getSetSecond,momentPrototype__proto.millisecond=momentPrototype__proto.milliseconds=getSetMillisecond,momentPrototype__proto.utcOffset=getSetOffset,momentPrototype__proto.utc=setOffsetToUTC,momentPrototype__proto.local=setOffsetToLocal,momentPrototype__proto.parseZone=setOffsetToParsedOffset,momentPrototype__proto.hasAlignedHourOffset=hasAlignedHourOffset,momentPrototype__proto.isDST=isDaylightSavingTime,momentPrototype__proto.isDSTShifted=isDaylightSavingTimeShifted,momentPrototype__proto.isLocal=isLocal,momentPrototype__proto.isUtcOffset=isUtcOffset,momentPrototype__proto.isUtc=isUtc,momentPrototype__proto.isUTC=isUtc,momentPrototype__proto.zoneAbbr=getZoneAbbr,momentPrototype__proto.zoneName=getZoneName,momentPrototype__proto.dates=deprecate("dates accessor is deprecated. Use date instead.",getSetDayOfMonth),momentPrototype__proto.months=deprecate("months accessor is deprecated. Use month instead",getSetMonth),momentPrototype__proto.years=deprecate("years accessor is deprecated. Use year instead",getSetYear),momentPrototype__proto.zone=deprecate("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",getSetZone);var momentPrototype=momentPrototype__proto,defaultCalendar={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},defaultLongDateFormat={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},defaultInvalidDate="Invalid date",defaultOrdinal="%d",defaultOrdinalParse=/\d{1,2}/,defaultRelativeTime={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},prototype__proto=Locale.prototype;prototype__proto._calendar=defaultCalendar,prototype__proto.calendar=locale_calendar__calendar,prototype__proto._longDateFormat=defaultLongDateFormat,prototype__proto.longDateFormat=longDateFormat,prototype__proto._invalidDate=defaultInvalidDate,prototype__proto.invalidDate=invalidDate,prototype__proto._ordinal=defaultOrdinal,prototype__proto.ordinal=ordinal,prototype__proto._ordinalParse=defaultOrdinalParse,prototype__proto.preparse=preParsePostFormat,prototype__proto.postformat=preParsePostFormat,prototype__proto._relativeTime=defaultRelativeTime,prototype__proto.relativeTime=relative__relativeTime,prototype__proto.pastFuture=pastFuture,prototype__proto.set=locale_set__set,prototype__proto.months=localeMonths,prototype__proto._months=defaultLocaleMonths,prototype__proto.monthsShort=localeMonthsShort,prototype__proto._monthsShort=defaultLocaleMonthsShort,prototype__proto.monthsParse=localeMonthsParse,prototype__proto.week=localeWeek,prototype__proto._week=defaultLocaleWeek,prototype__proto.firstDayOfYear=localeFirstDayOfYear,prototype__proto.firstDayOfWeek=localeFirstDayOfWeek,prototype__proto.weekdays=localeWeekdays,prototype__proto._weekdays=defaultLocaleWeekdays,prototype__proto.weekdaysMin=localeWeekdaysMin,prototype__proto._weekdaysMin=defaultLocaleWeekdaysMin,prototype__proto.weekdaysShort=localeWeekdaysShort,prototype__proto._weekdaysShort=defaultLocaleWeekdaysShort,prototype__proto.weekdaysParse=localeWeekdaysParse,prototype__proto.isPM=localeIsPM,prototype__proto._meridiemParse=defaultLocaleMeridiemParse,prototype__proto.meridiem=localeMeridiem,locale_locales__getSetGlobalLocale("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(number){var b=number%10;return number+(1===toInt(number%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th")}}),utils_hooks__hooks.lang=deprecate("moment.lang is deprecated. Use moment.locale instead.",locale_locales__getSetGlobalLocale),utils_hooks__hooks.langData=deprecate("moment.langData is deprecated. Use moment.localeData instead.",locale_locales__getLocale);var mathAbs=Math.abs,asMilliseconds=makeAs("ms"),asSeconds=makeAs("s"),asMinutes=makeAs("m"),asHours=makeAs("h"),asDays=makeAs("d"),asWeeks=makeAs("w"),asMonths=makeAs("M"),asYears=makeAs("y"),milliseconds=makeGetter("milliseconds"),seconds=makeGetter("seconds"),minutes=makeGetter("minutes"),hours=makeGetter("hours"),days=makeGetter("days"),months=makeGetter("months"),years=makeGetter("years"),round=Math.round,thresholds={s:45,m:45,h:22,d:26,M:11},iso_string__abs=Math.abs,duration_prototype__proto=Duration.prototype;return duration_prototype__proto.abs=duration_abs__abs,duration_prototype__proto.add=duration_add_subtract__add,duration_prototype__proto.subtract=duration_add_subtract__subtract,duration_prototype__proto.as=as,duration_prototype__proto.asMilliseconds=asMilliseconds,duration_prototype__proto.asSeconds=asSeconds,duration_prototype__proto.asMinutes=asMinutes,duration_prototype__proto.asHours=asHours,duration_prototype__proto.asDays=asDays,duration_prototype__proto.asWeeks=asWeeks,duration_prototype__proto.asMonths=asMonths,duration_prototype__proto.asYears=asYears,duration_prototype__proto.valueOf=duration_as__valueOf,duration_prototype__proto._bubble=bubble,duration_prototype__proto.get=duration_get__get,duration_prototype__proto.milliseconds=milliseconds,duration_prototype__proto.seconds=seconds,duration_prototype__proto.minutes=minutes,duration_prototype__proto.hours=hours,duration_prototype__proto.days=days,duration_prototype__proto.weeks=weeks,duration_prototype__proto.months=months,duration_prototype__proto.years=years,duration_prototype__proto.humanize=humanize,duration_prototype__proto.toISOString=iso_string__toISOString,duration_prototype__proto.toString=iso_string__toISOString,duration_prototype__proto.toJSON=iso_string__toISOString,duration_prototype__proto.locale=locale,duration_prototype__proto.localeData=localeData,duration_prototype__proto.toIsoString=deprecate("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",iso_string__toISOString),duration_prototype__proto.lang=lang,addFormatToken("X",0,0,"unix"),addFormatToken("x",0,0,"valueOf"),addRegexToken("x",matchSigned),addRegexToken("X",matchTimestamp),addParseToken("X",function(input,array,config){config._d=new Date(1e3*parseFloat(input,10))}),addParseToken("x",function(input,array,config){config._d=new Date(toInt(input))}),utils_hooks__hooks.version="2.10.6",setHookCallback(local__createLocal),utils_hooks__hooks.fn=momentPrototype,utils_hooks__hooks.min=min,utils_hooks__hooks.max=max,utils_hooks__hooks.utc=create_utc__createUTC,utils_hooks__hooks.unix=moment__createUnix,utils_hooks__hooks.months=lists__listMonths,utils_hooks__hooks.isDate=isDate,utils_hooks__hooks.locale=locale_locales__getSetGlobalLocale,utils_hooks__hooks.invalid=valid__createInvalid,utils_hooks__hooks.duration=create__createDuration,utils_hooks__hooks.isMoment=isMoment,utils_hooks__hooks.weekdays=lists__listWeekdays,utils_hooks__hooks.parseZone=moment__createInZone,utils_hooks__hooks.localeData=locale_locales__getLocale,utils_hooks__hooks.isDuration=isDuration,utils_hooks__hooks.monthsShort=lists__listMonthsShort,utils_hooks__hooks.weekdaysMin=lists__listWeekdaysMin,utils_hooks__hooks.defineLocale=defineLocale,utils_hooks__hooks.weekdaysShort=lists__listWeekdaysShort,utils_hooks__hooks.normalizeUnits=normalizeUnits,utils_hooks__hooks.relativeTimeThreshold=duration_humanize__getSetRelativeTimeThreshold,utils_hooks__hooks}),
/*!
 * jQuery Cookie Plugin v1.4.1
 * https://github.com/carhartl/jquery-cookie
 *
 * Copyright 2013 Klaus Hartl
 * Released under the MIT license
 */
function(factory){"function"==typeof define&&define.amd?define(["jquery"],factory):"object"==typeof exports?factory(require("jquery")):factory(jQuery)}(function($){function encode(s){return config.raw?s:encodeURIComponent(s)}function decode(s){return config.raw?s:decodeURIComponent(s)}function stringifyCookieValue(value){return encode(config.json?JSON.stringify(value):String(value))}function parseCookieValue(s){0===s.indexOf('"')&&(s=s.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return s=decodeURIComponent(s.replace(pluses," ")),config.json?JSON.parse(s):s}catch(e){}}function read(s,converter){var value=config.raw?s:parseCookieValue(s);return $.isFunction(converter)?converter(value):value}var pluses=/\+/g,config=$.cookie=function(key,value,options){if(value!==undefined&&!$.isFunction(value)){if("number"==typeof(options=$.extend({},config.defaults,options)).expires){var days=options.expires,t=options.expires=new Date;t.setTime(+t+864e5*days)}return document.cookie=[encode(key),"=",stringifyCookieValue(value),options.expires?"; expires="+options.expires.toUTCString():"",options.path?"; path="+options.path:"",options.domain?"; domain="+options.domain:"",options.secure?"; secure":""].join("")}for(var result=key?undefined:{},cookies=document.cookie?document.cookie.split("; "):[],i=0,l=cookies.length;i<l;i++){var parts=cookies[i].split("="),name=decode(parts.shift()),cookie=parts.join("=");if(key&&key===name){result=read(cookie,value);break}key||(cookie=read(cookie))===undefined||(result[name]=cookie)}return result};config.defaults={},$.removeCookie=function(key,options){return $.cookie(key)!==undefined&&($.cookie(key,"",$.extend({},options,{expires:-1})),!$.cookie(key))}}),
/*
 * ----------------------------- JSTORAGE -------------------------------------
 * Simple local storage wrapper to save data on the browser side, supporting
 * all major browsers - IE6+, Firefox2+, Safari4+, Chrome4+ and Opera 10.5+
 *
 * Author: Andris Reinman, andris.reinman@gmail.com
 * Project homepage: www.jstorage.info
 *
 * Licensed under Unlicense:
 *
 * This is free and unencumbered software released into the public domain.
 *
 * Anyone is free to copy, modify, publish, use, compile, sell, or
 * distribute this software, either in source code form or as a compiled
 * binary, for any purpose, commercial or non-commercial, and by any
 * means.
 *
 * In jurisdictions that recognize copyright laws, the author or authors
 * of this software dedicate any and all copyright interest in the
 * software to the public domain. We make this dedication for the benefit
 * of the public at large and to the detriment of our heirs and
 * successors. We intend this dedication to be an overt act of
 * relinquishment in perpetuity of all present and future rights to this
 * software under copyright law.
 *
 * THE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
 * IN NO EVENT SHALL THE AUTHORS BE LIABLE FOR ANY CLAIM, DAMAGES OR
 * OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE,
 * ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 * OTHER DEALINGS IN THE SOFTWARE.
 *
 * For more information, please refer to <http://unlicense.org/>
 */
function(){"use strict";function _init(){var localStorageReallyWorks=!1;if("localStorage"in window)try{window.localStorage.setItem("_tmptest","tmpval"),localStorageReallyWorks=!0,window.localStorage.removeItem("_tmptest")}catch(BogusQuotaExceededErrorOnIos5){}if(localStorageReallyWorks)try{window.localStorage&&(_storage_service=window.localStorage,_backend="localStorage",_observer_update=_storage_service.jStorage_update)}catch(E3){}else if("globalStorage"in window)try{window.globalStorage&&(_storage_service="localhost"==window.location.hostname?window.globalStorage["localhost.localdomain"]:window.globalStorage[window.location.hostname],_backend="globalStorage",_observer_update=_storage_service.jStorage_update)}catch(E4){}else{if(!(_storage_elm=document.createElement("link")).addBehavior)return void(_storage_elm=null);_storage_elm.style.behavior="url(#default#userData)",document.getElementsByTagName("head")[0].appendChild(_storage_elm);try{_storage_elm.load("jStorage")}catch(E){_storage_elm.setAttribute("jStorage","{}"),_storage_elm.save("jStorage"),_storage_elm.load("jStorage")}var data="{}";try{data=_storage_elm.getAttribute("jStorage")}catch(E5){}try{_observer_update=_storage_elm.getAttribute("jStorage_update")}catch(E6){}_storage_service.jStorage=data,_backend="userDataBehavior"}_load_storage(),_handleTTL(),_setupObserver(),_handlePubSub(),"addEventListener"in window&&window.addEventListener("pageshow",function(event){event.persisted&&_storageObserver()},!1)}function _reloadData(){var data="{}";if("userDataBehavior"==_backend){_storage_elm.load("jStorage");try{data=_storage_elm.getAttribute("jStorage")}catch(E5){}try{_observer_update=_storage_elm.getAttribute("jStorage_update")}catch(E6){}_storage_service.jStorage=data}_load_storage(),_handleTTL(),_handlePubSub()}function _setupObserver(){"localStorage"==_backend||"globalStorage"==_backend?"addEventListener"in window?window.addEventListener("storage",_storageObserver,!1):document.attachEvent("onstorage",_storageObserver):"userDataBehavior"==_backend&&setInterval(_storageObserver,1e3)}function _storageObserver(){var updateTime;clearTimeout(_observer_timeout),_observer_timeout=setTimeout(function(){if("localStorage"==_backend||"globalStorage"==_backend)updateTime=_storage_service.jStorage_update;else if("userDataBehavior"==_backend){_storage_elm.load("jStorage");try{updateTime=_storage_elm.getAttribute("jStorage_update")}catch(E5){}}updateTime&&updateTime!=_observer_update&&(_observer_update=updateTime,_checkUpdatedKeys())},25)}function _checkUpdatedKeys(){var newCrc32List,oldCrc32List=JSON.parse(JSON.stringify(_storage.__jstorage_meta.CRC32));_reloadData(),newCrc32List=JSON.parse(JSON.stringify(_storage.__jstorage_meta.CRC32));var key,updated=[],removed=[];for(key in oldCrc32List)if(oldCrc32List.hasOwnProperty(key)){if(!newCrc32List[key]){removed.push(key);continue}oldCrc32List[key]!=newCrc32List[key]&&"2."==String(oldCrc32List[key]).substr(0,2)&&updated.push(key)}for(key in newCrc32List)newCrc32List.hasOwnProperty(key)&&(oldCrc32List[key]||updated.push(key));_fireObservers(updated,"updated"),_fireObservers(removed,"deleted")}function _fireObservers(keys,action){var i,j,len,jlen;if(keys=[].concat(keys||[]),"flushed"==action){for(var key in keys=[],_observers)_observers.hasOwnProperty(key)&&keys.push(key);action="deleted"}for(i=0,len=keys.length;i<len;i++){if(_observers[keys[i]])for(j=0,jlen=_observers[keys[i]].length;j<jlen;j++)_observers[keys[i]][j](keys[i],action);if(_observers["*"])for(j=0,jlen=_observers["*"].length;j<jlen;j++)_observers["*"][j](keys[i],action)}}function _publishChange(){var updateTime=(+new Date).toString();if("localStorage"==_backend||"globalStorage"==_backend)try{_storage_service.jStorage_update=updateTime}catch(E8){_backend=!1}else"userDataBehavior"==_backend&&(_storage_elm.setAttribute("jStorage_update",updateTime),_storage_elm.save("jStorage"));_storageObserver()}function _load_storage(){if(_storage_service.jStorage)try{_storage=JSON.parse(String(_storage_service.jStorage))}catch(E6){_storage_service.jStorage="{}"}else _storage_service.jStorage="{}";_storage_size=_storage_service.jStorage?String(_storage_service.jStorage).length:0,_storage.__jstorage_meta||(_storage.__jstorage_meta={}),_storage.__jstorage_meta.CRC32||(_storage.__jstorage_meta.CRC32={})}function _save(){_dropOldEvents();try{_storage_service.jStorage=JSON.stringify(_storage),_storage_elm&&(_storage_elm.setAttribute("jStorage",_storage_service.jStorage),_storage_elm.save("jStorage")),_storage_size=_storage_service.jStorage?String(_storage_service.jStorage).length:0}catch(E7){}}function _checkKey(key){if("string"!=typeof key&&"number"!=typeof key)throw new TypeError("Key name must be string or numeric");if("__jstorage_meta"==key)throw new TypeError("Reserved key name");return!0}function _handleTTL(){var curtime,i,TTL,CRC32,nextExpire=Infinity,changed=!1,deleted=[];if(clearTimeout(_ttl_timeout),_storage.__jstorage_meta&&"object"==typeof _storage.__jstorage_meta.TTL){for(i in curtime=+new Date,TTL=_storage.__jstorage_meta.TTL,CRC32=_storage.__jstorage_meta.CRC32,TTL)TTL.hasOwnProperty(i)&&(TTL[i]<=curtime?(delete TTL[i],delete CRC32[i],delete _storage[i],changed=!0,deleted.push(i)):TTL[i]<nextExpire&&(nextExpire=TTL[i]));nextExpire!=Infinity&&(_ttl_timeout=setTimeout(_handleTTL,Math.min(nextExpire-curtime,2147483647))),changed&&(_save(),_publishChange(),_fireObservers(deleted,"deleted"))}}function _handlePubSub(){var i;if(_storage.__jstorage_meta.PubSub){var pubelm,_pubsubCurrent=_pubsub_last,needFired=[];for(i=_storage.__jstorage_meta.PubSub.length-1;i>=0;i--)(pubelm=_storage.__jstorage_meta.PubSub[i])[0]>_pubsub_last&&(_pubsubCurrent=pubelm[0],needFired.unshift(pubelm));for(i=needFired.length-1;i>=0;i--)_fireSubscribers(needFired[i][1],needFired[i][2]);_pubsub_last=_pubsubCurrent}}function _fireSubscribers(channel,payload){if(_pubsub_observers[channel])for(var i=0,len=_pubsub_observers[channel].length;i<len;i++)try{_pubsub_observers[channel][i](channel,JSON.parse(JSON.stringify(payload)))}catch(E){}}function _dropOldEvents(){if(_storage.__jstorage_meta.PubSub){for(var retire=+new Date-2e3,i=0,len=_storage.__jstorage_meta.PubSub.length;i<len;i++)if(_storage.__jstorage_meta.PubSub[i][0]<=retire){_storage.__jstorage_meta.PubSub.splice(i,_storage.__jstorage_meta.PubSub.length-i);break}_storage.__jstorage_meta.PubSub.length||delete _storage.__jstorage_meta.PubSub}}function _publish(channel,payload){_storage.__jstorage_meta||(_storage.__jstorage_meta={}),_storage.__jstorage_meta.PubSub||(_storage.__jstorage_meta.PubSub=[]),_storage.__jstorage_meta.PubSub.unshift([+new Date,channel,payload]),_save(),_publishChange()}function murmurhash2_32_gc(str,seed){for(var k,l=str.length,h=seed^l,i=0;l>=4;)k=1540483477*(65535&(k=255&str.charCodeAt(i)|(255&str.charCodeAt(++i))<<8|(255&str.charCodeAt(++i))<<16|(255&str.charCodeAt(++i))<<24))+((1540483477*(k>>>16)&65535)<<16),h=1540483477*(65535&h)+((1540483477*(h>>>16)&65535)<<16)^(k=1540483477*(65535&(k^=k>>>24))+((1540483477*(k>>>16)&65535)<<16)),l-=4,++i;switch(l){case 3:h^=(255&str.charCodeAt(i+2))<<16;case 2:h^=(255&str.charCodeAt(i+1))<<8;case 1:h=1540483477*(65535&(h^=255&str.charCodeAt(i)))+((1540483477*(h>>>16)&65535)<<16)}return h=1540483477*(65535&(h^=h>>>13))+((1540483477*(h>>>16)&65535)<<16),(h^=h>>>15)>>>0}var JSTORAGE_VERSION="0.4.12",$=window.jQuery||window.$||(window.$={}),JSON={parse:window.JSON&&(window.JSON.parse||window.JSON.decode)||String.prototype.evalJSON&&function(str){return String(str).evalJSON()}||$.parseJSON||$.evalJSON,stringify:Object.toJSON||window.JSON&&(window.JSON.stringify||window.JSON.encode)||$.toJSON};if("function"!=typeof JSON.parse||"function"!=typeof JSON.stringify)throw new Error("No JSON support found, include //cdnjs.cloudflare.com/ajax/libs/json2/20110223/json2.js to page");var _ttl_timeout,_storage={__jstorage_meta:{CRC32:{}}},_storage_service={jStorage:"{}"},_storage_elm=null,_storage_size=0,_backend=!1,_observers={},_observer_timeout=!1,_observer_update=0,_pubsub_observers={},_pubsub_last=+new Date,_XMLService={isXML:function(elm){var documentElement=(elm?elm.ownerDocument||elm:0).documentElement;return!!documentElement&&"HTML"!==documentElement.nodeName},encode:function(xmlNode){if(!this.isXML(xmlNode))return!1;try{return(new XMLSerializer).serializeToString(xmlNode)}catch(E1){try{return xmlNode.xml}catch(E2){}}return!1},decode:function(xmlString){var resultXML,dom_parser="DOMParser"in window&&(new DOMParser).parseFromString||window.ActiveXObject&&function(_xmlString){var xml_doc=new ActiveXObject("Microsoft.XMLDOM");return xml_doc.async="false",xml_doc.loadXML(_xmlString),xml_doc};return!!dom_parser&&(resultXML=dom_parser.call("DOMParser"in window&&new DOMParser||window,xmlString,"text/xml"),!!this.isXML(resultXML)&&resultXML)}};$.jStorage={version:JSTORAGE_VERSION,set:function(key,value,options){if(_checkKey(key),options=options||{},void 0===value)return this.deleteKey(key),value;if(_XMLService.isXML(value))value={_is_xml:!0,xml:_XMLService.encode(value)};else{if("function"==typeof value)return undefined;value&&"object"==typeof value&&(value=JSON.parse(JSON.stringify(value)))}return _storage[key]=value,_storage.__jstorage_meta.CRC32[key]="2."+murmurhash2_32_gc(JSON.stringify(value),2538058380),this.setTTL(key,options.TTL||0),_fireObservers(key,"updated"),value},get:function(key,def){return _checkKey(key),key in _storage?_storage[key]&&"object"==typeof _storage[key]&&_storage[key]._is_xml?_XMLService.decode(_storage[key].xml):_storage[key]:void 0===def?null:def},deleteKey:function(key){return _checkKey(key),key in _storage&&(delete _storage[key],"object"==typeof _storage.__jstorage_meta.TTL&&key in _storage.__jstorage_meta.TTL&&delete _storage.__jstorage_meta.TTL[key],delete _storage.__jstorage_meta.CRC32[key],_save(),_publishChange(),_fireObservers(key,"deleted"),!0)},setTTL:function(key,ttl){var curtime=+new Date;return _checkKey(key),ttl=Number(ttl)||0,key in _storage&&(_storage.__jstorage_meta.TTL||(_storage.__jstorage_meta.TTL={}),ttl>0?_storage.__jstorage_meta.TTL[key]=curtime+ttl:delete _storage.__jstorage_meta.TTL[key],_save(),_handleTTL(),_publishChange(),!0)},getTTL:function(key){var curtime=+new Date;return _checkKey(key),key in _storage&&_storage.__jstorage_meta.TTL&&_storage.__jstorage_meta.TTL[key]&&_storage.__jstorage_meta.TTL[key]-curtime||0},flush:function(){return _storage={__jstorage_meta:{CRC32:{}}},_save(),_publishChange(),_fireObservers(null,"flushed"),!0},storageObj:function(){function F(){}return F.prototype=_storage,new F},index:function(){var i,index=[];for(i in _storage)_storage.hasOwnProperty(i)&&"__jstorage_meta"!=i&&index.push(i);return index},storageSize:function(){return _storage_size},currentBackend:function(){return _backend},storageAvailable:function(){return!!_backend},listenKeyChange:function(key,callback){_checkKey(key),_observers[key]||(_observers[key]=[]),_observers[key].push(callback)},stopListening:function(key,callback){if(_checkKey(key),_observers[key])if(callback)for(var i=_observers[key].length-1;i>=0;i--)_observers[key][i]==callback&&_observers[key].splice(i,1);else delete _observers[key]},subscribe:function(channel,callback){if(!(channel=(channel||"").toString()))throw new TypeError("Channel not defined");_pubsub_observers[channel]||(_pubsub_observers[channel]=[]),_pubsub_observers[channel].push(callback)},publish:function(channel,payload){if(!(channel=(channel||"").toString()))throw new TypeError("Channel not defined");_publish(channel,payload)},reInit:function(){_reloadData()},noConflict:function(saveInGlobal){return delete window.$.jStorage,saveInGlobal&&(window.jStorage=this),this}},_init()}(),function($){"use strict";$.ajaxPrefilter(function(options){if(options.iframe)return options.originalURL=options.url,"iframe"}),$.ajaxTransport("iframe",function(options,origOptions){function cleanUp(){markers.prop("disabled",!1),form.remove(),iframe.one("load",function(){iframe.remove()}),iframe.attr("src","about:blank")}var form=null,iframe=null,name="iframe-"+$.now(),files=$(options.files).filter(":file:enabled"),markers=null,accepts=null;if(options.dataTypes.shift(),options.data=origOptions.data,files.length)return form=$("<form enctype='multipart/form-data' method='post'></form>").hide().attr({action:options.originalURL,target:name}),$('<input type="hidden" name="'+$("meta[name=csrf-param]").attr("content")+'" value="'+$("meta[name=csrf-token]").attr("content")+'" >').appendTo(form),"string"==typeof options.data&&options.data.length>0&&$.error("data must not be serialized"),$.each(options.data||{},function(name,value){$.isPlainObject(value)&&(name=value.name,value=value.value),$("<input type='hidden' />").attr({name:name,value:value}).appendTo(form)}),$("<input type='hidden' value='IFrame' name='X-Requested-With' />").appendTo(form),accepts=options.dataTypes[0]&&options.accepts[options.dataTypes[0]]?options.accepts[options.dataTypes[0]]+("*"!==options.dataTypes[0]?", */*; q=0.01":""):options.accepts["*"],$("<input type='hidden' name='X-HTTP-Accept'>").attr("value",accepts).appendTo(form),markers=files.after(function(){return $(this).clone().prop("disabled",!0)}).next(),files.appendTo(form),{send:function(headers,completeCallback){(iframe=$("<iframe src='about:blank' name='"+name+"' id='"+name+"' style='display:none'></iframe>")).one("load",function(){iframe.one("load",function(){var doc=this.contentWindow?this.contentWindow.document:this.contentDocument?this.contentDocument:this.document,root=doc.documentElement?doc.documentElement:doc.body,textarea=root.getElementsByTagName("textarea")[0],type=textarea&&textarea.getAttribute("data-type")||null,status=textarea&&textarea.getAttribute("data-status")||200,statusText=textarea&&textarea.getAttribute("data-statusText")||"OK",content={html:root.innerHTML,text:type?textarea.value:root?root.textContent||root.innerText:null};cleanUp(),completeCallback(status,statusText,content,type?"Content-Type: "+type:null)}),form[0].submit()}),$("body").append(form,iframe)},abort:function(){null!==iframe&&(iframe.unbind("load").attr("src","about:blank"),cleanUp())}}})}(jQuery),function(){var initializing=!1;window.JQClass=function(){},JQClass.classes={},JQClass.extend=function extender(prop){function JQClass(){!initializing&&this._init&&this._init.apply(this,arguments)}var base=this.prototype;initializing=!0;var prototype=new this;for(var name in initializing=!1,prop)prototype[name]="function"==typeof prop[name]&&"function"==typeof base[name]?function(name,fn){return function(){var __super=this._super;this._super=function(args){return base[name].apply(this,args||[])};var ret=fn.apply(this,arguments);return this._super=__super,ret}}(name,prop[name]):prop[name];return JQClass.prototype=prototype,JQClass.prototype.constructor=JQClass,JQClass.extend=extender,JQClass}}(),function($){function camelCase(name){return name.replace(/-([a-z])/g,function(match,group){return group.toUpperCase()})}JQClass.classes.JQPlugin=JQClass.extend({name:"plugin",defaultOptions:{},regionalOptions:{},_getters:[],_getMarker:function(){return"is-"+this.name},_init:function(){$.extend(this.defaultOptions,this.regionalOptions&&this.regionalOptions[""]||{});var jqName=camelCase(this.name);$[jqName]=this,$.fn[jqName]=function(options){var otherArgs=Array.prototype.slice.call(arguments,1);return $[jqName]._isNotChained(options,otherArgs)?$[jqName][options].apply($[jqName],[this[0]].concat(otherArgs)):this.each(function(){if("string"==typeof options){if("_"===options[0]||!$[jqName][options])throw"Unknown method: "+options;$[jqName][options].apply($[jqName],[this].concat(otherArgs))}else $[jqName]._attach(this,options)})}},setDefaults:function(options){$.extend(this.defaultOptions,options||{})},_isNotChained:function(name,otherArgs){return"option"===name&&(0===otherArgs.length||1===otherArgs.length&&"string"==typeof otherArgs[0])||$.inArray(name,this._getters)>-1},_attach:function(elem,options){if(!(elem=$(elem)).hasClass(this._getMarker())){elem.addClass(this._getMarker()),options=$.extend({},this.defaultOptions,this._getMetadata(elem),options||{});var inst=$.extend({name:this.name,elem:elem,options:options},this._instSettings(elem,options));elem.data(this.name,inst),this._postAttach(elem,inst),this.option(elem,options)}},_instSettings:function(){return{}},_postAttach:function(){},_getMetadata:function(elem){try{var data=elem.data(this.name.toLowerCase())||"";for(var name in data=data.replace(/'/g,'"'),data=data.replace(/([a-zA-Z0-9]+):/g,function(match,group,i){var count=data.substring(0,i).match(/"/g);return count&&count.length%2!=0?group+":":'"'+group+'":'}),data=$.parseJSON("{"+data+"}"),data){var value=data[name];"string"==typeof value&&value.match(/^new Date\((.*)\)$/)&&(data[name]=eval(value))}return data}catch(e){return{}}},_getInst:function(elem){return $(elem).data(this.name)||{}},option:function(elem,name,value){var inst=(elem=$(elem)).data(this.name);if(!name||"string"==typeof name&&null==value)return(options=(inst||{}).options)&&name?options[name]:options;if(elem.hasClass(this._getMarker())){var options=name||{};"string"==typeof name&&((options={})[name]=value),this._optionsChanged(elem,inst,options),$.extend(inst.options,options)}},_optionsChanged:function(){},destroy:function(elem){(elem=$(elem)).hasClass(this._getMarker())&&(this._preDestroy(elem,this._getInst(elem)),elem.removeData(this.name).removeClass(this._getMarker()))},_preDestroy:function(){}}),$.JQPlugin={createPlugin:function(superClass,overrides){"object"==typeof superClass&&(overrides=superClass,superClass="JQPlugin"),superClass=camelCase(superClass);var className=camelCase(overrides.name);JQClass.classes[className]=JQClass.classes[superClass].extend(overrides),new JQClass.classes[className]}}}(jQuery),function($){var pluginName="countdown",Y=0,O=1,W=2,D=3,H=4,M=5,S=6;$.JQPlugin.createPlugin({name:pluginName,defaultOptions:{until:null,since:null,timezone:null,serverSync:null,format:"dHMS",layout:"",compact:!1,padZeroes:!1,significant:0,description:"",expiryUrl:"",expiryText:"",alwaysExpire:!1,onExpiry:null,onTick:null,tickInterval:1},regionalOptions:{"":{labels:["Years","Months","Weeks","Days","Hours","Minutes","Seconds"],labels1:["Year","Month","Week","Day","Hour","Minute","Second"],compactLabels:["y","m","w","d"],whichLabels:null,digits:["0","1","2","3","4","5","6","7","8","9"],timeSeparator:":",isRTL:!1}},_getters:["getTimes"],_rtlClass:pluginName+"-rtl",_sectionClass:pluginName+"-section",_amountClass:pluginName+"-amount",_periodClass:pluginName+"-period",_rowClass:pluginName+"-row",_holdingClass:pluginName+"-holding",_showClass:pluginName+"-show",_descrClass:pluginName+"-descr",_timerElems:[],_init:function(){function timerCallBack(timestamp){var drawStart=timestamp<1e12?perfAvail?performance.now()+performance.timing.navigationStart:now():timestamp||now();drawStart-animationStartTime>=1e3&&(self._updateElems(),animationStartTime=drawStart),requestAnimationFrame(timerCallBack)}var self=this;this._super(),this._serverSyncs=[];var now="function"==typeof Date.now?Date.now:function(){return(new Date).getTime()},perfAvail=window.performance&&"function"==typeof window.performance.now,requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||null,animationStartTime=0;!requestAnimationFrame||$.noRequestAnimationFrame?($.noRequestAnimationFrame=null,setInterval(function(){self._updateElems()},980)):(animationStartTime=window.animationStartTime||window.webkitAnimationStartTime||window.mozAnimationStartTime||window.oAnimationStartTime||window.msAnimationStartTime||now(),requestAnimationFrame(timerCallBack))},UTCDate:function(tz,year,month,day,hours,mins,secs,ms){"object"==typeof year&&year.constructor==Date&&(ms=year.getMilliseconds(),secs=year.getSeconds(),mins=year.getMinutes(),hours=year.getHours(),day=year.getDate(),month=year.getMonth(),year=year.getFullYear());var d=new Date;return d.setUTCFullYear(year),d.setUTCDate(1),d.setUTCMonth(month||0),d.setUTCDate(day||1),d.setUTCHours(hours||0),d.setUTCMinutes((mins||0)-(Math.abs(tz)<30?60*tz:tz)),d.setUTCSeconds(secs||0),d.setUTCMilliseconds(ms||0),d},periodsToSeconds:function(periods){return 31557600*periods[0]+2629800*periods[1]+604800*periods[2]+86400*periods[3]+3600*periods[4]+60*periods[5]+periods[6]},_instSettings:function(){return{_periods:[0,0,0,0,0,0,0]}},_addElem:function(elem){this._hasElem(elem)||this._timerElems.push(elem)},_hasElem:function(elem){return $.inArray(elem,this._timerElems)>-1},_removeElem:function(elem){this._timerElems=$.map(this._timerElems,function(value){return value==elem?null:value})},_updateElems:function(){for(var i=this._timerElems.length-1;i>=0;i--)this._updateCountdown(this._timerElems[i])},_optionsChanged:function(elem,inst,options){options.layout&&(options.layout=options.layout.replace(/&lt;/g,"<").replace(/&gt;/g,">")),this._resetExtraLabels(inst.options,options);var timezoneChanged=inst.options.timezone!=options.timezone;$.extend(inst.options,options),this._adjustSettings(elem,inst,null!=options.until||null!=options.since||timezoneChanged);var now=new Date;(inst._since&&inst._since<now||inst._until&&inst._until>now)&&this._addElem(elem[0]),this._updateCountdown(elem,inst)},_updateCountdown:function(elem,inst){if(elem=elem.jquery?elem:$(elem),inst=inst||this._getInst(elem)){if(elem.html(this._generateHTML(inst)).toggleClass(this._rtlClass,inst.options.isRTL),$.isFunction(inst.options.onTick)){var periods="lap"!=inst._hold?inst._periods:this._calculatePeriods(inst,inst._show,inst.options.significant,new Date);1!=inst.options.tickInterval&&this.periodsToSeconds(periods)%inst.options.tickInterval!=0||inst.options.onTick.apply(elem[0],[periods])}if("pause"!=inst._hold&&(inst._since?inst._now.getTime()<inst._since.getTime():inst._now.getTime()>=inst._until.getTime())&&!inst._expiring){if(inst._expiring=!0,this._hasElem(elem[0])||inst.options.alwaysExpire){if(this._removeElem(elem[0]),$.isFunction(inst.options.onExpiry)&&inst.options.onExpiry.apply(elem[0],[]),inst.options.expiryText){var layout=inst.options.layout;inst.options.layout=inst.options.expiryText,this._updateCountdown(elem[0],inst),inst.options.layout=layout}inst.options.expiryUrl&&(window.location=inst.options.expiryUrl)}inst._expiring=!1}else"pause"==inst._hold&&this._removeElem(elem[0])}},_resetExtraLabels:function(base,options){for(var n in options)n.match(/[Ll]abels[02-9]|compactLabels1/)&&(base[n]=options[n]);for(var n in base)n.match(/[Ll]abels[02-9]|compactLabels1/)&&"undefined"==typeof options[n]&&(base[n]=null)},_adjustSettings:function(elem,inst,recalc){for(var now,serverOffset=0,serverEntry=null,i=0;i<this._serverSyncs.length;i++)if(this._serverSyncs[i][0]==inst.options.serverSync){serverEntry=this._serverSyncs[i][1];break}if(null!=serverEntry)serverOffset=inst.options.serverSync?serverEntry:0,now=new Date;else{var serverResult=$.isFunction(inst.options.serverSync)?inst.options.serverSync.apply(elem[0],[]):null;now=new Date,serverOffset=serverResult?now.getTime()-serverResult.getTime():0,this._serverSyncs.push([inst.options.serverSync,serverOffset])}var timezone=inst.options.timezone;timezone=null==timezone?-now.getTimezoneOffset():timezone,(recalc||!recalc&&null==inst._until&&null==inst._since)&&(inst._since=inst.options.since,null!=inst._since&&(inst._since=this.UTCDate(timezone,this._determineTime(inst._since,null)),inst._since&&serverOffset&&inst._since.setMilliseconds(inst._since.getMilliseconds()+serverOffset)),inst._until=this.UTCDate(timezone,this._determineTime(inst.options.until,now)),serverOffset&&inst._until.setMilliseconds(inst._until.getMilliseconds()+serverOffset)),inst._show=this._determineShow(inst)},_preDestroy:function(elem){this._removeElem(elem[0]),elem.empty()},pause:function(elem){this._hold(elem,"pause")},lap:function(elem){this._hold(elem,"lap")},resume:function(elem){this._hold(elem,null)},toggle:function(elem){this[($.data(elem,this.name)||{})._hold?"resume":"pause"](elem)},toggleLap:function(elem){this[($.data(elem,this.name)||{})._hold?"resume":"lap"](elem)},_hold:function(elem,hold){var inst=$.data(elem,this.name);if(inst){if("pause"==inst._hold&&!hold){inst._periods=inst._savePeriods;var sign=inst._since?"-":"+";inst[inst._since?"_since":"_until"]=this._determineTime(sign+inst._periods[0]+"y"+sign+inst._periods[1]+"o"+sign+inst._periods[2]+"w"+sign+inst._periods[3]+"d"+sign+inst._periods[4]+"h"+sign+inst._periods[5]+"m"+sign+inst._periods[6]+"s"),this._addElem(elem)}inst._hold=hold,inst._savePeriods="pause"==hold?inst._periods:null,$.data(elem,this.name,inst),this._updateCountdown(elem,inst)}},getTimes:function(elem){var inst=$.data(elem,this.name);return inst?"pause"==inst._hold?inst._savePeriods:inst._hold?this._calculatePeriods(inst,inst._show,inst.options.significant,new Date):inst._periods:null},_determineTime:function(setting,defaultTime){var self=this,offsetNumeric=function(offset){var time=new Date;return time.setTime(time.getTime()+1e3*offset),time},time=null==setting?defaultTime:"string"==typeof setting?function(offset){offset=offset.toLowerCase();for(var time=new Date,year=time.getFullYear(),month=time.getMonth(),day=time.getDate(),hour=time.getHours(),minute=time.getMinutes(),second=time.getSeconds(),pattern=/([+-]?[0-9]+)\s*(s|m|h|d|w|o|y)?/g,matches=pattern.exec(offset);matches;){switch(matches[2]||"s"){case"s":second+=parseInt(matches[1],10);break;case"m":minute+=parseInt(matches[1],10);break;case"h":hour+=parseInt(matches[1],10);break;case"d":day+=parseInt(matches[1],10);break;case"w":day+=7*parseInt(matches[1],10);break;case"o":month+=parseInt(matches[1],10),day=Math.min(day,self._getDaysInMonth(year,month));break;case"y":year+=parseInt(matches[1],10),day=Math.min(day,self._getDaysInMonth(year,month))}matches=pattern.exec(offset)}return new Date(year,month,day,hour,minute,second,0)}(setting):"number"==typeof setting?offsetNumeric(setting):setting;return time&&time.setMilliseconds(0),time},_getDaysInMonth:function(year,month){return 32-new Date(year,month,32).getDate()},_normalLabels:function(num){return num},_generateHTML:function(inst){var self=this;inst._periods=inst._hold?inst._periods:this._calculatePeriods(inst,inst._show,inst.options.significant,new Date);for(var shownNonZero=!1,showCount=0,sigCount=inst.options.significant,show=$.extend({},inst._show),period=Y;period<=S;period++)shownNonZero|="?"==inst._show[period]&&inst._periods[period]>0,show[period]="?"!=inst._show[period]||shownNonZero?inst._show[period]:null,showCount+=show[period]?1:0,sigCount-=inst._periods[period]>0?1:0;var showSignificant=[!1,!1,!1,!1,!1,!1,!1];for(period=S;period>=Y;period--)inst._show[period]&&(inst._periods[period]?showSignificant[period]=!0:(showSignificant[period]=sigCount>0,sigCount--));var labels=inst.options.compact?inst.options.compactLabels:inst.options.labels,whichLabels=inst.options.whichLabels||this._normalLabels,showCompact=function(period){var labelsNum=inst.options["compactLabels"+whichLabels(inst._periods[period])];return show[period]?self._translateDigits(inst,inst._periods[period])+(labelsNum?labelsNum[period]:labels[period])+" ":""},minDigits=inst.options.padZeroes?2:1,showFull=function(period){var labelsNum=inst.options["labels"+whichLabels(inst._periods[period])];return!inst.options.significant&&show[period]||inst.options.significant&&showSignificant[period]?'<span class="'+self._sectionClass+'"><span class="'+self._amountClass+'">'+self._minDigits(inst,inst._periods[period],minDigits)+'</span><span class="'+self._periodClass+'">'+(labelsNum?labelsNum[period]:labels[period])+"</span></span>":""};return inst.options.layout?this._buildLayout(inst,show,inst.options.layout,inst.options.compact,inst.options.significant,showSignificant):(inst.options.compact?'<span class="'+this._rowClass+" "+this._amountClass+(inst._hold?" "+this._holdingClass:"")+'">'+showCompact(Y)+showCompact(O)+showCompact(W)+showCompact(D)+(show[H]?this._minDigits(inst,inst._periods[H],2):"")+(show[M]?(show[H]?inst.options.timeSeparator:"")+this._minDigits(inst,inst._periods[M],2):"")+(show[S]?(show[H]||show[M]?inst.options.timeSeparator:"")+this._minDigits(inst,inst._periods[S],2):""):'<span class="'+this._rowClass+" "+this._showClass+(inst.options.significant||showCount)+(inst._hold?" "+this._holdingClass:"")+'">'+showFull(Y)+showFull(O)+showFull(W)+showFull(D)+showFull(H)+showFull(M)+showFull(S))+"</span>"+(inst.options.description?'<span class="'+this._rowClass+" "+this._descrClass+'">'+inst.options.description+"</span>":"")},_buildLayout:function(inst,show,layout,compact,significant,showSignificant){for(var labels=inst.options[compact?"compactLabels":"labels"],whichLabels=inst.options.whichLabels||this._normalLabels,labelFor=function(index){return(inst.options[(compact?"compactLabels":"labels")+whichLabels(inst._periods[index])]||labels)[index]},digit=function(value,position){return inst.options.digits[Math.floor(value/position)%10]},subs={desc:inst.options.description,sep:inst.options.timeSeparator,yl:labelFor(Y),yn:this._minDigits(inst,inst._periods[Y],1),ynn:this._minDigits(inst,inst._periods[Y],2),ynnn:this._minDigits(inst,inst._periods[Y],3),y1:digit(inst._periods[Y],1),y10:digit(inst._periods[Y],10),y100:digit(inst._periods[Y],100),y1000:digit(inst._periods[Y],1e3),ol:labelFor(O),on:this._minDigits(inst,inst._periods[O],1),onn:this._minDigits(inst,inst._periods[O],2),onnn:this._minDigits(inst,inst._periods[O],3),o1:digit(inst._periods[O],1),o10:digit(inst._periods[O],10),o100:digit(inst._periods[O],100),o1000:digit(inst._periods[O],1e3),wl:labelFor(W),wn:this._minDigits(inst,inst._periods[W],1),wnn:this._minDigits(inst,inst._periods[W],2),wnnn:this._minDigits(inst,inst._periods[W],3),w1:digit(inst._periods[W],1),w10:digit(inst._periods[W],10),w100:digit(inst._periods[W],100),w1000:digit(inst._periods[W],1e3),dl:labelFor(D),dn:this._minDigits(inst,inst._periods[D],1),dnn:this._minDigits(inst,inst._periods[D],2),dnnn:this._minDigits(inst,inst._periods[D],3),d1:digit(inst._periods[D],1),d10:digit(inst._periods[D],10),d100:digit(inst._periods[D],100),d1000:digit(inst._periods[D],1e3),hl:labelFor(H),hn:this._minDigits(inst,inst._periods[H],1),hnn:this._minDigits(inst,inst._periods[H],2),hnnn:this._minDigits(inst,inst._periods[H],3),h1:digit(inst._periods[H],1),h10:digit(inst._periods[H],10),h100:digit(inst._periods[H],100),h1000:digit(inst._periods[H],1e3),ml:labelFor(M),mn:this._minDigits(inst,inst._periods[M],1),mnn:this._minDigits(inst,inst._periods[M],2),mnnn:this._minDigits(inst,inst._periods[M],3),m1:digit(inst._periods[M],1),m10:digit(inst._periods[M],10),m100:digit(inst._periods[M],100),m1000:digit(inst._periods[M],1e3),sl:labelFor(S),sn:this._minDigits(inst,inst._periods[S],1),snn:this._minDigits(inst,inst._periods[S],2),snnn:this._minDigits(inst,inst._periods[S],3),s1:digit(inst._periods[S],1),s10:digit(inst._periods[S],10),s100:digit(inst._periods[S],100),s1000:digit(inst._periods[S],1e3)},html=layout,i=Y;i<=S;i++){var period="yowdhms".charAt(i),re=new RegExp("\\{"+period+"<\\}([\\s\\S]*)\\{"+period+">\\}","g");html=html.replace(re,!significant&&show[i]||significant&&showSignificant[i]?"$1":"")}return $.each(subs,function(n,v){var re=new RegExp("\\{"+n+"\\}","g");html=html.replace(re,v)}),html},_minDigits:function(inst,value,len){return(value=""+value).length>=len?this._translateDigits(inst,value):(value="0000000000"+value,this._translateDigits(inst,value.substr(value.length-len)))},_translateDigits:function(inst,value){return(""+value).replace(/[0-9]/g,function(digit){return inst.options.digits[digit]})},_determineShow:function(inst){var format=inst.options.format,show=[];return show[Y]=format.match("y")?"?":format.match("Y")?"!":null,show[O]=format.match("o")?"?":format.match("O")?"!":null,show[W]=format.match("w")?"?":format.match("W")?"!":null,show[D]=format.match("d")?"?":format.match("D")?"!":null,show[H]=format.match("h")?"?":format.match("H")?"!":null,show[M]=format.match("m")?"?":format.match("M")?"!":null,show[S]=format.match("s")?"?":format.match("S")?"!":null,show},_calculatePeriods:function(inst,show,significant,now){inst._now=now,inst._now.setMilliseconds(0);var until=new Date(inst._now.getTime());inst._since?now.getTime()<inst._since.getTime()?inst._now=now=until:now=inst._since:(until.setTime(inst._until.getTime()),now.getTime()>inst._until.getTime()&&(inst._now=now=until));var periods=[0,0,0,0,0,0,0];if(show[Y]||show[O]){
var lastNow=this._getDaysInMonth(now.getFullYear(),now.getMonth()),lastUntil=this._getDaysInMonth(until.getFullYear(),until.getMonth()),sameDay=until.getDate()==now.getDate()||until.getDate()>=Math.min(lastNow,lastUntil)&&now.getDate()>=Math.min(lastNow,lastUntil),getSecs=function(date){return 60*(60*date.getHours()+date.getMinutes())+date.getSeconds()},months=Math.max(0,12*(until.getFullYear()-now.getFullYear())+until.getMonth()-now.getMonth()+(until.getDate()<now.getDate()&&!sameDay||sameDay&&getSecs(until)<getSecs(now)?-1:0));periods[Y]=show[Y]?Math.floor(months/12):0,periods[O]=show[O]?months-12*periods[Y]:0;var wasLastDay=(now=new Date(now.getTime())).getDate()==lastNow,lastDay=this._getDaysInMonth(now.getFullYear()+periods[Y],now.getMonth()+periods[O]);now.getDate()>lastDay&&now.setDate(lastDay),now.setFullYear(now.getFullYear()+periods[Y]),now.setMonth(now.getMonth()+periods[O]),wasLastDay&&now.setDate(lastDay)}var diff=Math.floor((until.getTime()-now.getTime())/1e3),extractPeriod=function(period,numSecs){periods[period]=show[period]?Math.floor(diff/numSecs):0,diff-=periods[period]*numSecs};if(extractPeriod(W,604800),extractPeriod(D,86400),extractPeriod(H,3600),extractPeriod(M,60),extractPeriod(S,1),diff>0&&!inst._since)for(var multiplier=[1,12,4.3482,7,24,60,60],lastShown=S,max=1,period=S;period>=Y;period--)show[period]&&(periods[lastShown]>=max&&(periods[lastShown]=0,diff=1),diff>0&&(periods[period]++,diff=0,lastShown=period,max=1)),max*=multiplier[period];if(significant)for(period=Y;period<=S;period++)significant&&periods[period]?significant--:significant||(periods[period]=0);return periods}})}(jQuery),
/*!
 * iCheck v1.0.2, http://git.io/arlzeA
 * ===================================
 * Powerful jQuery and Zepto plugin for checkboxes and radio buttons customization
 *
 * (c) 2013 Damir Sultanov, http://fronteed.com
 * MIT Licensed
 */
function($){function operate(input,direct,method){var node=input[0],state=/er/.test(method)?_indeterminate:/bl/.test(method)?_disabled:_checked,active=method==_update?{checked:node[_checked],disabled:node[_disabled],indeterminate:"true"==input.attr(_indeterminate)||"false"==input.attr(_determinate)}:node[state];if(/^(ch|di|in)/.test(method)&&!active)on(input,state);else if(/^(un|en|de)/.test(method)&&active)off(input,state);else if(method==_update)for(var each in active)active[each]?on(input,each,!0):off(input,each,!0);else direct&&"toggle"!=method||(direct||input[_callback]("ifClicked"),active?node[_type]!==_radio&&off(input,state):on(input,state))}function on(input,state,keep){var node=input[0],parent=input.parent(),checked=state==_checked,indeterminate=state==_indeterminate,disabled=state==_disabled,callback=indeterminate?_determinate:checked?_unchecked:"enabled",regular=option(input,callback+capitalize(node[_type])),specific=option(input,state+capitalize(node[_type]));if(!0!==node[state]){if(!keep&&state==_checked&&node[_type]==_radio&&node.name){var form=input.closest("form"),inputs='input[name="'+node.name+'"]';(inputs=form.length?form.find(inputs):$(inputs)).each(function(){this!==node&&$(this).data(_iCheck)&&off($(this),state)})}indeterminate?(node[state]=!0,node[_checked]&&off(input,_checked,"force")):(keep||(node[state]=!0),checked&&node[_indeterminate]&&off(input,_indeterminate,!1)),callbacks(input,checked,state,keep)}node[_disabled]&&option(input,_cursor,!0)&&parent.find("."+_iCheckHelper).css(_cursor,"default"),parent[_add](specific||option(input,state)||""),parent.attr("role")&&!indeterminate&&parent.attr("aria-"+(disabled?_disabled:_checked),"true"),parent[_remove](regular||option(input,callback)||"")}function off(input,state,keep){var node=input[0],parent=input.parent(),checked=state==_checked,indeterminate=state==_indeterminate,disabled=state==_disabled,callback=indeterminate?_determinate:checked?_unchecked:"enabled",regular=option(input,callback+capitalize(node[_type])),specific=option(input,state+capitalize(node[_type]));!1!==node[state]&&(!indeterminate&&keep&&"force"!=keep||(node[state]=!1),callbacks(input,checked,callback,keep)),!node[_disabled]&&option(input,_cursor,!0)&&parent.find("."+_iCheckHelper).css(_cursor,"pointer"),parent[_remove](specific||option(input,state)||""),parent.attr("role")&&!indeterminate&&parent.attr("aria-"+(disabled?_disabled:_checked),"false"),parent[_add](regular||option(input,callback)||"")}function tidy(input,callback){input.data(_iCheck)&&(input.parent().html(input.attr("style",input.data(_iCheck).s||"")),callback&&input[_callback](callback),input.off(".i").unwrap(),$(_label+'[for="'+input[0].id+'"]').add(input.closest(_label)).off(".i"))}function option(input,state,regular){if(input.data(_iCheck))return input.data(_iCheck).o[state+(regular?"":"Class")]}function capitalize(string){return string.charAt(0).toUpperCase()+string.slice(1)}function callbacks(input,checked,callback,keep){keep||(checked&&input[_callback]("ifToggled"),input[_callback]("ifChanged")[_callback]("if"+capitalize(callback)))}var _iCheck="iCheck",_iCheckHelper=_iCheck+"-helper",_checkbox="checkbox",_radio="radio",_checked="checked",_unchecked="un"+_checked,_disabled="disabled";_determinate="determinate",_indeterminate="in"+_determinate,_update="update",_type="type",_click="click",_touch="touchbegin.i touchend.i",_add="addClass",_remove="removeClass",_callback="trigger",_label="label",_cursor="cursor",_mobile=/ipad|iphone|ipod|android|blackberry|windows phone|opera mini|silk/i.test(navigator.userAgent),$.fn[_iCheck]=function(options,fire){var handle='input[type="'+_checkbox+'"], input[type="'+_radio+'"]',stack=$(),walker=function(object){object.each(function(){var self=$(this);stack=self.is(handle)?stack.add(self):stack.add(self.find(handle))})};if(/^(check|uncheck|toggle|indeterminate|determinate|disable|enable|update|destroy)$/i.test(options))return options=options.toLowerCase(),walker(this),stack.each(function(){var self=$(this);"destroy"==options?tidy(self,"ifDestroyed"):operate(self,!0,options),$.isFunction(fire)&&fire()});if("object"!=typeof options&&options)return this;var settings=$.extend({checkedClass:_checked,disabledClass:_disabled,indeterminateClass:_indeterminate,labelHover:!0},options),selector=settings.handle,hoverClass=settings.hoverClass||"hover",focusClass=settings.focusClass||"focus",activeClass=settings.activeClass||"active",labelHover=!!settings.labelHover,labelHoverClass=settings.labelHoverClass||"hover",area=0|(""+settings.increaseArea).replace("%","");return selector!=_checkbox&&selector!=_radio||(handle='input[type="'+selector+'"]'),area<-50&&(area=-50),walker(this),stack.each(function(){var self=$(this);tidy(self);var helper,node=this,id=node.id,offset=-area+"%",size=100+2*area+"%",layer={position:"absolute",top:offset,left:offset,display:"block",width:size,height:size,margin:0,padding:0,background:"#fff",border:0,opacity:0},hide=_mobile?{position:"absolute",visibility:"hidden"}:area?layer:{position:"absolute",opacity:0},className=node[_type]==_checkbox?settings.checkboxClass||"i"+_checkbox:settings.radioClass||"i"+_radio,label=$(_label+'[for="'+id+'"]').add(self.closest(_label)),aria=!!settings.aria,ariaID=_iCheck+"-"+Math.random().toString(36).substr(2,6),parent='<div class="'+className+'" '+(aria?'role="'+node[_type]+'" ':"");aria&&label.each(function(){parent+='aria-labelledby="',this.id?parent+=this.id:(this.id=ariaID,parent+=ariaID),parent+='"'}),parent=self.wrap(parent+"/>")[_callback]("ifCreated").parent().append(settings.insert),helper=$('<ins class="'+_iCheckHelper+'"/>').css(layer).appendTo(parent),self.data(_iCheck,{o:settings,s:self.attr("style")}).css(hide),settings.inheritClass&&parent[_add](node.className||""),settings.inheritID&&id&&parent.attr("id",_iCheck+"-"+id),"static"==parent.css("position")&&parent.css("position","relative"),operate(self,!0,_update),label.length&&label.on(_click+".i mouseover.i mouseout.i "+_touch,function(event){var type=event[_type],item=$(this);if(!node[_disabled]){if(type==_click){if($(event.target).is("a"))return;operate(self,!1,!0)}else labelHover&&(/ut|nd/.test(type)?(parent[_remove](hoverClass),item[_remove](labelHoverClass)):(parent[_add](hoverClass),item[_add](labelHoverClass)));if(!_mobile)return!1;event.stopPropagation()}}),self.on(_click+".i focus.i blur.i keyup.i keydown.i keypress.i",function(event){var type=event[_type],key=event.keyCode;return type!=_click&&("keydown"==type&&32==key?(node[_type]==_radio&&node[_checked]||(node[_checked]?off(self,_checked):on(self,_checked)),!1):void("keyup"==type&&node[_type]==_radio?!node[_checked]&&on(self,_checked):/us|ur/.test(type)&&parent["blur"==type?_remove:_add](focusClass)))}),helper.on(_click+" mousedown mouseup mouseover mouseout "+_touch,function(event){var type=event[_type],toggle=/wn|up/.test(type)?activeClass:hoverClass;if(!node[_disabled]){if(type==_click?operate(self,!1,!0):(/wn|er|in/.test(type)?parent[_add](toggle):parent[_remove](toggle+" "+activeClass),label.length&&labelHover&&toggle==hoverClass&&label[/ut|nd/.test(type)?_remove:_add](labelHoverClass)),!_mobile)return!1;event.stopPropagation()}})})}}(window.jQuery||window.Zepto),window.Modernizr=function(a,b,c){function C(a){j.cssText=a}function D(a,b){return C(n.join(a+";")+(b||""))}function E(a,b){return typeof a===b}function F(a,b){return!!~(""+a).indexOf(b)}function G(a,b){for(var d in a){var e=a[d];if(!F(e,"-")&&j[e]!==c)return"pfx"!=b||e}return!1}function H(a,b,d){for(var e in a){var f=b[a[e]];if(f!==c)return!1===d?a[e]:E(f,"function")?f.bind(d||b):f}return!1}function I(a,b,c){var d=a.charAt(0).toUpperCase()+a.slice(1),e=(a+" "+p.join(d+" ")+d).split(" ");return E(b,"string")||E(b,"undefined")?G(e,b):H(e=(a+" "+q.join(d+" ")+d).split(" "),b,c)}var x,B,d="2.6.2",e={},f=!0,g=b.documentElement,h="modernizr",i=b.createElement(h),j=i.style,l=":)",m={}.toString,n=" -webkit- -moz- -o- -ms- ".split(" "),o="Webkit Moz O ms",p=o.split(" "),q=o.toLowerCase().split(" "),r={svg:"http://www.w3.org/2000/svg"},s={},v=[],w=v.slice,y=function(a,c,d,e){var f,i,j,k,l=b.createElement("div"),m=b.body,n=m||b.createElement("body");if(parseInt(d,10))for(;d--;)(j=b.createElement("div")).id=e?e[d]:h+(d+1),l.appendChild(j);return f=["&#173;",'<style id="s',h,'">',a,"</style>"].join(""),l.id=h,(m?l:n).innerHTML+=f,n.appendChild(l),m||(n.style.background="",n.style.overflow="hidden",k=g.style.overflow,g.style.overflow="hidden",g.appendChild(n)),i=c(l,a),m?l.parentNode.removeChild(l):(n.parentNode.removeChild(n),g.style.overflow=k),!!i},z=function(){function d(d,e){e=e||b.createElement(a[d]||"div");var f=(d="on"+d)in e;return f||(e.setAttribute||(e=b.createElement("div")),e.setAttribute&&e.removeAttribute&&(e.setAttribute(d,""),f=E(e[d],"function"),E(e[d],"undefined")||(e[d]=c),e.removeAttribute(d))),e=null,f}var a={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return d}(),A={}.hasOwnProperty;for(var J in B=E(A,"undefined")||E(A.call,"undefined")?function(a,b){return b in a&&E(a.constructor.prototype[b],"undefined")}:function(a,b){return A.call(a,b)},Function.prototype.bind||(Function.prototype.bind=function(b){var c=this;if("function"!=typeof c)throw new TypeError;var d=w.call(arguments,1),e=function(){if(this instanceof e){var a=function(){};a.prototype=c.prototype;var f=new a,g=c.apply(f,d.concat(w.call(arguments)));return Object(g)===g?g:f}return c.apply(b,d.concat(w.call(arguments)))};return e}),s.flexbox=function(){return I("flexWrap")},s.flexboxlegacy=function(){return I("boxDirection")},s.canvas=function(){var a=b.createElement("canvas");return!!a.getContext&&!!a.getContext("2d")},s.canvastext=function(){return!!e.canvas&&!!E(b.createElement("canvas").getContext("2d").fillText,"function")},s.webgl=function(){return!!a.WebGLRenderingContext},s.touch=function(){var c;return"ontouchstart"in a||a.DocumentTouch&&b instanceof DocumentTouch?c=!0:y(["@media (",n.join("touch-enabled),("),h,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(a){c=9===a.offsetTop}),c},s.geolocation=function(){return"geolocation"in navigator},s.history=function(){return!!a.history&&!!history.pushState},s.draganddrop=function(){var a=b.createElement("div");return"draggable"in a||"ondragstart"in a&&"ondrop"in a},s.rgba=function(){return C("background-color:rgba(150,255,150,.5)"),F(j.backgroundColor,"rgba")},s.hsla=function(){return C("background-color:hsla(120,40%,100%,.5)"),F(j.backgroundColor,"rgba")||F(j.backgroundColor,"hsla")},s.multiplebgs=function(){return C("background:url(https://),url(https://),red url(https://)"),/(url\s*\(.*?){3}/.test(j.background)},s.backgroundsize=function(){return I("backgroundSize")},s.borderimage=function(){return I("borderImage")},s.borderradius=function(){return I("borderRadius")},s.boxshadow=function(){return I("boxShadow")},s.textshadow=function(){return""===b.createElement("div").style.textShadow},s.opacity=function(){return D("opacity:.55"),/^0.55$/.test(j.opacity)},s.cssanimations=function(){return I("animationName")},s.csscolumns=function(){return I("columnCount")},s.cssgradients=function(){var a="background-image:",b="gradient(linear,left top,right bottom,from(#9f9),to(white));",c="linear-gradient(left top,#9f9, white);";return C((a+"-webkit- ".split(" ").join(b+a)+n.join(c+a)).slice(0,-a.length)),F(j.backgroundImage,"gradient")},s.cssreflections=function(){return I("boxReflect")},s.csstransforms=function(){return!!I("transform")},s.csstransforms3d=function(){var a=!!I("perspective");return a&&"webkitPerspective"in g.style&&y("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(b){a=9===b.offsetLeft&&3===b.offsetHeight}),a},s.csstransitions=function(){return I("transition")},s.fontface=function(){var a;return y('@font-face {font-family:"font";src:url("https://")}',function(c,d){var e=b.getElementById("smodernizr"),f=e.sheet||e.styleSheet,g=f?f.cssRules&&f.cssRules[0]?f.cssRules[0].cssText:f.cssText||"":"";a=/src/i.test(g)&&0===g.indexOf(d.split(" ")[0])}),a},s.generatedcontent=function(){var a;return y(["#",h,"{font:0/0 a}#",h,':after{content:"',l,'";visibility:hidden;font:3px/1 a}'].join(""),function(b){a=b.offsetHeight>=3}),a},s.video=function(){var a=b.createElement("video"),c=!1;try{(c=!!a.canPlayType)&&((c=new Boolean(c)).ogg=a.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),c.h264=a.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),c.webm=a.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,""))}catch(d){}return c},s.audio=function(){var a=b.createElement("audio"),c=!1;try{(c=!!a.canPlayType)&&((c=new Boolean(c)).ogg=a.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),c.mp3=a.canPlayType("audio/mpeg;").replace(/^no$/,""),c.wav=a.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),c.m4a=(a.canPlayType("audio/x-m4a;")||a.canPlayType("audio/aac;")).replace(/^no$/,""))}catch(d){}return c},s.applicationcache=function(){return!!a.applicationCache},s.svg=function(){return!!b.createElementNS&&!!b.createElementNS(r.svg,"svg").createSVGRect},s.inlinesvg=function(){var a=b.createElement("div");return a.innerHTML="<svg/>",(a.firstChild&&a.firstChild.namespaceURI)==r.svg},s.smil=function(){return!!b.createElementNS&&/SVGAnimate/.test(m.call(b.createElementNS(r.svg,"animate")))},s.svgclippaths=function(){return!!b.createElementNS&&/SVGClipPath/.test(m.call(b.createElementNS(r.svg,"clipPath")))},s)B(s,J)&&(x=J.toLowerCase(),e[x]=s[J](),v.push((e[x]?"":"no-")+x));return e.addTest=function(a,b){if("object"==typeof a)for(var d in a)B(a,d)&&e.addTest(d,a[d]);else{if(a=a.toLowerCase(),e[a]!==c)return e;b="function"==typeof b?b():b,void 0!==f&&f&&(g.className+=" mod_"+(b?"":"no-")+a),e[a]=b}return e},C(""),i=null,function(a,b){function k(a,b){var c=a.createElement("p"),d=a.getElementsByTagName("head")[0]||a.documentElement;return c.innerHTML="x<style>"+b+"</style>",d.insertBefore(c.lastChild,d.firstChild)}function l(){var a=r.elements;return"string"==typeof a?a.split(" "):a}function m(a){var b=i[a[g]];return b||(b={},h++,a[g]=h,i[h]=b),b}function n(a,c,f){return c||(c=b),j?c.createElement(a):(f||(f=m(c)),(g=f.cache[a]?f.cache[a].cloneNode():e.test(a)?(f.cache[a]=f.createElem(a)).cloneNode():f.createElem(a)).canHaveChildren&&!d.test(a)?f.frag.appendChild(g):g);var g}function o(a,c){if(a||(a=b),j)return a.createDocumentFragment();for(var d=(c=c||m(a)).frag.cloneNode(),e=0,f=l(),g=f.length;e<g;e++)d.createElement(f[e]);return d}function p(a,b){b.cache||(b.cache={},b.createElem=a.createElement,b.createFrag=a.createDocumentFragment,b.frag=b.createFrag()),a.createElement=function(c){return r.shivMethods?n(c,a,b):b.createElem(c)},a.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+l().join().replace(/\w+/g,function(a){return b.createElem(a),b.frag.createElement(a),'c("'+a+'")'})+");return n}")(r,b.frag)}function q(a){a||(a=b);var c=m(a);return r.shivCSS&&!f&&!c.hasCSS&&(c.hasCSS=!!k(a,"article,aside,figcaption,figure,footer,header,hgroup,nav,section{display:block}mark{background:#FF0;color:#000}")),j||p(a,c),a}var f,j,c=a.html5||{},d=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,e=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,g="_html5shiv",h=0,i={};!function(){try{var a=b.createElement("a");a.innerHTML="<xyz></xyz>",f="hidden"in a,j=1==a.childNodes.length||function(){b.createElement("a");var a=b.createDocumentFragment();return"undefined"==typeof a.cloneNode||"undefined"==typeof a.createDocumentFragment||"undefined"==typeof a.createElement}()}catch(c){f=!0,j=!0}}();var r={elements:c.elements||"abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video",shivCSS:!1!==c.shivCSS,supportsUnknownElements:j,shivMethods:!1!==c.shivMethods,type:"default",shivDocument:q,createElement:n,createDocumentFragment:o};a.html5=r,q(b)}(this,b),e._version=d,e._prefixes=n,e._domPrefixes=q,e._cssomPrefixes=p,e.hasEvent=z,e.testProp=function(a){return G([a])},e.testAllProps=I,e.testStyles=y,g.className=g.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(f?" mod_js mod_"+v.join(" mod_"):""),e}(this,this.document),function(a,b,c){function d(a){return"[object Function]"==o.call(a)}function e(a){return"string"==typeof a}function f(){}function g(a){return!a||"loaded"==a||"complete"==a||"uninitialized"==a}function h(){var a=p.shift();q=1,a?a.t?m(function(){("c"==a.t?B.injectCss:B.injectJs)(a.s,0,a.a,a.x,a.e,1)},0):(a(),h()):q=0}function i(a,c,d,e,f,i,j){function k(b){if(!o&&g(l.readyState)&&(u.r=o=1,!q&&h(),l.onload=l.onreadystatechange=null,b))for(var d in"img"!=a&&m(function(){t.removeChild(l)},50),y[c])y[c].hasOwnProperty(d)&&y[c][d].onload()}j=j||B.errorTimeout;var l=b.createElement(a),o=0,r=0,u={t:d,s:c,e:f,a:i,x:j};1===y[c]&&(r=1,y[c]=[]),"object"==a?l.data=c:(l.src=c,l.type=a),l.width=l.height="0",l.onerror=l.onload=l.onreadystatechange=function(){k.call(this,r)},p.splice(e,0,u),"img"!=a&&(r||2===y[c]?(t.insertBefore(l,s?null:n),m(k,j)):y[c].push(l))}function j(a,b,c,d,f){return q=0,b=b||"j",e(a)?i("c"==b?v:u,a,b,this.i++,c,d,f):(p.splice(this.i++,0,a),1==p.length&&h()),this}function k(){var a=B;return a.loader={load:j,i:0},a}var A,B,l=b.documentElement,m=a.setTimeout,n=b.getElementsByTagName("script")[0],o={}.toString,p=[],q=0,r="MozAppearance"in l.style,s=r&&!!b.createRange().compareNode,t=s?l:n.parentNode,u=(l=a.opera&&"[object Opera]"==o.call(a.opera),l=!!b.attachEvent&&!l,r?"object":l?"script":"img"),v=l?"script":u,w=Array.isArray||function(a){return"[object Array]"==o.call(a)},x=[],y={},z={timeout:function(a,b){return b.length&&(a.timeout=b[0]),a}};(B=function(a){function b(a){a=a.split("!");var e,f,g,b=x.length,c=a.pop(),d=a.length;c={url:c,origUrl:c,prefixes:a};for(f=0;f<d;f++)g=a[f].split("="),(e=z[g.shift()])&&(c=e(c,g));for(f=0;f<b;f++)c=x[f](c);return c}function g(a,e,f,g,h){var i=b(a),j=i.autoCallback;i.url.split(".").pop().split("?").shift(),i.bypass||(e&&(e=d(e)?e:e[a]||e[g]||e[a.split("/").pop().split("?")[0]]),i.instead?i.instead(a,e,f,g,h):(y[i.url]?i.noexec=!0:y[i.url]=1,f.load(i.url,i.forceCSS||!i.forceJS&&"css"==i.url.split(".").pop().split("?").shift()?"c":c,i.noexec,i.attrs,i.timeout),(d(e)||d(j))&&f.load(function(){k(),e&&e(i.origUrl,h,g),j&&j(i.origUrl,h,g),y[i.url]=2})))}function h(a,b){function c(a,c){if(a){if(e(a))c||(j=function(){var a=[].slice.call(arguments);k.apply(this,a),l()}),g(a,j,b,0,h);else if(Object(a)===a)for(n in m=function(){var c,b=0;for(c in a)a.hasOwnProperty(c)&&b++;return b}(),a)a.hasOwnProperty(n)&&(!c&&!--m&&(d(j)?j=function(){var a=[].slice.call(arguments);k.apply(this,a),l()}:j[n]=function(a){return function(){var b=[].slice.call(arguments);a&&a.apply(this,b),l()}}(k[n])),g(a[n],j,b,n,h))}else!c&&l()}var m,n,h=!!a.test,i=a.load||a.both,j=a.callback||f,k=j,l=a.complete||f;c(h?a.yep:a.nope,!!i),i&&c(i)}var i,j,l=this.yepnope.loader;if(e(a))g(a,0,l,0);else if(w(a))for(i=0;i<a.length;i++)e(j=a[i])?g(j,0,l,0):w(j)?B(j):Object(j)===j&&h(j,l);else Object(a)===a&&h(a,l)}).addPrefix=function(a,b){z[a]=b},B.addFilter=function(a){x.push(a)},B.errorTimeout=1e4,null==b.readyState&&b.addEventListener&&(b.readyState="loading",b.addEventListener("DOMContentLoaded",A=function(){b.removeEventListener("DOMContentLoaded",A,0),b.readyState="complete"},0)),a.yepnope=k(),a.yepnope.executeStack=h,a.yepnope.injectJs=function(a,c,d,e,i,j){var l,o,k=b.createElement("script");e=e||B.errorTimeout;for(o in k.src=a,d)k.setAttribute(o,d[o]);c=j?h:c||f,k.onreadystatechange=k.onload=function(){!l&&g(k.readyState)&&(l=1,c(),k.onload=k.onreadystatechange=null)},m(function(){l||(l=1,c(1))},e),i?k.onload():n.parentNode.insertBefore(k,n)},a.yepnope.injectCss=function(a,c,d,e,g,i){var j;e=b.createElement("link"),c=i?h:c||f;for(j in e.href=a,e.rel="stylesheet",e.type="text/css",d)e.setAttribute(j,d[j]);g||(n.parentNode.insertBefore(e,n),m(c,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))},Modernizr.addTest("csscalc",function(){var a="width:",b="calc(10px);",c=document.createElement("div");return c.style.cssText=a+Modernizr._prefixes.join(b+a),!!c.style.length}),Modernizr.addTest("fullscreen",function(){for(var a=0;a<Modernizr._domPrefixes.length;a++)if(document[Modernizr._domPrefixes[a].toLowerCase()+"CancelFullScreen"])return!0;return!!document.cancelFullScreen||!1}),Modernizr.addTest("cssresize",Modernizr.testAllProps("resize")),Modernizr.addTest("ie8compat",function(){return!window.addEventListener&&document.documentMode&&7===document.documentMode}),function(){!function($){$.dragResize={version:"1.0"},$.fn.dragResize=function(options){var default_options,document_width,enable_resize,initRatio,left,mousemove,mouseout,mouseup,that;return default_options={resize:function(){},activeColor:"#AAA",inactiveColor:"#DDD"},that=this,options=$.extend(default_options,options),enable_resize=!1,"undefined"!=typeof options.initRatio&&(initRatio=options.initRatio.split(":"),left=parseInt(initRatio[0]),parseInt(initRatio[1]),enable_resize=!0,document_width=$(document).width(),options.resize(left*document_width/100,1),enable_resize=!1),$(this).mouseenter(function(){return $(that).css("background-color",options.activeColor)}),$(this).mouseleave(function(){return $(that).css("background-color",options.inactiveColor)}),mouseup=function(){var separator_left_coordinate;return separator_left_coordinate=$(that).position().left,"function"==typeof options.mouseupCallback&&options.mouseupCallback(separator_left_coordinate),enable_resize=!1,$(window).off("mouseup",mouseup),$(window).off("mouseout",mouseout),$(window).off("mousemove",mousemove)},mouseout=function(e){if(null===e.relatedTarget)return enable_resize=!1},mousemove=function(e){if(!0===enable_resize)return(e.pageY<0||e.pageY>document.height||e.pageX<0||e.pageX>document.width)&&(enable_resize=!1),options.resize(e.pageX,e.pageY)},$(this).mousedown(function(){return enable_resize=!0,$(window).mouseup(mouseup),$(window).mouseout(mouseout),$(window).mousemove(mousemove)})}}($)}.call(this),function(){jQuery(function(){var HR,getParameterByName,ref,setInternalAnalytics,set_h_l,set_h_params,set_h_r,set_h_v;return getParameterByName=function(name){var results;return name=name.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),null==(results=new RegExp("[\\?&]"+name+"=([^&#]*)").exec(location.search))?"":decodeURIComponent(results[1].replace(/\+/g," "))},set_h_r=function(value,options){return null==options&&(options={}),set_h_params(value,null,null,options)},set_h_v=function(value,options){return null==options&&(options={}),set_h_params(null,value,null,options)},set_h_l=function(value,options){return null==options&&(options={}),set_h_params(null,null,value,options)},set_h_params=function(h_referrer_val,h_version_val,h_location_val,_options){var cookie_options,default_options,h_location,h_referrer,h_version,options;if(null==h_referrer_val&&(h_referrer_val=null),null==h_version_val&&(h_version_val=null),null==h_location_val&&(h_location_val=null),null==_options&&(_options={}),default_options={force:!0},options=_.extend(default_options,_options),h_referrer="h_r",h_location="h_l",h_version="h_v",cookie_options={expires:365,domain:HR.development?"localhost":".hackerrank.com",path:"/"},(options.force||_.isEmpty($.cookie(h_referrer)))&&(_.isEmpty(h_referrer_val)||$.cookie(h_referrer,h_referrer_val,cookie_options)),(options.force||_.isEmpty($.cookie(h_location)))&&(_.isEmpty(h_location_val)?_.isEmpty(h_referrer_val)||$.cookie(h_location,"_default",cookie_options):$.cookie(h_location,h_location_val,cookie_options)),options.force||_.isEmpty($.cookie(h_version))){if(!_.isEmpty(h_version_val))return $.cookie(h_version,h_version_val,cookie_options);if(!_.isEmpty(h_referrer_val))return $.cookie(h_version,"_default",cookie_options)}},setInternalAnalytics=function(){var h_location_val,h_referrer_val,h_version_val;return h_referrer_val=HR.util.getParameterByName("h_r"),h_location_val=HR.util.getParameterByName("h_l"),h_version_val=HR.util.getParameterByName("h_v"),set_h_params(h_referrer_val,h_version_val,h_location_val)},(HR=null!=(ref=window.HR)?ref:{}).util||(HR.util={}),HR.util.getParameterByName=getParameterByName,HR.util.set_h_params=set_h_params,HR.util.set_h_r=set_h_r,HR.util.set_h_v=set_h_v,HR.util.set_h_l=set_h_l,HR.util.setInternalAnalytics=setInternalAnalytics,window.HR||(window.HR=HR)})}.call(this),function(){var indexOf=[].indexOf||function(item){for(var i=0,l=this.length;i<l;i++)if(i in this&&this[i]===item)return i;return-1};jQuery(function(){var Base64,HR,ajaxerrormsg,ajaxmsg,badURLValidator,candidateTrack,candidatemsg,communityLogout,confirmDialog,convertTime,country_select2_options,date_get12hour_hour,date_get12hour_offset,date_getMon,date_getMonth,downloadURL,error_html,externalRedirectURL,findDuplicates,formatAMPM,formatNumber,formatTimeInTz,genModContainer,generateBadge,generatePusherSocketId,generateRequestUniqueId,getCSSPath,getCurrentHost,getCurrentYear,getDateFromEpoch,getEpochTimeStampFromDateTime,getErrorList,getFileAnchor,getKrackJackPath,getNetworkTypes,getNumberWithComma,getRemainingTime,getSelect2Options,getTimezoneOffset,getUTFBytes,getVars,getWebpackRuntimePath,hideNavigation,hideajaxmsg,hralert,hrconfirm,hrwLoggedOutAlert,htmlDecode,htmlEncode,humanizeNumber,initializeAbTest,inlineLoadingEnd,inlineLoadingStart,isAvailable,isChrome,isChrome76,isIE,isIE10OrBelow,isOldBrowser,isProperEmail,isProperName,isReactRoute,isUnsupportedDevice,isUnsupportedFullScreenBrowser,isUnsupportedProctoring,isValidPhoneNumber,linkify,loadCssCustom,localDownload,numberSuffix,pagination,parseURL,previewHackdown,previewHackdownWith,ratingLevelToTitle,ref,removeAllInlineThrobbers,renderBreadCrumbs,scrollToBottom,scrollToTop,setTab,showCookieBanner,showInlineSuccess,showVideoModal,siteWideOverlay,slugify,splitDate,timezone_abbr,toOrdinal,trackJobsSourceCampaign,trimRight,truncateWithEllipses,updateExternalLinks,validate_date,validate_time,workLogout;return["type","value","placeholder","disabled","name"],slugify=function(str,delim){return null==delim&&(delim="-"),str.replace(/[ \t\n_]+/g,delim).toLowerCase()},initializeAbTest=function(){return HR.ABTest=[],!!HR.PREFETCH_DATA.hasOwnProperty("ab_tests")&&(HR.ABTest=new HR.AbTestCollection(HR.PREFETCH_DATA.ab_tests.models),!0)},getNetworkTypes=function(type){var company,school;return null==type&&(type=!1),school=new HR.GenericModel({entity:"school",placeholder:"Which school did you go to?",icon:"icon-graduation-cap"}),company=new HR.GenericModel({entity:"company",placeholder:"Which companies have you worked at?",icon:"icon-briefcase"}),"school"===type?school:"company"===type?company:new HR.GenericCollection([school,company])},setTab=function(tabName){var j,len,results,tab,tabs,targetTab;for(HR.tab=tabName,targetTab="profile"!==tabName?"tab-"+tabName:"profile-menu",results=[],j=0,len=(tabs=$(".page-nav").find(".nav").find("li")).length;j<len;j++)tab=tabs[j],$(tab).attr("id")!==targetTab?results.push($(tab).removeClass("active")):results.push($(tab).addClass("active"));return results},isProperEmail=function(email){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(email)},pagination=function($obj,total,url_prefix,current_page,collection,count,pages,class_name,pagination_select){var analytics_stub,eachpage,fn,j,last,last_page,onEnd,output,ref,ref1,start;if(null==current_page&&(current_page=1),null==collection&&(collection=null),null==count&&(count=10),null==pages&&(pages=10),null==class_name&&(class_name="backbone"),null==pagination_select&&(pagination_select=!0),$obj){if(url_prefix=url_prefix.replace(/(<\s*?script.*?>|<\s*?\/script.*?>)/gi,""),current_page=parseInt(current_page),output='<div class="pagination"><ul>',start=Math.floor(pages/2)>=current_page&&current_page>=1?1:current_page-Math.floor(pages/2),0===(last_page=Math.ceil(total/count))&&(last_page=1),(last=last_page>=start+(pages-1)?start+(pages-1):last_page)-start<pages-1&&(start=last-(pages-1))<1&&(start=1),last===start||_.isNaN(last))return"";for(onEnd=current_page===last_page,analytics_stub='data-analytics="Pagination" data-attr7="'+current_page+'"',1===current_page?(output+='<li class="disabled"><a data-analytics="Pagination" data-attr1="First"> <span class="double-caret left"></span><span class="double-caret left"></span></a></li>',output+='<li class="disabled"><a data-analytics="Pagination" data-attr1="Left"> <span class="caret left"></span></a></li>'):(output+='<li><a class="'+class_name+'" data-page="1" href="'+url_prefix+'1" '+analytics_stub+'data-attr1="First" data-attr8="1"><span class="double-caret left"></span><span class="double-caret left"></span></a></li>',output+='<li><a class="'+class_name+'" data-page="'+(current_page-1)+'" href="'+url_prefix+(current_page-1)+'"'+analytics_stub+'data-attr1="Left" data-attr8="'+(current_page-1)+'"><span class="caret left"></span></a></li>'),fn=function(eachpage){return output+=eachpage!==current_page?'<li><a class="'+class_name+'" data-page="'+eachpage+'" href="'+url_prefix+eachpage+'"'+analytics_stub+' data-attr1="Page" data-attr8="'+eachpage+'">'+eachpage+"</a></li>":'<li class="active"><a class="'+class_name+'" data-page="'+eachpage+'" href="'+url_prefix+eachpage+'"'+analytics_stub+' data-attr1="Page" data-attr8="'+eachpage+'">'+eachpage+"</a></li>"},eachpage=j=ref=start,ref1=last;ref<=ref1?j<=ref1:j>=ref1;eachpage=ref<=ref1?++j:--j)fn(eachpage);return onEnd?(output+='<li class="disabled"><a data-analytics="Pagination" data-attr1="Right"> <span class="caret right"></span></a></li>',output+='<li class="disabled"><a data-analytics="Pagination" data-attr1="Last"> <span class="double-caret right"></span><span class="double-caret right"></span></a></li>'):(output+='<li><a class="'+class_name+'" data-page="'+(current_page+1)+'" href="'+url_prefix+(current_page+1)+'"'+analytics_stub+' data-attr1="Right" data-attr8="'+(current_page+1)+'"><span class="caret right"></span></a></li>',output+='<li><a class="'+class_name+'" data-page="'+last_page+'" href="'+url_prefix+last_page+'"'+analytics_stub+' data-attr1="Last"  data-attr8="'+last_page+'"><span class="double-caret right"></span><span class="double-caret right"></span></a></li>'),output+="</ul></div>",pagination_select&&(output+="<div class='pagination-sub text-center msB'>",null!==collection&&(output+="<p class='inline-block msR small bold'>Items per page:</p> <select id='pagination-length' name='pagination-length'> <option value='10'>10</option> <option value='20'>20</option> <option value='50'>50</option> <option value='100'>100</option> </select>"),output+="</div>"),$obj.html(output),$obj.find("#pagination-length").select2({width:"100px"}),$obj.find("#pagination-length").select2("val",count),$obj.find("#pagination-length").bind("change",function(e){var new_limit;if(e.preventDefault(),null!==collection&&(new_limit=parseInt($(e.currentTarget).val()))&&!_.isNaN(new_limit))return $.cookie("pagination_per_page_limit",new_limit,{expires:365}),_.isFunction(collection.adjustPagination)&&collection.adjustPagination(collection.limit,new_limit,url_prefix),collection.setLimit(new_limit),collection.cached(),$("html body").animate({scrollTop:0},300)}),$obj}},formatTimeInTz=function(time,timezone,format){return null==format&&(format=null),time=moment(time),timezone?time=time.tz(timezone):(timezone=moment.tz.guess())&&(time=time.tz(timezone)),time.format(format)},ajaxmsg=function(msg,loader,autohide,timeout){var $ajaxmsg;if(null==loader&&(loader=!0),null==autohide&&(autohide=!1),null==timeout&&(timeout=.5),0===($ajaxmsg=$("div#ajax-msg-wrap #ajax-msg")).length?($("div#ajax-msg-wrap").append('<div id="ajax-msg"><span class="ajax-loader"></span><span class="ajax-msg"></span></div>'),$ajaxmsg=$("div#ajax-msg-wrap #ajax-msg")):($ajaxmsg.removeClass("error"),$ajaxmsg.show()),loader?$ajaxmsg.find(".ajax-loader").addClass("ajax-loading"):$ajaxmsg.find(".ajax-loader").removeClass("ajax-loading"),$ajaxmsg.find(".ajax-msg").html(msg),$ajaxmsg.css("margin-left",$ajaxmsg.width()/2*-1),autohide)return setTimeout(function(){return $("#ajax-msg").hide()},1e3*timeout)},hideajaxmsg=function(){return $("div#ajax-msg-wrap #ajax-msg"),$("#ajax-msg").hide()},ajaxerrormsg=function(msg,loader,autohide,timeout){var $ajaxmsg;if(null==loader&&(loader=!0),null==autohide&&(autohide=!1),null==timeout&&(timeout=.5),
0===($ajaxmsg=$("div#ajax-msg-wrap #ajax-msg")).length?($("div#ajax-msg-wrap").append('<div id="ajax-msg" class="error"><span class="ajax-loader"></span><span class="ajax-msg"></span></div>'),$ajaxmsg=$("div#ajax-msg-wrap #ajax-msg")):($ajaxmsg.addClass("error"),$ajaxmsg.show()),loader?$ajaxmsg.find(".ajax-loader").addClass("ajax-loading"):$ajaxmsg.find(".ajax-loader").removeClass("ajax-loading"),$ajaxmsg.find(".ajax-msg").html(msg),$ajaxmsg.css("margin-left",$ajaxmsg.width()/2*-1),autohide)return setTimeout(function(){return $("#ajax-msg").hide()},1e3*timeout)},candidatemsg=function(message,loader,autohide,timeout){var msg;if(null==message&&(message=""),null==loader&&(loader=!0),null==autohide&&(autohide=!1),null==timeout&&(timeout=.5),(msg=$("div.loading_box")).find(".recruitmsg").html(message),msg.find("img").hide(),msg.show(),autohide)return setTimeout(function(){return msg.hide()},1e3*timeout)},Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(input){var chr1,chr2,chr3,enc1,enc2,enc3,enc4,i,output;for(output="",chr1=void 0,chr2=void 0,chr3=void 0,enc1=void 0,enc2=void 0,enc3=void 0,enc4=void 0,i=0,input=Base64._utf8_encode(input);i<input.length;)enc1=(chr1=input.charCodeAt(i++))>>2,enc2=(3&chr1)<<4|(chr2=input.charCodeAt(i++))>>4,enc3=(15&chr2)<<2|(chr3=input.charCodeAt(i++))>>6,enc4=63&chr3,isNaN(chr2)?enc3=enc4=64:isNaN(chr3)&&(enc4=64),output=output+this._keyStr.charAt(enc1)+this._keyStr.charAt(enc2)+this._keyStr.charAt(enc3)+this._keyStr.charAt(enc4);return output},decode:function(input){var chr1,chr2,chr3,enc2,enc3,enc4,i,output;for(output="",chr1=void 0,chr2=void 0,chr3=void 0,void 0,enc2=void 0,enc3=void 0,enc4=void 0,i=0,input=input.replace(/[^A-Za-z0-9\+\/\=]/g,"");i<input.length;)chr1=this._keyStr.indexOf(input.charAt(i++))<<2|(enc2=this._keyStr.indexOf(input.charAt(i++)))>>4,chr2=(15&enc2)<<4|(enc3=this._keyStr.indexOf(input.charAt(i++)))>>2,chr3=(3&enc3)<<6|(enc4=this._keyStr.indexOf(input.charAt(i++))),output+=String.fromCharCode(chr1),64!==enc3&&(output+=String.fromCharCode(chr2)),64!==enc4&&(output+=String.fromCharCode(chr3));return output=Base64._utf8_decode(output)},_utf8_encode:function(string){var c,n,utftext;for(string=string.replace(/\r\n/g,"\n"),utftext="",n=0;n<string.length;)(c=string.charCodeAt(n))<128?utftext+=String.fromCharCode(c):c>127&&c<2048?(utftext+=String.fromCharCode(c>>6|192),utftext+=String.fromCharCode(63&c|128)):(utftext+=String.fromCharCode(c>>12|224),utftext+=String.fromCharCode(c>>6&63|128),utftext+=String.fromCharCode(63&c|128)),n++;return utftext},_utf8_decode:function(utftext){var c,c2,c3,i,string;for(string="",i=0,c=c2=0;i<utftext.length;)(c=utftext.charCodeAt(i))<128?(string+=String.fromCharCode(c),i++):c>191&&c<224?(c2=utftext.charCodeAt(i+1),string+=String.fromCharCode((31&c)<<6|63&c2),i+=2):(c2=utftext.charCodeAt(i+1),c3=utftext.charCodeAt(i+2),string+=String.fromCharCode((15&c)<<12|(63&c2)<<6|63&c3),i+=3);return string}},numberSuffix=function(number){var mod10;return number>0?1===(mod10=number%10)&&11!==number?number+"st":2===mod10&&12!==number?number+"nd":3===mod10&&13!==number?number+"rd":number+"th":number},getRemainingTime=function(destination,current,include_zero_values){var date_time_string,days,hours,minutes,offset_hours,offset_minutes,seconds,seconds_diff,target;return null==current&&(current=new Date),null==include_zero_values&&(include_zero_values=!0),(target=new Date(0)).setUTCSeconds(destination),(seconds_diff=Math.floor((target-current)/1e3))>0&&(days=Math.floor(seconds_diff/86400),offset_hours=seconds_diff%86400,hours=Math.floor(offset_hours/3600),offset_minutes=offset_hours%3600,minutes=Math.floor(offset_minutes/60),seconds=offset_minutes%60,date_time_string="",days>0&&(date_time_string+=days+" "+(1===days?"day":"days")+" "),(days>0||hours>0)&&(hours>0||include_zero_values)&&(date_time_string+=hours+" "+(1===hours?"hour":"hours")+" "),(days>0||hours>0||minutes>0)&&(minutes>0||include_zero_values)&&(date_time_string+=minutes+" "+(1===minutes?"minute":"minutes")+" "),(days>0||hours>0||minutes>0||seconds>0)&&(seconds>0||include_zero_values)&&(date_time_string+=seconds+" "+(1===seconds?"second":"seconds"))),date_time_string},convertTime=function(x){var minute,second;return minute=parseInt(x/60).toString(),(second=parseInt(x%60).toString()).length<2&&(second="0"+second),minute+":"+second},renderBreadCrumbs=function(el,breadcrumbs){var breadCrumbsView;return breadCrumbsView=new HR.BreadCrumbsView({collection:breadcrumbs}),$(el).html(breadCrumbsView.render().el),breadCrumbsView},htmlEncode=function(value){return""===value||void 0===value?"":String(value).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},htmlDecode=function(value){return String(value).replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")},getCSSPath=function(name){return HR.STYLESHEET_PATH&&HR.STYLESHEET_PATH[name]?HR.STYLESHEET_PATH[name]:asset_path(name)},scrollToTop=function(speed){return null==speed&&(speed=0),$("html, body").animate({scrollTop:0},speed)},scrollToBottom=function(speed){return null==speed&&(speed=0),$("html, body").animate({scrollTop:$(document).height()},speed)},timezone_abbr=function(dateInput){var olson_tz;return dateInput||new Date,olson_tz=moment.tz.guess(),moment().tz(olson_tz).format("z")},toOrdinal=function(number){var s,v;return number+((s=["th","st","nd","rd"])[((v=number%100)-20)%10]||s[v]||s[0])},date_getMon=function(date){return["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][date.getMonth()]},date_getMonth=function(date){return moment(date).format("MMMM")},formatAMPM=function(date){return moment(date).format("hh:mm a")},date_get12hour_hour=function(date){var hours;return hours=0===(hours=date.getHours()%12)?12:hours},date_get12hour_offset=function(date){return moment(date).format("A")},validate_time=function(time){return moment(time,"HH:mm").isValid()},validate_date=function(date){return moment(date,"MM-DD-YYYY").isValid()},getEpochTimeStampFromDateTime=function(date,time){var MM,date_parts,dd,hh,mm,time_parts,yyyy;return validate_date(date)&&validate_time(time)?(date_parts=date.split("/"),time_parts=time.split(":"),MM=date_parts[0],dd=date_parts[1],yyyy=date_parts[2],hh=time_parts[0],mm=time_parts[1],new Date(yyyy,MM-1,dd,hh,mm,0).getTime()/1e3):null},getErrorList=function(errors){var _html,j,len;for(null==errors&&(errors=[]),_html="<ul>",j=0,len=errors.length;j<len;j++)_html+="<li>"+errors[j]+"</li>";return _html+="</ul>"},getDateFromEpoch=function(epoch){var d;return(d=new Date(0)).setUTCSeconds(epoch),d},splitDate=function(date){var resp;return(resp={}).dd=date.getDate(),resp.MM=date.getMonth()+1,resp.yyyy=date.getFullYear(),resp.hh=date.getHours(),resp.mm=date.getMinutes(),resp.dd<10?resp.dd="0"+resp.dd:resp.dd=""+resp.dd,resp.MM<10?resp.MM="0"+resp.MM:resp.MM=""+resp.MM,resp.hh<10?resp.hh="0"+resp.hh:resp.hh=""+resp.hh,resp.mm<10?resp.mm="0"+resp.mm:resp.mm=""+resp.mm,resp},error_html=function(errors){return _.isString(errors)?errors:_.isNaN(errors)||_.isNull(errors)?"":_.isObject(errors)?"<ul>"+_.map(errors,function(error,key){return"<li><strong>"+_.capitalize(key)+":</strong> "+error+"</li>"})+"<ul>":_.isArray(errors)?"<ul>"+_.map(errors,function(error){return"<li>"+error+"</li>"})+"<ul>":void 0},genModContainer=function(data){var hide;return hide=!0===data.close?"":"invisible","<div class='moderator-container' data-username='"+data.name+"'> <div class='moderator-close'> <a class='btn btn-text small msR cursor "+hide+" remove-moderator' data-username='"+data.name+"'><i class='icon-cancel-small'></i></a> </div> <div class='moderator-avatar'> <img height='50' width='50' class='pull-left msR avatar profile_avatar' src='"+data.avatar+"'  onerror=\"this.onerror=null; this.src='https://d3rpyts3de3lx8.cloudfront.net/hackerrank/assets/gravatar.jpg';\"> </div> <div class='moderator-details'> <p class='moderator-name'>"+data.name+"</p> <p class='moderator-role'>"+data.role+"</p> </div> </div>"},inlineLoadingStart=function(target){var html;return html='<span class="inline-throbber loading"> <i class="icon2-status_correct txt-green throbber-success"></i> </span>',HR.loadingButton=target,HR.util.removeAllInlineThrobbers(!1),$(html).insertAfter(target).fadeIn("normal")},inlineLoadingEnd=function(response,xhr){var successHTML;if(HR.loadingButton)return"Success"===response.message?(successHTML='<span class="inline-throbber success"> <i class="icon2-status_correct txt-green throbber-success"></i> </span>',setTimeout(function(){return HR.util.removeAllInlineThrobbers(!1),$(successHTML).insertAfter(HR.loadingButton).fadeIn("normal")},500),setTimeout(function(){return HR.util.removeAllInlineThrobbers(!0),HR.loadingButton=""},3e3)):(HR.util.removeAllInlineThrobbers(!0),setTimeout(function(){if(response.message&&401!==(null!=xhr?xhr.status:void 0))return HR.util.ajaxmsg(response.message,!1,!0,5)},50))},removeAllInlineThrobbers=function(fade){return fade?$(HR.loadingButton).siblings(".inline-throbber").fadeOut("fast",function(){if(_.isFunction(this.remove))return this.remove()}):$(HR.loadingButton).siblings(".inline-throbber").remove()},showInlineSuccess=function(view,element,time){var html;return null==time&&(time=1e3),html='<span class="inline-throbber success"> <i class="icon2-status_correct txt-green throbber-success"></i> </span>',setTimeout(function(){return $(html).insertAfter(element).fadeIn("Normal"),HR.loadingButton=element}),setTimeout(function(){return HR.util.removeAllInlineThrobbers(!0)},time)},confirmDialog=function(options){var modal_template,_this;return this.options=_.extend({title:"Please Confirm",confirmBtnText:"Ok",cancelBtnText:"Cancel",showCancelButton:!0,autoFocus:!0,message:"Are you sure"},options),modal_template=_.template('<div class="confirm-modal-wrapper"> <div class="modal modal-mid" id="confirm-modal" role="article"> <div class="modal-header" tabindex="0"> <%- options.title %> <button type="button" class="close" data-dismiss="modal">\xd7</button> </div> <div class="modal-body plA"> <%= options.message %> </div> <div class="modal-footer" tabindex="0"> <button type="button" id="confirmBtn" tabindex="0" class="btn btn-primary"><%= options.confirmBtnText %></button> <% if(options.showCancelButton) { %> <button type="button" id="cancelBtn" tabindex="0" class="btn"><%= options.cancelBtnText %></button> <% } %> </div> </div> </div>'),$(document).find(".confirm-modal-wrapper").remove(),$("body").append(modal_template({options:this.options})),this.dialog=$(document).find(".confirm-modal-wrapper"),this.dialog.find("#confirm-modal").modal(),this.dialog.find(".close").click((_this=this,function(){return _this.dialog.find("#confirm-modal").modal("hide"),$(document).find(".confirm-modal-wrapper").remove()})),this.dialog.find("#cancelBtn").click(function(_this){return function(){var base;return"function"==typeof(base=_this.options).cancelCallback&&base.cancelCallback(),_this.dialog.find(".close").click()}}(this)),this.dialog.find("#confirmBtn").click(function(_this){return function(){if(_this.options.callback)return _this.options.callback(),_this.dialog.find(".close").click()}}(this))},downloadURL=function(url){var hiddenIFrameID,iframe;return hiddenIFrameID="hiddenDownloader",null===(iframe=document.getElementById(hiddenIFrameID))&&((iframe=document.createElement("iframe")).id=hiddenIFrameID,iframe.style.display="none",document.body.appendChild(iframe)),iframe.src=url},localDownload=function(filename,text){var element;return(element=document.createElement("a")).setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(text)),element.setAttribute("download",filename),element.style.display="none",document.body.appendChild(element),element.click(),document.body.removeChild(element)},getFileAnchor=function(url,fileName,newTab){var html;return null==fileName&&(fileName=""),null==newTab&&(newTab=!0),_.isEmpty(fileName)&&(fileName=url.substr(url.lastIndexOf("/")+1)),html="<a href='"+url+"'",newTab&&(html+=" target='_blank'"),html+=">",html+=_.escape(fileName)+"</a>"},isAvailable=function(value){return!_.contains([null,void 0],value)},hralert=function(opts){var dialog,dialogBody,dialogOpts,options;return null==opts&&(opts={}),dialogOpts={body:(options=$.extend({message:"",title:"Alert",callback:null,okButtonText:"OK",timeout:0,okClass:"",maxheight:null,width:450,postRender:null,autoFocus:!0,closebutton:!1},opts)).message,title:options.title,closebutton:options.closebutton,width:options.width,maxheight:options.maxheight,buttons:[{name:options.okButtonText,"class":options.okClass,callback:function(dialog){if(dialog.destroy(),options.callback)return options.callback()}}]},options.timeout>0&&(dialogOpts.timeout=options.timeout,dialogOpts.timeoutButton=0),(dialog=new HR.util.ShowConfirmationDialog(dialogOpts)).render(),options.postRender&&options.postRender(dialog),options.autoFocus&&(dialogBody=$("#"+dialog.id).find(".hr-dialog-main-window .hr-dialog-body")[0],$(dialogBody).attr("tabindex","0"),$(dialogBody).focus()),dialog},hrconfirm=function(opts){var dialog,dialogBody,dialogOpts,options;return null==opts&&(opts={}),dialogOpts={body:(options=$.extend({message:"Are you sure?",title:"Confirmation",okCallback:null,cancelCallback:null,okButtonText:"OK",cancelButtonText:"Cancel",width:450,maxheight:null,closebutton:!1,okClass:"",cancelClass:"",postRender:null,autoFocus:!0},opts)).message,title:options.title,width:options.width,main_classes:options.main_classes,maxheight:options.maxheight,closebutton:options.closebutton,buttons:[{name:options.cancelButtonText,"class":options.cancelClass,callback:function(dialog){if(dialog.destroy(),options.cancelCallback)return options.cancelCallback(dialog)}},{name:options.okButtonText,"class":options.okClass,callback:function(dialog){if(dialog.destroy(),options.okCallback)return options.okCallback(dialog)}}]},(dialog=new HR.util.ShowConfirmationDialog(dialogOpts)).render(),options.postRender&&options.postRender(dialog),options.autoFocus&&(dialogBody=$("#"+dialog.id).find(".hr-dialog-main-window .hr-dialog-body")[0],$(dialogBody).attr("tabindex","0"),$(dialogBody).focus()),dialog},getVars=function(name){if(name=new RegExp("[?&]"+encodeURIComponent(name)+"=([^&]*)").exec(location.search))return decodeURIComponent(name[1])},ratingLevelToTitle=function(level){return 1===(level=parseInt(level))?"O(1)":2===level?"O(log(N))":3===level?"O(N)":4===level?"O(N<sup>2</sup>)":"O(2<sup>N</sup>)"},country_select2_options={data:_.map(window.countries_mapping,function(iso,name){return{id:name,text:name}})},getSelect2Options=function(cat){return null==cat&&(cat="school"),{width:"none",minimumInputLength:1,formatInputTooShort:function(){return"school"===cat?"Tip: Select a verified "+cat+" from our list"+"<i class='icon-ok-circled color-green pdL'></i>":"Select your "+cat+" from the list"},createSearchChoice:function(term,data){var _obj,_term,ref;return _term=term.charAt(0).toUpperCase()+term.substring(1),_obj={id:_.escape(_term),name:"<span class='select2-no-results'>Cannot find <strong>"+_.escape(_term)+"</strong>. Would you like to add this "+cat+"?</span>","default":!0},0===data.length?_obj:(ref=_obj.id.toLowerCase(),indexOf.call(_.map(data,function(d){return d.id.toLowerCase()}),ref)<0&&data.push(_obj),data)},initSelection:function(){},ajax:{url:"/autocomplete",quietMillis:100,data:function(term,page){return{q:term+"*",index:cat,start:10*(page-1)}},results:function(data,page){var more;return more=10*page<data.total,{results:_.map(data.models,function(model){return model.locations&&model.locations.length>0&&(model.name+=", "+model.locations[0]),model.id=model.name,model}),more:more}}},formatResult:function(college){var markup;return markup="<table class='college-result' style='width:100%'><tr>",markup+="<td class='college-info'><div class='college-title pull-left'>"+(college["default"]?college.name:_.escape(college.name)),markup+="</div>",!0===college.hacker_school_verified&&(markup+="<div class='pull-right'><i class='icon--single icon-ok-circled color-green'></i></div>"),markup+="</td></tr></table>"},formatSelection:function(college){return $("<div/>").html(_.escape(college.name)).text()},dropdownCssClass:"bigdrop",escapeMarkup:function(m){return _.escape(m)}}},parseURL=function(patterns,string,function_arguments){var counter,entries,j,k,l,len,len1,len2,pattern_element,pattern_elements,regex,regex_string;for(entries={},j=0,len=patterns.length;j<len;j++){for(regex_string="^",k=0,len1=(pattern_elements=patterns[j].split("/")).length;k<len1;k++)(pattern_element=pattern_elements[k]).startsWith(":")?regex_string+="/[a-zA-Z0-9-_]+":regex_string+="/"+pattern_element;if(regex_string+="$",(regex=new RegExp(regex_string)).test("/"+string)||regex.test("/"+string+"/")){for(counter=0,l=0,len2=pattern_elements.length;l<len2;l++)(pattern_element=pattern_elements[l]).startsWith(":")&&(entries[pattern_element.slice(1)]=function_arguments[counter],counter+=1);return entries}}return entries},generateRequestUniqueId=function(){var date,random_number,timestamp;return date=new Date,random_number=Math.floor(100*Math.random())+"",timestamp=Math.floor(date.getTime()/1e3)+"",parseInt(random_number+timestamp,10).toString(30)},generateBadge=function(badge_image_url,badge_level,badge_width){var html,i,j,mid_pos,multiplier,pos_diff,ref;for(pos_diff={1:[0],2:[-9,9],3:[-18,0,18],4:[-27,-9,9,27]},mid_pos=70,multiplier=150/badge_width,html="<div style='position: relative; left: 0; top: 0;'> <img src='"+badge_image_url+"' width='"+badge_width+"' style='position: relative; top: 0; left: 0; z-index: 1;'/>",i=j=0,ref=badge_level;0<=ref?j<ref:j>ref;i=0<=ref?++j:--j)html+="<img src='"+asset_path("badges/star.png")+" width='"+12/multiplier+"' style='position: absolute; top: "+112/multiplier+"px; left: "+(mid_pos+pos_diff[badge_level][i])/multiplier+"px; z-index: 2;'/>";return html+="</div>"},generatePusherSocketId=function(){return HR.pusher_socket_id?HR.pusher_socket_id:null},hideNavigation=function(contest){return contest&&contest.get("hide_navigation")?$(".hide-in-private-contest").hide():$(".hide-in-private-contest").show()},getTimezoneOffset=function(){return 60*(new Date).getTimezoneOffset()},getCurrentYear=function(){return moment().format("YYYY")},getUTFBytes=function(s){return encodeURI(s).split(/%..|./).length-1},isIE=function(){return 0===(new UAParser).getBrowser().name.toLowerCase().indexOf("ie")},isIE10OrBelow=function(){return/MSIE /i.test(navigator.userAgent)},isUnsupportedFullScreenBrowser=function(){return/^((?!chrome).)*safari/i.test(navigator.userAgent)||/Trident.*rv[ :]*11\./i.test(navigator.userAgent)},isUnsupportedProctoring=function(){return"Safari"===(new UAParser).getBrowser().name},isUnsupportedDevice=function(){var device;return"mobile"===(device=(new UAParser).getDevice()).type||"tablet"===device.type},isOldBrowser=function(){var data,ref;return"Firefox"===(data=(new UAParser).getBrowser()).name&&data.major<"42"||("Chrome"===(ref=data.name)||"Chromium"===ref)&&data.major<"45"},isChrome76=function(){return"76"===(new UAParser).getBrowser().major},isChrome=function(){return"Chrome"===(new UAParser).getBrowser().name},formatNumber=function(num){var str;return(str=num.toString().split("."))[0]=str[0].replace(/(\d)(?=(\d{3})+$)/g,"$1,"),str.join(".")},humanizeNumber=function(number){return number<1e3?""+number:number<1e5?parseInt(number/1e3)+"K":number<1e6?"0."+parseInt(number/1e5)+"M":number<1e8?pareInt(number/1e6)+"M":number<1e9?"0."+parseInt(number/1e8)+"B":number<1e11?parseInt(number/1e9)+"B":""+number},isValidPhoneNumber=function(number){return/^\(?\+?[.\d\(\-\s\)]+$/.test(number)},isProperName=function(name){return/^[-'.(), A-Za-z]+$/.test(name)},trackJobsSourceCampaign=function(){if(HR.util.getParameterByName("_source")&&jsCookies.set("_jsource",HR.util.getParameterByName("_source")),HR.util.getParameterByName("_campaign")&&jsCookies.set("_jcampaign",HR.util.getParameterByName("_campaign")),HR.util.getParameterByName("_medium"))return jsCookies.set("_jmedium",HR.util.getParameterByName("_medium"))},workLogout=function(){var ref,userId;return userId=null!=(ref=HR.currentUser)?ref.get("id"):void 0,$.ajax({url:"/work/logout",type:"POST",dataType:"json",success:function(){var track_data;return track_data={active_sessions:1},HR.util.track("Logged out",track_data),"undefined"!=typeof sessionStorage&&null!==sessionStorage&&sessionStorage.removeItem(userId+"_sourcingFilters"),window.location.href="/work/login"},error:function(jqXHR){var response,track_data;return(response=$.parseJSON(jqXHR.responseText)).active_sessions?(track_data={active_sessions:parseInt(response.active_sessions,10)},HR.util.track("Viewed Multiple Sessions Modal",track_data),HR.util.alert({title:"Log out from all sessions?",message:"<div style='margin-bottom: -20px'><p> We noticed that you are currently logged in from more than one location. Uncheck the box below if you want to keep the other sessions. </p> <div class='msT'> <input class='hr-sleek-input' id='logout-all-sessions' name='logout-all-sessions' type='checkbox' checked value='logout-all' /> <label for='logout-all-sessions'> <span></span> End all active sessions. </label> </div></div>",okButtonText:"Log out",okClass:"btn-primary pull-left msL",callback:function(){var destroy_all;return destroy_all=$("input[name=logout-all-sessions]").prop("checked"),track_data={active_sessions:parseInt(response.active_sessions,10),destroy_all:destroy_all},HR.util.track("Logged out",track_data),"undefined"!=typeof sessionStorage&&null!==sessionStorage&&sessionStorage.removeItem(userId+"_sourcingFilters"),$.ajax({url:"/work/logout",type:"POST",dataType:"json",data:{destroy_all:destroy_all},success:function(){return window.location.href="/work/login"}})}})):$.ajax({url:"/work/logout",type:"POST",dataType:"json",data:{destroy_all:!1},success:function(){return window.location.href="/work/login","undefined"!=typeof sessionStorage&&null!==sessionStorage?sessionStorage.removeItem(userId+"_sourcingFilters"):void 0}})}})},hrwLoggedOutAlert=function(message){var track_data;return"Invalid Access Token"===message&&(message="Your session has expired. Please log in again."),track_data={step:"show",message:message},HR.util.track("Viewed Logged Out Modal",track_data),HR.util.alert({title:"Logged out",message:"<div><p>"+message+"</p></div>",okButtonText:"OK",okClass:"pull-left msL",callback:function(){return track_data={step:"clicked ok",message:message},HR.util.track("Viewed Logged Out Modal",track_data),window.location.href="/work/login?redirect="+window.location.pathname}})},previewHackdown=function(payload,options){var $loading;return null==options&&(options={}),($loading=new HR.util.ShowDialog({body:"<div class='m'><div class='hackerrank_spinner' style='height: 32px; width: 32px; background-size: 32px;'></div></div>"})).render(),$(".hr-dialog").css("z-index",9999),$.ajax({url:"/hackdown_preview",type:"POST",data:{payload:payload},success:function(data){var $dialog;return _.isFunction(options.success)&&options.success(),$dialog=new HR.util.ShowDialog({title:"Markdown Preview",body:data.html,width:800,maxheight:window.innerHeight-240,buttons:[{name:"Close",callback:function(dialog){return this.setInactive(),dialog.destroy()}}]}),$loading.destroy(),$dialog.render(),$(".hr-dialog").css("z-index",9999)},error:function(){return _.isFunction(options.error)&&options.error(),$loading.destroy()}})},previewHackdownWith=function(payload,e){if(!$(e.currentTarget).prop("disabled"))return $(e.currentTarget).prop("disabled",!0),HR.util.previewHackdown(payload,{success:function(){return $(e.currentTarget).prop("disabled",!1)},error:function(){return $(e.currentTarget).prop("disabled",!1)}})},getNumberWithComma=function(number){return number.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},findDuplicates=function(options_array){var current_option_id,j,len,option,previous_option_id,previous_options;for(previous_options=[],current_option_id=0,j=0,len=options_array.length;j<len;j++){if(option=options_array[j],-1!==(previous_option_id=previous_options.indexOf(option)))return[String.fromCharCode(65+current_option_id),String.fromCharCode(65+previous_option_id)];previous_options.push(option),++current_option_id}return null},badURLValidator=function(url){return/^(https?:\/\/)?[\w-]+\.([\w-]+\.)*[\w-]+(\/[\w-\.]+)*\/?([?#][^\s]+)*$/i.test(url)},linkify=function(str,new_tab){var html;return null==new_tab&&(new_tab=!1),str.startsWith("http://")||str.startsWith("https://")?(html="<a href='"+encodeURI(str)+"'",new_tab&&(html+=" target='_blank'"),html+=">View &gt;</a>"):_.escape(str)},candidateTrack=function(eventName,eventValue,trackData,batchTrack){var baseData,connection,connectionData,currentLoc,currentQuestion,data,heapPercent,memory,memoryData,ref,ref1,ref10,ref11,ref12,ref2,ref3,ref4,ref5,ref6,ref7,ref8,ref9;return null==batchTrack&&(batchTrack=!1),currentQuestion=null,-1!==(currentLoc=window.location.href).indexOf("questions/")&&(currentQuestion=_.last(currentLoc.split("/"))),memoryData={},(memory=null!=(ref=window.performance)?ref.memory:void 0)&&(heapPercent=Math.round(memory.usedJSHeapSize/memory.totalJSHeapSize*100),memoryData={usedHeap:memory.usedJSHeapSize,totalHeap:memory.totalJSHeapSize,heapLimit:memory.jsHeapSizeLimit,heapPercent:heapPercent}),connectionData={},(connection=null!=(ref1=window.navigator)?ref1.connection:void 0)&&(connectionData={downlink:connection.downlink,effectiveType:connection.effectiveType,rtt:connection.rtt}),baseData={test_id:null!=(ref2=HR.candidate)&&null!=(ref3=ref2.candidateTestModel)?ref3.get("unique_id"):void 0,question_id:currentQuestion,company_id:(null!=(ref4=HR.candidate)&&null!=(ref5=ref4.candidateTestModel)?ref5.get("company_id"):void 0)||null,hacker_id:(null!=(ref6=HR.candidate)&&null!=(ref7=ref6.candidateAttemptModel)?ref7.get("hacker_id"):void 0)||null,job_id:(null!=(ref8=HR.candidate)&&null!=(ref9=ref8.candidateAttemptModel)?ref9.get("job_id"):void 0)||null,attribute11:null!=(ref10=HR.util)?ref10.isPublicLink():void 0,username:HR&&HR.params&&HR.params.username?HR.params.username:void 0,attempt_id:(null!=(ref11=HR.candidate)&&null!=(ref12=ref11.candidateAttemptModel)?ref12.get("id"):void 0)||null},data=_.extend(baseData,trackData,memoryData,connectionData),batchTrack?hr_metrics.batch_track(eventName,eventValue,data):hr_metrics.track(eventName,eventValue,data)},loadCssCustom=function(args){var cssPath,stylesheet;if(cssPath=arguments[0],window.CSS_FILES_FECTHED||(window.CSS_FILES_FECTHED={}),"fetching"!==window.CSS_FILES_FECTHED[cssPath]){if(!0!==window.CSS_FILES_FECTHED[cssPath])return window.CSS_FILES_FECTHED[cssPath]="fetching",onloadCSS(stylesheet=loadCSS.apply(this,arguments),function(){return window.CSS_FILES_FECTHED[cssPath]=!0}),stylesheet}else setTimeout(function(){if(!0!==window.CSS_FILES_FECTHED[cssPath])return loadCssCustom(args)},1500)},updateExternalLinks=function($element){var anchor,j,len,link_hostname,ref,results;for(results=[],j=0,len=(ref=$element.find("a")).length;j<len;j++)link_hostname=(anchor=ref[j]).hostname,!anchor.href||window.location.hostname===link_hostname||link_hostname.match(/^(.*\.)?hrcdn\.net$/)||"d3keuzeb2crhkn.cloudfront.net"===link_hostname||link_hostname.match(/^(.*\.)?hackerrank\.com$/)?results.push(void 0):(anchor.href=externalRedirectURL(anchor.href),results.push($(anchor).attr("target","_blank")));return results},getCurrentHost=function(){var port;return port="",window.location.port&&(port=":"+window.location.port),window.location.protocol+"//"+window.location.hostname+port},externalRedirectURL=function(url){return url.match(/^[a-zA-Z]+:\/\//)?getCurrentHost()+"/external_redirect?to="+url:getCurrentHost()+"/external_redirect?to=http://"+url},truncateWithEllipses=function(text,max){return text.substr(0,max-1)+(text.length>max?"...":"")},showVideoModal=function(challenge,title,youtube_id){var event_attrs;return new HR.util.VideoDialog({youtube_id:youtube_id,title:title,challenge_id:challenge.get("id")}).render(),event_attrs={challenge_id:challenge.get("id")},hr_metrics.track("openVideoModal",youtube_id,event_attrs)},siteWideOverlay=function(options,remove){var docHeight,spinnerHtml;return null==options&&(options={}),null==remove&&(remove=!1),remove?($("#site-wide-overlay").remove(),$(".loader-modal").remove(),void $("#overlay-spinner").remove()):(spinnerHtml="",(options=$.extend({},{message:"saving...",showDialog:!1},options)).showDialog&&(spinnerHtml="<div class='loader-modal modal modal-mid in' style='display:block;z-index:9999'> <div class='gray' id='confirm-modal' style='top: 25%;left: 45%;'> <div class='hackerrank_spinner' style='height: 64px;width: 64px;background-size: 64px;'></div> <div>"+options.message+"</div> </div> </div>"),docHeight=$(document).height(),$("body").append("<div id='site-wide-overlay'></div>"+spinnerHtml),$("#site-wide-overlay").height(docHeight).css({opacity:.4,position:"absolute",top:0,left:0,"background-color":"black",width:"100%","z-index":options.showDialog?7e3:5e3}))},isReactRoute=function(href){var reactUrls,ref,ref1;return"/"!==(href=href||document.location.pathname)[0]&&(href="/"+href),HR.ABTest.get_variant("react_migration"),reactUrls=_.extend({var1:[],var2:[],complete:[]},HR.REACT_ROUTE_CONFIG),"true"===(null!=(ref=$.cookie("react_var"))?ref.split("__")[0]:void 0)&&_.any(reactUrls.var1,function(patt){return new RegExp(patt).test(href)})||"true"===(null!=(ref1=$.cookie("react_var2"))?ref1.split("__")[0]:void 0)&&_.any(reactUrls.var2,function(patt){return new RegExp(patt).test(href)})||_.any(reactUrls.complete,function(patt){return new RegExp(patt).test(href)})},trimRight=function(string){var rightWhitespace;return rightWhitespace=/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]*$/,string.replace(rightWhitespace,"")},communityLogout=function(){if(HR.profile().isLoggedIn())return $.ajax({url:"/auth/logout",type:"DELETE",beforeSend:function(xhr){return xhr.setRequestHeader("X-CSRF-Token",$('meta[name="csrf-token"]').attr("content"))},success:function(){return $.removeCookie("react_var"),$.removeCookie("react_var2"),document.location.href="/"}})},showCookieBanner=function(){return"false"!==$.cookie("show_cookie_banner")&&!HR.profile().isLoggedIn()},getKrackJackPath=function(type){var candidate_editor_path;return null==type&&(type="js"),candidate_editor_path="hackerrank_r_krackjack_adapter"+"."+type,HR.development?"//"+window.location.hostname+":8081/public/assets/"+candidate_editor_path:asset_path(candidate_editor_path)},getWebpackRuntimePath=function(){var runtime_file;return runtime_file="runtime.js",HR.development?"//"+window.location.hostname+":8081/public/assets/"+runtime_file:asset_path(runtime_file)},(HR=null!=(ref=window.HR)?ref:{}).util||(HR.util={}),HR.util.log=Backbone.log,HR.util.pagination=pagination,HR.util.ajaxmsg=ajaxmsg,HR.util.hideajaxmsg=hideajaxmsg,HR.util.Base64=Base64,HR.util.numberSuffix=numberSuffix,HR.util.htmlEncode=htmlEncode,HR.util.htmlDecode=htmlDecode,HR.util.setTab=setTab,HR.util.isProperEmail=isProperEmail,HR.util.convertTime=convertTime,HR.util.scrollToTop=scrollToTop,HR.util.scrollToBottom=scrollToBottom,HR.util.renderBreadCrumbs=renderBreadCrumbs,HR.util.slugify=slugify,HR.util.getRemainingTime=getRemainingTime,HR.util.timezone_abbr=timezone_abbr,HR.util.toOrdinal=toOrdinal,HR.util.date_getMon=date_getMon,HR.util.date_getMonth=date_getMonth,HR.util.formatAMPM=formatAMPM,HR.util.date_get12hour_hour=date_get12hour_hour,HR.util.date_get12hour_offset=date_get12hour_offset,HR.util.validate_time=validate_time,HR.util.validate_date=validate_date,HR.util.getEpochTimeStampFromDateTime=getEpochTimeStampFromDateTime,HR.util.getErrorList=getErrorList,HR.util.getDateFromEpoch=getDateFromEpoch,HR.util.splitDate=splitDate,HR.util.genModContainer=genModContainer,HR.util.error_html=error_html,HR.util.inlineLoadingStart=inlineLoadingStart,HR.util.inlineLoadingEnd=inlineLoadingEnd,HR.util.removeAllInlineThrobbers=removeAllInlineThrobbers,HR.util.showInlineSuccess=showInlineSuccess,HR.util.confirmDialog=confirmDialog,HR.util.downloadURL=downloadURL,HR.util.getFileAnchor=getFileAnchor,HR.util.isAvailable=isAvailable,HR.util.alert=hralert,HR.util.confirm=hrconfirm,HR.util.candidatemsg=candidatemsg,HR.util.formatTimeInTz=formatTimeInTz,HR.util.getVars=getVars,HR.util.ratingLevelToTitle=ratingLevelToTitle,HR.util.country_select2_options=country_select2_options,HR.util.getSelect2Options=getSelect2Options,HR.util.parseURL=parseURL,HR.util.generateRequestUniqueId=generateRequestUniqueId,HR.util.generateBadge=generateBadge,HR.util.hideNavigation=hideNavigation,
HR.util.generatePusherSocketId=generatePusherSocketId,HR.util.getTimezoneOffset=getTimezoneOffset,HR.util.getCSSPath=getCSSPath,HR.util.getCurrentYear=getCurrentYear,HR.util.initializeAbTest=initializeAbTest,HR.util.getUTFBytes=getUTFBytes,HR.util.getNetworkTypes=getNetworkTypes,HR.util.isUnsupportedFullScreenBrowser=isUnsupportedFullScreenBrowser,HR.util.isUnsupportedProctoring=isUnsupportedProctoring,HR.util.isIE10OrBelow=isIE10OrBelow,HR.util.isIE=isIE,HR.util.isUnsupportedDevice=isUnsupportedDevice,HR.util.isOldBrowser=isOldBrowser,HR.util.formatNumber=formatNumber,HR.util.humanizeNumber=humanizeNumber,HR.util.isValidPhoneNumber=isValidPhoneNumber,HR.util.isProperName=isProperName,HR.util.workLogout=workLogout,HR.util.hrwLoggedOutAlert=hrwLoggedOutAlert,HR.util.trackJobsSourceCampaign=trackJobsSourceCampaign,HR.util.previewHackdown=previewHackdown,HR.util.previewHackdownWith=previewHackdownWith,HR.util.getNumberWithComma=getNumberWithComma,HR.util.localDownload=localDownload,HR.util.findDuplicates=findDuplicates,HR.util.ajaxerrormsg=ajaxerrormsg,HR.util.badURLValidator=badURLValidator,HR.util.linkify=linkify,HR.util.candidateTrack=candidateTrack,HR.util.loadCssCustom=loadCssCustom,HR.util.updateExternalLinks=updateExternalLinks,HR.util.externalRedirectURL=externalRedirectURL,HR.util.truncateWithEllipses=truncateWithEllipses,HR.util.showVideoModal=showVideoModal,HR.util.siteWideOverlay=siteWideOverlay,HR.util.isReactRoute=isReactRoute,HR.util.trimRight=trimRight,HR.util.communityLogout=communityLogout,HR.util.showCookieBanner=showCookieBanner,HR.util.getKrackJackPath=getKrackJackPath,HR.util.getWebpackRuntimePath=getWebpackRuntimePath,HR.util.isChrome76=isChrome76,HR.util.isChrome=isChrome,window.HR||(window.HR=HR)}),String.prototype.endsWith=function(suffix){return-1!==this.indexOf(suffix,this.length-suffix.length)},String.prototype.startsWith=function(prefix){return 0===this.indexOf(prefix)}}.call(this),function(){jQuery(function(){var HR,loadQuestionInFullScreen,startLocalStorageService;return loadQuestionInFullScreen=function(codeshellxSelector,csx,question,full_screen){return this.isFullscreen=full_screen,$("#csx-editor").on("full_screen",(_this=this,function(){return _this.isFullscreen?(csx.removePlugin("QuestionFullScreenView"),_this.isFullscreen=!1):(csx.addPlugin({data:{content:question.question,identifier:"QuestionFullScreenView"},type:"TextContentView",title:"Problem statement",position:"left"}),_this.isFullscreen=!0)}));var _this},startLocalStorageService=function(autoSaveNamespace,csx){var localStorageService,serviceData;return serviceData={type:"LocalStorageService",key:autoSaveNamespace},(localStorageService=csx.registerService(serviceData))?csx.enableService(localStorageService.identifier):console.error("Unable to initialize local storage service..."),localStorageService},(HR=window.HR||{}).codeshellx_util={},HR.codeshellx_util.loadQuestionInFullScreen=loadQuestionInFullScreen,HR.codeshellx_util.startLocalStorageService=startLocalStorageService,window.HR=HR})}.call(this),function(){jQuery(function(){var Btn,HR,ShowConfirmationDialog,ShowDialog,ShowFormDialog,ShowLoginDialog,ShowMessageDialog,ShowSubmitDisabledDialog,TermsOfConditionDialog,VideoDialog,btn_properties,dialog_properties,ref;return btn_properties={setActive:function(){return this.unSetFailedMsg(),this.active=!0,this.$el.removeClass("disabled"),this.dialog.$footer().find(".hr-dialog-loader").removeClass("active")},setInactive:function(){return this.active=!1,this.$el.addClass("disabled"),this.dialog.$footer().find(".hr-dialog-loader").addClass("active")},setActiveFailed:function(){return this.active=!0,this.$el.removeClass("disabled"),this.dialog.$footer().find(".hr-dialog-loader").removeClass("active")},isActive:function(){return!this.$el.hasClass("disabled")},success:function(message){return null==message&&(message=""),this.setSuccessMsg(message),this.setInactive()},done:function(){return this.setInactive(),this.fadeOut()},failed:function(message){return null==message&&(message=""),this.setFailedMsg(message),this.setInactive()},fadeOut:function(){return this.dialog.$el().fadeOut("slow"),this.dialog.destroy()},setFailedMsg:function(message){return this.getMsgWidth(),this.dialog.$footer().find(".hr-dialog-failed-message").html(message)},unSetFailedMsg:function(){return this.dialog.$footer().find(".hr-dialog-failed-message").html("")},setSuccessMsg:function(message){return this.dialog.$footer().find(".hr-dialog-success-message").html(message).width(this.getMsgWidth())},unSetSuccessMsg:function(){return this.dialog.$footer().find(".hr-dialog-success-message").html("")},getMsgWidth:function(){var btn_width;return btn_width=0,this.dialog.$footer().find(".hr-dialog-button").each(function(index,btn){return btn_width+=$(btn).width()+40}),this.dialog.$footer().find(".hr-dialog-buttons").width()-(btn_width+15)}},Btn=function(options){var _error,_prototype,default_options,return_value;if(default_options={},!_.isObject(options))throw(_error=new Error).name="Argument Error",_error.message="Argument to `Btn` can only be an object",_error;if(!(options=$.extend(default_options,options)).dialog||!options.id)throw(_error=new Error).name="Argument Error",options.dialog||options.id?options.id?_error.message="reference to the `ShowDialog` object is missing":_error.message="id of the button is missing":_error.message="reference to the `ShowDialog` object is missing as well as the id of the button is missing",_error;return options.$el||(options.$el=options.dialog.$el().find("#"+options.id)),return_value={dialog:options.dialog,id:options.id,$el:options.$el},_prototype=btn_properties,return_value.prototype||(return_value.prototype={}),$.each(_prototype,function(key,value){return return_value[key]=value}),return_value},dialog_properties={render:function(beforePositioningCallback){var $dialog,$footer,$footer_buttons,diagTimeout,dialog_bg_style,dialog_body,html_title,that;return null==beforePositioningCallback&&(beforePositioningCallback=null),this.is_rendered||(that=this,html_title="<div class='hr-dialog-header "+this.options.classes+"'>",null!==this.options.title&&(html_title+=this.options.title),!0===this.options.closebutton&&(html_title+="<a href='' class='close' data-analytics='"+this.options.analytics+"'><i class='icon-cancel-small'></i></a>"),html_title+="</div>",dialog_bg_style=this.options.background?"style='background: "+this.options.background+" !important; position: relative;'":"",dialog_body=this.options.custom_body?"<div id='"+this.id+"' class='hr-dialog'  style='display: none;'> <div class='hr-dialog-border' style='width:"+this.options.width+"px'> <div class='hr-dialog-main-window "+this.options.main_classes+"' "+dialog_bg_style+"> <div class='hr-dialog-header-slim "+this.options.classes+"'><span>"+this.options.title+"</span><span class='pull-right'><a href='' class='close' data-analytics='"+this.options.analytics+"'><i class='video-cross-icon'></i></a></span></div>"+this.options.body+"</div> </div> </div>":"<div id='"+this.id+"' class='hr-dialog'  style='display: none;'> <div class='hr-dialog-border' style='width:"+this.options.width+"px'> <div class='hr-dialog-main-window "+this.options.main_classes+"' "+dialog_bg_style+">"+html_title+"<div class='hr-dialog-body'>"+this.options.body+"</div> <div class='hr-dialog-footer'> <div class='pull-left psT'> <div class='hr-dialog-loader'></div> <div class='hr-dialog-success-message'></div> <div class='hr-dialog-failed-message'></div> </div> <div class='hr-dialog-buttons pull-right'></div><div class='clearfix'></div> </div> </div> </div> </div>",$("body").append(dialog_body),$dialog=this.$el(),this.options.nopadding&&$dialog.find(".hr-dialog-body").css("padding","0"),this.options.body_view&&($dialog.find(".hr-dialog-body").html(""),this.options.body_view.setElement($dialog.find(".hr-dialog-body")).render(),this.options.body_view.set_dialog&&this.options.body_view.set_dialog(this)),this.options.height&&($dialog.find(".hr-dialog-body").css("height",this.options.height+"px"),$dialog.find(".hr-dialog-body").css("overflow-y","scroll"),$dialog.find(".hr-dialog-body").addClass("scroll-box")),this.options.maxheight&&($dialog.find(".hr-dialog-body").css("max-height",this.options.maxheight+"px"),$dialog.find(".hr-dialog-body").css("overflow-y","scroll"),$dialog.find(".hr-dialog-body").addClass("scroll-box")),this.options.error_message&&$dialog.find(".glob-error").html(this.options.error_message).show(),this.options.info_message&&$dialog.find(".glob-info").html(this.options.info_message).show(),this.options.success_message&&$dialog.find(".glob-success").html(this.options.success_message).show(),$dialog.show(),null!=beforePositioningCallback&&beforePositioningCallback(),this.renderPosition(),this.options.closebutton&&$dialog.bind("click",function(e){if($(e.toElement).hasClass("hr-dialog"))return that.destroy()}),$dialog.find("a.close, .dialog-close").bind("click",function(e){return e.preventDefault(),$dialog.find("input").tooltip("hide"),"undefined"!=typeof _gag&&_gaq.push(["_trackEvent","Events","buttonClick",$(e.srcElement).attr("data-analytics")]),that.destroy()}),this.options.closebutton&&$(document).keyup(function(e){if(27===e.keyCode&&!0===that.options.keyboard)return that.destroy()}),this.options.events&&_.isObject(this.options.events)&&(that=this,_.each(this.options.events,function(callback,index){var ev,eventData,sl,sp;return sp=index.indexOf(" "),ev=index.substr(0,sp),sl=index.substr(sp+1),eventData={$dialog:$dialog,that:that},$dialog.find(sl).bind(ev,eventData,callback)})),$footer=that.$footer(),$footer_buttons=$footer.find(".hr-dialog-buttons"),diagTimeout=null,_.each(this.options.buttons,function(button,index){var $btn,analytics_attr,btn,btn_id;return btn_id=that.id+"-fbtn-"+index,analytics_attr="",button.analytics&&(analytics_attr="data-analytics='"+button.analytics+"'"),$footer_buttons.append("<button "+analytics_attr+" class='btn "+(button["class"]||"hr-dialog-button")+"' id='"+btn_id+"'>"+button.name+"</button>"),$btn=$footer_buttons.find("#"+btn_id),btn=Btn({dialog:that,id:btn_id,$el:$btn}),index===that.options.timeoutButton&&that.options.timeout>0&&(diagTimeout=setTimeout(function(){return button.callback.call(btn,that)},1e3*that.options.timeout)),$btn.bind("click",function(e){return diagTimeout&&clearTimeout(diagTimeout),e.preventDefault(),btn.setActive(),button.callback.call(btn,that)})}),this.options.hide_footer&&this.$footer().css("border-top","none").css("background","none"),this.is_rendered=!0,that.onRender&&that.onRender.call(this)),this},renderPosition:function(dialog){var $dialog,_dialog_body_height,_dialog_horizontal_padding,_dialog_vertical_padding,options;return null==dialog&&(dialog=null),dialog||(dialog=this),$dialog=dialog.$el(),options=dialog.options,_dialog_horizontal_padding=($(document).width()-options.width-10)/2,_dialog_body_height=$dialog.find(".hr-dialog-border").height(),_dialog_vertical_padding=($dialog.height()-_dialog_body_height-10)/2,$dialog.css("padding-top",_dialog_vertical_padding+"px"),$dialog.css("padding-bottom",_dialog_vertical_padding+"px"),$dialog.css("padding-right",_dialog_horizontal_padding+"px"),$dialog.css("padding-left",_dialog_horizontal_padding+"px")},destroy:function(nocallback){var that;return null==nocallback&&(nocallback=!1),that=this,$("#"+this.id).animate({opacity:0},250,function(){return $(this).remove(),nocallback||that.options.onDestroy&&that.options.onDestroy.call(),that.is_rendered=!1}),this},$el:function(){return $("#"+this.id)},$header:function(){return this.$el().find(".hr-dialog-header")},$body:function(){return this.$el().find(".hr-dialog-body")},$footer:function(){return this.$el().find(".hr-dialog-footer")},$main_window:function(){return this.$el().find(".hr-dialog-main-window")}},ShowDialog=function(options,custom_properties){var _error,_prototype,default_options,generated,hr_dialog_id,return_value;if(null==custom_properties&&(custom_properties={}),hr_dialog_id="",generated=!1,default_options={width:450,title:"",body:"",analytics:"Dialog Analytics",buttons:[],closebutton:!0,keyboard:!0,timeoutButton:null,timeout:null,nopadding:!1},_.isObject(options))options=$.extend(default_options,options);else{if("undefined"!==options)throw(_error=new Error).name="Argument Error",_error.message="Argument to 'ShowDialog' can only be an object",_error;options=default_options}for(;!generated;)hr_dialog_id="hr-dialog-"+Math.round(1e10*Math.random()),0===$("#"+hr_dialog_id).length&&(generated=!0);return return_value={id:hr_dialog_id,options:options},_prototype=$.extend(dialog_properties,custom_properties),return_value.prototype||(return_value.prototype={}),$.each(_prototype,function(key,value){return return_value[key]=value}),return_value},ShowFormDialog=function(options){var _error,body,body_width_class,default_options,events,field,form_properties,i,label_width,label_width_class,len,ref,ref1,ref4,width_class;if(form_properties={$form:function(){return this.$body().find("form")},form_set_notice:function(text){var body;return(body=this.$body()).find(".alert").show(),body.find(".alert .error").hide(),body.find(".alert .success").html(text).show()},form_set_error:function(text){var body;return(body=this.$body()).find(".alert").show(),body.find(".alert .success").hide(),body.find(".alert .error").html(text).show()},form_unset_alert:function(){var body;return(body=this.$body()).find(".alert").hide(),body.find(".alert .error").hide(),body.find(".alert .success").hide()}},default_options={enctype:"application/x-www-form-urlencoded",fields:[]},_.isObject(options))options=$.extend(default_options,options);else{if("undefined"!==options)throw(_error=new Error).name="Argument Error",_error.message="Argument to `ShowFormDialog` can only be an object",_error;options=default_options}for(body=options.body?options.body:"",body+="<p class='alert hide'> <span class='success' style='display: none; color: green;'></span> <span class='error' style='display:none; color: red;'></span> </p> <form enctype='"+options.enctype+"'>",i=0,len=(ref=options.fields).length;i<len;i++)"hidden"!==(field=ref[i]).type&&(body+="<div class='formgroup horizontal'>"),options.label_width?(label_width_class="span"+(label_width=parseInt(options.label_width)),body_width_class="span"+(16-label_width)):(label_width_class="span3",body_width_class="span13"),field.title&&(body+="<label for='name' class='pull-left "+label_width_class+"'>"+field.title+"</label>"),body+="<div class='block "+body_width_class+" profile-input'>",width_class=options.fullwidth?"span16":"span6","email"===(ref1=field.type)||"text"===ref1||"hidden"===ref1?body+="<input class='"+width_class+"' ":"file"===field.type?body+="<div class='wrap_file span16'><input class='orig_file' ":"textarea"===field.type?body+="<textarea class='"+width_class+"' style='resize:vertical;' rows='4'":"select"===field.type&&(body+="<select "),field.name&&(body+="name='"+field.name+"' "),field.type&&(body+="type='"+field.type+"' "),field.value&&(body+="value='"+field.value+"' "),field.disabled&&(body+="disabled='disabled' "),"email"===(ref4=field.type)||"text"===ref4||"hidden"===ref4?body+=" />":"file"===field.type?body+=' /><div class="fake_file span16 no-padding"><input class="fake_file_text span10" disabled="true" /><div class="fake_file_button btn">Select File</div></div></div>':"textarea"===field.type?(body+=">",field.value&&(body+=field.value),body+="</textarea>"):"select"===field.type&&(body+=">",field.options&&_.each(field.options,function(v,k){return body+="<option value='"+k+"'>"+v+"</option>"}),body+="</select>"),field.hint&&(body+="<small class='sub-help'>"+field.hint+"</small><br>"),field.error&&(body+="<small class='error'></small>"),body+="</div>","hidden"!==field.type&&(body+="</div>");return body+="</form>",events={"click .fake_file_button":function(e){var src;(src=$(e.target)).parent().parent().find(".orig_file").trigger("click"),src.parent().parent().find(".orig_file").one("change",function(e){var crnt_src;(crnt_src=$(e.target)).parent().parent().find(".fake_file_text").val(_.escape(crnt_src.val().split("\\").pop()))})}},options.body=body,options.events||(options.events={}),options.events=_.extend(events,options.events),new ShowDialog(options,form_properties)},ShowLoginDialog=function(options){var abtest_callback,body,default_options,dialog,events,form_properties,login_active,login_hide,showError,signup_active,signup_hide,success_callback,suppressError;return form_properties={},default_options={purpose:"login",hide_footer:!0,contest:"",redirect:!0,background:"transparent",title:null},"login"===(options=_.isObject(options)?$.extend(default_options,options):default_options).purpose?(login_active="active",signup_active="",login_hide="",signup_hide="hide"):(signup_active="active",login_active="",login_hide="hide",signup_hide=""),body="<div class='login-group homepage_admin'> <ul class='login_tab unstyled horizontal clearfix'> <li class='signup-toggle toggle "+signup_active+"'><a href='/signup' data-toggle='tab'>Sign Up</a></li> <li class='login-toggle toggle "+login_active+"'><a href='/login' data-toggle='tab'>Log In</a></li> </ul> <div class='homepage_signup signup "+signup_hide+"' id='signup'> <div class='text-center alert info glob-info' style='display:none;'></div> <div class='text-center alert success glob-success' style='display:none;'></div> <div class='text-center alert error glob-error' style='display:none;'></div> <form id='legacy-signup' class='legacy-form'> <div class='homepage_signupgroup--legacy'> <div class='formgroup' style='display: table'> <input id='first_name' class='fw' type='text' name='first_name' value='' style='width: 222px;display: table-cell;margin-right: 4px;' placeholder='First Name' data-content='' data-toggle='tooltip' data-placement='right'/> <input id='last_name' class='fw' type='text' name='last_name' value='' style='width: 222px;display: table-cell;' placeholder='Last Name' data-content='' data-toggle='tooltip' data-placement='right'/> </div> <div class='formgroup'> <i class='icon-mail'></i> <input id='email' class='fw' type='email' name='email' value='' placeholder='Your Email Address' data-content='' data-toggle='tooltip' data-placement='right'/> </div> <div class='formgroup'> <i class='icon-user'></i> <input id='username' class='fw' type='text' name='username' value='' placeholder='Pick a username' data-content='' data-toggle='tooltip' data-placement='right'/> </div> <div class='formgroup'> <i class='icon-lock'></i> <input id='password' class='fw' type='password' name='password' placeholder='Choose a password' data-content='' data-toggle='tooltip' data-placement='right'/> </div>",body+="<p class='text-center'><button class='btn btn-primary signup-button' name='commit' type='submit' value='request' data-analytics='SignupPassword' type='submit'>Create An Account</button> </p> </div> <div class='homepage_signupgroup--social'> <p class='text-center small msB mlT psT boundT'>Or connect with</p> <div class='unstyled clearfix socialbuttons row text-center' id='social-signup'> <div class='social-btn-wrap span-xs-4'> <a class='btn btn-facebook btn-social' data-analytics='SignupFacebook'><i class='icon-facebook'></i>Facebook</a> </div> <div class='social-btn-wrap span-xs-4'> <a class='btn btn-google btn-social' data-analytics='SignupGoogle'><i class='icon-gplus'></i> Google</a> </div> <div class='social-btn-wrap span-xs-4'> <a class='btn btn-linkedin btn-social' data-analytics='SignupLinkedIn'><i class='icon-linkedin'></i>LinkedIn</a> </div> <div class='social-btn-wrap span-xs-4'> <a class='btn btn-github btn-social' data-analytics='SignupGithub'><i class='icon-github'></i> GitHub</a> </div> </div> <p class='aside fnt-sz-small text-center pdT'> By signing up you agree to our <a target='_blank' href='/terms-of-service'>Terms of Service</a> and <a target='_blank' href='/privacy'>Privacy Policy</a> </p> </div> </form> </div> <div class='login Bizible-Exclude "+login_hide+"' id='login'> <form id='legacy-login' class='legacy-form'> <div class='homepage_signupgroup--legacy'> <div class='text-center alert info glob-info' style='display:none;'></div> <div class='text-center alert success glob-success' style='display:none;'></div> <div class='text-center alert error glob-error' style='display:none;'></div> <div class='formgroup'> <i class='icon-user'></i> <input id='login' class='fw' type='text' name='login' value='' placeholder='Your username or email'/> </div> <div class='formgroup'> <i class='icon-lock'></i> <input id='password' class='fw' type='password' name='password' placeholder='Your password' /> </div> <div class='clearfix msB'> <label class='remember pull-left msT'><input type='checkbox' id='remember_me'> Remember me</label> <a target='_blank' href='"+(HR.CONTEST_SLUG?document.location.protocol+"//"+document.location.host+"/auth/forgot_password/"+HR.CONTEST_SLUG:document.location.protocol+"//"+document.location.host+"/auth/forgot_password")+"' class='cursor pull-right password-retrieve btn btn-link'>Forgot your password?</a> </div> <button class='btn btn-primary span4 block-center login-button auth' name='commit' type='submit' value='request' data-analytics='LoginPassword' type='submit'>Log In</button> </div> <div class='homepage_signupgroup--social'> <p class='text-center small msB mlT psT boundT'>Or connect with</p> <div class='unstyled clearfix socialbuttons row text-center' id='social-signup'> <div class='social-btn-wrap span-xs-4'> <a class='btn btn-facebook btn-social' data-analytics='SignupFacebook'><i class='icon-facebook'></i>Facebook</a> </div> <div class='social-btn-wrap span-xs-4'> <a class='btn btn-google btn-social' data-analytics='SignupGoogle'><i class='icon-gplus'></i> Google</a> </div> <div class='social-btn-wrap span-xs-4'> <a class='btn btn-linkedin btn-social' data-analytics='SignupLinkedIn'><i class='icon-linkedin'></i>LinkedIn</a> </div> <div class='social-btn-wrap span-xs-4'> <a class='btn btn-github btn-social' data-analytics='SignupGithub'><i class='icon-github'></i> GitHub</a> </div> </div> </div> <p class='aside fnt-sz-small text-center pdT'> By signing up you agree to our <a target='_blank' href='/terms-of-service'>Terms of Service</a> and <a target='_blank' href='/privacy'>Privacy Policy</a> </p> </form> </div> </div>",success_callback=options.success_callback?options.success_callback:function(){},abtest_callback=options.abtest_callback?options.abtest_callback:function(){var ref;if(null!=HR&&null!=(ref=HR.ABTest)?ref.refresh:void 0)return HR.ABTest.refresh()},showError=function(field,error){if($("#legacy-signup input#"+field).addClass("error"),$("#legacy-signup input#"+field).parent().children("i").css("color","#f65039"),$("#legacy-signup input#"+field).attr("data-original-title",error),"first_name"!==field&&"last_name"!==field)return $("#legacy-signup input#"+field).tooltip("show")},suppressError=function(field){if($("#legacy-signup input#"+field).removeClass("error"),$("#legacy-signup input#"+field).parent().children("i").css("color",""),$("#legacy-signup input#"+field).attr("data-original-title",""),"first_name"!==field&&"last_name"!==field)return $("#legacy-signup input#"+field).tooltip("hide")},events={"keydown #legacy-signup input":function(e){var val;if(e.keyCode||e.which,val=$(this).val(),""!==$.trim(val))return $(this).data("tab","true"),$(this).trigger("keyup")},"focusin #legacy-signup input#email":function(){return suppressError("email")},"focusin #legacy-signup input#username":function(){return suppressError("username")},"focusin #legacy-signup input#first_name":function(){return suppressError("first_name")},"focusin #legacy-signup input#last_name":function(){return suppressError("last_name")},"keyup #legacy-signup input#password":function(){var password_regex;if(void 0!==$(this).data("tab"))return password_regex=/.{6,}/,$(this).val().match(password_regex)?suppressError("password"):showError("password","Password should be at least 6 characters long.")},"click .login_tab li a":function(e){var dialog;if(e.preventDefault(),!$(e.currentTarget).parent().hasClass("active"))return(dialog=e.data.that).$el().find(".login_tab li a").each(function(index,el){return $(el).parent().hasClass("active")?$(el).parent().removeClass("active"):$(el).parent().addClass("active")}),dialog.$el().find(".login-group div#signup, .login-group div#login").each(function(index,el){return $(el).hasClass("hide")?$(el).removeClass("hide"):$(el).addClass("hide")})},"click a.btn-facebook":function(e){var contest_tracking_param,data,h,left,top,w;return e.preventDefault(),data=e.data,w=600,h=350,left=screen.width/2-w/2,top=screen.height/2-h/2,window.login_callback=function(csrf_token){var href;return $("meta[name=csrf-token]").attr("content",csrf_token),HR.appController?HR.profile({fetch:!0}):options.redirect&&(href=HR.CONTEST_SLUG?document.location.protocol+"//"+document.location.host+"/auth/login/"+HR.CONTEST_SLUG:document.location.protocol+"//"+document.location.host+"/auth/login",document.location.href=href),data.that.destroy(),abtest_callback(),success_callback()},contest_tracking_param=HR.CONTEST_SLUG?"&contest_slug="+HR.CONTEST_SLUG:"",window.open("/hackers/auth/facebook?display=popup"+contest_tracking_param,"facebook_login","toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width="+w+", height="+h+", top="+top+", left="+left)},"click a.btn-github":function(e){var contest_tracking_param,data,h,left,top,w;return e.preventDefault(),data=e.data,w=960,h=500,left=screen.width/2-w/2,top=screen.height/2-h/2,window.login_callback=function(csrf_token){var href;return $("meta[name=csrf-token]").attr("content",csrf_token),HR.appController?HR.profile({fetch:!0}):options.redirect&&(href=HR.CONTEST_SLUG?document.location.protocol+"//"+document.location.host+"/auth/login/"+HR.CONTEST_SLUG:document.location.protocol+"//"+document.location.host+"/auth/login",document.location.href=href),data.that.destroy(),abtest_callback(),success_callback()},contest_tracking_param=HR.CONTEST_SLUG?"&contest_slug="+HR.CONTEST_SLUG:"",window.open("/hackers/auth/github?display=popup"+contest_tracking_param,"facebook_login","toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width="+w+", height="+h+", top="+top+", left="+left)},"click a.btn-linkedin":function(e){var contest_tracking_param,data,h,left,top,w;return e.preventDefault(),data=e.data,w=600,h=500,left=screen.width/2-w/2,top=screen.height/2-h/2,window.login_callback=function(csrf_token){var href;return $("meta[name=csrf-token]").attr("content",csrf_token),HR.appController?HR.profile({fetch:!0}):options.redirect&&(href=HR.CONTEST_SLUG?document.location.protocol+"//"+document.location.host+"/auth/login/"+HR.CONTEST_SLUG:document.location.protocol+"//"+document.location.host+"/auth/login",document.location.href=href),data.that.destroy(),abtest_callback(),success_callback()},contest_tracking_param=HR.CONTEST_SLUG?"&contest_slug="+HR.CONTEST_SLUG:"",window.open("/hackers/auth/linkedin?display=popup"+contest_tracking_param,"linkedin_login","toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width="+w+", height="+h+", top="+top+", left="+left)},"click a.btn-google":function(e){var contest_tracking_param,data,h,left,top,w;return e.preventDefault(),data=e.data,w=600,h=500,left=screen.width/2-w/2,top=screen.height/2-h/2,window.login_callback=function(csrf_token){var href;return $("meta[name=csrf-token]").attr("content",csrf_token),HR.appController?HR.profile({fetch:!0}):options.redirect&&(href=HR.CONTEST_SLUG?document.location.protocol+"//"+document.location.host+"/auth/login/"+HR.CONTEST_SLUG:document.location.protocol+"//"+document.location.host+"/auth/login",document.location.href=href),data.that.destroy(),abtest_callback(),success_callback()},contest_tracking_param=HR.CONTEST_SLUG?"&contest_slug="+HR.CONTEST_SLUG:"",window.open("/hackers/auth/google_oauth2?display=popup"+contest_tracking_param,"google_login","toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width="+w+", height="+h+", top="+top+", left="+left)},"click button.signup-button":function(e){var $form,callback_url,data,dialog;if(e.preventDefault(),"disabled"!==$(e.currentTarget).attr("disabled"))return $(e.currentTarget).attr("disabled","disabled"),$(e.currentTarget).html("Signing up.."),data=e.data,(dialog=data.that).$body(),$form=$(dialog.$body().find(".login-group div#signup")),callback_url=HR.CONTEST_SLUG?document.location.protocol+"//"+document.location.host+"/auth/signup/"+HR.CONTEST_SLUG:document.location.protocol+"//"+document.location.host+"/auth/signup",data={username:$form.find("input#username").val(),email:$form.find("input#email").val(),password:$form.find("input#password").val(),first_name:$form.find("input#first_name").val(),last_name:$form.find("input#last_name").val(),timezone:moment.tz.guess()},$.ajax({type:"POST",url:callback_url,data:data,success:function(data){var href,key,results;if($form.find("input").removeClass("error"),$(e.currentTarget).removeAttr("disabled","disabled"),data.status)return data.csrf_token&&$("meta[name=csrf-token]").attr("content",data.csrf_token),$(e.currentTarget).html("Logging you in..."),HR.appController?(HR.profile({fetch:!0}),dialog.destroy()):options.redirect?(href=HR.CONTEST_SLUG?document.location.protocol+"//"+document.location.host+"/auth/login/"+HR.CONTEST_SLUG:document.location.protocol+"//"+document.location.host+"/login",document.location.href=href):dialog.destroy(),abtest_callback(),success_callback();for(key in $form.find("input").removeClass("error"),$(e.currentTarget).html("Create An Account"),results=[],data.fields)0!==data.fields[key].length?($form.find("#"+key).addClass("error"),$("#"+key).parent().children("i").css("color","#f65039"),$("#"+key).attr("data-original-title",data.fields[key].join(",")),results.push($("#"+key).tooltip("show"))):($("#"+key).parent().children("i").css("color",""),$("#"+key).attr("data-original-title",""),results.push($("#"+key).tooltip("hide")));return results}})},"click button.login-button":function(e){var $form,callback_url,data,dialog;if(e.preventDefault(),"disabled"!==$(e.currentTarget).attr("disabled"))return $(e.currentTarget).attr("disabled","disabled"),$(e.currentTarget).html("Logging in.."),data=e.data,(dialog=data.that).$body(),$form=$(dialog.$body().find(".login-group div#login")),callback_url=HR.CONTEST_SLUG?document.location.protocol+"//"+document.location.host+"/auth/login/"+HR.CONTEST_SLUG:document.location.protocol+"//"+document.location.host+"/auth/login",data={login:$form.find("input#login").val(),password:$form.find("input#password").val(),remember_me:$form.find("input#remember_me").is(":checked")},$form.find(".error").html("").hide(),$.ajax({type:"POST",url:callback_url,data:data,success:function(data){var error_html,href;return $(e.currentTarget).removeAttr("disabled","disabled"),data.status?(data.csrf_token&&$("meta[name=csrf-token]").attr("content",data.csrf_token),$(e.currentTarget).html("Logging you in..."),HR.appController?(HR.profile({fetch:!0}),dialog.destroy()):options.redirect?(href=HR.CONTEST_SLUG?document.location.protocol+"//"+document.location.host+"/auth/login/"+HR.CONTEST_SLUG:document.location.protocol+"//"+document.location.host+"/login",document.location.href=href):dialog.destroy(),abtest_callback(),success_callback()):($(e.currentTarget).html("Log In"),$form.find(".error").html("").show(),data.errors.length>1?(error_html="<ul>",_.each(data.errors,function(error){return error_html+="<li>"+error+"</li>"},this),error_html+="</ul>",$form.find(".error").html(error_html)):$form.find(".error").html(data.errors[0]))}})}},options.body=body,options.analytics="Cancel Login",options.events=events,options.width=550,(dialog=new ShowDialog(options,form_properties)).onRender=function(){return options.show_signup&&this.$el().find(".signup-toggle a").click(),HR.util.set_h_r("auth_dialog",{force:!1}),HR.util.set_h_l("in_app")},dialog},ShowConfirmationDialog=function(options){var body,default_options,form_properties;return form_properties={showError:function(text){return this.$body().find(".alert").removeClass("success").addClass("error").html(text).show()},clearAlert:function(){return this.$body().find(".alert").removeClass("success").removeClass("error").html("").hide()},showSuccess:function(text){return this.$body().find(".alert").addClass("success").removeClass("error").html(text).show()}},default_options={},body="<p class='alert hide'></p>",(options=_.isObject(options)?$.extend(default_options,options):default_options).body=body+options.body,new ShowDialog(options,form_properties)},
ShowSubmitDisabledDialog=function(options){var body,default_options,form_properties;return form_properties={},default_options={title:"Submission Disabled"},body='<div class="block-center text-center"> This challenge is disabled now.<br/>Please try this challenge after some time. </div>',(options=_.isObject(options)?$.extend(default_options,options):default_options).body=body,options.width=400,new ShowDialog(options,form_properties)},ShowMessageDialog=function(options){var default_options,dialog,form_properties;return form_properties={},default_options={title:"New Message",username:null,width:450},"",null!==(options=_.isObject(options)?$.extend(default_options,options):default_options).username?(options.body="<div> <p class='msB bold small'>Send a message to <a class='backbone' href='/"+options.username+"'>"+options.username+"</a></p> <textarea id='message' class='tall fw'></textarea> </div>",options.getReceiver=function(){return"username-"+options.username}):(options.body="<div> <p>Send a message to <input type='text' class='mdL' id='receiver_id' data-analytics='MessageDialogUsernameInput' /> <textarea id='message' class='tall fw'></textarea> </div>",options.getReceiver=function(){return"username-"+$("#receiver_id").val()}),options.buttons=[{name:"Cancel",callback:function(dialog){return this.setInactive(),dialog.destroy()}},{name:"Send message","class":"hr_primary-btn, btn-green",callback:function(dialog){var btn;return(btn=this).unSetFailedMsg(),""===$("#message").val().trim()?(btn.failed("Message can not be blank."),void btn.setActiveFailed()):(btn.setInactive(),btn.$el.text("Sending"),options.getReceiver(),$.ajax({url:"/rest/messages",type:"POST",data:{sender_id:HR.profile().id,receiver_id:""+options.getReceiver(),message:$("#message").val()},success:function(resp){return btn.$el.text("Send"),btn.setActive(),resp.status?(dialog.destroy(),HR.router.navigate("/inbox/thread/"+resp.model.message_thread_id,!0)):(btn.failed(resp.error),btn.setActiveFailed(),$(".close-messaging-restriction-dialog").click(function(){if(dialog)return dialog.destroy()}))},error:function(){return btn.$el.text("Send"),btn.failed("There was a problem sending a message"),btn.setActiveFailed()}}))}}],(dialog=new ShowFormDialog(options,form_properties)).onRender=function(){return $("#receiver_id").focus(),$("#receiver_id").unbind(),$("#receiver_id").typeahead({minLength:3,menu:'<ul class="typeahead dropdown-menu margin-0" "margin:0px;"></ul>',source:function(query,typeahead_process){return $.ajax({url:"/rest/hackers/autocomplete?q="+query+"&without=",type:"GET",success:function(resp){return typeahead_process(resp)}})}})},dialog},VideoDialog=function(options){var dialog,form_properties,genCallback,params;return form_properties={},options.fullwidth=!0,options.width=808,options.custom_body=!0,params={enablejsapi:1,version:3,autoplay:1,rel:0,origin:document.location.protocol+"//"+document.location.host},options.body="<div style='padding-bottom: 4px;'> <iframe id='player-"+options.youtube_id+"' type='text/html' width='800' height='450' class='block-center' src='https://www.youtube.com/embed/"+options.youtube_id+"?"+$.param(params)+"' frameborder='0' allowfullscreen /> </div>",dialog=new ShowDialog(options,form_properties),genCallback=function(options){return function(event){var event_name,track_data;switch(track_data={hacker_id:options.hacker_id,challenge_id:options.challenge_id,attribute1:options.youtube_id},event_name=null,event.data){case YT.PlayerState.PLAYING:event_name=0===window.ytplayer.getCurrentTime()?"startVideo":"resumeVideo";break;case YT.PlayerState.PAUSED:event_name="pauseVideo";break;case YT.PlayerState.ENDED:event_name="endVideo"}if(event_name)return hr_metrics.track(event_name,track_data)}},dialog.onRender=function(){var firstScriptTag,tag;return"undefined"==typeof YT||null===YT?((tag=document.createElement("script")).src="https://www.youtube.com/iframe_api",(firstScriptTag=document.getElementsByTagName("script")[0]).parentNode.insertBefore(tag,firstScriptTag),window.ytplayer=null,window.onYouTubeIframeAPIReady=function(){return window.ytplayer=new YT.Player("player-"+options.youtube_id,{events:{onStateChange:genCallback(options)}})}):window.ytplayer=new YT.Player("player-"+options.youtube_id,{events:{onStateChange:genCallback(options)}})},dialog},TermsOfConditionDialog=function(options){var modal_template,_this;return this.options=_.extend({title:"Terms of Service Update",confirmBtnText:"Accept",cancelBtnText:"Decline",showCancelButton:!0,autoFocus:!0,body:'<p className="label mlB"> We have updated our Terms of Service and Privacy Policy. By continuing, you agree to our revised <a class="text-link" href="/terms-of-service" target="_blank"> Terms of Service</a> and <a class="text-link" href="/privacy" target="_blank"> Privacy Policy.</a> </p>'},options),modal_template=_.template('<div class="confirm-modal-wrapper tos-modal"> <div class="modal modal-mid" id="tos-confirm-modal" role="article"> <div class="modal-header" tabindex="0"> <%- options.title %> </div> <div class="modal-body plA"> <p className="label mlB"> <%= options.body %> </p> </div> <div class="modal-footer" tabindex="0"> <% if(options.showCancelButton) { %> <button type="button" id="decline-tos-btn" tabindex="0" class="btn btn-alert"> <span class="cancel-btn bold"> <%= options.cancelBtnText %> </span> </button> <% } %> <button type="button" id="accept-confirm-btn" tabindex="0" class="confirm-btn btn btn-primary"> <span class="confirm-btn-text bold"> <%= options.confirmBtnText %> </span> </button> </div> </div> </div>'),$(document).find(".confirm-modal-wrapper").remove(),$("body").append(modal_template({options:this.options})),$("#tos-confirm-modal").modal({backdrop:"static",keyboard:!1}),this.dialog=$(document).find(".confirm-modal-wrapper"),this.dialog.find("#confirm-modal").modal(),this.dialog.find("#decline-tos-btn").click((_this=this,function(){var base;return"function"==typeof(base=_this.options).cancelCallback?base.cancelCallback():void 0})),this.dialog.find("#accept-confirm-btn").click(function(_this){return function(){var base;return"function"==typeof(base=_this.options).callback&&base.callback(),$(document).find(".confirm-modal-wrapper").remove(),$(document).find(".modal-backdrop").addClass("hidden")}}(this))},(HR=null!=(ref=window.HR)?ref:{}).util||(HR.util={}),HR.util.ShowDialog=ShowDialog,HR.util.ShowFormDialog=ShowFormDialog,HR.util.ShowLoginDialog=ShowLoginDialog,HR.util.ShowConfirmationDialog=ShowConfirmationDialog,HR.util.ShowSubmitDisabledDialog=ShowSubmitDisabledDialog,HR.util.ShowMessageDialog=ShowMessageDialog,HR.util.VideoDialog=VideoDialog,HR.util.TermsOfConditionDialog=TermsOfConditionDialog,window.HR||(window.HR=HR)})}.call(this),
/*!
  backbone.fetch-cache v1.4.1
  by Andy Appleton - https://github.com/mrappleton/backbone-fetch-cache.git
 */
function(root,factory){"function"==typeof define&&define.amd?define(["underscore","backbone","jquery"],function(_,Backbone,$){return root.Backbone=factory(_,Backbone,$)}):"undefined"!=typeof exports&&"undefined"!=typeof require?module.exports=factory(require("underscore"),require("backbone"),require("jquery")):root.Backbone=factory(root._,root.Backbone,root.jQuery)}(this,function(_,Backbone,$){function getCacheKey(key,opts){if(key&&_.isObject(key)){if(_.isFunction(key.getCacheKey))return key.getCacheKey(opts);key=opts&&opts.url?opts.url:_.isFunction(key.url)?key.url():key.url}else if(_.isFunction(key))return key(opts);return opts&&opts.data?"string"==typeof opts.data?key+"?"+opts.data:key+"?"+$.param(opts.data):key}function setCache(instance,opts,attrs){opts=opts||{};var key=Backbone.fetchCache.getCacheKey(instance,opts),expires=!1,lastSync=opts.lastSync||(new Date).getTime(),prefillExpires=!1;key&&!1!==opts.cached&&(opts.cached||opts.prefill)&&(!1!==opts.expires&&(expires=(new Date).getTime()+1e3*(opts.expires||300)),!1!==opts.prefillExpires&&(prefillExpires=(new Date).getTime()+1e3*(opts.prefillExpires||300)),Backbone.fetchCache._cache[key]={expires:expires,lastSync:lastSync,prefillExpires:prefillExpires,value:attrs},Backbone.fetchCache.setLocalStorage())}function getCache(key,opts){return _.isFunction(key)?key=key():key&&_.isObject(key)&&(key=getCacheKey(key,opts)),Backbone.fetchCache._cache[key]}function getLastSync(key){return getCache(key).lastSync}function clearItem(key,opts){_.isFunction(key)?key=key():key&&_.isObject(key)&&(key=getCacheKey(key,opts)),delete Backbone.fetchCache._cache[key],Backbone.fetchCache.setLocalStorage()}function reset(){Backbone.fetchCache._cache={}}function setLocalStorage(){if(supportLocalStorage&&Backbone.fetchCache.localStorage)try{localStorage.setItem(Backbone.fetchCache.getLocalStorageKey(),JSON.stringify(Backbone.fetchCache._cache))}catch(err){var code=err.code||err.number||err.message;if(22!==code&&1014!==code)throw err;this._deleteCacheWithPriority()}}function getLocalStorage(){if(supportLocalStorage&&Backbone.fetchCache.localStorage){var json=localStorage.getItem(Backbone.fetchCache.getLocalStorageKey())||"{}";Backbone.fetchCache._cache=JSON.parse(json)}}function nextTick(fn){return window.setTimeout(fn,0)}var superMethods={modelFetch:Backbone.Model.prototype.fetch,modelSync:Backbone.Model.prototype.sync,collectionFetch:Backbone.Collection.prototype.fetch},supportLocalStorage=function(){var supported="undefined"!=typeof window.localStorage;if(supported)try{localStorage.setItem("test_support","test_support"),localStorage.removeItem("test_support")}catch(e){supported=!1}return supported}();return Backbone.fetchCache=Backbone.fetchCache||{},Backbone.fetchCache._cache=Backbone.fetchCache._cache||{},Backbone.fetchCache.enabled=!0,Backbone.fetchCache.priorityFn=function(a,b){return a&&a.expires&&b&&b.expires?a.expires-b.expires:a},Backbone.fetchCache._prioritize=function(){var sorted=_.values(this._cache).sort(this.priorityFn),index=_.indexOf(_.values(this._cache),sorted[0]);return _.keys(this._cache)[index]},Backbone.fetchCache._deleteCacheWithPriority=function(){Backbone.fetchCache._cache[this._prioritize()]=null,delete Backbone.fetchCache._cache[this._prioritize()],Backbone.fetchCache.setLocalStorage()},Backbone.fetchCache.getLocalStorageKey=function(){return"backboneCache"},"undefined"==typeof Backbone.fetchCache.localStorage&&(Backbone.fetchCache.localStorage=!0),Backbone.Model.prototype.fetch=function(opts){function isPrefilling(){return opts.prefill&&(!opts.prefillExpires||prefillExpired)}function setData(){opts.parse&&(attributes=self.parse(attributes,opts)),self.set(attributes,opts),_.isFunction(opts.prefillSuccess)&&opts.prefillSuccess(self,attributes,opts),self.trigger("cachesync",self,attributes,opts),self.trigger("sync",self,attributes,opts),isPrefilling()?deferred.notify(self):(_.isFunction(opts.success)&&opts.success(self,attributes,opts),deferred.resolve(self))}if(!Backbone.fetchCache.enabled)return superMethods.modelFetch.apply(this,arguments);opts=_.defaults(opts||{},{parse:!0});var data=getCache(Backbone.fetchCache.getCacheKey(this,opts)),expired=!1,prefillExpired=!1,attributes=!1,deferred=new $.Deferred,self=this;if(data&&(expired=(expired=data.expires)&&data.expires<(new Date).getTime(),prefillExpired=(prefillExpired=data.prefillExpires)&&data.prefillExpires<(new Date).getTime(),attributes=data.value),!expired&&(opts.cached||opts.prefill)&&attributes&&(null==opts.async&&(opts.async=!0),opts.async?nextTick(setData):setData(),!isPrefilling()))return deferred;var jqXHR=superMethods.modelFetch.apply(this,arguments);return jqXHR.done(_.bind(deferred.resolve,this,this)).done(_.bind(Backbone.fetchCache.setCache,null,this,opts)).fail(_.bind(deferred.reject,this,this)),deferred.abort=jqXHR.abort,deferred},Backbone.Model.prototype.sync=function(method,model,options){if("read"===method||!Backbone.fetchCache.enabled)return superMethods.modelSync.apply(this,arguments);var i,len,collection=model.collection,keys=[];for(keys.push(Backbone.fetchCache.getCacheKey(model,options)),collection&&keys.push(Backbone.fetchCache.getCacheKey(collection)),i=0,len=keys.length;i<len;i++)clearItem(keys[i]);return superMethods.modelSync.apply(this,arguments)},Backbone.Collection.prototype.fetch=function(opts){function isPrefilling(){return opts.prefill&&(!opts.prefillExpires||prefillExpired)}function setData(){self[opts.reset?"reset":"set"](attributes,opts),_.isFunction(opts.prefillSuccess)&&opts.prefillSuccess(self),self.trigger("cachesync",self,attributes,opts),self.trigger("sync",self,attributes,opts),isPrefilling()?deferred.notify(self):(_.isFunction(opts.success)&&opts.success(self,attributes,opts),deferred.resolve(self))}if(!Backbone.fetchCache.enabled)return superMethods.collectionFetch.apply(this,arguments);opts=_.defaults(opts||{},{parse:!0});var data=getCache(Backbone.fetchCache.getCacheKey(this,opts)),expired=!1,prefillExpired=!1,attributes=!1,deferred=new $.Deferred,self=this;if(data&&(expired=(expired=data.expires)&&data.expires<(new Date).getTime(),prefillExpired=(prefillExpired=data.prefillExpires)&&data.prefillExpires<(new Date).getTime(),attributes=data.value),!expired&&(opts.cached||opts.prefill)&&attributes&&(null==opts.async&&(opts.async=!0),opts.async?nextTick(setData):setData(),!isPrefilling()))return deferred;var jqXHR=superMethods.collectionFetch.apply(this,arguments);return jqXHR.done(_.bind(deferred.resolve,this,this)).done(_.bind(Backbone.fetchCache.setCache,null,this,opts)).fail(_.bind(deferred.reject,this,this)),deferred.abort=jqXHR.abort,deferred},getLocalStorage(),Backbone.fetchCache._superMethods=superMethods,Backbone.fetchCache.setCache=setCache,Backbone.fetchCache.getCache=getCache,Backbone.fetchCache.getCacheKey=getCacheKey,Backbone.fetchCache.getLastSync=getLastSync,Backbone.fetchCache.clearItem=clearItem,Backbone.fetchCache.reset=reset,Backbone.fetchCache.setLocalStorage=setLocalStorage,Backbone.fetchCache.getLocalStorage=getLocalStorage,Backbone});var lang_mime_mapping={c:"text/x-csrc",cpp:"text/x-c++src",java:"text/x-java",csharp:"text/x-csharp",haskell:"text/x-haskell",php:"text/x-php",python:"text/x-python",perl:"text/x-perl",ruby:"text/x-ruby",bash:"text/x-sh",clojure:"text/x-clojure",scala:"text/x-scala",code:"text/plain",text:"text/plain",brainfuck:"text/x-brainfuck",javascript:"text/javascript",typescript:"text/typescript",d:"text/x-d",go:"text/x-go",lua:"text/x-lua",erlang:"text/x-erlang",sbcl:"text/x-common-lisp",ocaml:"text/x-ocaml",pascal:"text/x-pascal",python3:"text/x-python",groovy:"text/x-groovy",text_pseudo:"text/plain",objectivec:"text/x-objectivec",fsharp:"text/x-fsharp",visualbasic:"text/x-vb",smalltalk:"text/x-stsrc",tcl:"text/x-tcl",html:"text/html",css:"text/css",java8:"text/x-java",kotlin:"text/x-kotlin",octave:"text/x-octave",r:"text/x-rsrc",text:"text/plain",xquery:"application/xquery",racket:"text/x-scheme",cobol:"text/x-cobol",xml:"text/xml",rust:"text/x-rustsrc",swift:"text/x-swift",oracle:"text/x-plsql",tsql:"text/x-plsql",db2:"text/x-plsql",mysql:"text/x-plsql",fortran:"text/x-fortran",sql:"text/x-plsql",ada:"text/ada",cpp14:"text/x-c++src",coffeescript:"text/x-coffeescript",elixir:"text/x-elixir",pypy:"text/x-python",pypy3:"text/x-python",julia:"text/x-julia"},lang_display_mapping={c:"C",cpp:"C++",java:"Java 7",csharp:"C#",haskell:"Haskell",php:"PHP",python:"Python 2",ruby:"Ruby",perl:"Perl",bash:"BASH",clojure:"Clojure",scala:"Scala",code:"Generic",text:"Plain Text",brainfuck:"Brainfuck",javascript:"JavaScript (Node.js)",typescript:"TypeScript",lua:"Lua",sbcl:"Common Lisp (SBCL)",erlang:"Erlang",go:"Go",d:"D",ocaml:"OCaml",pascal:"Pascal",python3:"Python 3",groovy:"Groovy",objectivec:"Objective-C",text_pseudo:"Plain Text",fsharp:"F#",visualbasic:"VB.NET",lolcode:"LOLCODE",smalltalk:"Smalltalk",tcl:"Tcl",whitespace:"Whitespace",html:"HTML",css:"CSS",java8:"Java 8",kotlin:"Kotlin",octave:"Octave",r:"R",xquery:"XQuery",racket:"Racket",cobol:"Cobol",xml:"XML",rust:"Rust",fortran:"Fortran",swift:"Swift",oracle:"Oracle",tsql:"MS SQL",db2:"DB2",mysql:"MySQL",sql:"SQL",ada:"ADA",cpp14:"C++14",coffeescript:"CoffeeScript",elixir:"Elixir",pypy:"PyPy",pypy3:"PyPy3",julia:"Julia",babel:"Babel"},default_head_end={c:"/* Head ends here */",cpp:"/* Head ends here */",java:"/* Head ends here */",csharp:"/* Head ends here */",haskell:"-- Head ends here",php:"/* Head ends here */",python:"# Head ends here",perl:"# Head ends here",ruby:"# Head ends here",bash:"# Head ends here",clojure:"; Head ends here",scala:"/* Head ends here */",sbcl:"; Head ends here",lua:"-- Head ends here",javascript:"/* Head ends here */",pascal:"{ Head ends here }",python3:"# Head ends here",groovy:"// Head ends here",objectivec:"// Head ends here",fsharp:"// Head ends here",visualbasic:"' Head ends here",lolcode:"BTW Head ends here",smalltalk:'" Head ends here"',tcl:"# Head ends here",whitespace:"Head ends here",html:"<!-- Head ends here -->",css:"/* Head ends here */",java8:"/* Head ends here */",kotlin:"/* Head ends here */",octave:"# Head ends here",r:"# Head ends here",text:"",xquery:"(: Head ends here :)",racket:"; Head ends here",rust:"// Head ends here",fortran:"! Head ends here",swift:"// Head ends here",oracle:"/* Head ends here */",tsql:"/* Head ends here */",db2:"/* Head ends here*/",ada:"-- Head ends here",cpp14:"/* Head ends here*/",coffeescript:"# Head ends here",elixir:"# Head ends here",pypy:"# Head ends here",pypy3:"# Head ends here",julia:"# Head ends here"},lang_fold_mapping={c:"brace",cpp:"brace",java:"brace",csharp:"brace",haskell:"indent",php:"brace",python:"indent",ruby:"indent",perl:"brace",bash:"brace",clojure:"indent",scala:"brace",code:"brace",text:"indent",brainfuck:"indent",javascript:"brace",typescript:"brace",lua:"indent",sbcl:"indent",erlang:"indent",go:"brace",d:"brace",ocaml:"indent",pascal:"indent",python3:"indent",groovy:"brace",objectivec:"brace",text_pseudo:"indent",fsharp:"indent",visualbasic:"indent",lolcode:"indent",smalltalk:"indent",tcl:"brace",whitespace:"indent",html:"tag",css:"brace",java8:"brace",kotlin:"brace",octave:"indent",r:"brace",xquery:"indent",racket:"brace",xml:"tag",rust:"brace",swift:"brace",oracle:"indent",tsql:"indent",db2:"indent",fortran:"indent",mysql:"indent",sql:"indent",ada:"indent",cpp14:"brace",coffeescript:"indent",elixir:"indent",pypy:"indent",pypy3:"indent",julia:"indent"},default_tail_start={c:"/* Tail starts here */",cpp:"/* Tail starts here */",java:"/* Tail starts here */",csharp:"/* Tail starts here */",haskell:"-- Tail starts here",php:"/* Tail starts here */",python:"# Tail starts here",perl:"# Tail starts here",ruby:"# Tail starts here",bash:"# Tail starts here",clojure:"; Tail starts here",scala:"/* Tail starts here */",sbcl:"; Tail starts here",lua:"-- Tail starts here",javascript:"/* Tail starts here */",pascal:"{ Tail starts here }",python3:"# Tail starts here",groovy:"// Tail starts here",objectivec:"// Tail starts here",fsharp:"// Tail starts here",visualbasic:"' Tail starts here",lolcode:"BTW Tail starts here",smalltalk:'" Tail starts here"',tcl:"# Tail starts here",whitespace:"Tail starts here",html:"<!-- Tail starts here -->",css:"/* Tail starts here */",java8:"/* Tail starts here */",kotlin:"/* Tail starts here */",octave:"# Tail starts here ",r:"# Tail starts here ",text:"",xquery:"(: Tail starts here :)",racket:"; Tail starts here",rust:"// Tail starts here",fortran:"! Tail starts here",swift:"// Tail starts here",oracle:"/* Tail starts here */",tsql:"/* Tail starts here */",db2:"/* Tail starts here*/",ada:"-- Tail starts here",cpp14:"/* Tail starts here*/",coffeescript:"# Tail starts here",elixir:"# Tail starts here",pypy:"# Tail starts here",pypy3:"# Tail starts here",julia:"# Tail starts here"},lang_default_text={c:"#include <stdio.h>\n#include <string.h>\n#include <math.h>\n#include <stdlib.h>\n\nint main() {\n\n    /* Enter your code here. Read input from STDIN. Print output to STDOUT */    \n    return 0;\n}\n",cpp:"#include <cmath>\n#include <cstdio>\n#include <vector>\n#include <iostream>\n#include <algorithm>\nusing namespace std;\n\n\nint main() {\n    /* Enter your code here. Read input from STDIN. Print output to STDOUT */   \n    return 0;\n}\n",java:"import java.io.*;\nimport java.util.*;\nimport java.text.*;\nimport java.math.*;\nimport java.util.regex.*;\n\npublic class Solution {\n\n    public static void main(String[] args) {\n        /* Enter your code here. Read input from STDIN. Print output to STDOUT. Your class should be named Solution. */\n    }\n}",csharp:"using System;\nusing System.Collections.Generic;\nusing System.IO;\nclass Solution {\n    static void Main(String[] args) {\n        /* Enter your code here. Read input from STDIN. Print output to STDOUT. Your class should be named Solution */\n    }\n}",php:'<?php\n$_fp = fopen("php://stdin", "r");\n/* Enter your code here. Read input from STDIN. Print output to STDOUT */\n\n?>',ruby:"# Enter your code here. Read input from STDIN. Print output to STDOUT",python:"# Enter your code here. Read input from STDIN. Print output to STDOUT",perl:"# Enter your code here. Read input from STDIN. Print output to STDOUT",haskell:"-- Enter your code here. Read input from STDIN. Print output to STDOUT",clojure:"; Enter your code here. Read input from STDIN. Print output to STDOUT\n;",lua:"-- Enter your code here. Read input from STDIN. Print output to STDOUT",sbcl:";; Enter your code here. Read input from STDIN. Print output to STDOUT",erlang:"% Enter your code here. Read input from STDIN. Print output to STDOUT\n% Your class should be named solution\n\n-module(solution).\n-export([main/0]).\n\nmain() ->\n\t.\n",scala:"object Solution {\n\n    def main(args: Array[String]) {\n        /* Enter your code here. Read input from STDIN. Print output to STDOUT. Your class should be named Solution\n*/\n    }\n}",go:'package main\nimport "fmt"\n\nfunc main() {\n //Enter your code here. Read input from STDIN. Print output to STDOUT\n}',javascript:'function processData(input) {\n    //Enter your code here\n} \n\nprocess.stdin.resume();\nprocess.stdin.setEncoding("ascii");\n_input = "";\nprocess.stdin.on("data", function (input) {\n    _input += input;\n});\n\nprocess.stdin.on("end", function () {\n   processData(_input);\n});\n',d:"/* Enter your code here. Read input from STDIN. Print output to STDOUT */",ocaml:"(* Enter your code here. Read input from STDIN. Print output to STDOUT *)",pascal:"(* Enter your code here. Read input from STDIN. Print output to STDOUT *)",groovy:"//Enter your code here. Read input from STDIN. Print output to STDOUT",text:"",objectivec:"//Enter your code here. Read input from STDIN. Print output to STDOUT",fsharp:"//Enter your code here. Read input from STDIN. Print output to STDOUT",visualbasic:"'Enter your code here. Read input from STDIN. Print output to STDOUT",lolcode:"BTW Enter your code here. Read input from STDIN. Print output to STDOUT",smalltalk:'"Enter your code here. Read input from STDIN. Print output to STDOUT"',tcl:"# Enter your code here. Read input from STDIN. Print output to STDOUT",whitespace:"Enter your code here. Read input from STDIN. Print output to STDOUT",html:"<!-- Enter your HTML code here -->",css:"/* Declare your styles here*/",java8:"import java.io.*;\nimport java.util.*;\nimport java.text.*;\nimport java.math.*;\nimport java.util.regex.*;\n\npublic class Solution {\n\n    public static void main(String[] args) {\n        /* Enter your code here. Read input from STDIN. Print output to STDOUT. Your class should be named Solution. */\n    }\n}",kotlin:"import java.io.*\nimport java.util.*\n\nfun main(args: Array<String>) {\n        /* Enter your code here. Read input from STDIN. Print output to STDOUT. */\n}",octave:"# Enter your code here. Read input from STDIN. Print output to STDOUT",r:"# Enter your code here. Read input from STDIN. Print output to STDOUT",text:"",xquery:"(: Enter your code here. Read input from STDIN. Print output to STDOUT :)",racket:"#lang racket\n; Enter your code here. Read input from STDIN. Print output to STDOUT",xml:"",rust:"// Enter your code here. Read input from STDIN. Print output to STDOUT",fortran:"! Enter your code here. Read input from STDIN. Print output to STDOUT",swift:"import Foundation\n\n// Enter your code here. Read input from STDIN. Print output to STDOUT",ada:"with Ada.Text_IO, Ada.Integer_Text_IO;\nuse Ada;\n\nprocedure Solution is\n-- Enter your code here. Read input from STDIN. Print output to STDOUT\n\n\nend Solution",cpp14:"#include <cmath>\n#include <cstdio>\n#include <vector>\n#include <iostream>\n#include <algorithm>\nusing namespace std;\n\n\nint main() {\n    /* Enter your code here. Read input from STDIN. Print output to STDOUT */   \n    return 0;\n}\n",coffeescript:"# Enter your code here. Read input from STDIN. Print output to STDOUT",elixir:"defmodule Solution do\n#Enter your code here. Read input from STDIN. Print output to STDOUT\nend",pypy:"# Enter your code here. Read input from STDIN. Print output to STDOUT",pypy3:"# Enter your code here. Read input from STDIN. Print output to STDOUT",julia:"# Enter your code here. Read input from STDIN. Print output to STDOUT"},default_checker_limits={c:{timelimit:3},clojure:{timelimit:5},cpp:{timelimit:3},csharp:{timelimit:5},go:{timelimit:6},haskell:{timelimit:5},java:{timelimit:5},kotlin:{timelimit:5},javascript:{timelimit:16},perl:{timelimit:16},php:{timelimit:16},python:{timelimit:16},ruby:{timelimit:16},scala:{timelimit:5},fortran:{timelimit:5},xquery:{timelimit:5},racket:{timelimit:10}},lang_mode_location_unconventional_mapping={cpp:"codemirror/mode/clike/clike",cpp14:"codemirror/mode/clike/clike",c:"codemirror/mode/clike/clike",java:"codemirror/mode/clike/clike",csharp:"codemirror/mode/clike/clike",scala:"codemirror/mode/clike/clike",sbcl:"codemirror/mode/commonlisp/commonlisp",ocaml:"codemirror/mode/mllike/mllike",fsharp:"codemirror/mode/mllike/mllike",visualbasic:"codemirror/mode/vb/vb",sql:"codemirror/mode/sql/sql",mysql:"codemirror/mode/sql/sql",tsql:"codemirror/mode/sql/sql",pgsql:"codemirror/mode/sql/sql",oracle:"codemirror/mode/sql/sql",html:["codemirror/mode/xml/xml","codemirror/mode/css/css","codemirror/mode/javascript/javascript","codemirror/mode/htmlmixed/htmlmixed"],php:["codemirror/mode/clike/clike","codemirror/mode/php/php"],python3:"codemirror/mode/python/python",java8:"codemirror/mode/clike/clike",kotlin:"codemirror/mode/clike/clike",db2:"codemirror/mode/sql/sql",bash:"codemirror/mode/shell/shell",objectivec:"codemirror/mode/clike/clike",lolcode:[],whitespace:[],text_pseudo:[],code:"codemirror/mode/clike/clike",text:[],racket:"codemirror/mode/scheme/scheme",coffeescript:"codemirror/mode/coffeescript/coffeescript",typescript:"codemirror/mode/javascript/javascript",elixir:"lib/codemirror_mode_elixir",pypy:"codemirror/mode/python/python",pypy3:"codemirror/mode/python/python"},codechecker_resource_limits={c:{title:"C",min_mem:256,max_mem:512,def_mem:512,min_time:1,max_time:4,def_time:2},cpp:{title:"C++",min_mem:256,max_mem:512,def_mem:512,min_time:1,max_time:4,def_time:2},java:{title:"Java",min_mem:256,max_mem:512,def_mem:512,min_time:1,max_time:8,def_time:4},csharp:{title:"C#",min_mem:256,max_mem:512,def_mem:512,min_time:1,max_time:6,def_time:3},php:{title:"PHP",min_mem:256,max_mem:512,def_mem:512,min_time:1,max_time:18,def_time:9},ruby:{title:"Ruby",min_mem:256,max_mem:512,def_mem:512,min_time:1,max_time:20,def_time:10},python:{title:"Python 2",min_mem:256,max_mem:512,def_mem:512,min_time:1,max_time:20,def_time:10},perl:{title:"Perl",min_mem:256,max_mem:512,def_mem:512,min_time:1,max_time:18,def_time:9},haskell:{title:"Haskell",min_mem:256,max_mem:512,def_mem:512,min_time:1,max_time:10,def_time:5},clojure:{title:"Clojure",min_mem:256,max_mem:512,def_mem:512,min_time:1,max_time:16,def_time:8},scala:{title:"Scala",min_mem:256,max_mem:512,def_mem:512,min_time:1,max_time:14,def_time:7},bash:{title:"Bash",min_mem:256,max_mem:512,def_mem:512,min_time:1,max_time:2,def_time:1},lua:{title:"Lua",min_mem:256,max_mem:512,def_mem:256,min_time:1,max_time:24,def_time:12},erlang:{title:"Erlang",min_mem:256,max_mem:512,def_mem:512,min_time:1,max_time:24,def_time:12},brainfuck:{title:"Brainf**k",min_mem:256,max_mem:512,def_mem:512,min_time:1,max_time:4,def_time:2},javascript:{title:"JavaScript (Node.js)",min_mem:256,max_mem:1536,def_mem:1536,min_time:1,max_time:20,def_time:10},typescript:{title:"TypeScript",min_mem:256,max_mem:1024,def_mem:1024,min_time:1,max_time:20,def_time:10},go:{title:"Go",min_mem:256,max_mem:1024,def_mem:1024,min_time:1,max_time:8,def_time:4},d:{title:"D",min_mem:256,max_mem:512,def_mem:256,min_time:1,max_time:6,def_time:3},ocaml:{title:"OCaml",min_mem:256,max_mem:512,def_mem:512,min_time:1,max_time:6,def_time:3},pascal:{title:"Pascal",min_mem:256,max_mem:512,def_mem:512,min_time:1,max_time:4,def_time:2},sbcl:{title:"Common Lisp (SBCL)",min_mem:256,max_mem:512,def_mem:512,min_time:1,max_time:20,def_time:10},python3:{title:"Python 3",min_mem:256,max_mem:512,def_mem:512,min_time:1,max_time:20,def_time:10},groovy:{title:"Groovy",min_mem:256,max_mem:512,def_mem:512,min_time:1,max_time:10,def_time:5},objectivec:{title:"Objective-C",min_mem:256,max_mem:512,def_mem:512,min_time:1,max_time:4,def_time:2},fsharp:{title:"F#",min_mem:256,max_mem:512,def_mem:512,min_time:1,max_time:8,def_time:4},cobol:{title:"COBOL",min_mem:256,max_mem:512,def_mem:512,min_time:1,max_time:10,def_time:5},visualbasic:{title:"VB.NET",min_mem:256,max_mem:512,def_mem:512,min_time:1,max_time:10,def_time:5},lolcode:{title:"LOLCODE",min_mem:256,max_mem:512,def_mem:512,min_time:1,max_time:10,def_time:5},smalltalk:{title:"Smalltalk",min_mem:256,max_mem:512,def_mem:512,min_time:1,max_time:10,def_time:5},tcl:{title:"Tcl",min_mem:256,max_mem:512,def_mem:512,min_time:1,max_time:10,def_time:5},whitespace:{title:"Whitespace",min_mem:256,max_mem:512,def_mem:512,min_time:1,max_time:10,def_time:5},tsql:{title:"T-SQL",min_mem:256,max_mem:512,def_mem:512,min_time:1,max_time:120,def_time:60},java8:{title:"Java 8",min_mem:256,max_mem:2048,def_mem:2048,min_time:1,max_time:8,def_time:4},db2:{title:"DB2",min_mem:256,max_mem:512,def_mem:512,min_time:1,max_time:120,def_time:60},octave:{title:"Octave",min_mem:256,max_mem:512,def_mem:512,min_time:1,max_time:10,def_time:5},r:{title:"R",min_mem:256,max_mem:512,def_mem:512,min_time:1,max_time:20,def_time:10},text:{title:"Text",min_mem:256,max_mem:512,def_mem:512,min_time:1,max_time:6,def_time:3},xquery:{title:"XQuery",min_mem:256,max_mem:2048,def_mem:2048,min_time:1,max_time:10,def_time:5},racket:{title:"Racket",min_mem:256,max_mem:512,def_mem:512,min_time:1,max_time:20,def_time:10},rust:{title:"Rust",min_mem:256,max_mem:512,def_mem:512,min_time:1,max_time:10,def_time:5},fortran:{title:"Fortran",min_mem:256,max_mem:512,def_mem:512,min_time:1,max_time:6,def_time:3},swift:{title:"Swift",min_mem:256,max_mem:512,def_mem:512,min_time:1,max_time:4,def_time:2},oracle:{title:"Oracle",min_mem:256,max_mem:512,def_mem:512,min_time:1,max_time:120,def_time:60},mysql:{title:"MySQL",min_mem:256,max_mem:512,def_mem:512,min_time:1,max_time:120,def_time:60},ada:{title:"ADA",min_mem:256,max_mem:512,def_mem:512,min_time:1,max_time:6,def_time:3},cpp14:{title:"C++14",min_mem:256,max_mem:512,def_mem:512,min_time:1,max_time:4,def_time:2},coffeescript:{title:"CoffeeScript",min_mem:256,max_mem:1024,def_mem:1024,min_time:1,max_time:20,def_time:10},elixir:{title:"Elixir",min_mem:256,max_mem:2048,def_mem:2048,min_time:1,max_time:24,def_time:12},pypy:{title:"PyPy",min_mem:256,max_mem:512,def_mem:512,min_time:1,max_time:6,def_time:3},pypy3:{title:"PyPy3",min_mem:256,max_mem:512,def_mem:512,min_time:1,max_time:6,def_time:3},julia:{title:"Julia",min_mem:256,max_mem:2048,def_mem:2048,min_time:1,max_time:20,def_time:10},babeljs:{title:"Babel JS",min_mem:256,max_mem:1024,def_mem:1024,min_time:1,max_time:20,def_time:10},c_clang:{title:"C Clang",min_mem:256,max_mem:512,def_mem:512,min_time:1,max_time:4,def_time:2},cpp_clang:{title:"C++ Clang",min_mem:256,max_mem:512,def_mem:512,min_time:1,max_time:4,def_time:2},haxe:{title:"Haxe",min_mem:256,max_mem:512,def_mem:512,min_time:1,max_time:20,def_time:10},kotlin:{title:"Kotlin",min_mem:256,max_mem:1024,def_mem:1024,min_time:1,max_time:14,def_time:7}},codechecker_custom_checker_templates={template_head:{cpp:"\n// Start of HEAD\n#include <map>\n#include <cmath>\n#include <cstdio>\n#include <vector>\n#include <fstream>\n#include <iostream>\n#include <algorithm>\n#ifdef __APPLE__\n    #include <json/json.h>\n#else\n    #include <json/json.h>\n#endif\n\nusing namespace std;\nusing namespace Json;\n\nclass TestStruct {\npublic:\n    size_t testcase_id;\n    string testcase_input_path;\n    string testcase_output_path;\n    string testcase_expected_output_path;\n    string testcase_error_path;\n    vector<string> metadata_file_paths;\n    string submission_code_path;\n    string submission_language;\n    bool testcase_result;\n    size_t testcase_signal;\n    float testcase_time;\n    size_t testcase_memory;\n    string data;\n};\n\nclass ResultStruct {\npublic:\n    bool   result;\n    float  score;\n    string message;\n};\n// End of HEAD\n        ",java:"\n\n// Start of HEAD\nimport java.io.*;\nimport java.util.*;\nimport java.text.*;\nimport java.math.*;\nimport java.util.regex.*;\nimport org.json.simple.JSONArray;\nimport org.json.simple.JSONObject;\nimport org.json.simple.parser.JSONParser;\n// End of HEAD\n        ",java8:"\n\n// Start of HEAD\nimport java.io.*;\nimport java.util.*;\nimport java.text.*;\nimport java.math.*;\nimport java.util.regex.*;\nimport org.json.simple.JSONArray;\nimport org.json.simple.JSONObject;\nimport org.json.simple.parser.JSONParser;\n// End of HEAD\n        ",python:"\n# Start of HEAD\nfrom __future__ import division, print_function, unicode_literals, absolute_import\nimport json\nimport string\nimport sys\n# End of HEAD\n        ",python3:"\n# Start of HEAD\nimport json\nimport string\nimport sys\n# End of HEAD\n        ",ruby:'\n# Start of HEAD\nrequire "json"\n\nTestStruct = Struct.new(\n    :testcase_id,\n    :testcase_input_path,\n    :testcase_output_path,\n    :testcase_expected_output_path,\n    :testcase_error_path,\n    :metadata_file_paths,\n    :submission_code_path,\n    :submission_language,\n    :testcase_result,\n    :testcase_signal,\n    :testcase_time,\n    :testcase_memory,\n    :data\n)\n\nResultStruct = Struct.new(\n    :result,\n    :score,\n    :message\n)\n# End of HEAD\n        ',scala:"\n// Start of HEAD\nimport org.json.simple.JSONArray\nimport org.json.simple.JSONObject\nimport org.json.simple.parser.JSONParser\nimport scala.jdk.CollectionConverters._\nimport com.google.gson.Gson\nimport com.google.gson.JsonObject\nimport com.google.gson.JsonParser\n\n// End of HEAD"},template_body:{cpp:'\n// Start of BODY\n/**\n * TestStruct members::\n *  testcase_id                   [size_t] ID of the test-case\n *  testcase_input_path           [string] File path to test-case input\n *  testcase_output_path          [string] File path to test-case output generated by the problem solver\n *  testcase_expected_output_path [string] File path to test-case expected output to be matched with\n *  testcase_error_path           [string] File path to test-case STDERR\n *  metadata_file_paths           [vector<string>] File paths to Question metadata (Extra files usually used for defining traning sets)\n *  submission_code_path          [string] File path to submission source code\n *  submission_language           [string] Language token of submission\n *  testcase_result               [bool] Set to true if test-case output matches test-case expected output. Matching is done line by line\n *  testcase_signal               [size_t] Exit code of the test-case process\n *  testcase_time                 [float] Time taken by the test-case process in seconds\n *  testcase_memory               [size_t] Peak memory of the test-case process determined in bytes\n *  data                          [string] <Future use>\n *\n *\n *  ResultStruct::\n *    result      [bool]  Assign test-case result. true determines success. false determines failure\n *    score       [float] Assign test-case score. Normalized between 0 to 1\n *    message     [string] Assign test-case message. This message is visible to the problem solver\n**/\n\n\nvoid run_custom_checker(const TestStruct t_obj,\n                        ResultStruct &r_obj) {\n    //Don\'t print anything to STDOUT in this function\n    //Enter your custom checker scoring logic here\n\n    r_obj.result = true;\n    r_obj.score = 1.0f;\n    r_obj.message = "Success";\n}\n// End of BODY\n        ',java:'\n// Start of BODY\n\n/**\n * TestStruct::\n *  testcase_id                   [long] ID of the test-case\n *  testcase_input_path           [String] File path to test-case input\n *  testcase_output_path          [String] File path to test-case output generated by the problem solver\n *  testcase_expected_output_path [String] File path to test-case expected output to be matched with\n *  testcase_error_path           [String] File path to test-case STDERR\n *  metadata_file_paths           [ArrayList<String>] File paths to Question metadata (Extra files usually used for defining traning sets)\n *  submission_code_path          [String] File path to submission source code\n *  submission_language           [string] Language token of submission\n *  testcase_result               [boolean] Set to true if test-case output matches test-case expected output. Matching is done line by line\n *  testcase_signal               [long] Exit code of the test-case process\n *  testcase_time                 [double] Time taken by the test-case process in seconds\n *  testcase_memory               [long] Peak memory of the test-case process determined in bytes\n *  data                          [String] <Future use>\n *\n *\n *  ResultStruct::\n *    result      [boolean]  Assign test-case result. true determines success. false determines failure\n *    score       [double] Assign test-case score. Normalized between 0 to 1\n *    message     [String] Assign test-case message. This message is visible to the problem solver\n**/\n\npublic class CustomChecker {\n\n    static void run_custom_checker(final TestStruct t_obj, ResultStruct r_obj) {\n        // Don\'t print anything to STDOUT in this function\n        // Enter your custom checker scoring logic here\n\n        r_obj.result = true;\n        r_obj.score = 1.0d;\n        r_obj.message = "Success";\n    }\n\n// End of BODY\n        ',
java8:'\n// Start of BODY\n\n/**\n * TestStruct::\n *  testcase_id                   [long] ID of the test-case\n *  testcase_input_path           [String] File path to test-case input\n *  testcase_output_path          [String] File path to test-case output generated by the problem solver\n *  testcase_expected_output_path [String] File path to test-case expected output to be matched with\n *  testcase_error_path           [String] File path to test-case STDERR\n *  metadata_file_paths           [ArrayList<String>] File paths to Question metadata (Extra files usually used for defining traning sets)\n *  submission_code_path          [String] File path to submission source code\n *  submission_language           [string] Language token of submission\n *  testcase_result               [boolean] Set to true if test-case output matches test-case expected output. Matching is done line by line\n *  testcase_signal               [long] Exit code of the test-case process\n *  testcase_time                 [double] Time taken by the test-case process in seconds\n *  testcase_memory               [long] Peak memory of the test-case process determined in bytes\n *  data                          [String] <Future use>\n *\n *\n *  ResultStruct::\n *    result      [boolean]  Assign test-case result. true determines success. false determines failure\n *    score       [double] Assign test-case score. Normalized between 0 to 1\n *    message     [String] Assign test-case message. This message is visible to the problem solver\n**/\n\npublic class CustomChecker {\n\n    static void run_custom_checker(final TestStruct t_obj, ResultStruct r_obj) {\n        // Don\'t print anything to STDOUT in this function\n        // Enter your custom checker scoring logic here\n\n        r_obj.result = true;\n        r_obj.score = 1.0d;\n        r_obj.message = "Success";\n    }\n\n// End of BODY\n        ',python:"\n# Start of BODY\n'''\nTestStruct::\ntestcase_id                   [int] ID of the test-case\ntestcase_input_path           [str] File path to test-case input\ntestcase_output_path          [str] File path to test-case output generated by the problem solver\ntestcase_expected_output_path [str] File path to test-case expected output to be matched with\ntestcase_error_path           [str] File path to test-case STDERR\nmetadata_file_paths           [list<str>] File paths to Question metadata (Extra files usually used for defining traning sets)\nsubmission_code_path          [str] File path to submission source code\nsubmission_language           [str] Language token of submission\ntestcase_result               [bool] Set to True if test-case output matches test-case expected output. Matching is done line by line\ntestcase_signal               [int] Exit code of the test-case process\ntestcase_time                 [float] Time taken by the test-case process in seconds\ntestcase_memory               [int] Peak memory of the test-case process determined in bytes\ndata                          [str] <Future use>\nResultStruct::\nresult      [bool]  Assign test-case result. True determines success. False determines failure\nscore       [float] Assign test-case score. Normalized between 0 to 1\nmessage     [str] Assign test-case message. This message is visible to the problem solver\n'''\n\n\ndef run_custom_checker(t_obj, r_obj):\n    # Don't print anything to STDOUT in this function\n    # Enter your custom checker scoring logic here\n\n    r_obj.result = True;\n    r_obj.score = 1.0;\n    r_obj.message = \"Success\";\n\n# End of BODY\n        ",python3:"\n# Start of BODY\n'''\nTestStruct::\ntestcase_id                   [int] ID of the test-case\ntestcase_input_path           [str] File path to test-case input\ntestcase_output_path          [str] File path to test-case output generated by the problem solver\ntestcase_expected_output_path [str] File path to test-case expected output to be matched with\ntestcase_error_path           [str] File path to test-case STDERR\nmetadata_file_paths           [list<str>] File paths to Question metadata (Extra files usually used for defining traning sets)\nsubmission_code_path          [str] File path to submission source code\nsubmission_language           [str] Language token of submission\ntestcase_result               [bool] Set to True if test-case output matches test-case expected output. Matching is done line by line\ntestcase_signal               [int] Exit code of the test-case process\ntestcase_time                 [float] Time taken by the test-case process in seconds\ntestcase_memory               [int] Peak memory of the test-case process determined in bytes\ndata                          [str] <Future use>\nResultStruct::\nresult      [bool]  Assign test-case result. True determines success. False determines failure\nscore       [float] Assign test-case score. Normalized between 0 to 1\nmessage     [str] Assign test-case message. This message is visible to the problem solver\n'''\n\n\ndef run_custom_checker(t_obj, r_obj):\n    # Don't print anything to STDOUT in this function\n    # Enter your custom checker scoring logic here\n\n    r_obj.result = True;\n    r_obj.score = 1.0;\n    r_obj.message = \"Success\";\n\n# End of BODY\n        ",ruby:'\n# Start of BODY\n=begin\n TestStruct::\n  testcase_id                   [long] ID of the test-case\n  testcase_input_path           [String] File path to test-case input\n  testcase_output_path          [String] File path to test-case output generated by the problem solver\n  testcase_expected_output_path [String] File path to test-case expected output to be matched with\n  testcase_error_path           [String] File path to test-case STDERR\n  metadata_file_paths           [ArrayList<String>] File paths to Question metadata (Extra files usually used for defining traning sets)\n  submission_code_path          [String] File path to submission source code\n  submission_language           [string] Language token of submission\n  testcase_result               [boolean] Set to true if test-case output matches test-case expected output. Matching is done line by line\n  testcase_signal               [long] Exit code of the test-case process\n  testcase_time                 [double] Time taken by the test-case process in seconds\n  testcase_memory               [long] Peak memory of the test-case process determined in bytes\n  data                          [String] <Future use>\n  ResultStruct::\n    result      [boolean]  Assign test-case result. true determines success. false determines failure\n    score       [double] Assing test-case score. Normalized between 0 to 1\n    message     [String] Assing test-case message. This message is visible to the problem solver\n=end\n\n# run_custom_checker(TestStruct, ResultStruct)\ndef run_custom_checker(t_obj, r_obj)\n    # Don\'t print anything to STDOUT in this function\n    # Enter your custom checker scoring logic here\n\n    r_obj.result = true;\n    r_obj.score = 1.0;\n    r_obj.message = "Success";\nend\n# End of BODY\n        ',scala:'\n// Start of Body\n/**\n * TestStruct::\n *      testcase_id                   [long] ID of the test-case\n *      testcase_input_path           [String] File path to test-case input\n *      testcase_output_path          [String] File path to test-case output generated by the problem solver\n *      testcase_expected_output_path [String] File path to test-case expected output to be matched with\n *      testcase_error_path           [String] File path to test-case STDERR\n *      metadata_file_paths           [ArrayList<String>] File paths to Question metadata (Extra files usually used for defining traning sets)\n *      submission_code_path          [String] File path to submission source code\n *      submission_language           [string] Language token of submission\n *      testcase_result               [boolean] Set to true if test-case output matches test-case expected output. Matching is done line by line\n *      testcase_signal               [long] Exit code of the test-case process\n *      testcase_time                 [double] Time taken by the test-case process in seconds\n *      testcase_memory               [long] Peak memory of the test-case process determined in bytes\n *      data                          [String] <Future use>\n *\n *\n *  ResultStruct::\n *    result      [boolean]  Assign test-case result. true determines success. false determines failure\n *    score       [double] Assign test-case score. Normalized between 0 to 1\n *    message     [String] Assign test-case message. This message is visible to the problem solver\n**/\n\nobject Solution {\n    def run_custom_checker(t_obj: TestStruct, r_obj: ResultStruct) {\n        // Don\'t print anything to STDOUT in this function\n        // Enter your custom checker scoring logic here\n\n        r_obj.score = 1.0f\n        r_obj.result = true\n        r_obj.message = "Success"\n    }\n    // End of Body\n        '},template_tail:{cpp:'\n// Start of TAIL\nint read_input_json(const string json_file_path,\n                    TestStruct &t_obj) {\n    ifstream stream(json_file_path);\n    string json_file_contents((std::istreambuf_iterator<char>(stream)),\n                 std::istreambuf_iterator<char>());\n\n    Value root;\n    Reader reader;\n    if(!reader.parse(json_file_contents, root, false))\n        return 1;\n\n    try {\n        // Read values\n        if(root.isMember("testcase_id"))\n            t_obj.testcase_id = root["testcase_id"].asInt();\n        if(root.isMember("input_file_path"))\n            t_obj.testcase_input_path = root["input_file_path"].asString();\n        if(root.isMember("output_file_path"))\n            t_obj.testcase_output_path = root["output_file_path"].asString();\n        if(root.isMember("expected_output_file_path"))\n            t_obj.testcase_expected_output_path = root["expected_output_file_path"].asString();\n        if(root.isMember("error_file_path"))\n            t_obj.testcase_error_path = root["error_file_path"].asString();\n        if(root.isMember("metadata_file_paths")) {\n            Value metadata_file_path_node = root["metadata_file_paths"];\n            if(metadata_file_path_node.isArray()) {\n                for(int i = 0; i < (int)metadata_file_path_node.size(); i++) {\n                    string metadata_file = metadata_file_path_node[i].asString();\n                    t_obj.metadata_file_paths.push_back(metadata_file);\n                }\n            }\n        }\n        if(root.isMember("submission_code_path"))\n            t_obj.submission_code_path = root["submission_code_path"].asString();\n        if(root.isMember("submission_language"))\n            t_obj.submission_language = root["submission_language"].asString();\n        if(root.isMember("testcase_result"))\n            t_obj.testcase_result = root["testcase_result"].asBool();\n        if(root.isMember("testcase_signal"))\n            t_obj.testcase_signal = root["testcase_signal"].asInt();\n        if(root.isMember("testcase_time"))\n            t_obj.testcase_time = root["testcase_time"].asFloat();\n        if(root.isMember("testcase_memory"))\n            t_obj.testcase_memory = root["testcase_memory"].asInt();\n        if(root.isMember("data"))\n            t_obj.data = root["data"].asString();\n    }\n    catch(const runtime_error& error) {\n        return 1;\n    }\n\n    return 0;\n}\n\nvoid write_result_json(const ResultStruct r_obj) {\n    Value root;\n    root["custom_result"] = (int)r_obj.result;\n    root["custom_score"] = max( ((r_obj.score > 1.0f)? 1.0f : r_obj.score), 0.0f);\n    root["custom_message"] = (r_obj.message.size() > 4096)? r_obj.message.substr(0, 4095) : r_obj.message;\n    cout << root.toStyledString() << endl;\n}\n\nint main(int argc, char** argv) {\n    // Input parameters\n    TestStruct t_obj;\n    t_obj.testcase_id = 0;\n    t_obj.testcase_signal = 0;\n    t_obj.testcase_memory = 0;\n    t_obj.testcase_time = 0.0f;\n    t_obj.testcase_result = true;\n\n    // Out parameters\n    ResultStruct r_obj;\n    r_obj.result = false;\n    r_obj.score = 0.0f;\n    r_obj.message = "Uninitialized";\n\n    if(argc < 2) {\n        write_result_json(r_obj);\n        return 1;\n    }\n\n    // Decode input JSON\n    int failure = read_input_json((string)argv[1],\n                                    t_obj);\n    // Incase input JSON was malformed or not existent\n    if(failure) {\n        r_obj.message = "Unable to read input json";\n        write_result_json(r_obj);\n        return 2;\n    }\n\n    // Run the custom checker evaluator\n    run_custom_checker(t_obj, r_obj);\n\n    // Encode result JSON\n    write_result_json(r_obj);\n    return 0;\n}\n// End of TAIL',java:'\n// Start of TAIL\n    static int read_input_json(final String json_file_path, TestStruct t_obj) {\n        try {\n            JSONParser parser = new JSONParser();\n            JSONObject json_obj = (JSONObject)parser.parse(new FileReader(json_file_path));\n\n            // Read values\n            t_obj.testcase_id = (long) json_obj.get("testcase_id");\n            t_obj.testcase_input_path = (String) json_obj.get("input_file_path");\n            t_obj.testcase_output_path = (String) json_obj.get("output_file_path");\n            t_obj.testcase_expected_output_path = (String) json_obj.get("expected_output_file_path");\n            t_obj.testcase_error_path = (String) json_obj.get("error_file_path");\n\n            JSONArray metadata_file_path_node = (JSONArray) json_obj.get("metadata_file_paths");\n            if(metadata_file_path_node != null && !metadata_file_path_node.isEmpty()) {\n                Iterator<String> metadata_file_paths_it = metadata_file_path_node.iterator();\n                while (metadata_file_paths_it.hasNext())\n                    t_obj.metadata_file_paths.add(metadata_file_paths_it.next());\n            }\n\n            t_obj.submission_code_path = (String) json_obj.get("submission_code_path");\n            t_obj.submission_language = (String) json_obj.get("submission_language");\n            t_obj.testcase_result = (boolean) json_obj.get("testcase_result");\n            t_obj.testcase_signal = (long) json_obj.get("testcase_signal");\n            t_obj.testcase_time = ((Number) json_obj.get("testcase_time")).doubleValue();\n            t_obj.testcase_memory = (long) json_obj.get("testcase_memory");\n            t_obj.data = (String) json_obj.get("data");\n        }\n        catch(Exception err) {\n            return 1;\n        }\n\n        return 0;\n    }\n\n    static void write_result_json(final ResultStruct r_obj) {\n        JSONObject json_obj = new JSONObject();\n        json_obj.put("custom_result", new Integer((r_obj.result)? 1 : 0));\n        json_obj.put("custom_score", new Double( Math.max(((r_obj.score > 1.0d)? 1.0d : r_obj.score), 0.0d)));\n        json_obj.put("custom_message", (r_obj.message.length() > 4096)? r_obj.message.substring(0, 4095) : r_obj.message);\n        System.out.println(json_obj);\n    }\n\n    public static void main(String args[]) {\n        // Input parameters\n        TestStruct t_obj = new TestStruct();\n        // Out parameters\n        ResultStruct r_obj = new ResultStruct();\n\n        if(args.length < 1) {\n            write_result_json(r_obj);\n            System.exit(1);\n        }\n\n        // Decode input JSON\n        int failure = read_input_json((String)args[0], t_obj);\n        // Incase input JSON was malformed or not existent\n        if(failure != 0) {\n            r_obj.message = "Unable to read input json";\n            write_result_json(r_obj);\n            System.exit(2);\n        }\n\n        // Run the custom checker evaluator\n        run_custom_checker(t_obj, r_obj);\n\n        // Encode result JSON\n        write_result_json(r_obj);\n        System.exit(0);\n    }\n}\n\n\nfinal class TestStruct {\n    long testcase_id = 0;\n    String testcase_input_path;\n    String testcase_output_path;\n    String testcase_expected_output_path;\n    String testcase_error_path;\n    ArrayList<String> metadata_file_paths = new ArrayList<String>();\n    String submission_code_path;\n    String submission_language;\n    boolean testcase_result = false;\n    long testcase_signal = 0;\n    double testcase_time = 0.0f;\n    long testcase_memory = 0;\n    String data;\n}\n\n\nfinal class ResultStruct {\n    boolean result = false;\n    double   score = 0.0f;\n    String  message = "Uninitialized";\n}\n// End of TAIL\n        ',java8:'\n// Start of TAIL\n    static int read_input_json(final String json_file_path, TestStruct t_obj) {\n        try {\n            JSONParser parser = new JSONParser();\n            JSONObject json_obj = (JSONObject)parser.parse(new FileReader(json_file_path));\n\n            // Read values\n            t_obj.testcase_id = (long) json_obj.get("testcase_id");\n            t_obj.testcase_input_path = (String) json_obj.get("input_file_path");\n            t_obj.testcase_output_path = (String) json_obj.get("output_file_path");\n            t_obj.testcase_expected_output_path = (String) json_obj.get("expected_output_file_path");\n            t_obj.testcase_error_path = (String) json_obj.get("error_file_path");\n\n            JSONArray metadata_file_path_node = (JSONArray) json_obj.get("metadata_file_paths");\n            if(metadata_file_path_node != null && !metadata_file_path_node.isEmpty()) {\n                Iterator<String> metadata_file_paths_it = metadata_file_path_node.iterator();\n                while (metadata_file_paths_it.hasNext())\n                    t_obj.metadata_file_paths.add(metadata_file_paths_it.next());\n            }\n\n            t_obj.submission_code_path = (String) json_obj.get("submission_code_path");\n            t_obj.submission_language = (String) json_obj.get("submission_language");\n            t_obj.testcase_result = (boolean) json_obj.get("testcase_result");\n            t_obj.testcase_signal = (long) json_obj.get("testcase_signal");\n            t_obj.testcase_time = ((Number) json_obj.get("testcase_time")).doubleValue();\n            t_obj.testcase_memory = (long) json_obj.get("testcase_memory");\n            t_obj.data = (String) json_obj.get("data");\n        }\n        catch(Exception err) {\n            return 1;\n        }\n\n        return 0;\n    }\n\n    static void write_result_json(final ResultStruct r_obj) {\n        JSONObject json_obj = new JSONObject();\n        json_obj.put("custom_result", new Integer((r_obj.result)? 1 : 0));\n        json_obj.put("custom_score", new Double( Math.max(((r_obj.score > 1.0d)? 1.0d : r_obj.score), 0.0d)));\n        json_obj.put("custom_message", (r_obj.message.length() > 4096)? r_obj.message.substring(0, 4095) : r_obj.message);\n        System.out.println(json_obj);\n    }\n\n    public static void main(String args[]) {\n        // Input parameters\n        TestStruct t_obj = new TestStruct();\n        // Out parameters\n        ResultStruct r_obj = new ResultStruct();\n\n        if(args.length < 1) {\n            write_result_json(r_obj);\n            System.exit(1);\n        }\n\n        // Decode input JSON\n        int failure = read_input_json((String)args[0], t_obj);\n        // Incase input JSON was malformed or not existent\n        if(failure != 0) {\n            r_obj.message = "Unable to read input json";\n            write_result_json(r_obj);\n            System.exit(2);\n        }\n\n        // Run the custom checker evaluator\n        run_custom_checker(t_obj, r_obj);\n\n        // Encode result JSON\n        write_result_json(r_obj);\n        System.exit(0);\n    }\n}\n\n\nfinal class TestStruct {\n    long testcase_id = 0;\n    String testcase_input_path;\n    String testcase_output_path;\n    String testcase_expected_output_path;\n    String testcase_error_path;\n    ArrayList<String> metadata_file_paths = new ArrayList<String>();\n    String submission_code_path;\n    String submission_language;\n    boolean testcase_result = false;\n    long testcase_signal = 0;\n    double testcase_time = 0.0f;\n    long testcase_memory = 0;\n    String data;\n}\n\n\nfinal class ResultStruct {\n    boolean result = false;\n    double   score = 0.0f;\n    String  message = "Uninitialized";\n}\n// End of TAIL\n        ',python:'\n# Start of TAIL\nclass TestStruct:\n    def __init__(self):\n        self.testcase_id = 0\n        self.testcase_input_path = ""\n        self.testcase_output_path = ""\n        self.testcase_expected_output_path = ""\n        self.testcase_error_path = ""\n        self.metadata_file_paths = []\n        self.submission_code_path = ""\n        self.submission_language = ""\n        self.testcase_result = False\n        self.testcase_signal = 0\n        self.testcase_time = 0.0\n        self.testcase_memory = 0\n        self.data = ""\n\n\nclass ResultStruct:\n    def __init__(self):\n        self.result = False\n        self.score = 0.0\n        self.message = ""\n\n\ndef read_input_json(json_file_path, t_obj):\n    file_obj = open(json_file_path, "r")\n    json_file_contents = file_obj.read()\n\n    root = {}\n    try:\n        root = json.loads(json_file_contents)\n    except ValueError:\n        return 1\n\n    try:\n        # Read values\n        t_obj.testcase_id = root["testcase_id"]\n        t_obj.testcase_input_path = root["input_file_path"]\n        t_obj.testcase_output_path = root["output_file_path"]\n        t_obj.testcase_expected_output_path = root["expected_output_file_path"]\n        t_obj.testcase_error_path = root["error_file_path"]\n        t_obj.metadata_file_paths = root["metadata_file_paths"]\n        t_obj.submission_code_path = root["submission_code_path"]\n        t_obj.submission_language = root["submission_language"]\n        t_obj.testcase_result = root["testcase_result"]\n        t_obj.testcase_signal = root["testcase_signal"]\n        t_obj.testcase_time = root["testcase_time"]\n        t_obj.testcase_memory = root["testcase_memory"]\n        t_obj.data = root["data"]\n    except KeyError:\n        return 1\n\n    return 0\n\n\ndef write_result_json(r_obj):\n    root = {\n        "custom_result" : int(r_obj.result),\n        "custom_score"  : max((r_obj.score if (r_obj.score <= 1.0) else 1.0), 0),\n        "custom_message": r_obj.message if (len(r_obj.message) <= 4096) else r_obj.message[0:4095]\n    }\n\n    print(json.dumps(root))\n\n\nif __name__ ==  "__main__":\n    # Input parameters\n    t_obj = TestStruct()\n    # Result parameters\n    r_obj = ResultStruct()\n\n    if len(sys.argv) < 2:\n        write_result_json(r_obj)\n        sys.exit(1)\n\n    # Decode input JSON\n    failure = read_input_json(sys.argv[1], t_obj)\n    # Incase input JSON was malformed or not existent\n    if failure != 0:\n        r_obj.message = "Unable to read input json";\n        write_result_json(r_obj)\n        sys.exit(2)\n\n    #Run the custom checker evaluator\n    run_custom_checker(t_obj, r_obj)\n\n    # Encode result JSON\n    write_result_json(r_obj)\n    sys.exit(0)\n# End of TAIL\n        ',python3:'\n# Start of TAIL\nclass TestStruct:\n    def __init__(self):\n        self.testcase_id = 0\n        self.testcase_input_path = ""\n        self.testcase_output_path = ""\n        self.testcase_expected_output_path = ""\n        self.testcase_error_path = ""\n        self.metadata_file_paths = []\n        self.submission_code_path = ""\n        self.submission_language = ""\n        self.testcase_result = False\n        self.testcase_signal = 0\n        self.testcase_time = 0.0\n        self.testcase_memory = 0\n        self.data = ""\n\n\nclass ResultStruct:\n    def __init__(self):\n        self.result = False\n        self.score = 0.0\n        self.message = ""\n\n\ndef read_input_json(json_file_path, t_obj):\n    file_obj = open(json_file_path, "r")\n    json_file_contents = file_obj.read()\n\n    root = {}\n    try:\n        root = json.loads(json_file_contents)\n    except ValueError:\n        return 1\n\n    try:\n        # Read values\n        t_obj.testcase_id = root["testcase_id"]\n        t_obj.testcase_input_path = root["input_file_path"]\n        t_obj.testcase_output_path = root["output_file_path"]\n        t_obj.testcase_expected_output_path = root["expected_output_file_path"]\n        t_obj.testcase_error_path = root["error_file_path"]\n        t_obj.metadata_file_paths = root["metadata_file_paths"]\n        t_obj.submission_code_path = root["submission_code_path"]\n        t_obj.submission_language = root["submission_language"]\n        t_obj.testcase_result = root["testcase_result"]\n        t_obj.testcase_signal = root["testcase_signal"]\n        t_obj.testcase_time = root["testcase_time"]\n        t_obj.testcase_memory = root["testcase_memory"]\n        t_obj.data = root["data"]\n    except KeyError:\n        return 1\n\n    return 0\n\n\ndef write_result_json(r_obj):\n    root = {\n        "custom_result" : int(r_obj.result),\n        "custom_score"  : max((r_obj.score if (r_obj.score <= 1.0) else 1.0), 0),\n        "custom_message": r_obj.message if (len(r_obj.message) <= 4096) else r_obj.message[0:4095]\n    }\n\n    print(json.dumps(root))\n\n\nif __name__ ==  "__main__":\n    # Input parameters\n    t_obj = TestStruct()\n    # Result parameters\n    r_obj = ResultStruct()\n\n    if len(sys.argv) < 2:\n        write_result_json(r_obj)\n        sys.exit(1)\n\n    # Decode input JSON\n    failure = read_input_json(sys.argv[1], t_obj)\n    # Incase input JSON was malformed or not existent\n    if failure != 0:\n        r_obj.message = "Unable to read input json";\n        write_result_json(r_obj)\n        sys.exit(2)\n\n    #Run the custom checker evaluator\n    run_custom_checker(t_obj, r_obj)\n\n    # Encode result JSON\n    write_result_json(r_obj)\n    sys.exit(0)\n# End of TAIL\n        ',ruby:'\n# Start of TAIL\ndef read_input_json(json_file_path, t_obj)\n    file_contents = File.read(json_file_path)\n    json_obj = JSON.parse (file_contents)\n    begin\n        # Read values\n        t_obj.testcase_id = json_obj["testcase_id"]\n        t_obj.testcase_input_path = json_obj["input_file_path"]\n        t_obj.testcase_output_path = json_obj["output_file_path"]\n        t_obj.testcase_expected_output_path = json_obj["expected_output_file_path"]\n        t_obj.testcase_error_path = json_obj["error_file_path"]\n\n        metadata_file_path_node = json_obj["metadata_file_paths"]\n        if metadata_file_path_node\n            metadata_file_path_node.each do |metadata_file_path|\n                t_obj.metadata_file_paths << metadata_file_path\n            end\n        end\n\n        t_obj.submission_code_path = json_obj["submission_code_path"]\n        t_obj.submission_language = json_obj["submission_language"]\n        t_obj.testcase_result = json_obj["testcase_result"]\n        t_obj.testcase_signal = json_obj["testcase_signal"]\n        t_obj.testcase_time = json_obj["testcase_time"]\n        t_obj.testcase_memory = json_obj["testcase_memory"]\n        t_obj.data = json_obj["data"]\n    rescue => err\n        return true\n    end\n\n    return false\nend\n\ndef write_result_json(r_obj)\n    json_obj = {\n        custom_result: if r_obj.result then 1 else 0 end,\n        custom_score: if r_obj.score > 1 then 1 elsif r_obj.score < 0 then 0 else r_obj.score end,\n        custom_message: r_obj.message[0..4095]\n    }\n\n    puts json_obj.to_json\nend\n\n# Input parameters\nt_obj = TestStruct.new(\n    0,\n    "",\n    "",\n    "",\n    "",\n    [],\n    "",\n    "",\n    false,\n    0,\n    0.0,\n    0,\n    ""\n)\n\n# Out parameters\nr_obj = ResultStruct.new(\n    false,\n    0.0,\n    "Uninitialized"\n)\n\nif(ARGV.length < 1)\n    write_result_json(r_obj)\n    abort()\nend\n\n# Decode input JSON\nfailure = read_input_json(ARGV[0], t_obj)\n# Incase input JSON was malformed or not existent\nif failure\n    r_obj.message = "Unable to read input json";\n    write_result_json(r_obj);\n    abort()\nend\n\n# Run the custom checker evaluator\nrun_custom_checker(t_obj, r_obj);\n\n# Encode result JSON\nwrite_result_json(r_obj);\n\n# End of TAIL',scala:'\n    // Start of Tail\n    def write_result_json(r_obj: ResultStruct) {\n        val map = scala.collection.mutable.Map[String,Object](\n            "custom_result" -> new Integer(if (r_obj.result) 1 else 0),\n            "custom_score" -> new java.lang.Double(if (r_obj.score > 1.0f) 1.0f else if (r_obj.score < 0.0f) 0.0f else r_obj.score),\n            "custom_message" -> new String(if (r_obj.message.length > 4096) r_obj.message.substring(0, 4095) else r_obj.message)\n        )\n        val gson = new Gson();\n        var json = gson.toJson(map.asJava);\n        println(json)\n    }\n\n    def main(args: Array[String]) {\n        val r_obj = new ResultStruct()\n\n        if (args.length < 1) {\n            write_result_json(r_obj)\n            System.exit(1)\n        }\n\n        val json_file_path = args(0).toString()\n        var json_obj: JSONObject = null\n        var t_obj: TestStruct = null\n\n        try {\n            json_obj = new JSONParser().parse(new java.io.FileReader(json_file_path)).asInstanceOf[JSONObject]\n            t_obj = new TestStruct(json_obj)\n        } catch {\n            case _: Throwable => {\n                r_obj.message = "Unable to read input json"\n                write_result_json(r_obj)\n                System.exit(1)\n            }\n        }\n\n        run_custom_checker(t_obj, r_obj)\n        write_result_json(r_obj)\n    }\n}\n\nclass TestStruct(json_obj: JSONObject) {\n    val testcase_id = json_obj.get("testcase_id").asInstanceOf[Long]\n    val testcase_input_path = json_obj.get("input_file_path").asInstanceOf[String]\n    val testcase_output_path = json_obj.get("output_file_path").asInstanceOf[String]\n    val testcase_expected_output_path = json_obj.get("expected_output_file_path").asInstanceOf[String]\n    val testcase_error_path = json_obj.get("error_file_path").asInstanceOf[String]\n    val metadata_file_paths = if (json_obj.containsKey("metadata_file_paths") && json_obj.get("metadata_file_paths") != null) json_obj.get("metadata_file_paths").asInstanceOf[JSONArray].toArray().map(_.toString()) else Array[String]()\n    val submission_code_path = json_obj.get("submission_code_path").asInstanceOf[String]\n    val submission_language = json_obj.get("submission_language").asInstanceOf[String]\n    val testcase_result = json_obj.get("testcase_result").asInstanceOf[Boolean]\n    val testcase_signal = json_obj.get("testcase_signal").asInstanceOf[Long]\n    val testcase_time = json_obj.get("testcase_time")\n    val testcase_memory = json_obj.get("testcase_memory").asInstanceOf[Long]\n    val data = json_obj.get("data").asInstanceOf[String]\n}\n\nclass ResultStruct {\n    var result: Boolean = false\n    var score: Double = 0.0f\n    var message: String = "Uninitialized"\n}\n// End of Tail'}},countries_mapping={Afghanistan:"AF",Albania:"AL",Algeria:"DZ","American Samoa":"AS",Andorra:"AD",Angola:"AO",Anguilla:"AI",Antarctica:"AQ","Antigua and Barbuda":"AG",Argentina:"AR",Armenia:"AM",Aruba:"AW",Australia:"AU",Austria:"AT",Azerbaijan:"AZ",Bahamas:"BS",Bahrain:"BH",Bangladesh:"BD",Barbados:"BB",Belarus:"BY",Belgium:"BE",Belize:"BZ",Benin:"BJ",Bermuda:"BM",Bhutan:"BT",Bolivia:"BO","Bonaire, Sint Eustatius and Saba":"BQ","Bosnia and Herzegovina":"BA",Botswana:"BW","Bouvet Island":"BV",Brazil:"BR","British Indian Ocean Territory":"IO","Brunei Darussalam":"BN",Bulgaria:"BG","Burkina Faso":"BF",Burundi:"BI",Cambodia:"KH",Cameroon:"CM",Canada:"CA","Cabo Verde":"CV","Cayman Islands":"KY","Central African Republic":"CF",Chad:"TD",Chile:"CL",China:"CN","Christmas Island":"CX","Cocos (Keeling) Islands":"CC",Colombia:"CO",Comoros:"KM",Congo:"CG",Congo:"CD","Cook Islands":"CK","Costa Rica":"CR",Croatia:"HR",Cuba:"CU","Cura\xe7ao":"CW",Cyprus:"CY","Czech Republic":"CZ","C\xf4te d'Ivoire":"CI",Denmark:"DK",Djibouti:"DJ",Dominica:"DM","Dominican Republic":"DO",Ecuador:"EC",Egypt:"EG","El Salvador":"SV","Equatorial Guinea":"GQ",Eritrea:"ER",Estonia:"EE",Ethiopia:"ET","Falkland Islands (Malvinas)":"FK","Faroe Islands":"FO",Fiji:"FJ",Finland:"FI",France:"FR","French Guiana":"GF","French Polynesia":"PF","French Southern Territories":"TF",Gabon:"GA",Gambia:"GM",Georgia:"GE",Germany:"DE",Ghana:"GH",Gibraltar:"GI",Greece:"GR",Greenland:"GL",Grenada:"GD",Guadeloupe:"GP",Guam:"GU",Guatemala:"GT",Guernsey:"GG",Guinea:"GN","Guinea-Bissau":"GW",Guyana:"GY",Haiti:"HT","Heard Island and McDonald Islands":"HM","Holy See (Vatican City State)":"VA",Honduras:"HN","Hong Kong":"HK",Hungary:"HU",Iceland:"IS",India:"IN",Indonesia:"ID",Iran:"IR",Iraq:"IQ",Ireland:"IE","Isle of Man":"IM",Israel:"IL",Italy:"IT",Jamaica:"JM",Japan:"JP",
Jersey:"JE",Jordan:"JO",Kazakhstan:"KZ",Kenya:"KE",Kiribati:"KI",Kosovo:"xk","North Korea":"KP","South Korea":"KR",Kuwait:"KW",Kyrgyzstan:"KG","Lao People's Democratic Republic":"LA",Latvia:"LV",Lebanon:"LB",Lesotho:"LS",Liberia:"LR",Libya:"LY",Liechtenstein:"LI",Lithuania:"LT",Luxembourg:"LU",Macao:"MO",Macedonia:"MK",Madagascar:"MG",Malawi:"MW",Malaysia:"MY",Maldives:"MV",Mali:"ML",Malta:"MT","Marshall Islands":"MH",Martinique:"MQ",Mauritania:"MR",Mauritius:"MU",Mayotte:"YT",Mexico:"MX",Micronesia:"FM",Moldova:"MD",Monaco:"MC",Mongolia:"MN",Montenegro:"ME",Montserrat:"MS",Morocco:"MA",Mozambique:"MZ",Myanmar:"MM",Namibia:"NA",Nauru:"NR",Nepal:"NP",Netherlands:"NL","New Caledonia":"NC","New Zealand":"NZ",Nicaragua:"NI",Niger:"NE",Nigeria:"NG",Niue:"NU","Norfolk Island":"NF","Northern Mariana Islands":"MP",Norway:"NO",Oman:"OM",Pakistan:"PK",Palau:"PW","Palestine, State of":"PS",Panama:"PA","Papua New Guinea":"PG",Paraguay:"PY",Peru:"PE",Philippines:"PH",Pitcairn:"PN",Poland:"PL",Portugal:"PT","Puerto Rico":"PR",Qatar:"QA",Romania:"RO","Russian Federation":"RU",Rwanda:"RW","R\xe9union":"RE","Saint Barth\xe9lemy":"BL","Saint Helena, Ascension and Tristan da Cunha":"SH","Saint Kitts and Nevis":"KN","Saint Lucia":"LC","Saint Martin (French part)":"MF","Saint Pierre and Miquelon":"PM","Saint Vincent and the Grenadines":"VC",Samoa:"WS","San Marino":"SM","Sao Tome and Principe":"ST","Saudi Arabia":"SA",Senegal:"SN",Serbia:"RS",Seychelles:"SC","Sierra Leone":"SL",Singapore:"SG","Sint Maarten (Dutch part)":"SX",Slovakia:"SK",Slovenia:"SI","Solomon Islands":"SB",Somalia:"SO","South Africa":"ZA","South Georgia and the South Sandwich Islands":"GS","South Sudan":"SS",Spain:"ES","Sri Lanka":"LK",Sudan:"SD",Suriname:"SR","Svalbard and Jan Mayen":"SJ",Swaziland:"SZ",Sweden:"SE",Switzerland:"CH","Syrian Arab Republic":"SY",Taiwan:"TW",Tajikistan:"TJ",Tanzania:"TZ",Thailand:"TH","Timor-Leste":"TL",Togo:"TG",Tokelau:"TK",Tonga:"TO","Trinidad and Tobago":"TT",Tunisia:"TN",Turkey:"TR",Turkmenistan:"TM","Turks and Caicos Islands":"TC",Tuvalu:"TV",Uganda:"UG",Ukraine:"UA","United Arab Emirates":"AE","United Kingdom":"GB","United States":"US","United States Minor Outlying Islands":"UM",Uruguay:"UY",Uzbekistan:"UZ",Vanuatu:"VU",Venezuela:"VE",Vietnam:"VN","Virgin Islands, British":"VG","Virgin Islands, U.S.":"VI","Wallis and Futuna":"WF","Western Sahara":"EH",Yemen:"YE",Zambia:"ZM",Zimbabwe:"ZW","\xc5land Islands":"AX"};!function(root,pluralize){"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?module.exports=pluralize():"function"==typeof define&&define.amd?define(function(){return pluralize()}):root.pluralize=pluralize()}(this,function(){var pluralRules=[],singularRules=[],uncountables={},irregularPlurals={},irregularSingles={},toLowerCase=function(str){return str.toLowerCase()},toUpperCase=function(str){return str.toUpperCase()},toTitleCase=function(str){return toUpperCase(str[0])+toLowerCase(str.substr(1))},toWord=function(word){return String(word).trim()},toLowerWord=function(word){return toLowerCase(toWord(word))},sanitizeRule=function(rule){return"string"==typeof rule?new RegExp("^"+rule+"$"):rule},restoreCase=function(token){return token===token.toUpperCase()?toUpperCase:token[0]===token[0].toUpperCase()?toTitleCase:toLowerCase},sanitizeWord=function(word,collection){if(!word.length||uncountables[word])return word;for(var len=collection.length;len--;){var rule=collection[len];if(rule[0].test(word))return word.replace(rule[0],rule[1])}return word},replaceWord=function(replaceMap,keepMap,rules){return function(word){word=toWord(word);var token=toLowerCase(word),restore=restoreCase(word);return keepMap[token]?restore(token):replaceMap[token]?restore(replaceMap[token]):restore(sanitizeWord(token,rules))}},pluralize=function(word,count,inclusive){return(inclusive?count+" ":"")+(1===count?singular(word):plural(word))},plural=pluralize.plural=replaceWord(irregularSingles,irregularPlurals,pluralRules),singular=pluralize.singular=replaceWord(irregularPlurals,irregularSingles,singularRules);return pluralize.addPluralRule=function(rule,replacement){pluralRules.push([sanitizeRule(rule),replacement])},pluralize.addSingularRule=function(rule,replacement){singularRules.push([sanitizeRule(rule),replacement])},pluralize.addUncountableRule=function(word){if("string"==typeof word)return uncountables[toLowerWord(word)]=!0;pluralize.addPluralRule(word,"$&"),pluralize.addSingularRule(word,"$&")},pluralize.addIrregularRule=function(single,plural){plural=toLowerWord(plural),single=toLowerWord(single),irregularSingles[single]=plural,irregularPlurals[plural]=single},[["I","we"],["me","us"],["he","they"],["she","they"],["them","them"],["myself","ourselves"],["yourself","yourselves"],["itself","themselves"],["herself","themselves"],["himself","themselves"],["themself","themselves"],["this","these"],["that","those"],["volcano","volcanoes"],["tornado","tornadoes"],["torpedo","torpedoes"],["genus","genera"],["viscus","viscera"],["stigma","stigmata"],["stoma","stomata"],["dogma","dogmata"],["lemma","lemmata"],["schema","schemata"],["anathema","anathemata"],["ox","oxen"],["axe","axes"],["die","dice"],["yes","yeses"],["foot","feet"],["eave","eaves"],["beau","beaus"],["goose","geese"],["tooth","teeth"],["quiz","quizzes"],["human","humans"],["proof","proofs"],["carve","carves"],["valve","valves"],["thief","thieves"],["genie","genies"],["groove","grooves"],["pickaxe","pickaxes"],["whiskey","whiskies"]].forEach(function(rule){return pluralize.addIrregularRule(rule[0],rule[1])}),[[/s?$/,"s"],[/([^aeiou]ese)$/,"$1"],[/^(ax|test)is$/,"$1es"],[/(alias|[^aou]us|tlas|gas|ris)$/,"$1es"],[/(e[mn]u)s?$/,"$1s"],[/([^l]ias|[aeiou]las|[emjzr]as|[iu]am)$/,"$1"],[/(alumn|syllab|octop|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc)(?:us|i)$/,"$1i"],[/^(alumn|alg|vertebr)(?:a|ae)$/,"$1ae"],[/(her|at)o$/,"$1oes"],[/^(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|automat|quor)(?:a|um)$/,"$1a"],[/^(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|\w+hedr)(?:a|on)$/,"$1a"],[/sis$/,"ses"],[/(?:([^f])fe|(ar|l|[eo][ao])f)$/,"$1$2ves"],[/([^aeiouy]|qu)y$/,"$1ies"],[/([^ch][ieo][ln])ey$/,"$1ies"],[/(x|ch|ss|sh|zz)$/,"$1es"],[/(matr|cod|mur|sil|vert|ind)(?:ix|ex)$/,"$1ices"],[/^(m|l)(?:ice|ouse)$/,"$1ice"],[/(pe)(?:rson|ople)$/,"$1ople"],[/(child)(?:ren)?$/,"$1ren"],[/(eau)x?$/,"$1x"],[/m[ae]n$/,"men"]].forEach(function(rule){return pluralize.addPluralRule(rule[0],rule[1])}),[[/s$/,""],[/(ss)$/,"$1"],[/((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)(?:sis|ses)$/,"$1sis"],[/(^analy)(?:sis|ses)$/,"$1sis"],[/([^aeflor])ves$/,"$1fe"],[/(hive|tive|dr?ive)s$/,"$1"],[/(ar|(?:wo|[ae])l|[eo][ao])ves$/,"$1f"],[/([^aeiouy]|qu)ies$/,"$1y"],[/(^[pl]|zomb|^(?:neck)?t|[aeo][lt]|cut)ies$/,"$1ie"],[/([^c][eor]n|smil)ies$/,"$1ey"],[/^(m|l)ice$/,"$1ouse"],[/(x|ch|ss|sh|zz|tto|go|cho|alias|[^aou]us|tlas|gas|hero|ato|ris)(?:es)?$/,"$1"],[/(e[mn]u)s?$/,"$1"],[/(movie|twelve)s$/,"$1"],[/(cris|test|diagnos)(?:is|es)$/,"$1is"],[/(alumn|syllab|octop|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc)(?:us|i)$/,"$1us"],[/^(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|automat|quor)a$/,"$1um"],[/^(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|\w+hedr)a$/,"$1on"],[/^(alumn|alg|vertebr)ae$/,"$1a"],[/(cod|mur|sil|vert|ind)ices$/,"$1ex"],[/(matr)ices$/,"$1ix"],[/(pe)(rson|ople)$/,"$1rson"],[/(child)ren$/,"$1"],[/(eau)[sx]?$/,"$1"],[/men$/,"man"]].forEach(function(rule){return pluralize.addSingularRule(rule[0],rule[1])}),["advice","agenda","bison","bream","buffalo","carp","chassis","cod","cooperation","corps","digestion","debris","diabetes","energy","equipment","elk","excretion","expertise","flounder","gallows","graffiti","headquarters","health","herpes","highjinks","homework","information","jeans","justice","kudos","labour","machinery","mackerel","media","mews","moose","news","pike","plankton","pliers","pollution","premises","rain","rice","salmon","scissors","series","sewage","shambles","shrimp","species","staff","swine","trout","tuna","whiting","wildebeest",/pox$/,/ois$/,/deer$/,/fish$/,/sheep$/,/measles$/,/[^aeiou]ese$/].forEach(pluralize.addUncountableRule),pluralize}),$(function(){$.fn.bootstrapFileInput=function(){this.each(function(i,elem){var $elem=$(elem);if(void 0===$elem.attr("data-bfi-disabled")){var buttonWord="Browse";void 0!==$elem.attr("title")&&(buttonWord=$elem.attr("title"));var input=$("<div>").append($elem.eq(0).clone()).html(),className="";$elem.attr("class")&&(className=" "+$elem.attr("class")),$elem.replaceWith('<a class="file-input-wrapper btn'+className+'">'+buttonWord+input+"</a>")}}).promise().done(function(){$(".file-input-wrapper").mousemove(function(cursor){var input,wrapper,wrapperX,wrapperY,inputWidth,inputHeight,cursorX,cursorY;input=(wrapper=$(this)).find("input"),wrapperX=wrapper.offset().left,wrapperY=wrapper.offset().top,inputWidth=input.width(),inputHeight=input.height(),cursorX=cursor.pageX,cursorY=cursor.pageY,moveInputX=cursorX-wrapperX-inputWidth+20,moveInputY=cursorY-wrapperY-inputHeight/2,input.css({left:moveInputX,top:moveInputY})}),$(".file-input-wrapper input[type=file]").change(function(){var fileName;fileName=$(this).val(),$(this).parent().next(".file-input-name").remove(),fileName=$(this).prop("files")&&$(this).prop("files").length>1?$(this)[0].files.length+" files":fileName.substring(fileName.lastIndexOf("\\")+1,fileName.length),$(this).parent().after('<span class="file-input-name">'+fileName+"</span>")})})};var cssHtml="<style>.file-input-wrapper { overflow: hidden; position: relative; cursor: pointer; z-index: 1; }.file-input-wrapper input[type=file], .file-input-wrapper input[type=file]:focus, .file-input-wrapper input[type=file]:hover { position: absolute; top: 0; left: 0; cursor: pointer; opacity: 0; filter: alpha(opacity=0); z-index: 99; outline: 0; }.file-input-name { margin-left: 8px; }</style>";$("link[rel=stylesheet]").eq(0).before(cssHtml)}),function(C,n){"object"==typeof exports?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n(C)}(this,function(C){function n(a){this._targetElement=a,this._introItems=[],this._options={nextLabel:"Next &rarr;",prevLabel:"&larr; Back",skipLabel:"Skip",doneLabel:"Done",hidePrev:!1,hideNext:!1,tooltipPosition:"bottom",tooltipClass:"",highlightClass:"",exitOnEsc:!0,exitOnOverlayClick:!0,showStepNumbers:!0,keyboardNavigation:!0,showButtons:!0,showBullets:!0,showProgress:!1,scrollToElement:!0,overlayOpacity:.8,scrollPadding:30,positionPrecedence:["bottom","top","right","left"],disableInteraction:!1,hintPosition:"top-middle",hintButtonLabel:"Got it",hintAnimation:!0}}function V(a){var b=[],c=this;if(this._options.steps)for(var d=0,e=this._options.steps.length;d<e;d++){var f=y(this._options.steps[d]);if(f.step=b.length+1,"string"==typeof f.element&&(f.element=document.querySelector(f.element)),"undefined"==typeof f.element||null==f.element){var g=document.querySelector(".introjsFloatingElement");null==g&&((g=document.createElement("div")).className="introjsFloatingElement",document.body.appendChild(g)),f.element=g,f.position="floating"}null!=f.element&&b.push(f)}else{if(1>(e=a.querySelectorAll("*[data-intro]")).length)return!1;for(d=0,f=e.length;d<f;d++)if("none"!=(g=e[d]).style.display){var k=parseInt(g.getAttribute("data-step"),10);0<k&&(b[k-1]={element:g,intro:g.getAttribute("data-intro"),step:parseInt(g.getAttribute("data-step"),10),tooltipClass:g.getAttribute("data-tooltipClass"),highlightClass:g.getAttribute("data-highlightClass"),position:g.getAttribute("data-position")||this._options.tooltipPosition})}for(d=k=0,f=e.length;d<f;d++)if(null==(g=e[d]).getAttribute("data-step")){for(;"undefined"!=typeof b[k];)k++;b[k]={element:g,intro:g.getAttribute("data-intro"),step:k+1,tooltipClass:g.getAttribute("data-tooltipClass"),highlightClass:g.getAttribute("data-highlightClass"),position:g.getAttribute("data-position")||this._options.tooltipPosition}}}for(d=[],e=0;e<b.length;e++)b[e]&&d.push(b[e]);return(b=d).sort(function(a,b){return a.step-b.step}),c._introItems=b,W.call(c,a)&&(x.call(c),a.querySelector(".introjs-skipbutton"),a.querySelector(".introjs-nextbutton"),c._onKeyDown=function(b){if(27===b.keyCode&&1==c._options.exitOnEsc)z.call(c,a);else if(37===b.keyCode)E.call(c);else if(39===b.keyCode)x.call(c);else if(13===b.keyCode){var d=b.target||b.srcElement;d&&0<d.className.indexOf("introjs-prevbutton")?E.call(c):d&&0<d.className.indexOf("introjs-skipbutton")?(c._introItems.length-1==c._currentStep&&"function"==typeof c._introCompleteCallback&&c._introCompleteCallback.call(c),z.call(c,a)):x.call(c),b.preventDefault?b.preventDefault():b.returnValue=!1}},c._onResize=function(){t.call(c,document.querySelector(".introjs-helperLayer")),t.call(c,document.querySelector(".introjs-tooltipReferenceLayer"))},window.addEventListener?(this._options.keyboardNavigation&&window.addEventListener("keydown",c._onKeyDown,!0),window.addEventListener("resize",c._onResize,!0)):document.attachEvent&&(this._options.keyboardNavigation&&document.attachEvent("onkeydown",c._onKeyDown),document.attachEvent("onresize",c._onResize))),!1}function y(a){if(null==a||"object"!=typeof a||"undefined"!=typeof a.nodeType)return a;var c,b={};for(c in a)b[c]="undefined"!=typeof jQuery&&a[c]instanceof jQuery?a[c]:y(a[c]);return b}function x(){if(this._direction="forward","undefined"!=typeof this._currentStepNumber)for(var a=0,b=this._introItems.length;a<b;a++)this._introItems[a].step===this._currentStepNumber&&(this._currentStep=a-1,this._currentStepNumber=void 0);"undefined"==typeof this._currentStep?this._currentStep=0:++this._currentStep,this._introItems.length<=this._currentStep?("function"==typeof this._introCompleteCallback&&this._introCompleteCallback.call(this),z.call(this,this._targetElement)):(a=this._introItems[this._currentStep],"undefined"!=typeof this._introBeforeChangeCallback&&this._introBeforeChangeCallback.call(this,a.element),N.call(this,a))}function E(){if(this._direction="backward",0===this._currentStep)return!1;var a=this._introItems[--this._currentStep];"undefined"!=typeof this._introBeforeChangeCallback&&this._introBeforeChangeCallback.call(this,a.element),N.call(this,a)}function z(a){var b=a.querySelectorAll(".introjs-overlay");if(b&&0<b.length)for(var c=b.length-1;0<=c;c--){var d=b[c];d.style.opacity=0,setTimeout(function(){this.parentNode&&this.parentNode.removeChild(this)}.bind(d),500)}if((c=a.querySelector(".introjs-helperLayer"))&&c.parentNode.removeChild(c),(c=a.querySelector(".introjs-tooltipReferenceLayer"))&&c.parentNode.removeChild(c),(a=a.querySelector(".introjs-disableInteraction"))&&a.parentNode.removeChild(a),(a=document.querySelector(".introjsFloatingElement"))&&a.parentNode.removeChild(a),O(),(a=document.querySelectorAll(".introjs-fixParent"))&&0<a.length)for(c=a.length-1;0<=c;c--)a[c].className=a[c].className.replace(/introjs-fixParent/g,"").replace(/^\s+|\s+$/g,"");window.removeEventListener?window.removeEventListener("keydown",this._onKeyDown,!0):document.detachEvent&&document.detachEvent("onkeydown",this._onKeyDown),null!=this._introExitCallback&&this._introExitCallback.call(self),this._currentStep=void 0}function F(a,b,c,d,e){var g,k,f="";if(e=e||!1,b.style.top=null,b.style.right=null,b.style.bottom=null,b.style.left=null,b.style.marginLeft=null,b.style.marginTop=null,c.style.display="inherit",void 0!==d&&null!=d&&(d.style.top=null,d.style.left=null),this._introItems[this._currentStep]){if(f="string"==typeof(f=this._introItems[this._currentStep]).tooltipClass?f.tooltipClass:this._options.tooltipClass,b.className=("introjs-tooltip "+f).replace(/^\s+|\s+$/g,""),("auto"==(k=this._introItems[this._currentStep].position)||"auto"==this._options.tooltipPosition)&&"floating"!=k){f=k,g=this._options.positionPrecedence.slice(),k=G();var w=u(b).height+10,m=u(b).width+20,h=u(a),l="floating";h.left+m>k.width||0>h.left+h.width/2-m?(s(g,"bottom"),s(g,"top")):(h.height+h.top+w>k.height&&s(g,"bottom"),0>h.top-w&&s(g,"top")),h.width+h.left+m>k.width&&s(g,"right"),0>h.left-m&&s(g,"left"),0<g.length&&(l=g[0]),f&&"auto"!=f&&-1<g.indexOf(f)&&(l=f),k=l}switch(f=u(a),a=u(b),g=G(),k){case"top":c.className="introjs-arrow bottom",H(f,e?0:15,a,g,b),b.style.bottom=f.height+20+"px";break;case"right":b.style.left=f.width+20+"px",f.top+a.height>g.height?(c.className="introjs-arrow left-bottom",b.style.top="-"+(a.height-f.height-20)+"px"):c.className="introjs-arrow left";break;case"left":e||1!=this._options.showStepNumbers||(b.style.top="15px"),f.top+a.height>g.height?(b.style.top="-"+(a.height-f.height-20)+"px",c.className="introjs-arrow right-bottom"):c.className="introjs-arrow right",b.style.right=f.width+20+"px";break;case"floating":c.style.display="none",b.style.left="50%",b.style.top="50%",b.style.marginLeft="-"+a.width/2+"px",b.style.marginTop="-"+a.height/2+"px",void 0!==d&&null!=d&&(d.style.left="-"+(a.width/2+18)+"px",d.style.top="-"+(a.height/2+18)+"px");break;case"bottom-right-aligned":c.className="introjs-arrow top-right",P(f,0,a,b),b.style.top=f.height+20+"px";break;case"bottom-middle-aligned":c.className="introjs-arrow top-middle",c=f.width/2-a.width/2,e&&(c+=5),P(f,c,a,b)&&(b.style.right=null,H(f,c,a,g,b)),b.style.top=f.height+20+"px";break;default:c.className="introjs-arrow top",H(f,0,a,g,b),b.style.top=f.height+20+"px"}}}function H(a,b,c,d,e){return a.left+b+c.width>d.width?(e.style.left=d.width-c.width-a.left+"px",!1):(e.style.left=b+"px",!0)}function P(a,b,c,d){return 0>a.left+a.width-b-c.width?(d.style.left=-a.left+"px",!1):(d.style.right=b+"px",!0)}function s(a,b){-1<a.indexOf(b)&&a.splice(a.indexOf(b),1)}function t(a){if(a&&this._introItems[this._currentStep]){var b=this._introItems[this._currentStep],c=u(b.element),d=10;I(b.element)?a.className+=" introjs-fixedTooltip":a.className=a.className.replace(" introjs-fixedTooltip",""),"floating"==b.position&&(d=0),a.setAttribute("style","width: "+(c.width+d)+"px; height:"+(c.height+d)+"px; top:"+(c.top-5)+"px;left: "+(c.left-5)+"px;")}}function X(){var a=document.querySelector(".introjs-disableInteraction");null===a&&((a=document.createElement("div")).className="introjs-disableInteraction",this._targetElement.appendChild(a)),t.call(this,a)}function D(a){a.setAttribute("role","button"),a.tabIndex=0}function N(a){"undefined"!=typeof this._introChangeCallback&&this._introChangeCallback.call(this,a.element);var b=this,c=document.querySelector(".introjs-helperLayer"),d=document.querySelector(".introjs-tooltipReferenceLayer"),e="introjs-helperLayer";if(u(a.element),"string"==typeof a.highlightClass&&(e+=" "+a.highlightClass),"string"==typeof this._options.highlightClass&&(e+=" "+this._options.highlightClass),null!=c){var f=d.querySelector(".introjs-helperNumberLayer"),g=d.querySelector(".introjs-tooltiptext"),k=d.querySelector(".introjs-arrow"),w=d.querySelector(".introjs-tooltip"),m=d.querySelector(".introjs-skipbutton"),h=d.querySelector(".introjs-prevbutton"),l=d.querySelector(".introjs-nextbutton");if(c.className=e,w.style.opacity=0,w.style.display="none",null!=f){var p=this._introItems[0<=a.step-2?a.step-2:0];(null!=p&&"forward"==this._direction&&"floating"==p.position||"backward"==this._direction&&"floating"==a.position)&&(f.style.opacity=0)}if(t.call(b,c),t.call(b,d),(p=document.querySelectorAll(".introjs-fixParent"))&&0<p.length)for(e=p.length-1;0<=e;e--)p[e].className=p[e].className.replace(/introjs-fixParent/g,"").replace(/^\s+|\s+$/g,"");O(),b._lastShowElementTimer&&clearTimeout(b._lastShowElementTimer),b._lastShowElementTimer=setTimeout(function(){null!=f&&(f.innerHTML=a.step),g.innerHTML=a.intro,w.style.display="block",F.call(b,a.element,w,k,f),b._options.showBullets&&(d.querySelector(".introjs-bullets li > a.active").className="",d.querySelector('.introjs-bullets li > a[data-stepnumber="'+a.step+'"]').className="active"),d.querySelector(".introjs-progress .introjs-progressbar").setAttribute("style","width:"+Q.call(b)+"%;"),w.style.opacity=1,f&&(f.style.opacity=1),-1===l.tabIndex?m.focus():l.focus()},350)}else{var n=document.createElement("div"),q=(h=document.createElement("div"),c=document.createElement("div"),document.createElement("div")),r=document.createElement("div"),s=document.createElement("div"),v=document.createElement("div"),A=document.createElement("div");n.className=e,h.className="introjs-tooltipReferenceLayer",t.call(b,n),t.call(b,h),this._targetElement.appendChild(n),this._targetElement.appendChild(h),c.className="introjs-arrow",r.className="introjs-tooltiptext",r.innerHTML=a.intro,s.className="introjs-bullets",!1===this._options.showBullets&&(s.style.display="none");n=document.createElement("ul"),e=0;for(var C=this._introItems.length;e<C;e++){var y=document.createElement("li"),B=document.createElement("a");B.onclick=function(){b.goToStep(this.getAttribute("data-stepnumber"))},e===a.step-1&&(B.className="active"),D(B),B.innerHTML="&nbsp;",B.setAttribute("data-stepnumber",this._introItems[e].step),y.appendChild(B),n.appendChild(y)}s.appendChild(n),v.className="introjs-progress",!1===this._options.showProgress&&(v.style.display="none"),(e=document.createElement("div")).className="introjs-progressbar",e.setAttribute("style","width:"+Q.call(this)+"%;"),v.appendChild(e),A.className="introjs-tooltipbuttons",!1===this._options.showButtons&&(A.style.display="none"),q.className="introjs-tooltip",q.appendChild(r),q.appendChild(s),q.appendChild(v),1==this._options.showStepNumbers&&((p=document.createElement("span")).className="introjs-helperNumberLayer",p.innerHTML=a.step,h.appendChild(p)),q.appendChild(c),h.appendChild(q),(l=document.createElement("a")).onclick=function(){b._introItems.length-1!=b._currentStep&&x.call(b)},D(l),l.innerHTML=this._options.nextLabel,(h=document.createElement("a")).onclick=function(){0!=b._currentStep&&E.call(b)},D(h),h.innerHTML=this._options.prevLabel,(m=document.createElement("a")).className="introjs-button introjs-skipbutton",D(m),m.innerHTML=this._options.skipLabel,m.onclick=function(){b._introItems.length-1==b._currentStep&&"function"==typeof b._introCompleteCallback&&b._introCompleteCallback.call(b),z.call(b,b._targetElement)},A.appendChild(m),1<this._introItems.length&&(A.appendChild(h),A.appendChild(l)),q.appendChild(A),F.call(b,a.element,q,c,p)}!0===this._options.disableInteraction&&X.call(b),h.removeAttribute("tabIndex"),l.removeAttribute("tabIndex"),0==this._currentStep&&1<this._introItems.length?(m.className="introjs-button introjs-skipbutton",l.className="introjs-button introjs-nextbutton",1==this._options.hidePrev?(h.className="introjs-button introjs-prevbutton introjs-hidden",l.className+=" introjs-fullbutton"):h.className="introjs-button introjs-prevbutton introjs-disabled",h.tabIndex="-1",m.innerHTML=this._options.skipLabel):this._introItems.length-1==this._currentStep||1==this._introItems.length?(m.innerHTML=this._options.doneLabel,m.className+=" introjs-donebutton",h.className="introjs-button introjs-prevbutton",1==this._options.hideNext?(l.className="introjs-button introjs-nextbutton introjs-hidden",h.className+=" introjs-fullbutton"):l.className="introjs-button introjs-nextbutton introjs-disabled",l.tabIndex="-1"):(m.className="introjs-button introjs-skipbutton",h.className="introjs-button introjs-prevbutton",l.className="introjs-button introjs-nextbutton",m.innerHTML=this._options.skipLabel),l.focus(),Y(a),Z(a.element)||!0!==this._options.scrollToElement||(q=a.element.getBoundingClientRect(),p=G().height,c=q.bottom-(q.bottom-q.top),q=q.bottom-p,0>c||a.element.clientHeight>p?window.scrollBy(0,c-this._options.scrollPadding):window.scrollBy(0,q+70+this._options.scrollPadding)),"undefined"!=typeof this._introAfterChangeCallback&&this._introAfterChangeCallback.call(this,a.element)}function O(){for(var a=document.querySelectorAll(".introjs-showElement"),b=0,c=a.length;b<c;b++){var d=a[b],e=/introjs-[a-zA-Z]+/g;if(d instanceof SVGElement){var f=d.getAttribute("class")||"";d.setAttribute("class",f.replace(e,"").replace(/^\s+|\s+$/g,""))}else d.className=d.className.replace(e,"").replace(/^\s+|\s+$/g,"")}}function Y(a){if(a.element instanceof SVGElement)for(var b=a.element.parentNode;null!=a.element.parentNode&&b.tagName&&"body"!==b.tagName.toLowerCase();)"svg"===b.tagName.toLowerCase()&&J(b,"introjs-showElement introjs-relativePosition"),b=b.parentNode;for(J(a.element,"introjs-showElement"),"absolute"!==(b=r(a.element,"position"))&&"relative"!==b&&"fixed"!==b&&J(a.element,"introjs-relativePosition"),b=a.element.parentNode;null!=b&&b.tagName&&"body"!==b.tagName.toLowerCase();){a=r(b,"z-index");var c=parseFloat(r(b,"opacity")),d=r(b,"transform")||r(b,"-webkit-transform")||r(b,"-moz-transform")||r(b,"-ms-transform")||r(b,"-o-transform");(/[0-9]+/.test(a)||1>c||"none"!==d&&void 0!==d)&&(b.className+=" introjs-fixParent"),b=b.parentNode}}function J(a,b){if(a instanceof SVGElement){var c=a.getAttribute("class")||"";a.setAttribute("class",c+" "+b)}else a.className+=" "+b}function r(a,b){var c="";return a.currentStyle?c=a.currentStyle[b]:document.defaultView&&document.defaultView.getComputedStyle&&(c=document.defaultView.getComputedStyle(a,null).getPropertyValue(b)),c&&c.toLowerCase?c.toLowerCase():c}function I(a){var b=a.parentNode;return!(!b||"HTML"===b.nodeName)&&("fixed"==r(a,"position")||I(b))}function G(){if(null!=window.innerWidth)return{width:window.innerWidth,height:window.innerHeight};var a=document.documentElement;return{width:a.clientWidth,height:a.clientHeight}}function Z(a){return 0<=(a=a.getBoundingClientRect()).top&&0<=a.left&&a.bottom+80<=window.innerHeight&&a.right<=window.innerWidth}function W(a){var b=document.createElement("div"),c="",d=this;if(b.className="introjs-overlay",a.tagName&&"body"!==a.tagName.toLowerCase()){var e=u(a);e&&(c+="width: "+e.width+"px; height:"+e.height+"px; top:"+e.top+"px;left: "+e.left+"px;",b.setAttribute("style",c))}else c+="top: 0;bottom: 0; left: 0;right: 0;position: fixed;",b.setAttribute("style",c);return a.appendChild(b),b.onclick=function(){1==d._options.exitOnOverlayClick&&z.call(d,a)},setTimeout(function(){c+="opacity: "+d._options.overlayOpacity.toString()+";",b.setAttribute("style",c)},10),!0}function v(){var a=this._targetElement.querySelector(".introjs-hintReference");if(a){var b=a.getAttribute("data-step");return a.parentNode.removeChild(a),b}}function R(a){if(this._introItems=[],this._options.hints){a=0;for(var b=this._options.hints.length;a<b;a++){var c=y(this._options.hints[a]);"string"==typeof c.element&&(c.element=document.querySelector(c.element)),c.hintPosition=c.hintPosition||this._options.hintPosition,c.hintAnimation=c.hintAnimation||this._options.hintAnimation,null!=c.element&&this._introItems.push(c)}}else{if(1>(c=a.querySelectorAll("*[data-hint]")).length)return!1;for(a=0,b=c.length;a<b;a++){var d=c[a],e=(e=d.getAttribute("data-hintAnimation"))?"true"==e:this._options.hintAnimation;this._introItems.push({element:d,hint:d.getAttribute("data-hint"),hintPosition:d.getAttribute("data-hintPosition")||this._options.hintPosition,hintAnimation:e,tooltipClass:d.getAttribute("data-tooltipClass"),position:d.getAttribute("data-position")||this._options.tooltipPosition})}}$.call(this),document.addEventListener?(document.addEventListener("click",v.bind(this),!1),window.addEventListener("resize",K.bind(this),!0)):document.attachEvent&&(document.attachEvent("onclick",v.bind(this)),document.attachEvent("onresize",K.bind(this)))}function K(){for(var a=0,b=this._introItems.length;a<b;a++){var c=this._introItems[a];"undefined"!=typeof c.targetElement&&S.call(this,c.hintPosition,c.element,c.targetElement)}}function L(a){v.call(this);var b=this._targetElement.querySelector('.introjs-hint[data-step="'+a+'"]');b&&(b.className+=" introjs-hidehint"),"undefined"!=typeof this._hintCloseCallback&&this._hintCloseCallback.call(this,a)}function T(a){(a=this._targetElement.querySelector('.introjs-hint[data-step="'+a+'"]'))&&(a.className=a.className.replace(/introjs\-hidehint/g,""))}function U(a){(a=this._targetElement.querySelector('.introjs-hint[data-step="'+a+'"]'))&&a.parentNode.removeChild(a)}function $(){var a=this,b=document.querySelector(".introjs-hints");null==b&&((b=document.createElement("div")).className="introjs-hints");for(var c=0,d=this._introItems.length;c<d;c++){var e=this._introItems[c];if(!document.querySelector('.introjs-hint[data-step="'+c+'"]')){var f=document.createElement("a");D(f),function(b,c,d){b.onclick=function(e){(e=e||window.event).stopPropagation&&e.stopPropagation(),null!=e.cancelBubble&&(e.cancelBubble=!0),aa.call(a,b,c,d)}}(f,e,c),f.className="introjs-hint",e.hintAnimation||(f.className+=" introjs-hint-no-anim"),I(e.element)&&(f.className+=" introjs-fixedhint");var g=document.createElement("div");g.className="introjs-hint-dot";var k=document.createElement("div");k.className="introjs-hint-pulse",f.appendChild(g),f.appendChild(k),f.setAttribute("data-step",c),e.targetElement=e.element,e.element=f,S.call(this,e.hintPosition,f,e.targetElement),b.appendChild(f)}}document.body.appendChild(b),"undefined"!=typeof this._hintsAddedCallback&&this._hintsAddedCallback.call(this)}function S(a,b,c){switch(c=u.call(this,c),a){default:case"top-left":b.style.left=c.left+"px",b.style.top=c.top+"px";break;case"top-right":b.style.left=c.left+c.width-20+"px",b.style.top=c.top+"px";break;case"bottom-left":b.style.left=c.left+"px",b.style.top=c.top+c.height-20+"px";break;case"bottom-right":b.style.left=c.left+c.width-20+"px",b.style.top=c.top+c.height-20+"px";break;case"middle-left":b.style.left=c.left+"px",b.style.top=c.top+(c.height-20)/2+"px";break;case"middle-right":b.style.left=c.left+c.width-20+"px",b.style.top=c.top+(c.height-20)/2+"px";break;case"middle-middle":b.style.left=c.left+(c.width-20)/2+"px",b.style.top=c.top+(c.height-20)/2+"px";break;case"bottom-middle":b.style.left=c.left+(c.width-20)/2+"px",b.style.top=c.top+c.height-20+"px";break;case"top-middle":b.style.left=c.left+(c.width-20)/2+"px",b.style.top=c.top+"px"}}function aa(a,b,c){"undefined"!=typeof this._hintClickCallback&&this._hintClickCallback.call(this,a,b,c);var d=v.call(this);if(parseInt(d,10)!=c){d=document.createElement("div");var e=document.createElement("div"),f=document.createElement("div"),g=document.createElement("div");d.className="introjs-tooltip",d.onclick=function(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0},e.className="introjs-tooltiptext";var k=document.createElement("p");k.innerHTML=b.hint,(b=document.createElement("a")).className="introjs-button",b.innerHTML=this._options.hintButtonLabel,b.onclick=L.bind(this,c),e.appendChild(k),e.appendChild(b),f.className="introjs-arrow",d.appendChild(f),d.appendChild(e),this._currentStep=a.getAttribute("data-step"),g.className="introjs-tooltipReferenceLayer introjs-hintReference",g.setAttribute("data-step",a.getAttribute("data-step")),t.call(this,g),g.appendChild(d),document.body.appendChild(g),F.call(this,a,d,f,null,!0)}}function u(a){var b={},c=document.body,d=document.documentElement,e=window.pageYOffset||d.scrollTop||c.scrollTop;c=window.pageXOffset||d.scrollLeft||c.scrollLeft;if(a instanceof SVGElement)a=a.getBoundingClientRect(),b.top=a.top+e,b.width=a.width,b.height=a.height,b.left=a.left+c;else{for(b.width=a.offsetWidth,b.height=a.offsetHeight,c=e=0;a&&!isNaN(a.offsetLeft)&&!isNaN(a.offsetTop);)e+=a.offsetLeft,c+=a.offsetTop,a=a.offsetParent;b.top=c,b.left=e}return b}function Q(){return parseInt(this._currentStep+1,10)/this._introItems.length*100}var M=function(a){if("object"==typeof a)return new n(a);if("string"==typeof a){if(a=document.querySelector(a))return new n(a);throw Error("There is no element with given selector.")}return new n(document.body)};return M.version="2.5.0",M.fn=n.prototype={clone:function(){return new n(this)},setOption:function(a,b){return this._options[a]=b,this},setOptions:function(a){var d,b=this._options,c={};for(d in b)c[d]=b[d];for(d in a)c[d]=a[d];return this._options=c,this},start:function(){return V.call(this,this._targetElement),this},goToStep:function(a){return this._currentStep=a-2,"undefined"!=typeof this._introItems&&x.call(this),this},addStep:function(a){return this._options.steps||(this._options.steps=[]),this._options.steps.push(a),this},addSteps:function(a){if(a.length){for(var b=0;b<a.length;b++)this.addStep(a[b]);return this}},goToStepNumber:function(a){return this._currentStepNumber=a,"undefined"!=typeof this._introItems&&x.call(this),this},nextStep:function(){return x.call(this),this},previousStep:function(){return E.call(this),this},exit:function(){return z.call(this,this._targetElement),this},refresh:function(){return t.call(this,document.querySelector(".introjs-helperLayer")),
t.call(this,document.querySelector(".introjs-tooltipReferenceLayer")),K.call(this),this},onbeforechange:function(a){if("function"!=typeof a)throw Error("Provided callback for onbeforechange was not a function");return this._introBeforeChangeCallback=a,this},onchange:function(a){if("function"!=typeof a)throw Error("Provided callback for onchange was not a function.");return this._introChangeCallback=a,this},onafterchange:function(a){if("function"!=typeof a)throw Error("Provided callback for onafterchange was not a function");return this._introAfterChangeCallback=a,this},oncomplete:function(a){if("function"!=typeof a)throw Error("Provided callback for oncomplete was not a function.");return this._introCompleteCallback=a,this},onhintsadded:function(a){if("function"!=typeof a)throw Error("Provided callback for onhintsadded was not a function.");return this._hintsAddedCallback=a,this},onhintclick:function(a){if("function"!=typeof a)throw Error("Provided callback for onhintclick was not a function.");return this._hintClickCallback=a,this},onhintclose:function(a){if("function"!=typeof a)throw Error("Provided callback for onhintclose was not a function.");return this._hintCloseCallback=a,this},onexit:function(a){if("function"!=typeof a)throw Error("Provided callback for onexit was not a function.");return this._introExitCallback=a,this},addHints:function(){return R.call(this,this._targetElement),this},hideHint:function(a){return L.call(this,a),this},hideHints:function(){var a=this._targetElement.querySelectorAll(".introjs-hint");if(a&&0<a.length)for(var b=0;b<a.length;b++)L.call(this,a[b].getAttribute("data-step"));return this},showHint:function(a){return T.call(this,a),this},showHints:function(){var a=this._targetElement.querySelectorAll(".introjs-hint");if(a&&0<a.length)for(var b=0;b<a.length;b++)T.call(this,a[b].getAttribute("data-step"));else R.call(this,this._targetElement);return this},removeHints:function(){var a=this._targetElement.querySelectorAll(".introjs-hint");if(a&&0<a.length)for(var b=0;b<a.length;b++)U.call(this,a[b].getAttribute("data-step"));return this},removeHint:function(a){return U.call(this,a),this}},C.introJs=M}),
// Copyright (c) 2012 - 2017 Joseph Huckaby
function(window){function FlashError(){var temp=Error.apply(this,arguments);temp.name=this.name="FlashError",this.stack=temp.stack,this.message=temp.message}function WebcamError(){var temp=Error.apply(this,arguments);temp.name=this.name="WebcamError",this.stack=temp.stack,this.message=temp.message}var _userMedia,IntermediateInheritor=function(){};IntermediateInheritor.prototype=Error.prototype,FlashError.prototype=new IntermediateInheritor,WebcamError.prototype=new IntermediateInheritor;var Webcam={version:"1.0.25",protocol:location.protocol.match(/https/i)?"https":"http",loaded:!1,live:!1,userMedia:!0,iOS:/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,params:{width:0,height:0,dest_width:0,dest_height:0,image_format:"jpeg",jpeg_quality:90,enable_flash:!0,force_flash:!1,flip_horiz:!1,fps:30,upload_name:"webcam",constraints:null,swfURL:"",flashNotDetectedText:"ERROR: No Adobe Flash Player detected.  Webcam.js relies on Flash for browsers that do not support getUserMedia (like yours).",noInterfaceFoundText:"No supported webcam interface found.",unfreeze_snap:!0,iosPlaceholderText:"Click here to open camera.",user_callback:null,user_canvas:null},errors:{FlashError:FlashError,WebcamError:WebcamError},hooks:{},init:function(){var self=this;this.mediaDevices=navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices:navigator.mozGetUserMedia||navigator.webkitGetUserMedia?{getUserMedia:function(c){return new Promise(function(y,n){(navigator.mozGetUserMedia||navigator.webkitGetUserMedia).call(navigator,c,y,n)})}}:null,window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,this.userMedia=this.userMedia&&!!this.mediaDevices&&!!window.URL,this.iOS&&(this.userMedia=null),navigator.userAgent.match(/Firefox\D+(\d+)/)&&parseInt(RegExp.$1,10)<21&&(this.userMedia=null),this.userMedia&&window.addEventListener("beforeunload",function(){self.reset()})},exifOrientation:function(binFile){var dataView=new DataView(binFile);if(255!=dataView.getUint8(0)||216!=dataView.getUint8(1))return console.log("Not a valid JPEG file"),0;for(var offset=2;offset<binFile.byteLength;){if(255!=dataView.getUint8(offset))return console.log("Not a valid marker at offset "+offset+", found: "+dataView.getUint8(offset)),0;if(225==dataView.getUint8(offset+1)){offset+=4;var str="";for(n=0;n<4;n++)str+=String.fromCharCode(dataView.getUint8(offset+n));if("Exif"!=str)return console.log("Not valid EXIF data found"),0;offset+=6;var bigEnd=null;if(18761==dataView.getUint16(offset))bigEnd=!1;else{if(19789!=dataView.getUint16(offset))return console.log("Not valid TIFF data! (no 0x4949 or 0x4D4D)"),0;bigEnd=!0}if(42!=dataView.getUint16(offset+2,!bigEnd))return console.log("Not valid TIFF data! (no 0x002A)"),0;var firstIFDOffset=dataView.getUint32(offset+4,!bigEnd);if(firstIFDOffset<8)return console.log("Not valid TIFF data! (First offset less than 8)",dataView.getUint32(offset+4,!bigEnd)),0;for(var dataStart=offset+firstIFDOffset,entries=dataView.getUint16(dataStart,!bigEnd),i=0;i<entries;i++){var entryOffset=dataStart+12*i+2;if(274==dataView.getUint16(entryOffset,!bigEnd)){var valueType=dataView.getUint16(entryOffset+2,!bigEnd),numValues=dataView.getUint32(entryOffset+4,!bigEnd);if(3!=valueType&&1!=numValues)return console.log("Invalid EXIF orientation value type ("+valueType+") or count ("+numValues+")"),0;var value=dataView.getUint16(entryOffset+8,!bigEnd);return value<1||value>8?(console.log("Invalid EXIF orientation value ("+value+")"),0):value}}}else offset+=2+dataView.getUint16(offset+2)}return 0},fixOrientation:function(origObjURL,orientation,targetImg){var img=new Image;img.addEventListener("load",function(){var canvas=document.createElement("canvas"),ctx=canvas.getContext("2d");switch(orientation<5?(canvas.width=img.width,canvas.height=img.height):(canvas.width=img.height,canvas.height=img.width),orientation){case 2:ctx.transform(-1,0,0,1,img.width,0);break;case 3:ctx.transform(-1,0,0,-1,img.width,img.height);break;case 4:ctx.transform(1,0,0,-1,0,img.height);break;case 5:ctx.transform(0,1,1,0,0,0);break;case 6:ctx.transform(0,1,-1,0,img.height,0);break;case 7:ctx.transform(0,-1,-1,0,img.height,img.width);break;case 8:ctx.transform(0,-1,1,0,0,img.width)}ctx.drawImage(img,0,0),targetImg.src=canvas.toDataURL()},!1),img.src=origObjURL},attach:function(elem){if("string"==typeof elem&&(elem=document.getElementById(elem)||document.querySelector(elem)),!elem)return this.dispatch("error",new WebcamError("Could not locate DOM element to attach to."));this.container=elem,elem.innerHTML="";var peg=document.createElement("div");if(elem.appendChild(peg),this.peg=peg,this.params.width||(this.params.width=elem.offsetWidth),this.params.height||(this.params.height=elem.offsetHeight),!this.params.width||!this.params.height)return this.dispatch("error",new WebcamError("No width and/or height for webcam.  Please call set() first, or attach to a visible element."));this.params.dest_width||(this.params.dest_width=this.params.width),this.params.dest_height||(this.params.dest_height=this.params.height),this.userMedia=_userMedia===undefined?this.userMedia:_userMedia,this.params.force_flash&&(_userMedia=this.userMedia,this.userMedia=null),"number"!=typeof this.params.fps&&(this.params.fps=30);var scaleX=this.params.width/this.params.dest_width,scaleY=this.params.height/this.params.dest_height;if(this.userMedia){var video=document.createElement("video");video.setAttribute("autoplay","autoplay"),video.style.width=this.params.dest_width+"px",video.style.height=this.params.dest_height+"px",1==scaleX&&1==scaleY||(elem.style.overflow="hidden",video.style.webkitTransformOrigin="0px 0px",video.style.mozTransformOrigin="0px 0px",video.style.msTransformOrigin="0px 0px",video.style.oTransformOrigin="0px 0px",video.style.transformOrigin="0px 0px",video.style.webkitTransform="scaleX("+scaleX+") scaleY("+scaleY+")",video.style.mozTransform="scaleX("+scaleX+") scaleY("+scaleY+")",video.style.msTransform="scaleX("+scaleX+") scaleY("+scaleY+")",video.style.oTransform="scaleX("+scaleX+") scaleY("+scaleY+")",video.style.transform="scaleX("+scaleX+") scaleY("+scaleY+")"),elem.appendChild(video),this.video=video;var self=this;this.mediaDevices.getUserMedia({audio:!1,video:this.params.constraints||{mandatory:{minWidth:this.params.dest_width,minHeight:this.params.dest_height}}}).then(function(stream){video.onloadedmetadata=function(){self.stream=stream,self.loaded=!0,self.live=!0,self.dispatch("load"),self.dispatch("live"),self.flip()},"srcObject"in video?video.srcObject=stream:video.src=window.URL.createObjectURL(stream)})["catch"](function(err){self.params.enable_flash&&self.detectFlash()?setTimeout(function(){self.params.force_flash=1,self.attach(elem)},1):self.dispatch("error",err)})}else if(this.iOS){(div=document.createElement("div")).id=this.container.id+"-ios_div",div.className="webcamjs-ios-placeholder",div.style.width=this.params.width+"px",div.style.height=this.params.height+"px",div.style.textAlign="center",div.style.display="table-cell",div.style.verticalAlign="middle",div.style.backgroundRepeat="no-repeat",div.style.backgroundSize="contain",div.style.backgroundPosition="center";var span=document.createElement("span");span.className="webcamjs-ios-text",span.innerHTML=this.params.iosPlaceholderText,div.appendChild(span);var img=document.createElement("img");img.id=this.container.id+"-ios_img",img.style.width=this.params.dest_width+"px",img.style.height=this.params.dest_height+"px",img.style.display="none",div.appendChild(img);var input=document.createElement("input");input.id=this.container.id+"-ios_input",input.setAttribute("type","file"),input.setAttribute("accept","image/*"),input.setAttribute("capture","camera");self=this;var params=this.params;input.addEventListener("change",function(event){if(event.target.files.length>0&&0==event.target.files[0].type.indexOf("image/")){var objURL=URL.createObjectURL(event.target.files[0]),image=new Image;image.addEventListener("load",function(){var canvas=document.createElement("canvas");canvas.width=params.dest_width,canvas.height=params.dest_height;var ctx=canvas.getContext("2d");ratio=Math.min(image.width/params.dest_width,image.height/params.dest_height);var sw=params.dest_width*ratio,sh=params.dest_height*ratio,sx=(image.width-sw)/2,sy=(image.height-sh)/2;ctx.drawImage(image,sx,sy,sw,sh,0,0,params.dest_width,params.dest_height);var dataURL=canvas.toDataURL();img.src=dataURL,div.style.backgroundImage="url('"+dataURL+"')"},!1);var fileReader=new FileReader;fileReader.addEventListener("load",function(e){var orientation=self.exifOrientation(e.target.result);orientation>1?self.fixOrientation(objURL,orientation,image):image.src=objURL},!1);var http=new XMLHttpRequest;http.open("GET",objURL,!0),http.responseType="blob",http.onload=function(){200!=this.status&&0!==this.status||fileReader.readAsArrayBuffer(this.response)},http.send()}},!1),input.style.display="none",elem.appendChild(input),div.addEventListener("click",function(){params.user_callback?self.snap(params.user_callback,params.user_canvas):(input.style.display="block",input.focus(),input.click(),input.style.display="none")},!1),elem.appendChild(div),this.loaded=!0,this.live=!0}else if(this.params.enable_flash&&this.detectFlash()){var div;window.Webcam=Webcam,(div=document.createElement("div")).innerHTML=this.getSWFHTML(),elem.appendChild(div)}else this.dispatch("error",new WebcamError(this.params.noInterfaceFoundText));if(this.params.crop_width&&this.params.crop_height){var scaled_crop_width=Math.floor(this.params.crop_width*scaleX),scaled_crop_height=Math.floor(this.params.crop_height*scaleY);elem.style.width=scaled_crop_width+"px",elem.style.height=scaled_crop_height+"px",elem.style.overflow="hidden",elem.scrollLeft=Math.floor(this.params.width/2-scaled_crop_width/2),elem.scrollTop=Math.floor(this.params.height/2-scaled_crop_height/2)}else elem.style.width=this.params.width+"px",elem.style.height=this.params.height+"px"},reset:function(){if(this.preview_active&&this.unfreeze(),this.unflip(),this.userMedia){if(this.stream)if(this.stream.getVideoTracks){var tracks=this.stream.getVideoTracks();tracks&&tracks[0]&&tracks[0].stop&&tracks[0].stop()}else this.stream.stop&&this.stream.stop();delete this.stream,delete this.video}if(!0!==this.userMedia&&this.loaded&&!this.iOS){var movie=this.getMovie();movie&&movie._releaseCamera&&movie._releaseCamera()}this.container&&(this.container.innerHTML="",delete this.container),this.loaded=!1,this.live=!1},set:function(){if(1==arguments.length)for(var key in arguments[0])this.params[key]=arguments[0][key];else this.params[arguments[0]]=arguments[1]},on:function(name,callback){name=name.replace(/^on/i,"").toLowerCase(),this.hooks[name]||(this.hooks[name]=[]),this.hooks[name].push(callback)},off:function(name,callback){if(name=name.replace(/^on/i,"").toLowerCase(),this.hooks[name])if(callback){var idx=this.hooks[name].indexOf(callback);idx>-1&&this.hooks[name].splice(idx,1)}else this.hooks[name]=[]},dispatch:function(){var message,name=arguments[0].replace(/^on/i,"").toLowerCase(),args=Array.prototype.slice.call(arguments,1);if(this.hooks[name]&&this.hooks[name].length){for(var idx=0,len=this.hooks[name].length;idx<len;idx++){var hook=this.hooks[name][idx];"function"==typeof hook?hook.apply(this,args):"object"==typeof hook&&2==hook.length?hook[0][hook[1]].apply(hook[0],args):window[hook]&&window[hook].apply(window,args)}return!0}return"error"==name&&(message=args[0]instanceof FlashError||args[0]instanceof WebcamError?args[0].message:"Could not access webcam: "+args[0].name+": "+args[0].message+" "+args[0].toString(),alert("Webcam.js Error: "+message)),!1},setSWFLocation:function(value){this.set("swfURL",value)},detectFlash:function(){var SHOCKWAVE_FLASH="Shockwave Flash",SHOCKWAVE_FLASH_AX="ShockwaveFlash.ShockwaveFlash",FLASH_MIME_TYPE="application/x-shockwave-flash",win=window,nav=navigator,hasFlash=!1;if("undefined"!=typeof nav.plugins&&"object"==typeof nav.plugins[SHOCKWAVE_FLASH])nav.plugins[SHOCKWAVE_FLASH].description&&"undefined"!=typeof nav.mimeTypes&&nav.mimeTypes[FLASH_MIME_TYPE]&&nav.mimeTypes[FLASH_MIME_TYPE].enabledPlugin&&(hasFlash=!0);else if("undefined"!=typeof win.ActiveXObject)try{var ax=new ActiveXObject(SHOCKWAVE_FLASH_AX);if(ax)ax.GetVariable("$version")&&(hasFlash=!0)}catch(e){}return hasFlash},getSWFHTML:function(){var html="",swfURL=this.params.swfURL;if(location.protocol.match(/file/))return this.dispatch("error",new FlashError("Flash does not work from local disk.  Please run from a web server.")),'<h3 style="color:red">ERROR: the Webcam.js Flash fallback does not work from local disk.  Please run it from a web server.</h3>';if(!this.detectFlash())return this.dispatch("error",new FlashError("Adobe Flash Player not found.  Please install from get.adobe.com/flashplayer and try again.")),'<h3 style="color:red">'+this.params.flashNotDetectedText+"</h3>";if(!swfURL){for(var base_url="",scpts=document.getElementsByTagName("script"),idx=0,len=scpts.length;idx<len;idx++){var src=scpts[idx].getAttribute("src");src&&src.match(/\/webcam(\.min)?\.js/)&&(base_url=src.replace(/\/webcam(\.min)?\.js.*$/,""),idx=len)}swfURL=base_url?base_url+"/webcam.swf":"webcam.swf"}window.localStorage&&!localStorage.getItem("visited")&&(this.params.new_user=1,localStorage.setItem("visited",1));var flashvars="";for(var key in this.params)flashvars&&(flashvars+="&"),flashvars+=key+"="+escape(this.params[key]);return html+='<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" type="application/x-shockwave-flash" codebase="'+this.protocol+'://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0" width="'+this.params.width+'" height="'+this.params.height+'" id="webcam_movie_obj" align="middle"><param name="wmode" value="opaque" /><param name="allowScriptAccess" value="always" /><param name="allowFullScreen" value="false" /><param name="movie" value="'+swfURL+'" /><param name="loop" value="false" /><param name="menu" value="false" /><param name="quality" value="best" /><param name="bgcolor" value="#ffffff" /><param name="flashvars" value="'+flashvars+'"/><embed id="webcam_movie_embed" src="'+swfURL+'" wmode="opaque" loop="false" menu="false" quality="best" bgcolor="#ffffff" width="'+this.params.width+'" height="'+this.params.height+'" name="webcam_movie_embed" align="middle" allowScriptAccess="always" allowFullScreen="false" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" flashvars="'+flashvars+'"></embed></object>'},getMovie:function(){if(!this.loaded)return this.dispatch("error",new FlashError("Flash Movie is not loaded yet"));var movie=document.getElementById("webcam_movie_obj");return movie&&movie._snap||(movie=document.getElementById("webcam_movie_embed")),movie||this.dispatch("error",new FlashError("Cannot locate Flash movie in DOM")),movie},freeze:function(){var self=this,params=this.params;this.preview_active&&this.unfreeze();var scaleX=this.params.width/this.params.dest_width,scaleY=this.params.height/this.params.dest_height;this.unflip();var final_width=params.crop_width||params.dest_width,final_height=params.crop_height||params.dest_height,preview_canvas=document.createElement("canvas");preview_canvas.width=final_width,preview_canvas.height=final_height;var preview_context=preview_canvas.getContext("2d");this.preview_canvas=preview_canvas,this.preview_context=preview_context,1==scaleX&&1==scaleY||(preview_canvas.style.webkitTransformOrigin="0px 0px",preview_canvas.style.mozTransformOrigin="0px 0px",preview_canvas.style.msTransformOrigin="0px 0px",preview_canvas.style.oTransformOrigin="0px 0px",preview_canvas.style.transformOrigin="0px 0px",preview_canvas.style.webkitTransform="scaleX("+scaleX+") scaleY("+scaleY+")",preview_canvas.style.mozTransform="scaleX("+scaleX+") scaleY("+scaleY+")",preview_canvas.style.msTransform="scaleX("+scaleX+") scaleY("+scaleY+")",preview_canvas.style.oTransform="scaleX("+scaleX+") scaleY("+scaleY+")",preview_canvas.style.transform="scaleX("+scaleX+") scaleY("+scaleY+")"),this.snap(function(){preview_canvas.style.position="relative",preview_canvas.style.left=self.container.scrollLeft+"px",preview_canvas.style.top=self.container.scrollTop+"px",self.container.insertBefore(preview_canvas,self.peg),self.container.style.overflow="hidden",self.preview_active=!0},preview_canvas)},unfreeze:function(){this.preview_active&&(this.container.removeChild(this.preview_canvas),delete this.preview_context,delete this.preview_canvas,this.preview_active=!1,this.flip())},flip:function(){if(this.params.flip_horiz){var sty=this.container.style;sty.webkitTransform="scaleX(-1)",sty.mozTransform="scaleX(-1)",sty.msTransform="scaleX(-1)",sty.oTransform="scaleX(-1)",sty.transform="scaleX(-1)",sty.filter="FlipH",sty.msFilter="FlipH"}},unflip:function(){if(this.params.flip_horiz){var sty=this.container.style;sty.webkitTransform="scaleX(1)",sty.mozTransform="scaleX(1)",sty.msTransform="scaleX(1)",sty.oTransform="scaleX(1)",sty.transform="scaleX(1)",sty.filter="",sty.msFilter=""}},savePreview:function(user_callback,user_canvas){var params=this.params,canvas=this.preview_canvas,context=this.preview_context;user_canvas&&user_canvas.getContext("2d").drawImage(canvas,0,0);user_callback(user_canvas?null:canvas.toDataURL("image/"+params.image_format,params.jpeg_quality/100),canvas,context),this.params.unfreeze_snap&&this.unfreeze()},snap:function(user_callback,user_canvas){user_callback||(user_callback=this.params.user_callback),user_canvas||(user_canvas=this.params.user_canvas);var params=this.params;if(!this.loaded)return this.dispatch("error",new WebcamError("Webcam is not loaded yet"));if(!user_callback)return this.dispatch("error",new WebcamError("Please provide a callback function or canvas to snap()"));if(this.preview_active)return this.savePreview(user_callback,user_canvas),null;var canvas=document.createElement("canvas");canvas.width=this.params.dest_width,canvas.height=this.params.dest_height;var context=canvas.getContext("2d");this.params.flip_horiz&&(context.translate(params.dest_width,0),context.scale(-1,1));var func=function(){if(this.src&&this.width&&this.height&&context.drawImage(this,0,0,params.dest_width,params.dest_height),params.crop_width&&params.crop_height){var crop_canvas=document.createElement("canvas");crop_canvas.width=params.crop_width,crop_canvas.height=params.crop_height;var crop_context=crop_canvas.getContext("2d");crop_context.drawImage(canvas,Math.floor(params.dest_width/2-params.crop_width/2),Math.floor(params.dest_height/2-params.crop_height/2),params.crop_width,params.crop_height,0,0,params.crop_width,params.crop_height),context=crop_context,canvas=crop_canvas}user_canvas&&user_canvas.getContext("2d").drawImage(canvas,0,0);user_callback(user_canvas?null:canvas.toDataURL("image/"+params.image_format,params.jpeg_quality/100),canvas,context)};if(this.userMedia)context.drawImage(this.video,0,0,this.params.dest_width,this.params.dest_height),func();else if(this.iOS){var div=document.getElementById(this.container.id+"-ios_div"),img=document.getElementById(this.container.id+"-ios_img"),input=document.getElementById(this.container.id+"-ios_input");iFunc=function(){func.call(img),img.removeEventListener("load",iFunc),div.style.backgroundImage="none",img.removeAttribute("src"),input.value=null},input.value?iFunc(null):(img.addEventListener("load",iFunc),input.style.display="block",input.focus(),input.click(),input.style.display="none")}else{var raw_data=this.getMovie()._snap();(img=new Image).onload=func,img.src="data:image/"+this.params.image_format+";base64,"+raw_data}return null},configure:function(panel){panel||(panel="camera"),this.getMovie()._configure(panel)},flashNotify:function(type,msg){switch(type){case"flashLoadComplete":this.loaded=!0,this.dispatch("load");break;case"cameraLive":this.live=!0,this.dispatch("live");break;case"error":this.dispatch("error",new FlashError(msg))}},b64ToUint6:function(nChr){return nChr>64&&nChr<91?nChr-65:nChr>96&&nChr<123?nChr-71:nChr>47&&nChr<58?nChr+4:43===nChr?62:47===nChr?63:0},base64DecToArr:function(sBase64,nBlocksSize){for(var nMod3,nMod4,sB64Enc=sBase64.replace(/[^A-Za-z0-9\+\/]/g,""),nInLen=sB64Enc.length,nOutLen=nBlocksSize?Math.ceil((3*nInLen+1>>2)/nBlocksSize)*nBlocksSize:3*nInLen+1>>2,taBytes=new Uint8Array(nOutLen),nUint24=0,nOutIdx=0,nInIdx=0;nInIdx<nInLen;nInIdx++)if(nMod4=3&nInIdx,nUint24|=this.b64ToUint6(sB64Enc.charCodeAt(nInIdx))<<18-6*nMod4,3===nMod4||nInLen-nInIdx==1){for(nMod3=0;nMod3<3&&nOutIdx<nOutLen;nMod3++,nOutIdx++)taBytes[nOutIdx]=nUint24>>>(16>>>nMod3&24)&255;nUint24=0}return taBytes},upload:function(image_data_uri,target_url,callback){var form_elem_name=this.params.upload_name||"webcam",image_fmt="";if(!image_data_uri.match(/^data\:image\/(\w+)/))throw"Cannot locate image format in Data URI";image_fmt=RegExp.$1;var raw_image_data=image_data_uri.replace(/^data\:image\/\w+\;base64\,/,""),http=new XMLHttpRequest;http.open("POST",target_url,!0),http.upload&&http.upload.addEventListener&&http.upload.addEventListener("progress",function(e){if(e.lengthComputable){var progress=e.loaded/e.total;Webcam.dispatch("uploadProgress",progress,e)}},!1);var self=this;http.onload=function(){callback&&callback.apply(self,[http.status,http.responseText,http.statusText]),Webcam.dispatch("uploadComplete",http.status,http.responseText,http.statusText)};var blob=new Blob([this.base64DecToArr(raw_image_data)],{type:"image/"+image_fmt}),form=new FormData;form.append(form_elem_name,blob,form_elem_name+"."+image_fmt.replace(/e/,"")),http.send(form)}};Webcam.init(),"function"==typeof define&&define.amd?define(function(){return Webcam}):"object"==typeof module&&module.exports?module.exports=Webcam:window.Webcam=Webcam}(window),function(root,factory){"function"==typeof define&&define.amd?define(["jquery"],factory):"object"==typeof exports?factory(require("jquery")):factory(root.jQuery)}(this,function($){var converter={vertical:{x:!1,y:!0},horizontal:{x:!0,y:!1},both:{x:!0,y:!0},x:{x:!0,y:!1},y:{x:!1,y:!0}},settings={duration:"fast",direction:"both"},rootrx=/^(?:html)$/i,borders=function(domElement,styles){styles=styles||(document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(domElement,null):domElement.currentStyle);var px=!(!document.defaultView||!document.defaultView.getComputedStyle),b={top:parseFloat(px?styles.borderTopWidth:$.css(domElement,"borderTopWidth"))||0,left:parseFloat(px?styles.borderLeftWidth:$.css(domElement,"borderLeftWidth"))||0,bottom:parseFloat(px?styles.borderBottomWidth:$.css(domElement,"borderBottomWidth"))||0,right:parseFloat(px?styles.borderRightWidth:$.css(domElement,"borderRightWidth"))||0};return{top:b.top,left:b.left,bottom:b.bottom,right:b.right,vertical:b.top+b.bottom,horizontal:b.left+b.right}},dimensions=function($element){var r,win=$(window),isRoot=rootrx.test($element[0].nodeName);return{border:isRoot?{top:0,left:0,bottom:0,right:0}:borders($element[0]),scroll:{top:(isRoot?win:$element).scrollTop(),left:(isRoot?win:$element).scrollLeft()},scrollbar:{right:isRoot?0:$element.innerWidth()-$element[0].clientWidth,bottom:isRoot?0:$element.innerHeight()-$element[0].clientHeight},rect:(r=$element[0].getBoundingClientRect(),{top:isRoot?0:r.top,left:isRoot?0:r.left,bottom:isRoot?$element[0].clientHeight:r.bottom,right:isRoot?$element[0].clientWidth:r.right})}};$.fn.extend({scrollintoview:function(options){(options=$.extend({},settings,options)).direction=converter["string"==typeof options.direction&&options.direction.toLowerCase()]||converter.both;var dirStr="";!0===options.direction.x&&(dirStr="horizontal"),!0===options.direction.y&&(dirStr=dirStr?"both":"vertical");var el=this.eq(0),scroller=el.closest(":scrollable("+dirStr+")");if(scroller.length>0){scroller=scroller.eq(0);var dim={e:dimensions(el),s:dimensions(scroller)},rel={top:dim.e.rect.top-(dim.s.rect.top+dim.s.border.top),bottom:dim.s.rect.bottom-dim.s.border.bottom-dim.s.scrollbar.bottom-dim.e.rect.bottom,left:dim.e.rect.left-(dim.s.rect.left+dim.s.border.left),right:dim.s.rect.right-dim.s.border.right-dim.s.scrollbar.right-dim.e.rect.right},animOptions={};!0===options.direction.y&&(rel.top<0?animOptions.scrollTop=dim.s.scroll.top+rel.top-(options.yExtraScroll||0):rel.top>0&&rel.bottom<0&&(animOptions.scrollTop=dim.s.scroll.top+Math.min(rel.top,-rel.bottom))),!0===options.direction.x&&(rel.left<0?animOptions.scrollLeft=dim.s.scroll.left+rel.left:rel.left>0&&rel.right<0&&(animOptions.scrollLeft=dim.s.scroll.left+Math.min(rel.left,-rel.right))),$.isEmptyObject(animOptions)?$.isFunction(options.complete)&&options.complete.call(scroller[0]):(rootrx.test(scroller[0].nodeName)&&(scroller=$("html,body")),scroller.animate(animOptions,options.duration).eq(0).queue(function(next){$.isFunction(options.complete)&&options.complete.call(scroller[0]),next()}))}return this}});var scrollValue={auto:!0,scroll:!0,visible:!1,hidden:!1};$.extend($.expr[":"],{scrollable:function(element,index,meta){var direction=converter["string"==typeof meta[3]&&meta[3].toLowerCase()]||converter.both,styles=document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(element,null):element.currentStyle,overflow={x:scrollValue[styles.overflowX.toLowerCase()]||!1,y:scrollValue[styles.overflowY.toLowerCase()]||!1,isRoot:rootrx.test(element.nodeName)};if(!overflow.x&&!overflow.y&&!overflow.isRoot)return!1;var size={height:{scroll:element.scrollHeight,client:element.clientHeight},width:{scroll:element.scrollWidth,client:element.clientWidth},scrollableX:function(){return(overflow.x||overflow.isRoot)&&this.width.scroll>this.width.client},scrollableY:function(){return(overflow.y||overflow.isRoot)&&this.height.scroll>this.height.client}};return direction.y&&size.scrollableY()||direction.x&&size.scrollableX()}})}),
/**
 * UAParser.js v0.7.10
 * Lightweight JavaScript-based User-Agent string parser
 * https://github.com/faisalman/ua-parser-js
 *
 * Copyright  2012-2015 Faisal Salman <fyzlman@gmail.com>
 * Dual licensed under GPLv2 & MIT
 */
function(e,t){"use strict";var n="0.7.10",r="",i="?",s="function",o="undefined",u="object",a="string",f="major",l="model",c="name",h="type",p="vendor",d="version",v="architecture",m="console",g="mobile",y="tablet",b="smarttv",w="wearable",E="embedded",S={extend:function(e,t){for(var n in t)-1!=="browser cpu device engine os".indexOf(n)&&t[n].length%2==0&&(e[n]=t[n].concat(e[n]));return e},has:function(e,t){return"string"==typeof e&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()},major:function(e){return typeof e===a?e.split(".")[0]:t}},x={rgx:function(){for(var e,r,i,a,f,l,c,n=0,h=arguments;n<h.length&&!l;){var p=h[n],d=h[n+1];if(typeof e===o)for(a in e={},d)d.hasOwnProperty(a)&&(typeof(f=d[a])===u?e[f[0]]=t:e[f]=t);for(r=i=0;r<p.length&&!l;)if(l=p[r++].exec(this.getUA()))for(a=0;a<d.length;a++)c=l[++i],typeof(f=d[a])===u&&f.length>0?2==f.length?typeof f[1]==s?e[f[0]]=f[1].call(this,c):e[f[0]]=f[1]:3==f.length?typeof f[1]!==s||f[1].exec&&f[1].test?e[f[0]]=c?c.replace(f[1],f[2]):t:e[f[0]]=c?f[1].call(this,c,f[2]):t:4==f.length&&(e[f[0]]=c?f[3].call(this,c.replace(f[1],f[2])):t):e[f]=c||t;n+=2}return e},str:function(e,n){for(var r in n)if(typeof n[r]===u&&n[r].length>0){for(var s=0;s<n[r].length;s++)if(S.has(n[r][s],e))return r===i?t:r}else if(S.has(n[r],e))return r===i?t:r;return e}},T={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2000:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},N={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[c,d],[/\s(opr)\/([\w\.]+)/i],[[c,"Opera"],d],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs)\/([\w\.-]+)/i],[c,d],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[c,"IE"],d],[/(edge)\/((\d+)?[\w\.]+)/i],[c,d],[/(yabrowser)\/([\w\.]+)/i],[[c,"Yandex"],d],[/(comodo_dragon)\/([\w\.]+)/i],[[c,/_/g," "],d],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i,/(qqbrowser)[\/\s]?([\w\.]+)/i],[c,d],[/(uc\s?browser)[\/\s]?([\w\.]+)/i,/ucweb.+(ucbrowser)[\/\s]?([\w\.]+)/i,/JUC.+(ucweb)[\/\s]?([\w\.]+)/i],[[c,"UCBrowser"],d],[/(dolfin)\/([\w\.]+)/i],[[c,"Dolphin"],d],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[c,"Chrome"],d],[/XiaoMi\/MiuiBrowser\/([\w\.]+)/i],[d,[c,"MIUI Browser"]],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)/i],[d,[c,"Android Browser"]],[/FBAV\/([\w\.]+);/i],[d,[c,"Facebook"]],[/fxios\/([\w\.-]+)/i],[d,[c,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[d,[c,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[d,c],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[c,[d,x.str,T.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[c,d],[/(navigator|netscape)\/([\w\.-]+)/i],[[c,"Netscape"],d],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w\.-]+)/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]+)*/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[c,d]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[v,"amd64"]],[/(ia32(?=;))/i],[[v,S.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[v,"ia32"]],[/windows\s(ce|mobile);\sppc;/i],[[v,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[v,/ower/,"",S.lowerize]],[/(sun4\w)[;\)]/i],[[v,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[[v,S.lowerize]]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[l,p,[h,y]],[/applecoremedia\/[\w\.]+ \((ipad)/],[l,[p,"Apple"],[h,y]],[/(apple\s{0,1}tv)/i],[[l,"Apple TV"],[p,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[p,l,[h,y]],[/(kf[A-z]+)\sbuild\/[\w\.]+.*silk\//i],[l,[p,"Amazon"],[h,y]],[/(sd|kf)[0349hijorstuw]+\sbuild\/[\w\.]+.*silk\//i],[[l,x.str,T.device.amazon.model],[p,"Amazon"],[h,g]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[l,p,[h,g]],[/\((ip[honed|\s\w*]+);/i],[l,[p,"Apple"],[h,g]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|huawei|meizu|motorola|polytron)[\s_-]?([\w-]+)*/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[p,l,[h,g]],[/\(bb10;\s(\w+)/i],[l,[p,"BlackBerry"],[h,g]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7)/i],[l,[p,"Asus"],[h,y]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[p,"Sony"],[l,"Xperia Tablet"],[h,y]],[/(?:sony)?(?:(?:(?:c|d)\d{4})|(?:so[-l].+))\sbuild\//i],[[p,"Sony"],[l,"Xperia Phone"],[h,g]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[p,l,[h,m]],[/android.+;\s(shield)\sbuild/i],[l,[p,"Nvidia"],[h,m]],[/(playstation\s[34portablevi]+)/i],[l,[p,"Sony"],[h,m]],[/(sprint\s(\w+))/i],[[p,x.str,T.device.sprint.vendor],[l,x.str,T.device.sprint.model],[h,g]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[p,l,[h,y]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i,/(alcatel|geeksphone|huawei|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i],[p,[l,/_/g," "],[h,g]],[/(nexus\s9)/i],[l,[p,"HTC"],[h,y]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[l,[p,"Microsoft"],[h,m]],[/(kin\.[onetw]{3})/i],[[l,/\./g," "],[p,"Microsoft"],[h,g]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w+)*/i,/(XT\d{3,4}) build\//i,/(nexus\s[6])/i],[l,[p,"Motorola"],[h,g]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[l,[p,"Motorola"],[h,y]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n8000|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[p,"Samsung"],l,[h,y]],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-n900))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,/sec-((sgh\w+))/i],[[p,"Samsung"],l,[h,g]],[/(samsung);smarttv/i],[p,l,[h,b]],[/\(dtv[\);].+(aquos)/i],[l,[p,"Sharp"],[h,b]],[/sie-(\w+)*/i],[l,[p,"Siemens"],[h,g]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]+)*/i],[[p,"Nokia"],l,[h,g]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[l,[p,"Acer"],[h,y]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[p,"LG"],l,[h,y]],[/(lg) netcast\.tv/i],[p,l,[h,b]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w+)*/i],[l,[p,"LG"],[h,g]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[l,[p,"Lenovo"],[h,y]],[/linux;.+((jolla));/i],[p,l,[h,g]],[/((pebble))app\/[\d\.]+\s/i],[p,l,[h,w]],[/android.+;\s(glass)\s\d/i],[l,[p,"Google"],[h,w]],[/android.+(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus)?[\s_]*(?:\d\w)?)\s+build/i],[[l,/_/g," "],[p,"Xiaomi"],[h,g]],[/\s(tablet)[;\/\s]/i,/\s(mobile)[;\/\s]/i],[[h,S.lowerize],p,l]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[d,[c,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[c,d],[/rv\:([\w\.]+).*(gecko)/i],[d,c]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[c,d],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*|windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[c,[d,x.str,T.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[c,"Windows"],[d,x.str,T.os.windows.version]],[/\((bb)(10);/i],[[c,"BlackBerry"],d],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,/linux;.+(sailfish);/i],[c,d],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[c,"Symbian"],d],[/\((series40);/i],[c],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[c,"Firefox OS"],d],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[c,d],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[c,"Chromium OS"],d],[/(sunos)\s?([\w\.]+\d)*/i],[[c,"Solaris"],d],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[c,d],[/(ip[honead]+)(?:.*os\s([\w]+)*\slike\smac|;\sopera)/i],[[c,"iOS"],[d,/_/g,"."]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[[c,"Mac OS"],[d,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,/(haiku)\s(\w+)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]+)*/i],[c,d]]},C=function(t,n){if(this instanceof C){var i=t||(e&&e.navigator&&e.navigator.userAgent?e.navigator.userAgent:r),s=n?S.extend(N,n):N;return this.getBrowser=function(){var e=x.rgx.apply(this,s.browser);return e.major=S.major(e.version),e},this.getCPU=function(){return x.rgx.apply(this,s.cpu)},this.getDevice=function(){return x.rgx.apply(this,s.device)},this.getEngine=function(){return x.rgx.apply(this,s.engine)},this.getOS=function(){return x.rgx.apply(this,s.os)},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return i},this.setUA=function(e){return i=e,this},this.setUA(i),this}return new C(t,n).getResult()};C.VERSION=n,C.BROWSER={NAME:c,MAJOR:f,VERSION:d},C.CPU={ARCHITECTURE:v},C.DEVICE={MODEL:l,VENDOR:p,TYPE:h,CONSOLE:m,MOBILE:g,SMARTTV:b,TABLET:y,WEARABLE:w,EMBEDDED:E},C.ENGINE={NAME:c,VERSION:d},C.OS={NAME:c,VERSION:d},typeof exports!==o?(typeof module!==o&&module.exports&&(exports=module.exports=C),exports.UAParser=C):typeof define===s&&define.amd?define(function(){return C}):e.UAParser=C;var k=e.jQuery||e.Zepto;if(typeof k!==o){var L=new C;k.ua=L.getResult(),k.ua.get=function(){return L.getUA()},k.ua.set=function(e){L.setUA(e);var t=L.getResult();for(var n in t)k.ua[n]=t[n]}}}("object"==typeof window?window:this),
/*! @license Firebase v2.4.2
    License: https://www.firebase.com/terms/terms-of-service.html */
function(){function p(a){return void 0!==a}function aa(){}function ba(a){a.yb=function(){return a.zf?a.zf:a.zf=new a}}function ca(a){var b=typeof a;if("object"==b){if(!a)return"null";if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function da(a){return"array"==ca(a)}function ea(a){var b=ca(a);return"array"==b||"object"==b&&"number"==typeof a.length}function q(a){return"string"==typeof a}function fa(a){return"number"==typeof a}function r(a){return"function"==ca(a)}function ga(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}function ha(a){return a.call.apply(a.bind,arguments)}function ia(a,b){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(c,d),a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function u(){return(u=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ha:ia).apply(null,arguments)}function ka(a,b){function c(){}c.prototype=b.prototype,a.ph=b.prototype,a.prototype=new c,a.prototype.constructor=a,a.lh=function(a,c){for(var g=Array(arguments.length-2),k=2;k<arguments.length;k++)g[k-2]=arguments[k];return b.prototype[c].apply(a,g)}}function la(a){if(Error.captureStackTrace)Error.captureStackTrace(this,la);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}function v(a,b){for(var c in a)b.call(void 0,a[c],c,a)}function ma(a,b){var d,c={};for(d in a)c[d]=b.call(void 0,a[d],d,a);return c}function na(a,b){for(var c in a)if(!b.call(void 0,a[c],c,a))return!1;return!0}function oa(a){var c,b=0;for(c in a)b++;return b}function pa(a){for(var b in a)return b}function qa(a){var d,b=[],c=0;for(d in a)b[c++]=a[d];return b}function ra(a){var d,b=[],c=0;for(d in a)b[c++]=d;return b}function sa(a,b){for(var c in a)if(a[c]==b)return!0;return!1}function ta(a,b,c){for(var d in a)if(b.call(c,a[d],d,a))return d}function ua(a,b){var c=ta(a,b,void 0);return c&&a[c]}function va(a){for(var b in a)return!1;return!0}function wa(a){var c,b={};for(c in a)b[c]=a[c];return b}function ya(a){for(var c,d,e=1;e<arguments.length;e++){for(c in d=arguments[e])a[c]=d[c];for(var f=0;f<xa.length;f++)c=xa[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}}function za(a){if(a=String(a),!/^\s*$/.test(a)&&/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x0a-\x1f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,"")))try{return eval("("+a+")")}catch(b){}throw Error("Invalid JSON string: "+a)}function Aa(){this.Vd=void 0}function Ba(a,b,c){switch(typeof b){case"string":Ca(b,c);break;case"number":c.push(isFinite(b)&&!isNaN(b)?b:"null");break;case"boolean":c.push(b);break;case"undefined":c.push("null");break;case"object":if(null==b){c.push("null");break}if(da(b)){var d=b.length;c.push("[");for(var e="",f=0;f<d;f++)c.push(e),e=b[f],Ba(a,a.Vd?a.Vd.call(b,String(f),e):e,c),e=",";c.push("]");break}for(f in c.push("{"),d="",b)Object.prototype.hasOwnProperty.call(b,f)&&("function"!=typeof(e=b[f])&&(c.push(d),Ca(f,c),c.push(":"),Ba(a,a.Vd?a.Vd.call(b,f,e):e,c),d=","));c.push("}");break;case"function":break;default:throw Error("Unknown type: "+typeof b)}}function Ca(a,b){b.push('"',a.replace(Ea,function(a){if(a in Da)return Da[a];var b=a.charCodeAt(0),e="\\u";return 16>b?e+="000":256>b?e+="00":4096>b&&(e+="0"),Da[a]=e+b.toString(16)}),'"')}function Fa(){return Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^ja()).toString(36)}function Ia(){this.Ya=-1}function Ja(){this.Ya=-1,this.Ya=64,this.P=[],this.pe=[],this.eg=[],this.Od=[],this.Od[0]=128;for(var a=1;a<this.Ya;++a)this.Od[a]=0;this.ge=this.ec=0,this.reset()}function Ka(a,b,c){c||(c=0);var d=a.eg;if(q(b))for(var e=0;16>e;e++)d[e]=b.charCodeAt(c)<<24|b.charCodeAt(c+1)<<16|b.charCodeAt(c+2)<<8|b.charCodeAt(c+3),c+=4;else for(e=0;16>e;e++)d[e]=b[c]<<24|b[c+1]<<16|b[c+2]<<8|b[c+3],c+=4;for(e=16;80>e;e++){var f=d[e-3]^d[e-8]^d[e-14]^d[e-16];d[e]=4294967295&(f<<1|f>>>31)}b=a.P[0],c=a.P[1];var l,g=a.P[2],k=a.P[3],m=a.P[4];for(e=0;80>e;e++)40>e?20>e?(f=k^c&(g^k),l=1518500249):(f=c^g^k,l=1859775393):60>e?(f=c&g|k&(c|g),l=2400959708):(f=c^g^k,l=3395469782),f=(b<<5|b>>>27)+f+m+l+d[e]&4294967295,m=k,k=g,g=4294967295&(c<<30|c>>>2),c=b,b=f;a.P[0]=a.P[0]+b&4294967295,a.P[1]=a.P[1]+c&4294967295,a.P[2]=a.P[2]+g&4294967295,a.P[3]=a.P[3]+k&4294967295,a.P[4]=a.P[4]+m&4294967295}function Ra(a,b){var c=Sa(a,b,void 0);return 0>c?null:q(a)?a.charAt(c):a[c]}function Sa(a,b,c){for(var d=a.length,e=q(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return f;return-1}function Ta(a,b){var c=La(a,b);0<=c&&x.splice.call(a,c,1)}function Ua(a,b,c){return 2>=arguments.length?x.slice.call(a,b):x.slice.call(a,b,c)}function Va(a,b){a.sort(b||Wa)}function Wa(a,b){return a>b?1:a<b?-1:0}function Xa(a){n.setTimeout(function(){throw a},0)}function Za(){var a=n.MessageChannel;if(void 0===a&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&-1==w.indexOf("Presto")&&(a=function(){(a=document.createElement("iframe")).style.display="none",a.src="",document.documentElement.appendChild(a);var b=a.contentWindow;(a=b.document).open(),a.write(""),a.close();var c="callImmediate"+Math.random(),d="file:"==b.location.protocol?"*":b.location.protocol+"//"+b.location.host,a=u(function(a){"*"!=d&&a.origin!=d||a.data!=c||this.port1.onmessage()},this);b.addEventListener("message",a,!1),this.port1={},this.port2={postMessage:function(){b.postMessage(c,d)}}}),void 0!==a&&-1==w.indexOf("Trident")&&-1==w.indexOf("MSIE")){var b=new a,c={},d=c;return b.port1.onmessage=function(){if(p(c.next)){var a=(c=c.next).hb;c.hb=null,a()}},function(a){d.next={hb:a},d=d.next,b.port2.postMessage(0)}}return"undefined"!=typeof document&&"onreadystatechange"in document.createElement("script")?function(a){var b=document.createElement("script");b.onreadystatechange=function(){b.onreadystatechange=null,b.parentNode.removeChild(b),b=null,a(),a=null},document.documentElement.appendChild(b)}:function(a){n.setTimeout(a,0)}}function $a(a,b){ab||bb(),cb||(ab(),cb=!0),db.push(new eb(a,b))}function bb(){if(n.Promise&&n.Promise.resolve){var a=n.Promise.resolve();ab=function(){a.then(fb)}}else ab=function(){var a=fb;!r(n.setImmediate)||n.Window&&n.Window.prototype&&n.Window.prototype.setImmediate==n.setImmediate?(Ya||(Ya=Za()),Ya(a)):n.setImmediate(a)}}function fb(){for(;db.length;){var a=db;db=[];for(var b=0;b<a.length;b++){var c=a[b];try{c.yg.call(c.scope)}catch(d){Xa(d)}}}cb=!1}function eb(a,b){this.yg=a,this.scope=b}function nb(a,b){if(!ea(a))throw Error("encodeByteArray takes an array as a parameter");ob();for(var c=b?lb:kb,d=[],e=0;e<a.length;e+=3){var f=a[e],g=e+1<a.length,k=g?a[e+1]:0,m=e+2<a.length,t=f>>2,l=(f=(3&f)<<4|k>>4,k=(15&k)<<2|(l=m?a[e+2]:0)>>6,63&l);m||(l=64,g||(k=64)),d.push(c[t],c[f],c[k],c[l])}return d.join("")}function ob(){if(!kb){kb={},lb={},mb={};for(var a=0;65>a;a++)kb[a]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(a),lb[a]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(a),mb[lb[a]]=a,62<=a&&(mb["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(a)]=a)}}function pb(a,b){if(this.N=qb,this.Rf=void 0,this.Ba=this.Ha=null,this.yd=this.ye=!1,a==rb)sb(this,tb,b);else try{var c=this;a.call(b,function(a){sb(c,tb,a)},function(a){if(!(a instanceof ub))try{if(a instanceof Error)throw a;throw Error("Promise rejected.")}catch(b){}sb(c,vb,a)})}catch(d){sb(this,vb,d)}}function rb(){}function xb(a,b){if(a.N==qb)if(a.Ha){var c=a.Ha;if(c.Ba){for(var g,d=0,e=-1,f=0;(g=c.Ba[f])&&!((g=g.o)&&(d++,g==a&&(e=f),0<=e&&1<d));f++);0<=e&&(c.N==qb&&1==d?xb(c,b):yb(c,d=c.Ba.splice(e,1)[0],vb,b))}a.Ha=null}else sb(a,vb,b)}function zb(a,b){a.Ba&&a.Ba.length||a.N!=tb&&a.N!=vb||Ab(a),a.Ba||(a.Ba=[]),a.Ba.push(b)}function wb(a,b,c,d){var e={o:null,Hf:null,Jf:null};return e.o=new pb(function(a,g){e.Hf=b?function(c){try{var e=b.call(d,c);a(e)}catch(l){g(l)}}:a,e.Jf=c?function(b){try{var e=c.call(d,b);!p(e)&&b instanceof ub?g(b):a(e)}catch(l){g(l)}}:g}),e.o.Ha=a,zb(a,e),e.o}function sb(a,b,c){if(a.N==qb){if(a==c)b=vb,c=new TypeError("Promise cannot resolve to itself");else{var d;if(c)try{d=!!c.$goog_Thenable}catch(e){d=!1}else d=!1;if(d)return a.N=1,void c.then(a.Yf,a.Zf,a);if(ga(c))try{var f=c.then;if(r(f))return void Bb(a,c,f)}catch(g){b=vb,c=g}}a.Rf=c,a.N=b,a.Ha=null,Ab(a),b!=vb||c instanceof ub||Cb(a,c)}}function Bb(a,b,c){function d(b){f||(f=!0,a.Zf(b))}function e(b){f||(f=!0,a.Yf(b))}a.N=1;var f=!1;try{c.call(b,e,d)}catch(g){d(g)}}function Ab(a){a.ye||(a.ye=!0,$a(a.wg,a))}function yb(a,b,c,d){if(c==tb)b.Hf(d);else{if(b.o)for(;a&&a.yd;a=a.Ha)a.yd=!1;b.Jf(d)}}function Cb(a,b){a.yd=!0,$a(function(){a.yd&&Db.call(null,b)})}function ub(a){la.call(this,a)}function y(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function z(a,b){if(Object.prototype.hasOwnProperty.call(a,b))return a[b]}function Fb(a,b){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&b(c,a[c])}function Gb(a){var b={};return Fb(a,function(a,d){b[a]=d}),b}function Hb(a){return"object"==typeof a&&null!==a}function Ib(a){var b=[];return Fb(a,function(a,d){da(d)?Ma(d,function(d){b.push(encodeURIComponent(a)+"="+encodeURIComponent(d))}):b.push(encodeURIComponent(a)+"="+encodeURIComponent(d))}),b.length?"&"+b.join("&"):""}function Jb(a){var b={};return a=a.replace(/^\?/,"").split("&"),Ma(a,function(a){a&&(a=a.split("="),b[a[0]]=a[1])}),b}function Kb(a,b){if(!a)throw Lb(b)}function Lb(a){return Error("Firebase ("+Eb+") INTERNAL ASSERT FAILED: "+a)}function B(){var a=this;this.reject=this.resolve=null,this.D=new Mb(function(b,c){a.resolve=b,a.reject=c})}function C(a,b){return function(c,d){c?a.reject(c):a.resolve(d),r(b)&&(Nb(a.D),1===b.length?b(c):b(c,d))}}function Nb(a){a.then(void 0,aa)}function Ob(a){for(var b=[],c=0,d=0;d<a.length;d++){var e=a.charCodeAt(d);55296<=e&&56319>=e&&(e-=55296,Kb(++d<a.length,"Surrogate pair missing trail surrogate."),e=65536+(e<<10)+(a.charCodeAt(d)-56320)),128>e?b[c++]=e:(2048>e?b[c++]=e>>6|192:(65536>e?b[c++]=e>>12|224:(b[c++]=e>>18|240,b[c++]=e>>12&63|128),b[c++]=e>>6&63|128),b[c++]=63&e|128)}return b}function Pb(a){for(var b=0,c=0;c<a.length;c++){var d=a.charCodeAt(c);128>d?b++:2048>d?b+=2:55296<=d&&56319>=d?(b+=4,c++):b+=3}return b}function D(a,b,c,d){var e;if(d<b?e="at least "+b:d>c&&(e=0===c?"none":"no more than "+c),e)throw Error(a+" failed: Was called with "+d+(1===d?" argument.":" arguments.")+" Expects "+e+".")}function E(a,b,c){var d="";switch(b){case 1:d=c?"first":"First";break;case 2:d=c?"second":"Second";break;case 3:d=c?"third":"Third";break;case 4:d=c?"fourth":"Fourth";break;default:throw Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return a+" failed: "+d+" argument "}function F(a,b,c,d){if((!d||p(c))&&!r(c))throw Error(E(a,b,d)+"must be a valid function.")}function Qb(a,b,c){if(p(c)&&(!ga(c)||null===c))throw Error(E(a,b,!0)+"must be a valid context object.")}function Rb(a){return"undefined"!=typeof JSON&&p(JSON.parse)?JSON.parse(a):za(a)}function G(a){if("undefined"!=typeof JSON&&p(JSON.stringify))a=JSON.stringify(a);else{var b=[];Ba(new Aa,a,b),a=b.join("")}return a}function Sb(){this.Zd=H}function Tb(){}function Vb(a,b,c){this.bg=a,this.Oa=b,this.Nd=c}function Zb(){this.xb=[]}function $b(a,b){for(var c=null,d=0;d<b.length;d++){var e=b[d],f=e.cc();null===c||f.ea(c.cc())||(a.xb.push(c),c=null),null===c&&(c=new ac(f)),c.add(e)}c&&a.xb.push(c)}function bc(a,b,c){$b(a,c),cc(a,function(a){return a.ea(b)})}function dc(a,b,c){$b(a,c),cc(a,function(a){return a.contains(b)||b.contains(a)})}function cc(a,b){for(var c=!0,d=0;d<a.xb.length;d++){if(e=a.xb[d])if(b(e=e.cc())){for(var e=a.xb[d],f=0;f<e.xd.length;f++){var g=e.xd[f];if(null!==g){e.xd[f]=null;var k=g.Zb();ec&&fc("event: "+g.toString()),gc(k)}}a.xb[d]=null}else c=!1}c&&(a.xb=[])}function ac(a){this.ta=a,this.xd=[]}function J(a,b,c,d){this.type=a,this.Na=b,this.Za=c,this.Oe=d,this.Td=void 0}function hc(a){return new J(ic,a)}function jc(a,b,c,d){this.xe=b,this.be=c,this.Td=d,this.wd=a}function kc(a,b,c){this.xe=a,this.error=b,this.path=c}function Xb(a,b,c){this.A=a,this.ga=b,this.Yb=c}function lc(a){return a.ga}function mc(a){return a.Yb}function nc(a,b){return b.e()?a.ga&&!a.Yb:Wb(a,K(b))}function Wb(a,b){return a.ga&&!a.Yb||a.A.Fa(b)}function oc(a){this.pg=a,this.Gd=null}function pc(a,b){this.Vf={},this.hd=new oc(a),this.da=b;var c=1e4+2e4*Math.random();setTimeout(u(this.Of,this),Math.floor(c))}function qc(){this.Hc={}}function rc(a,b,c){p(c)||(c=1),y(a.Hc,b)||(a.Hc[b]=0),a.Hc[b]+=c}function uc(a){return a=a.toString(),sc[a]||(sc[a]=new qc),sc[a]}function vc(a,b){var c=a.toString();return tc[c]||(tc[c]=b()),tc[c]}function L(a,b){this.name=a,this.U=b}function wc(a,b){return new L(a,b)}function xc(a,b){return yc(a.name,b.name)}function zc(a,b){return yc(a,b)}function Ac(a,b,c){this.type=Bc,this.source=a,this.path=b,this.Ja=c}function Cc(a,b){this.type=Dc,this.source=a,this.path=b}function Ec(a,b){this.Pa=a,this.xa=b||Fc}function Gc(a,b){for(var c,d=a.xa,e=null;!d.e();){if(0===(c=a.Pa(b,d.key))){if(d.left.e())return e?e.key:null;for(d=d.left;!d.right.e();)d=d.right;return d.key}0>c?d=d.left:0<c&&(e=d,d=d.right)}throw Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}function Hc(a,b,c,d,e){for(this.Xd=e||null,this.Je=d,this.Ta=[],e=1;!a.e();)if(e=b?c(a.key,b):1,d&&(e*=-1),0>e)a=this.Je?a.left:a.right;else{if(0===e){this.Ta.push(a);break}this.Ta.push(a),a=this.Je?a.right:a.left}}function Ic(a){if(0===a.Ta.length)return null;var c,b=a.Ta.pop();if(c=a.Xd?a.Xd(b.key,b.value):{key:b.key,value:b.value},a.Je)for(b=b.left;!b.e();)a.Ta.push(b),b=b.right;else for(b=b.right;!b.e();)a.Ta.push(b),b=b.left;return c}function Jc(a){return 0===a.Ta.length?null:(b=(b=a.Ta)[b.length-1],a.Xd?a.Xd(b.key,b.value):{key:b.key,value:b.value});var b}function Kc(a,b,c,d,e){this.key=a,this.value=b,this.color=null==c||c,this.left=null!=d?d:Fc,this.right=null!=e?e:Fc}function Lc(a){return a.left.e()?a:Lc(a.left)}function Nc(a){return a.left.e()?Fc:(a.left.ha()||a.left.left.ha()||(a=Oc(a)),Mc(a=a.$(null,null,null,Nc(a.left),null)))}function Mc(a){return a.right.ha()&&!a.left.ha()&&(a=Rc(a)),a.left.ha()&&a.left.left.ha()&&(a=Pc(a)),a.left.ha()&&a.right.ha()&&(a=Qc(a)),a}function Oc(a){return(a=Qc(a)).right.left.ha()&&(a=Qc(a=Rc(a=a.$(null,null,null,null,Pc(a.right))))),a}function Rc(a){return a.right.$(null,null,a.color,a.$(null,null,!0,null,a.right.left),null)}function Pc(a){return a.left.$(null,null,a.color,null,a.$(null,null,!0,a.left.right,null))}function Qc(a){return a.$(null,null,!a.color,a.left.$(null,null,!a.left.color,null,null),a.right.$(null,null,!a.right.color,null,null))}function Sc(){}function Tc(a,b){return a&&"object"==typeof a?(O(".sv"in a,"Unexpected leaf node or priority contents"),b[a[".sv"]]):a}function Uc(a,b){var c=new Vc;return Wc(a,new P(""),function(a,e){c.rc(a,Xc(e,b))}),c}function Xc(a,b){var d,c=Tc(c=a.C().J(),b);if(a.L()){var e=Tc(a.Ea(),b);return e!==a.Ea()||c!==a.C().J()?new Yc(e,Q(c)):a}return d=a,c!==a.C().J()&&(d=d.ia(new Yc(c))),a.R(R,function(a,c){var e=Xc(c,b);e!==c&&(d=d.W(a,e))}),d}function Zc(){this.Ac={}}function $c(a){this.Ic=a,this.Sd="firebase:"}function ad(a){try{if("undefined"!=typeof window&&"undefined"!=typeof window[a]){var b=window[a];return b.setItem("firebase:sentinel","cache"),b.removeItem("firebase:sentinel"),new $c(b)}}catch(c){}return new Zc}function dd(a,b,c,d,e){this.host=a.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.ob=b,this.lc=c,this.jh=d,this.Rd=e||"",this.ab=bd.get("host:"+a)||this.host}function ed(a,b){b!==a.ab&&(a.ab=b,"s-"===a.ab.substr(0,2)&&bd.set("host:"+a.host,a.ab))}function fd(a,b,c){if(O("string"==typeof b,"typeof type must == string"),O("object"==typeof c,"typeof params must == object"),b===gd)b=(a.ob?"wss://":"ws://")+a.ab+"/.ws?";else{if(b!==hd)throw Error("Unknown connection type: "+b);b=(a.ob?"https://":"http://")+a.ab+"/.lp?"}a.host!==a.ab&&(c.ns=a.lc);var d=[];return v(c,function(a,b){d.push(b+"="+a)}),b+d.join("&")}function kd(a){try{var b;if("undefined"!=typeof atob)b=atob(a);else{ob();for(var c=mb,d=[],e=0;e<a.length;){var f=c[a.charAt(e++)],g=e<a.length?c[a.charAt(e)]:0,k=++e<a.length?c[a.charAt(e)]:64,m=++e<a.length?c[a.charAt(e)]:64;if(++e,null==f||null==g||null==k||null==m)throw Error();d.push(f<<2|g>>4),64!=k&&(d.push(g<<4&240|k>>2),64!=m&&d.push(k<<6&192|m))}if(8192>d.length)b=String.fromCharCode.apply(null,d);else{for(a="",c=0;c<d.length;c+=8192)a+=String.fromCharCode.apply(null,Ua(d,c,c+8192));b=a}}return b}catch(l){fc("base64Decode failed: ",l)}return null}function ld(a){var b=Ob(a);(a=new Ja).update(b);b=[];var c=8*a.ge;56>a.ec?a.update(a.Od,56-a.ec):a.update(a.Od,a.Ya-(a.ec-56));for(var d=a.Ya-1;56<=d;d--)a.pe[d]=255&c,c/=256;for(Ka(a,a.pe),d=c=0;5>d;d++)for(var e=24;0<=e;e-=8)b[c]=a.P[d]>>e&255,++c;return nb(b)}function md(){for(var b="",c=0;c<arguments.length;c++)b=ea(arguments[c])?b+md.apply(null,arguments[c]):"object"==typeof arguments[c]?b+G(arguments[c]):b+arguments[c],b+=" ";return b}function od(a,b){Kb(!b||!0===a||!1===a,"Can't turn on custom loggers persistently."),!0===a?("undefined"!=typeof console&&("function"==typeof console.log?ec=u(console.log,console):"object"==typeof console.log&&(ec=function(a){console.log(a)})),b&&cd.set("logging_enabled",!0)):r(a)?ec=a:(ec=null,cd.remove("logging_enabled"))}function fc(){if(!0===nd&&(nd=!1,null===ec&&!0===cd.get("logging_enabled")&&od(!0)),ec){var b=md.apply(null,arguments);ec(b)}}function pd(a){return function(){fc(a,arguments)}}function qd(){if("undefined"!=typeof console){var b="FIREBASE INTERNAL ERROR: "+md.apply(null,arguments);"undefined"!=typeof console.error?console.error(b):console.log(b)}}function rd(){var b=md.apply(null,arguments);throw Error("FIREBASE FATAL ERROR: "+b)}function S(){if("undefined"!=typeof console){var b="FIREBASE WARNING: "+md.apply(null,arguments);"undefined"!=typeof console.warn?console.warn(b):console.log(b)}}function sd(a){var b="",c="",d="",e="",f=!0,g="https",k=443;if(q(a)){var m=a.indexOf("//");for(0<=m&&(g=a.substring(0,m-1),a=a.substring(m+2)),-1===(m=a.indexOf("/"))&&(m=a.length),b=a.substring(0,m),e="",a=a.substring(m).split("/"),m=0;m<a.length;m++)if(0<a[m].length){var l=a[m];try{l=decodeURIComponent(l.replace(/\+/g," "))}catch(t){}e+="/"+l}3===(a=b.split(".")).length?(c=a[1],d=a[0].toLowerCase()):2===a.length&&(c=a[0]),0<=(m=b.indexOf(":"))&&(f="https"===g||"wss"===g,k=b.substring(m+1),isFinite(k)&&(k=String(k)),k=q(k)?/^\s*-?0x/i.test(k)?parseInt(k,16):parseInt(k,10):NaN)}return{host:b,port:k,domain:c,fh:d,ob:f,scheme:g,bd:e}}function td(a){return fa(a)&&(a!=a||a==Number.POSITIVE_INFINITY||a==Number.NEGATIVE_INFINITY)}function ud(a){if("complete"===document.readyState)a();else{var b=!1,c=function(){document.body?b||(b=!0,a()):setTimeout(c,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",c,!1),window.addEventListener("load",c,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&c()}),window.attachEvent("onload",c))}}function yc(a,b){if(a===b)return 0;if("[MIN_NAME]"===a||"[MAX_NAME]"===b)return-1;if("[MIN_NAME]"===b||"[MAX_NAME]"===a)return 1;var c=vd(a),d=vd(b);return null!==c?null!==d?0==c-d?a.length-b.length:c-d:-1:null!==d?1:a<b?-1:1}function wd(a,b){if(b&&a in b)return b[a];throw Error("Missing required key ("+a+") in object: "+G(b))}function xd(a){if("object"!=typeof a||null===a)return G(a);var c,b=[];for(c in a)b.push(c);b.sort(),c="{";for(var d=0;d<b.length;d++)0!==d&&(c+=","),c+=G(b[d]),c+=":",c+=xd(a[b[d]]);return c+"}"}function yd(a,b){if(a.length<=b)return[a];for(var c=[],d=0;d<a.length;d+=b)d+b>a?c.push(a.substring(d,a.length)):c.push(a.substring(d,d+b));return c}function zd(a,b){if(da(a))for(var c=0;c<a.length;++c)b(c,a[c]);else v(a,b)}function Ad(a){var b,c,d,e;for(O(!td(a),"Invalid JSON number"),0===a?(d=c=0,b=-Infinity==1/a?1:0):(b=0>a,(a=Math.abs(a))>=Math.pow(2,-1022)?(c=(d=Math.min(Math.floor(Math.log(a)/Math.LN2),1023))+1023,d=Math.round(a*Math.pow(2,52-d)-Math.pow(2,52))):(c=0,d=Math.round(a/Math.pow(2,-1074)))),e=[],a=52;a;--a)e.push(d%2?1:0),d=Math.floor(d/2);for(a=11;a;--a)e.push(c%2?1:0),c=Math.floor(c/2);for(e.push(b?1:0),e.reverse(),b=e.join(""),c="",a=0;64>a;a+=8)1===(d=parseInt(b.substr(a,8),2).toString(16)).length&&(d="0"+d),c+=d;return c.toLowerCase()}function vd(a){return Bd.test(a)&&(-2147483648<=(a=Number(a))&&2147483647>=a)?a:null}function gc(a){try{a()}catch(b){setTimeout(function(){throw S("Exception was thrown by user callback.",b.stack||""),b},Math.floor(0))}}function T(a){if(r(a)){var c=Array.prototype.slice.call(arguments,1).slice();gc(function(){a.apply(null,c)})}}function Cd(a){var b={},c={},d={},e="";try{var f=a.split(".");b=Rb(kd(f[0])||""),c=Rb(kd(f[1])||""),e=f[2],d=c.d||{};delete c.d}catch(g){}return{mh:b,Ec:c,data:d,bh:e}}function Dd(a){return"object"==typeof(a=Cd(a).Ec)&&a.hasOwnProperty("iat")?z(a,"iat"):null}function Ed(a){var b=(a=Cd(a)).Ec;return!!a.bh&&!!b&&"object"==typeof b&&b.hasOwnProperty("iat")}function Fd(a){this.Y=a,this.g=a.n.g}function Gd(a,b,c,d){var e=[],f=[];return Ma(b,function(b){"child_changed"===b.type&&a.g.Dd(b.Oe,b.Na)&&f.push(new J("child_moved",b.Na,b.Za))}),Hd(a,e,"child_removed",b,d,c),Hd(a,e,"child_added",b,d,c),Hd(a,e,"child_moved",f,d,c),Hd(a,e,"child_changed",b,d,c),Hd(a,e,ic,b,d,c),e}function Hd(a,b,c,d,e,f){Va(d=Na(d,function(a){return a.type===c}),u(a.qg,a)),Ma(d,function(c){var d=Id(a,c,f);Ma(e,function(e){e.Qf(c.type)&&b.push(e.createEvent(d,a.Y))})})}function Id(a,b,c){return"value"!==b.type&&"child_removed"!==b.type&&(b.Td=c.wf(b.Za,b.Na,a.g)),b}function Jd(){this.ib={}}function Kd(a,b){var c=b.type,d=b.Za;O("child_added"==c||"child_changed"==c||"child_removed"==c,"Only child changes supported for tracking"),O(".priority"!==d,"Only non-priority child changes can be tracked.");var e=z(a.ib,d);if(e){var f=e.type;if("child_added"==c&&"child_removed"==f)a.ib[d]=new J("child_changed",b.Na,d,e.Na);else if("child_removed"==c&&"child_added"==f)delete a.ib[d];else if("child_removed"==c&&"child_changed"==f)a.ib[d]=new J("child_removed",e.Oe,d);else if("child_changed"==c&&"child_added"==f)a.ib[d]=new J("child_added",b.Na,d);else{if("child_changed"!=c||"child_changed"!=f)throw jd("Illegal combination of changes: "+b+" occurred after "+e);a.ib[d]=new J("child_changed",b.Na,d,e.Oe)}}else a.ib[d]=b}function Ld(a){this.g=a}function Md(a){var b;this.Fe=new Ld(a.g),this.g=a.g,a.oa?(b=Nd(a),b=a.g.Sc(Od(a),b)):b=a.g.Wc(),this.gd=b,a.ra?(b=Pd(a),a=a.g.Sc(Rd(a),b)):a=a.g.Tc(),this.Jc=a}function Sd(a){this.ua=new Md(a),this.g=a.g,O(a.la,"Only valid if limit has been set"),this.ma=a.ma,this.Nb=!Td(a)}function Ud(a,b,c,d,e,f){var g;if(a.Nb){var k=Vd(a.g);g=function(a,b){return k(b,a)}}else g=Vd(a.g);O(b.Hb()==a.ma,"");var m=new L(c,d),l=a.Nb?Wd(b,a.g):Xd(b,a.g),t=a.ua.matches(m);if(b.Fa(c)){var A=b.T(c);for(l=e.Ce(a.g,l,a.Nb);null!=l&&(l.name==c||b.Fa(l.name));)l=e.Ce(a.g,l,a.Nb);return e=null==l?1:g(l,m),t&&!d.e()&&0<=e?(null!=f&&Kd(f,new J("child_changed",d,c,A)),b.W(c,d)):(null!=f&&Kd(f,new J("child_removed",A,c)),b=b.W(c,H),null!=l&&a.ua.matches(l)?(null!=f&&Kd(f,new J("child_added",l.U,l.name)),b.W(l.name,l.U)):b)}return d.e()?b:t&&0<=g(l,m)?(null!=f&&(Kd(f,new J("child_removed",l.U,l.name)),Kd(f,new J("child_added",d,c))),b.W(c,d).W(l.name,H)):b}function Yd(a,b){this.me=a,this.og=b}function Zd(a){this.X=a}function ie(a,b,c,d,e,f){var k,g=b.Q;if(null!=d.xc(c))return b;if(c.e())O(lc(b.w()),"If change path is empty, we must have complete server data"),mc(b.w())?(e=Yb(b),d=d.Cc(e instanceof fe?e:H)):d=d.Aa(Yb(b)),f=a.X.ya(b.Q.j(),d,f);else{var m=K(c);if(".priority"==m)O(1==le(c),"Can't have a priority with additional path components"),f=g.j(),k=b.w().j(),f=null!=(d=d.nd(c,f,k))?a.X.ia(f,d):g.j();else{var l=N(c);Wb(g,m)?(k=b.w().j(),d=null!=(d=d.nd(c,g.j(),k))?g.j().T(m).H(l,d):g.j().T(m)):d=d.Bc(m,b.w()),f=null!=d?a.X.H(g.j(),m,d,l,e,f):g.j()}}return ge(b,f,g.ga||c.e(),a.X.Ra())}function ae(a,b,c,d,e,f,g,k){var m=b.w();if(g=g?a.X:a.X.$b(),c.e())d=g.ya(m.j(),d,null);else if(g.Ra()&&!m.Yb)d=m.j().H(c,d),d=g.ya(m.j(),d,null);else{var l=K(c);if(!nc(m,c)&&1<le(c))return b;var t=N(c);d=m.j().T(l).H(t,d),d=".priority"==l?g.ia(m.j(),d):g.H(m.j(),l,d,t,Ub,null)}return m=m.ga||c.e(),ie(a,b=new je(b.Q,new Xb(d,m,g.Ra())),c,e,new Vb(e,b,f),k)}function $d(a,b,c,d,e,f,g){var k=b.Q;if(e=new Vb(e,b,f),c.e())a=ge(b,g=a.X.ya(b.Q.j(),d,g),!0,a.X.Ra());else if(".priority"===(f=K(c)))a=ge(b,g=a.X.ia(b.Q.j(),d),k.ga,k.Yb);else{c=N(c);var m=k.j().T(f);if(!c.e()){var l=e.uf(f);d=null!=l?".priority"===me(c)&&l.S(c.parent()).e()?l:l.H(c,d):H}m.ea(d)?a=b:a=ge(b,g=a.X.H(k.j(),f,d,c,e,g),k.ga,a.X.Ra())}return a}function ce(a,b,c,d,e,f,g){var k=b;return ne(d,function(d,l){var t=c.o(d);Wb(b.Q,K(t))&&(k=$d(a,k,t,l,e,f,g))}),ne(d,function(d,l){var t=c.o(d);Wb(b.Q,K(t))||(k=$d(a,k,t,l,e,f,g))}),k}function oe(a,b){return ne(b,function(b,d){a=a.H(b,d)}),a}function de(a,b,c,d,e,f,g,k){if(b.w().j().e()&&!lc(b.w()))return b;var m=b;c=c.e()?d:pe(qe,c,d);var l=b.w().j();return c.children.ka(function(c,d){if(l.Fa(c)){var I=oe(I=b.w().j().T(c),d);m=ae(a,m,new P(c),I,e,f,g,k)}}),c.children.ka(function(c,d){var I=!Wb(b.w(),c)&&null==d.value;l.Fa(c)||I||(I=oe(I=b.w().j().T(c),d),m=ae(a,m,new P(c),I,e,f,g,k))}),m}function he(a,b,c,d,e,f,g){if(null!=e.xc(c))return b;var k=mc(b.w()),m=b.w();if(null!=d.value){if(c.e()&&m.ga||nc(m,c))return ae(a,b,c,m.j().S(c),e,f,k,g);if(c.e()){var l=qe;return m.j().R(re,function(a,b){l=l.set(new P(a),b)}),de(a,b,c,l,e,f,k,g)}return b}return l=qe,ne(d,function(a){var b=c.o(a);nc(m,b)&&(l=l.set(a,m.j().S(b)))}),de(a,b,c,l,e,f,k,g)}function se(){}function Vd(a){return u(a.compare,a)}function ve(a){O(!a.e()&&".priority"!==K(a),"Can't create PathIndex with empty path or .priority key"),this.gc=a}function xe(){}function ye(){}function ze(){}function Ce(){this.Xb=this.ra=this.Pb=this.oa=this.la=!1,this.ma=0,this.Rb="",this.ic=null,this.Bb="",this.fc=null,this.zb="",this.g=R}function Td(a){return""===a.Rb?a.oa:"l"===a.Rb}function Od(a){return O(a.oa,"Only valid if start has been set"),a.ic}function Nd(a){return O(a.oa,"Only valid if start has been set"),a.Pb?a.Bb:"[MIN_NAME]"}function Rd(a){return O(a.ra,"Only valid if end has been set"),a.fc}function Pd(a){return O(a.ra,"Only valid if end has been set"),a.Xb?a.zb:"[MAX_NAME]"}function Ee(a){var b=new Ce;return b.la=a.la,b.ma=a.ma,b.oa=a.oa,b.ic=a.ic,b.Pb=a.Pb,b.Bb=a.Bb,b.ra=a.ra,b.fc=a.fc,b.Xb=a.Xb,b.zb=a.zb,b.g=a.g,b}function Fe(a,b){var c=Ee(a);return c.g=b,c}function Ge(a){var b={};if(a.oa&&(b.sp=a.ic,a.Pb&&(b.sn=a.Bb)),a.ra&&(b.ep=a.fc,a.Xb&&(b.en=a.zb)),a.la){b.l=a.ma;var c=a.Rb;""===c&&(c=Td(a)?"l":"r"),b.vf=c}return a.g!==R&&(b.i=a.g.toString()),b}function He(a){return!(a.oa||a.ra||a.la)}function Ie(a){return He(a)&&a.g==R}function Je(a){var c,b={};return Ie(a)?b:(a.g===R?c="$priority":a.g===Be?c="$value":a.g===re?c="$key":(O(a.g instanceof ve,"Unrecognized index type!"),c=a.g.toString()),b.orderBy=G(c),a.oa&&(b.startAt=G(a.ic),a.Pb&&(b.startAt+=","+G(a.Bb))),a.ra&&(b.endAt=G(a.fc),a.Xb&&(b.endAt+=","+G(a.zb))),a.la&&(Td(a)?b.limitToFirst=a.ma:b.limitToLast=a.ma),b)}function Ke(a,b){this.Ed=a,this.hc=b}function Le(a,b,c){return new Ke(ma(a.Ed,function(d,f){var g=z(a.hc,f);if(O(g,"Missing index implementation for "+f),d===te){if(g.Lc(b.U)){for(var k=[],m=c.ac(wc),l=Ic(m);l;)l.name!=b.name&&k.push(l),l=Ic(m);return k.push(b),Me(k,Vd(g))}return te}return k=d,(g=c.get(b.name))&&(k=k.remove(new L(b.name,g))),k.Sa(b,b.U)}),a.hc)}function Ne(a,b,c){return new Ke(ma(a.Ed,function(a){if(a===te)return a;var d=c.get(b.name);return d?a.remove(new L(b.name,d)):a}),a.hc)}function Yc(a,b){this.B=a,O(p(this.B)&&null!==this.B,"LeafNode shouldn't be created with null/undefined value."),this.ca=b||H,Pe(this.ca),this.Gb=null}function fe(a,b,c){this.m=a,(this.ca=b)&&Pe(this.ca),a.e()&&O(!this.ca||this.ca.e(),"An empty node cannot have a priority"),this.Ab=c,this.Gb=null}function Wd(a,b){var c;return(c=(c=Te(a,b))?(c=c.Vc())&&c.name:a.m.Vc())?new L(c,a.m.get(c)):null}function Xd(a,b){var c;return(c=(c=Te(a,b))?(c=c.jc())&&c.name:a.m.jc())?new L(c,a.m.get(c)):null}function Te(a,b){return b===re?null:a.Ab.get(b.toString())}function Q(a,b){if(null===a)return H;var c=null;if("object"==typeof a&&".priority"in a?c=a[".priority"]:void 0!==b&&(c=b),O(null===c||"string"==typeof c||"number"==typeof c||"object"==typeof c&&".sv"in c,"Invalid priority type found: "+typeof c),"object"==typeof a&&".value"in a&&null!==a[".value"]&&(a=a[".value"]),"object"!=typeof a||".sv"in a)return new Yc(a,Q(c));if(a instanceof Array){var d=H,e=a;return v(e,function(a,b){if(y(e,b)&&"."!==b.substring(0,1)){var c=Q(a);!c.L()&&c.e()||(d=d.W(b,c))}}),d.ia(Q(c))}var f=[],g=!1,k=a;if(Fb(k,function(a){if("string"!=typeof a||"."!==a.substring(0,1)){var b=Q(k[a]);b.e()||(g=g||!b.C().e(),f.push(new L(a,b)))}}),0==f.length)return H;var m=Me(f,xc,function(a){return a.name},zc);if(g){var l=Me(f,Vd(R));return new fe(m,Q(c),new Ke({".priority":l},{".priority":R}))}return new fe(m,Q(c),Oe)}function Ve(a){this.count=parseInt(Math.log(a+1)/Ue,10),this.nf=this.count-1,this.ng=a+1&parseInt(Array(this.count+1).join("1"),2)}function We(a){var b=!(a.ng&1<<a.nf);return a.nf--,b}function Me(a,b,c,d){function e(b,d){if(0==(f=d-b))return null;if(1==f){var l=a[b];return new Kc(c?c(l):l,l.U,!1,null,null)}var f=e(b,l=parseInt(f/2,10)+b),A=e(l+1,d);l=a[l];return new Kc(c?c(l):l,l.U,!1,f,A)}a.sort(b);var f=function(b){function d(b,g){var k=t-b,A=t;t-=b;A=e(k+1,A),k=a[k],A=new Kc(c?c(k):k,k.U,g,null,A);f?f.left=A:l=A,f=A}for(var f=null,l=null,t=a.length,A=0;A<b.count;++A){var I=We(b),Qd=Math.pow(2,b.count-(A+1));I?d(Qd,!1):(d(Qd,!1),d(Qd,!0))}return l}(new Ve(a.length));return null!==f?new Ec(d||b,f):new Ec(d||b)}function Re(a){return"number"==typeof a?"number:"+Ad(a):"string:"+a}function Pe(a){if(a.L()){var b=a.J();O("string"==typeof b||"number"==typeof b||"object"==typeof b&&y(b,".sv"),"Priority must be a string or number.")}else O(a===we||a.e(),"priority of unexpected type.");O(a===we||a.C().e(),"Priority nodes can't have a priority of their own.")}function Xe(){fe.call(this,new Ec(zc),H,Oe)}function je(a,b){this.Q=a,this.ae=b}function ge(a,b,c,d){return new je(new Xb(b,c,d),a.ae)}function ke(a){return a.Q.ga?a.Q.j():null}function Yb(a){return a.ae.ga?a.ae.j():null}function Ye(a,b){this.Y=a;var d=new Ld((c=a.n).g),c=He(c)?new Ld(c.g):c.la?new Sd(c):new Md(c);this.Nf=new Zd(c);var e=b.w(),f=b.Q,g=d.ya(H,e.j(),null),k=c.ya(H,f.j(),null);this.Oa=new je(new Xb(k,f.ga,c.Ra()),new Xb(g,e.ga,d.Ra())),this.$a=[],this.ug=new Fd(a)}function Ze(a){return a.Y}function af(a,b){var c=a.Oa.Q,d=[];return c.j().L()||c.j().R(R,function(a,b){d.push(new J("child_added",b,a))}),c.ga&&d.push(hc(c.j())),$e(a,d,c.j(),b)}function $e(a,b,c,d){return Gd(a.ug,b,c,d?[d]:a.$a)}function bf(a,b,c){this.type=be,this.source=a,this.path=b,this.children=c}function cf(a,b){this.f=pd("p:rest:"),this.G=a,this.Kb=b,this.Ca=null,this.ba={}}function df(a,b){return p(b)?"tag$"+b:(O(Ie(a.n),"should have a tag if it's not a default query."),a.path.toString())}function ef(a,b,c,d){(c=c||{}).format="export",a.Ca&&(c.auth=a.Ca);var e=(a.G.ob?"https://":"http://")+a.G.host+b+"?"+Ib(c);a.f("Sending REST request for "+e);var f=new XMLHttpRequest;f.onreadystatechange=function(){if(d&&4===f.readyState){a.f("REST Response for "+e+" received. status:",f.status,"response:",f.responseText);var b=null;if(200<=f.status&&300>f.status){try{b=Rb(f.responseText)}catch(c){S("Failed to parse JSON response for "+e+": "+f.responseText)}d(null,b)}else 401!==f.status&&404!==f.status&&S("Got unsuccessful REST response for "+e+" Status: "+f.status),d(f.status);d=null}},f.open("GET",e,!0),f.send()}function ff(a){O(da(a)&&0<a.length,"Requires a non-empty array"),this.fg=a,this.Rc={}}function gf(a,b){O(Ra(a.fg,function(a){return a===b}),"Unknown event: "+b)}function jf(){if(ff.call(this,["online"]),this.oc=!0,"undefined"!=typeof window&&"undefined"!=typeof window.addEventListener){var a=this
;window.addEventListener("online",function(){a.oc||(a.oc=!0,a.ie("online",!0))},!1),window.addEventListener("offline",function(){a.oc&&(a.oc=!1,a.ie("online",!1))},!1)}}function kf(){var a,b;if(ff.call(this,["visible"]),"undefined"!=typeof document&&"undefined"!=typeof document.addEventListener&&("undefined"!=typeof document.hidden?(b="visibilitychange",a="hidden"):"undefined"!=typeof document.mozHidden?(b="mozvisibilitychange",a="mozHidden"):"undefined"!=typeof document.msHidden?(b="msvisibilitychange",a="msHidden"):"undefined"!=typeof document.webkitHidden&&(b="webkitvisibilitychange",a="webkitHidden")),this.Sb=!0,b){var c=this;document.addEventListener(b,function(){var b=!document[a];b!==c.Sb&&(c.Sb=b,c.ie("visible",b))},!1)}}function P(a,b){if(1==arguments.length){this.u=a.split("/");for(var c=0,d=0;d<this.u.length;d++)0<this.u[d].length&&(this.u[c]=this.u[d],c++);this.u.length=c,this.aa=0}else this.u=a,this.aa=b}function lf(a,b){var c=K(a);if(null===c)return b;if(c===K(b))return lf(N(a),N(b));throw Error("INTERNAL ERROR: innerPath ("+b+") is not within outerPath ("+a+")")}function mf(a,b){for(var c=a.slice(),d=b.slice(),e=0;e<c.length&&e<d.length;e++){var f=yc(c[e],d[e]);if(0!==f)return f}return c.length===d.length?0:c.length<d.length?-1:1}function K(a){return a.aa>=a.u.length?null:a.u[a.aa]}function le(a){return a.u.length-a.aa}function N(a){var b=a.aa;return b<a.u.length&&b++,new P(a.u,b)}function me(a){return a.aa<a.u.length?a.u[a.u.length-1]:null}function nf(a,b){this.Ua=a.slice(),this.Ka=Math.max(1,this.Ua.length),this.pf=b;for(var c=0;c<this.Ua.length;c++)this.Ka+=Pb(this.Ua[c]);of(this)}function of(a){if(768<a.Ka)throw Error(a.pf+"has a key path longer than 768 bytes ("+a.Ka+").");if(32<a.Ua.length)throw Error(a.pf+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+pf(a))}function pf(a){return 0==a.Ua.length?"":"in property '"+a.Ua.join(".")+"'"}function qf(a,b){this.value=a,this.children=b||rf}function sf(a){var b=qe;return v(a,function(a,d){b=b.set(new P(d),a)}),b}function tf(a,b,c){if(null!=a.value&&c(a.value))return{path:M,value:a.value};if(b.e())return null;var d=K(b);return null!==(a=a.children.get(d))?null!=(b=tf(a,N(b),c))?{path:new P(d).o(b.path),value:b.value}:null:null}function uf(a,b){return tf(a,b,function(){return!0})}function pe(a,b,c){if(b.e())return c;var d=K(b);return d=(b=pe(a.children.get(d)||qe,N(b),c)).e()?a.children.remove(d):a.children.Sa(d,b),new qf(a.value,d)}function vf(a,b){return wf(a,M,b)}function wf(a,b,c){var d={};return a.children.ka(function(a,f){d[a]=wf(f,b.o(a),c)}),c(b,a.value,d)}function xf(a,b,c){return yf(a,b,M,c)}function yf(a,b,c,d){var e=!!a.value&&d(c,a.value);return e||(b.e()?null:(e=K(b),(a=a.children.get(e))?yf(a,N(b),c.o(e),d):null))}function zf(a,b,c){Af(a,b,M,c)}function Af(a,b,c,d){if(b.e())return a;a.value&&d(c,a.value);var e=K(b);return(a=a.children.get(e))?Af(a,N(b),c.o(e),d):qe}function ne(a,b){Bf(a,M,b)}function Bf(a,b,c){a.children.ka(function(a,e){Bf(e,b.o(a),c)}),a.value&&c(b,a.value)}function Cf(a,b){a.children.ka(function(a,d){d.value&&b(a,d.value)})}function Df(a,b,c){this.type=ee,this.source=Ef,this.path=a,this.Ub=b,this.Yd=c}function Ff(a,b,c,d){this.Ae=a,this.tf=b,this.Lb=c,this.ef=d,O(!d||b,"Tagged queries must be from server.")}function Hf(a){this.Z=a}function Jf(a,b,c){if(b.e())return new Hf(new qf(c));if(null!=(d=uf(a.Z,b))){var e=d.path,d=d.value;return b=lf(e,b),d=d.H(b,c),new Hf(a.Z.set(e,d))}return new Hf(a=pe(a.Z,b,new qf(c)))}function Kf(a,b,c){var d=a;return Fb(c,function(a,c){d=Jf(d,b.o(a),c)}),d}function Lf(a,b){var c=uf(a.Z,b);return null!=c?a.Z.get(c.path).S(lf(c.path,b)):null}function Mf(a){var b=[],c=a.Z.value;return null!=c?c.L()||c.R(R,function(a,c){b.push(new L(a,c))}):a.Z.children.ka(function(a,c){null!=c.value&&b.push(new L(a,c.value))}),b}function Nf(a,b){if(b.e())return a;var c=Lf(a,b);return new Hf(null!=c?new qf(c):a.Z.subtree(b))}function Of(a,b,c){if(null!=b.value)return c.H(a,b.value);var d=null;return b.children.ka(function(b,f){".priority"===b?(O(null!==f.value,"Priority writes must always be leaf nodes"),d=f.value):c=Of(a.o(b),f,c)}),c.S(a).e()||null===d||(c=c.H(a.o(".priority"),d)),c}function Pf(){this.V=If,this.pa=[],this.Pc=-1}function Qf(a,b){for(var c=0;c<a.pa.length;c++){var d=a.pa[c];if(d.md===b)return d}return null}function Rf(a,b){return a.Ja?a.path.contains(b):!!ta(a.children,function(c,d){return a.path.o(d).contains(b)})}function Tf(a){return a.visible}function Sf(a,b,c){for(var d=If,e=0;e<a.length;++e){var f=a[e];if(b(f)){var g=f.path;if(f.Ja)c.contains(g)?d=Jf(d,g=lf(c,g),f.Ja):g.contains(c)&&(g=lf(g,c),d=Jf(d,M,f.Ja.S(g)));else{if(!f.children)throw jd("WriteRecord should have .snap or .children");c.contains(g)?d=Kf(d,g=lf(c,g),f.children):g.contains(c)&&((g=lf(g,c)).e()?d=Kf(d,M,f.children):(f=z(f.children,K(g)))&&(f=f.S(N(g)),d=Jf(d,M,f)))}}}return d}function Uf(a,b){this.Qb=a,this.Z=b}function Vf(){this.children={},this.pd=0,this.value=null}function Wf(a,b,c){this.Jd=a||"",this.Ha=b||null,this.A=c||new Vf}function Xf(a,b){for(var e,c=b instanceof P?b:new P(b),d=a;null!==(e=K(c));)d=new Wf(e,d,z(d.A.children,e)||new Vf),c=N(c);return d}function Yf(a,b){O(void 0!==b,"Cannot set value to undefined"),a.A.value=b,Zf(a)}function $f(a,b,c,d){c&&!d&&b(a),a.R(function(a){$f(a,b,!0,d)}),c&&d&&b(a)}function ag(a,b){for(var c=a.parent();null!==c&&!b(c);)c=c.parent()}function Zf(a){if(null!==a.Ha){var b=a.Ha,c=a.Jd,d=a.e(),e=y(b.A.children,c);d&&e?(delete b.A.children[c],b.A.pd--,Zf(b)):d||e||(b.A.children[c]=a.A,b.A.pd++,Zf(b))}}function eg(a){return q(a)&&0!==a.length&&!bg.test(a)}function fg(a){return null===a||q(a)||fa(a)&&!td(a)||ga(a)&&y(a,".sv")}function gg(a,b,c,d){d&&!p(b)||hg(E(a,1,d),b,c)}function hg(a,b,c){if(c instanceof P&&(c=new nf(c,a)),!p(b))throw Error(a+"contains undefined "+pf(c));if(r(b))throw Error(a+"contains a function "+pf(c)+" with contents: "+b.toString());if(td(b))throw Error(a+"contains "+b.toString()+" "+pf(c));if(q(b)&&b.length>10485760/3&&10485760<Pb(b))throw Error(a+"contains a string greater than 10485760 utf8 bytes "+pf(c)+" ('"+b.substring(0,50)+"...')");if(ga(b)){var d=!1,e=!1;if(Fb(b,function(b,g){if(".value"===b)d=!0;else if(".priority"!==b&&".sv"!==b&&(e=!0,!eg(b)))throw Error(a+" contains an invalid key ("+b+") "+pf(c)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');c.push(b),hg(a,g,c),c.pop()}),d&&e)throw Error(a+' contains ".value" child '+pf(c)+" in addition to actual children.")}}function ig(a,b){var c,d;for(c=0;c<b.length;c++)for(var e=(d=b[c]).slice(),f=0;f<e.length;f++)if((".priority"!==e[f]||f!==e.length-1)&&!eg(e[f]))throw Error(a+"contains an invalid key ("+e[f]+") in path "+d.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');for(b.sort(mf),e=null,c=0;c<b.length;c++){if(d=b[c],null!==e&&e.contains(d))throw Error(a+"contains a path "+e.toString()+" that is ancestor of another path "+d.toString());e=d}}function jg(a,b,c){var d=E(a,1,!1);if(!ga(b)||da(b))throw Error(d+" must be an object containing the children to replace.");var e=[];Fb(b,function(a,b){var k=new P(a);if(hg(d,b,c.o(k)),".priority"===me(k)&&!fg(b))throw Error(d+"contains an invalid value for '"+k.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");e.push(k)}),ig(d,e)}function kg(a,b,c){if(td(c))throw Error(E(a,b,!1)+"is "+c.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!fg(c))throw Error(E(a,b,!1)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}function lg(a,b,c){if(!c||p(b))switch(b){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw Error(E(a,1,c)+'must be a valid event type: "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}function mg(a,b){if(p(b)&&!eg(b))throw Error(E(a,2,!0)+'was an invalid key: "'+b+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')}function ng(a,b){if(!q(b)||0===b.length||cg.test(b))throw Error(E(a,1,!1)+'was an invalid path: "'+b+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')}function og(a,b){if(".info"===K(b))throw Error(a+" failed: Can't modify data under /.info/")}function pg(a,b){if(!q(b))throw Error(E(a,1,!1)+"must be a valid credential (a string).")}function qg(a,b,c){if(!q(c))throw Error(E(a,b,!1)+"must be a valid string.")}function rg(a,b){if(qg(a,1,b),!dg.test(b))throw Error(E(a,1,!1)+"'"+b+"' is not a valid authentication provider.")}function sg(a,b,c,d){if((!d||p(c))&&(!ga(c)||null===c))throw Error(E(a,b,d)+"must be a valid object.")}function tg(a,b,c){if(!ga(b)||!y(b,c))throw Error(E(a,1,!1)+'must contain the key "'+c+'"');if(!q(z(b,c)))throw Error(E(a,1,!1)+'must contain the key "'+c+'" with type "string"')}function ug(){this.set={}}function vg(a,b){v(a.set,function(a,d){b(d,a)})}function Vc(){this.m=this.B=null}function wg(a,b){if(b.e())return a.B=null,a.m=null,!0;if(null!==a.B){if(a.B.L())return!1;var c=a.B;return a.B=null,c.R(R,function(b,c){a.rc(new P(b),c)}),wg(a,b)}return null===a.m||(c=K(b),b=N(b),a.m.contains(c)&&wg(a.m.get(c),b)&&a.m.remove(c),!!a.m.e()&&(a.m=null,!0))}function Wc(a,b,c){null!==a.B?c(b,a.B):a.R(function(a,e){Wc(e,new P(b.toString()+"/"+a),c)})}function yg(a,b,c){this.qd=a||{},this.he=b||{},this.fb=c||{},this.qd.remember||(this.qd.remember="default")}function Ag(a){var b={},c={};return Fb(a||{},function(a,e){0<=La(zg,a)?b[a]=e:c[a]=e}),new yg(b,{},c)}function Bg(a,b){this.Ue=["session",a.Rd,a.lc].join(":"),this.ee=b}function Cg(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Dg(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Cg())}function Eg(){return"undefined"!=typeof location&&/^file:\//.test(location.href)}function Fg(a){var b=Cg();if(""===b)return!1;if("Microsoft Internet Explorer"===navigator.appName){if((b=b.match(/MSIE ([0-9]{1,}[\.0-9]{0,})/))&&1<b.length)return parseFloat(b[1])>=a}else if(-1<b.indexOf("Trident")&&(b=b.match(/rv:([0-9]{2,2}[\.0-9]{0,})/))&&1<b.length)return parseFloat(b[1])>=a;return!1}function Gg(){var b,a=window.opener.frames;for(b=a.length-1;0<=b;b--)try{if(a[b].location.protocol===window.location.protocol&&a[b].location.host===window.location.host&&"__winchan_relay_frame"===a[b].name)return a[b]}catch(c){}return null}function Hg(a,b,c){a.attachEvent?a.attachEvent("on"+b,c):a.addEventListener&&a.addEventListener(b,c,!1)}function Ig(a,b,c){a.detachEvent?a.detachEvent("on"+b,c):a.removeEventListener&&a.removeEventListener(b,c,!1)}function Jg(a){/^https?:\/\//.test(a)||(a=window.location.href);var b=/^(https?:\/\/[\-_a-zA-Z\.0-9:]+)/.exec(a);return b?b[1]:a}function Kg(a){var b="";try{var c=Jb(a=a.replace(/.*\?/,""));c&&y(c,"__firebase_request_key")&&(b=z(c,"__firebase_request_key"))}catch(d){}return b}function Lg(){try{var a=(a=(a=document.location.hash.replace(/&__firebase_request_key=([a-zA-z0-9]*)/,"")).replace(/\?$/,"")).replace(/^#+$/,"");document.location.hash=a}catch(b){}}function Mg(){var a=sd(xg);return a.scheme+"://"+a.host+"/v2"}function Ng(a){return Mg()+"/"+a+"/auth/channel"}function Og(a){var b=this;if(this.hb=a,this.fe="*",Fg(8)?this.Uc=this.Cd=Gg():(this.Uc=window.opener,this.Cd=window),!b.Uc)throw"Unable to find relay frame";Hg(this.Cd,"message",u(this.nc,this)),Hg(this.Cd,"message",u(this.Ff,this));try{Pg(this,{a:"ready"})}catch(c){Hg(this.Uc,"load",function(){Pg(b,{a:"ready"})})}Hg(window,"unload",u(this.Ng,this))}function Pg(a,b){b=G(b),Fg(8)?a.Uc.doPost(b,a.fe):a.Uc.postMessage(b,a.fe)}function Qg(a){this.tc=Fa()+Fa()+Fa(),this.Kf=a}function Sg(a){var b=Error(z(Rg,a),a);return b.code=a,b}function Tg(a){var b;(b=!a.window_features)||(b=-1!==(b=Cg()).indexOf("Fennec/")||-1!==b.indexOf("Firefox/")&&-1!==b.indexOf("Android")),b&&(a.window_features=void 0),a.window_name||(a.window_name="_blank"),this.options=a}function Ug(a){a.method||(a.method="GET"),a.headers||(a.headers={}),a.headers.content_type||(a.headers.content_type="application/json"),a.headers.content_type=a.headers.content_type.toLowerCase(),this.options=a}function Vg(a){this.tc=Fa()+Fa()+Fa(),this.Kf=a}function Wg(a){a.callback_parameter||(a.callback_parameter="callback"),this.options=a,window.__firebase_auth_jsonp=window.__firebase_auth_jsonp||{}}function Xg(a,b,c){setTimeout(function(){try{var d=document.createElement("script");d.type="text/javascript",d.id=a,d.async=!0,d.src=b,d.onerror=function(){var b=document.getElementById(a);null!==b&&b.parentNode.removeChild(b),c&&c(Sg("NETWORK_ERROR"))};var e=document.getElementsByTagName("head");(e&&0!=e.length?e[0]:document.documentElement).appendChild(d)}catch(f){c&&c(Sg("NETWORK_ERROR"))}},0)}function Yg(a,b,c,d){ff.call(this,["auth_status"]),this.G=a,this.hf=b,this.ih=c,this.Pe=d,this.wc=new Bg(a,[bd,cd]),this.qb=null,this.We=!1,Zg(this)}function Zg(a){cd.get("redirect_request_id")&&$g(a);var b=a.wc.get();b&&b.token?(ah(a,b),a.hf(b.token,function(c,d){bh(a,c,d,!1,b.token,b)},function(b,d){ch(a,"resumeSession()",b,d)})):ah(a,null)}function dh(a,b,c,d,e,f){"firebaseio-demo.com"===a.G.domain&&S("Firebase authentication is not supported on demo Firebases (*.firebaseio-demo.com). To secure your Firebase, create a production Firebase at https://www.firebase.com."),a.hf(b,function(f,k){bh(a,f,k,!0,b,c,d||{},e)},function(b,c){ch(a,"auth()",b,c,f)})}function eh(a,b){a.wc.clear(),ah(a,null),a.ih(function(a,d){if("ok"===a)T(b,null);else{var e=(a||"error").toUpperCase(),f=e;d&&(f+=": "+d),(f=Error(f)).code=e,T(b,f)}})}function bh(a,b,c,d,e,f,g,k){"ok"===b?(d&&(b=c.auth,f.auth=b,f.expires=c.expires,f.token=Ed(e)?e:"",c=null,b&&y(b,"uid")?c=z(b,"uid"):y(f,"uid")&&(c=z(f,"uid")),f.uid=c,c="custom",b&&y(b,"provider")?c=z(b,"provider"):y(f,"provider")&&(c=z(f,"provider")),f.provider=c,a.wc.clear(),Ed(e)&&(c=bd,"sessionOnly"===(g=g||{}).remember&&(c=cd),"none"!==g.remember&&a.wc.set(f,c)),ah(a,f)),T(k,null,f)):(a.wc.clear(),ah(a,null),f=a=(b||"error").toUpperCase(),c&&(f+=": "+c),(f=Error(f)).code=a,T(k,f))}function ch(a,b,c,d,e){S(b+" was canceled: "+d),a.wc.clear(),ah(a,null),(a=Error(d)).code=c.toUpperCase(),T(e,a)}function fh(a,b,c,d,e){gh(a),hh(a,[Ug,Wg],"/auth/"+b,c=new yg(d||{},{},c||{}),e)}function ih(a,b,c,d){gh(a);var e=[Tg,Vg];c=Ag(c);var f=625;"anonymous"===b||"password"===b?setTimeout(function(){T(d,Sg("TRANSPORT_UNAVAILABLE"))},0):("github"===b&&(f=1025),c.he.window_features="menubar=yes,modal=yes,alwaysRaised=yeslocation=yes,resizable=yes,scrollbars=yes,status=yes,height=625,width="+f+",top="+("object"==typeof screen?.5*(screen.height-625):0)+",left="+("object"==typeof screen?.5*(screen.width-f):0),c.he.relay_url=Ng(a.G.lc),c.he.requestWithCredential=u(a.uc,a),hh(a,e,"/auth/"+b,c,d))}function $g(a){if(b=cd.get("redirect_request_id")){var c=cd.get("redirect_client_options");cd.remove("redirect_request_id"),cd.remove("redirect_client_options");var b,d=[Ug,Wg];c=new yg(c,{},b={requestId:b,requestKey:Kg(document.location.hash)});a.We=!0,Lg(),hh(a,d,"/auth/session",c,function(){this.We=!1}.bind(a))}}function hh(a,b,c,d,e){jh(a,b,c,d,function(b,c){!b&&c&&c.token&&c.uid?dh(a,c.token,c,d.qd,function(a,b){a?T(e,a):T(e,null,b)}):T(e,b||Sg("UNKNOWN_ERROR"))})}function jh(a,b,c,d,e){0===(b=Na(b,function(a){return"function"==typeof a.isAvailable&&a.isAvailable()})).length?setTimeout(function(){T(e,Sg("TRANSPORT_UNAVAILABLE"))},0):(b=new(b.shift())(d.he),(d=Gb(d.fb)).v="js-"+Eb,d.transport=b.Fc(),d.suppress_status_codes=!0,a=Mg()+"/"+a.G.lc+c,b.open(a,d,function(a,b){if(a)T(e,a);else if(b&&b.error){var c=Error(b.error.message);c.code=b.error.code,c.details=b.error.details,T(e,c)}else T(e,null,b)}))}function ah(a,b){var c=null!==a.qb||null!==b;a.qb=b,c&&a.ie("auth_status",b),a.Pe(null!==b)}function gh(a){var b=a.G;if("firebaseio.com"!==b.domain&&"firebaseio-demo.com"!==b.domain&&"auth.firebase.com"===xg)throw Error("This custom Firebase server ('"+a.G.domain+"') does not support delegated login.")}function kh(a){this.nc=a,this.Qd=[],this.Wb=0,this.te=-1,this.Jb=null}function lh(a,b,c){a.te=b,a.Jb=c,a.te<a.Wb&&(a.Jb(),a.Jb=null)}function mh(a,b,c){for(a.Qd[b]=c;a.Qd[a.Wb];){var d=a.Qd[a.Wb];delete a.Qd[a.Wb];for(var e=0;e<d.length;++e)if(d[e]){var f=a;gc(function(){f.nc(d[e])})}if(a.Wb===a.te){a.Jb&&(clearTimeout(a.Jb),a.Jb(),a.Jb=null);break}a.Wb++}}function nh(a,b,c,d){this.ue=a,this.f=pd(a),this.rb=this.sb=0,this.Xa=uc(b),this.Xf=c,this.Kc=!1,this.Fb=d,this.ld=function(a){return fd(b,hd,a)}}function rh(a,b){var c=G(b).length;a.rb+=c,rc(a.Xa,"bytes_received",c)}function qh(a,b,c,d){if(this.ld=d,this.lb=c,this.Te=new ug,this.cd=[],this.we=Math.floor(1e8*Math.random()),this.$d=!0,this.ke=id(),window["pLPCommand"+this.ke]=a,window["pRTLPCB"+this.ke]=b,(a=document.createElement("iframe")).style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(a);try{a.contentWindow.document||fc("No IE domain setting required")}catch(e){a.src="javascript:void((function(){document.open();document.domain='"+document.domain+"';document.close();})())"}a.contentDocument?a.jb=a.contentDocument:a.contentWindow?a.jb=a.contentWindow.document:a.document&&(a.jb=a.document),this.Ga=a,a="",this.Ga.src&&"javascript:"===this.Ga.src.substr(0,11)&&(a='<script>document.domain="'+document.domain+'";</script>'),a="<html><body>"+a+"</body></html>";try{this.Ga.jb.open(),this.Ga.jb.write(a),this.Ga.jb.close()}catch(f){fc("frame writing exception"),f.stack&&fc(f.stack),fc(f)}}function th(a){if(a.oe&&a.$d&&a.Te.count()<(0<a.cd.length?2:1)){a.we++,(b={}).id=a.Gg,b.pw=a.Hg,b.ser=a.we;for(var b=a.ld(b),c="",d=0;0<a.cd.length&&1870>=a.cd[0].of.length+30+c.length;){var e=a.cd.shift();c=c+"&seg"+d+"="+e.Yg+"&ts"+d+"="+e.hh+"&d"+d+"="+e.of;d++}return uh(a,b+c,a.we),!0}return!1}function uh(a,b,c){function d(){a.Te.remove(c),th(a)}a.Te.add(c,1);var e=setTimeout(d,Math.floor(25e3));sh(a,b,function(){clearTimeout(e),d()})}function sh(a,b,c){setTimeout(function(){try{if(a.$d){var d=a.Ga.jb.createElement("script");d.type="text/javascript",d.async=!0,d.src=b,d.onload=d.onreadystatechange=function(){var a=d.readyState;a&&"loaded"!==a&&"complete"!==a||(d.onload=d.onreadystatechange=null,d.parentNode&&d.parentNode.removeChild(d),c())},d.onerror=function(){fc("Long-poll script failed to load: "+b),a.$d=!1,a.close()},a.Ga.jb.body.appendChild(d)}}catch(e){}},Math.floor(1))}function wh(a,b,c,d){this.ue=a,this.f=pd(this.ue),this.frames=this.Nc=null,this.rb=this.sb=this.ff=0,this.Xa=uc(b),a={v:"5"},"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf("firebaseio.com")&&(a.r="f"),c&&(a.s=c),d&&(a.ls=d),this.jf=fd(b,gd,a)}function zh(a,b){if(a.frames.push(b),a.frames.length==a.ff){var c=a.frames.join("");a.frames=null,c=Rb(c),a.Lg(c)}}function yh(a){clearInterval(a.Nc),a.Nc=setInterval(function(){a.La&&Ah(a,"0"),yh(a)},Math.floor(45e3))}function Ah(a,b){try{a.La.send(b)}catch(c){a.f("Exception thrown from WebSocket.send():",c.message||c.data,"Closing connection."),setTimeout(u(a.bb,a),0)}}function Bh(a){Ch(this,a)}function Ch(a,b){var c=wh&&wh.isAvailable(),d=c&&!(bd.Af||!0===bd.get("previous_websocket_failure"));if(b.jh&&(c||S("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),d=!0),d)a.jd=[wh];else{var e=a.jd=[];zd(Dh,function(a,b){b&&b.isAvailable()&&e.push(b)})}}function Eh(a){if(0<a.jd.length)return a.jd[0];throw Error("No transports available")}function Fh(a,b,c,d,e,f,g){this.id=a,this.f=pd("c:"+this.id+":"),this.nc=c,this.Zc=d,this.na=e,this.Re=f,this.G=b,this.Pd=[],this.kf=0,this.Wf=new Bh(b),this.N=0,this.Fb=g,this.f("Connection created"),Gh(this)}function Gh(a){var b=Eh(a.Wf);a.K=new b("c:"+a.id+":"+a.kf++,a.G,void 0,a.Fb),a.Ve=b.responsesRequiredToBeHealthy||0;var c=Hh(a,a.K),d=Ih(a,a.K);a.kd=a.K,a.ed=a.K,a.F=null,a.Eb=!1,setTimeout(function(){a.K&&a.K.open(c,d)},Math.floor(0)),0<(b=b.healthyTimeout||0)&&(a.Bd=setTimeout(function(){a.Bd=null,a.Eb||(a.K&&102400<a.K.rb?(a.f("Connection exceeded healthy timeout but has received "+a.K.rb+" bytes.  Marking connection healthy."),a.Eb=!0,a.K.Hd()):a.K&&10240<a.K.sb?a.f("Connection exceeded healthy timeout but has sent "+a.K.sb+" bytes.  Leaving connection alive."):(a.f("Closing unhealthy connection after timeout."),a.close()))},Math.floor(b)))}function Ih(a,b){return function(c){b===a.K?(a.K=null,c||0!==a.N?1===a.N&&a.f("Realtime connection lost."):(a.f("Realtime connection failed."),"s-"===a.G.ab.substr(0,2)&&(bd.remove("host:"+a.G.host),a.G.ab=a.G.host)),a.close()):b===a.F?(a.f("Secondary connection lost."),c=a.F,a.F=null,a.kd!==c&&a.ed!==c||a.close()):a.f("closing an old connection")}}function Hh(a,b){return function(c){if(2!=a.N)if(b===a.ed){var d=wd("t",c);if(c=wd("d",c),"c"==d){if(d=wd("t",c),"d"in c)if(c=c.d,"h"===d){d=c.ts;var e=c.v,f=c.h;a.Uf=c.s,ed(a.G,f),0==a.N&&(a.K.start(),Jh(a,a.K,d),"5"!==e&&S("Protocol version mismatch detected"),(c=1<(c=a.Wf).jd.length?c.jd[1]:null)&&Kh(a,c))}else if("n"===d){for(a.f("recvd end transmission on primary"),a.ed=a.F,c=0;c<a.Pd.length;++c)a.Ld(a.Pd[c]);a.Pd=[],Lh(a)}else"s"===d?(a.f("Connection shutdown command received. Shutting down..."),a.Re&&(a.Re(c),a.Re=null),a.na=null,a.close()):"r"===d?(a.f("Reset packet received.  New host: "+c),ed(a.G,c),1===a.N?a.close():(Mh(a),Gh(a))):"e"===d?qd("Server Error: "+c):"o"===d?(a.f("got pong on primary."),Nh(a),Oh(a)):qd("Unknown control packet command: "+d)}else"d"==d&&a.Ld(c)}else if(b===a.F)if(d=wd("t",c),c=wd("d",c),"c"==d)"t"in c&&("a"===(c=c.t)?Ph(a):"r"===c?(a.f("Got a reset on secondary, closing it"),a.F.close(),a.kd!==a.F&&a.ed!==a.F||a.close()):"o"===c&&(a.f("got pong on secondary."),a.Tf--,Ph(a)));else{if("d"!=d)throw Error("Unknown protocol layer: "+d);a.Pd.push(c)}else a.f("message on old connection")}}function Lh(a){a.kd===a.F&&a.ed===a.F&&(a.f("cleaning up and promoting a connection: "+a.F.ue),a.K=a.F,a.F=null)}function Ph(a){0>=a.Tf?(a.f("Secondary connection is healthy."),a.Eb=!0,a.F.Hd(),a.F.start(),a.f("sending client ack on secondary"),a.F.send({t:"c",d:{t:"a",d:{}}}),a.f("Ending transmission on primary"),a.K.send({t:"c",d:{t:"n",d:{}}}),a.kd=a.F,Lh(a)):(a.f("sending ping on secondary."),a.F.send({t:"c",d:{t:"p",d:{}}}))}function Nh(a){a.Eb||(a.Ve--,0>=a.Ve&&(a.f("Primary connection is healthy."),a.Eb=!0,a.K.Hd()))}function Kh(a,b){a.F=new b("c:"+a.id+":"+a.kf++,a.G,a.Uf),a.Tf=b.responsesRequiredToBeHealthy||0,a.F.open(Hh(a,a.F),Ih(a,a.F)),setTimeout(function(){a.F&&(a.f("Timed out trying to upgrade."),a.F.close())},Math.floor(6e4))}function Jh(a,b,c){a.f("Realtime connection established."),a.K=b,a.N=1,a.Zc&&(a.Zc(c,a.Uf),a.Zc=null),0===a.Ve?(a.f("Primary connection is healthy."),a.Eb=!0):setTimeout(function(){Oh(a)},Math.floor(5e3))}function Oh(a){a.Eb||1!==a.N||(a.f("sending ping on primary."),Qh(a,{t:"c",d:{t:"p",d:{}}}))}function Qh(a,b){if(1!==a.N)throw"Connection is not connected";a.kd.send(b)}function Mh(a){a.f("Shutting down all connections"),a.K&&(a.K.close(),a.K=null),a.F&&(a.F.close(),a.F=null),a.Bd&&(clearTimeout(a.Bd),a.Bd=null)}function Rh(a,b,c,d){this.id=Sh++,this.f=pd("p:"+this.id+":"),this.Bf=this.Ie=!1,this.ba={},this.sa=[],this.ad=0,this.Yc=[],this.qa=!1,this.eb=1e3,this.Id=3e5,this.Kb=b,this.Xc=c,this.Se=d,this.G=a,this.wb=this.Ca=this.Ma=this.Fb=this.$e=null,this.Sb=!1,this.Wd={},this.Xg=0,this.rf=!0,this.Oc=this.Ke=null,Th(this,0),kf.yb().Ib("visible",this.Og,this),-1===a.host.indexOf("fblocal")&&jf.yb().Ib("online",this.Mg,this)}function Vh(a,b){var c=b.Ug,d=c.path.toString(),e=c.wa();a.f("Listen on "+d+" for "+e);var f={p:d};b.tag&&(f.q=Ge(c.n),f.t=b.tag),f.h=b.Ad(),a.Ia("q",f,function(f){var k=f.d,m=f.s;if(k&&"object"==typeof k&&y(k,"w")){var l=z(k,"w");da(l)&&0<=La(l,"no_index")&&S('Using an unspecified index. Consider adding ".indexOn": "'+c.n.g.toString()+'" at '+c.path.toString()+" to your security rules for better performance")}(a.ba[d]&&a.ba[d][e])===b&&(a.f("listen response",f),"ok"!==m&&Wh(a,d,e),b.I&&b.I(m,k))})}function Xh(a){var b=a.Ca;a.qa&&b&&a.Ia("auth",{cred:b.rg},function(c){var d=c.s;c=c.d||"error","ok"!==d&&a.Ca===b&&(a.Ca=null),b.sf?"ok"!==d&&b.od&&b.od(d,c):(b.sf=!0,b.Dc&&b.Dc(d,c))})}function Yh(a,b,c,d,e){c={p:c,d:d},a.f("onDisconnect "+b,c),a.Ia(b,c,function(a){e&&setTimeout(function(){e(a.s,a.d)},Math.floor(0))})}function Zh(a,b,c,d,e,f){d={p:c,d:d},p(f)&&(d.h=f),a.sa.push({action:b,Pf:d,I:e}),a.ad++,b=a.sa.length-1,a.qa?$h(a,b):a.f("Buffering put: "+c)}function $h(a,b){var c=a.sa[b].action,d=a.sa[b].Pf,e=a.sa[b].I;a.sa[b].Vg=a.qa,a.Ia(c,d,function(d){a.f(c+" response",d),delete a.sa[b],a.ad--,0===a.ad&&(a.sa=[]),e&&e(d.s,d.d)})}function Th(a,b){O(!a.Ma,"Scheduling a connect when we're already connected/ing?"),a.wb&&clearTimeout(a.wb),a.wb=setTimeout(function(){a.wb=null,ci(a)},Math.floor(b))}function ci(a){if(di(a)){a.f("Making a connection attempt"),a.Ke=(new Date).getTime(),a.Oc=null;var b=u(a.Ld,a),c=u(a.Zc,a),d=u(a.If,a),e=a.id+":"+Uh++;a.Ma=new Fh(e,a.G,b,c,d,function(b){S(b+" ("+a.G.toString()+")"),a.Bf=!0},a.Fb)}}function ai(a,b,c){(a=Wh(a,b,c=c?Oa(c,function(a){return xd(a)}).join("$"):"default"))&&a.I&&a.I("permission_denied")}function Wh(a,b,c){var d;return b=new P(b).toString(),p(a.ba[b])?(d=a.ba[b][c],delete a.ba[b][c],0===oa(a.ba[b])&&delete a.ba[b]):d=void 0,d}function bi(a){Xh(a),v(a.ba,function(b){v(b,function(b){Vh(a,b)})});for(var b=0;b<a.sa.length;b++)a.sa[b]&&$h(a,b);for(;a.Yc.length;)b=a.Yc.shift(),Yh(a,b.action,b.bd,b.data,b.I)}function di(a){var b;return b=jf.yb().oc,!a.Bf&&!a.Ie&&b}function ei(a,b){this.committed=a,this.snapshot=b}function V(a,b){this.dd=a,this.ta=b}function W(a,b,c){this.A=a,this.Y=b,this.g=c}function ii(a,b,c){this.Vb=a,this.tb=b,this.vb=c||null}function ji(a,b,c){this.ja=a,this.tb=b,this.vb=c}function ki(){this.za={}}function mi(a){return Na(qa(a.za),function(a){return!He(a.Y.n)})}function ni(a,b){if(He(b.n))return li(a);var c=b.wa();return z(a.za,c)}function li(a){return ua(a.za,function(a){return He(a.Y.n)})||null}function oi(a){this.va=qe,this.mb=new Pf,this.df={},this.qc={},this.Qc=a}function pi(a,b,c,d,e){var f=a.mb,g=e;return O(d>f.Pc,"Stacking an older write on top of newer ones"),p(g)||(g=!0),f.pa.push({path:b,Ja:c,md:d,visible:g}),g&&(f.V=Jf(f.V,b,c)),f.Pc=d,e?qi(a,new Ac(Ef,b,c)):[]}function ri(a,b,c,d){var e=a.mb;return O(d>e.Pc,"Stacking an older merge on top of newer ones"),e.pa.push({path:b,children:c,md:d,visible:!0}),e.V=Kf(e.V,b,c),e.Pc=d,c=sf(c),qi(a,new bf(Ef,b,c))}function si(a,b,c){c=c||!1;var d=Qf(a.mb,b);if(a.mb.Ud(b)){var e=qe;return null!=d.Ja?e=e.set(M,!0):Fb(d.children,function(a,b){e=e.set(new P(a),b)}),qi(a,new Df(d.path,e,c))}return[]}function ti(a,b,c){return c=sf(c),qi(a,new bf(Gf,b,c))}function ui(a,b,c,d){if(null!=(d=vi(a,d))){var e=wi(d);return d=e.path,e=e.Lb,b=lf(d,b),xi(a,d,c=new Ac(new Ff(!1,!0,e,!0),b,c))}return[]}function yi(a,b,c,d){if(d=vi(a,d)){var e=wi(d);return d=e.path,e=e.Lb,b=lf(d,b),c=sf(c),xi(a,d,c=new bf(new Ff(!1,!0,e,!0),b,c))}return[]}function Ci(a){return vf(a,function(a,c,d){if(c&&null!=li(c))return[li(c)];var e=[];return c&&(e=mi(c)),v(d,function(a){e=e.concat(a)}),e})}function Gi(a,b){for(var c=0;c<b.length;++c){if(!He((d=b[c]).n)){var d=zi(d),e=a.qc[d];delete a.qc[d],delete a.df["_"+e]}}}function Ei(a){return He(a.n)&&!Ie(a.n)?a.Mb():a}function Bi(a,b,c){var d=b.path,e=Fi(a,b);if(c=Di(a,c),b=a.Qc.af(Ei(b),e,c.Ad,c.I),d=a.va.subtree(d),e)O(null==li(d.value),"If we're adding a query, it shouldn't be shadowed");else for(e=vf(d,function(a,b,c){if(!a.e()&&b&&null!=li(b))return[Ze(li(b))];var d=[];return b&&(d=d.concat(Oa(mi(b),function(a){return a.Y}))),v(c,function(a){d=d.concat(a)}),d}),d=0;d<e.length;++d)c=e[d],a.Qc.de(Ei(c),Fi(a,c));return b}function Di(a,b){var c=b.Y,d=Fi(a,c);return{Ad:function(){return(b.w()||H).hash()},I:function(b){if("ok"===b){if(d){var f=c.path;if(b=vi(a,d)){var g=wi(b);b=g.path,g=g.Lb,f=lf(b,f),f=new Cc(new Ff(!1,!0,g,!0),f),b=xi(a,b,f)}else b=[]}else b=qi(a,new Cc(Gf,c.path));return b}return f="Unknown Error","too_big"===b?f="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"==b?f="Client doesn't have permission to access the desired data.":"unavailable"==b&&(f="The service is unavailable"),(f=Error(b+" at "+c.path.toString()+": "+f)).code=b.toUpperCase(),a.nb(c,null,f)}}}function zi(a){return a.path.toString()+"$"+a.wa()}function wi(a){var b=a.indexOf("$");return O(-1!==b&&b<a.length-1,"Bad queryKey."),{Lb:a.substr(b+1),path:new P(a.substr(0,b))}}function vi(a,b){var c=a.df,d="_"+b;return d in c?c[d]:void 0}function Fi(a,b){var c=zi(b);return z(a.qc,c)}function xi(a,b,c){var d=a.va.get(b);return O(d,"Missing sync point for query tag that we're tracking"),d.gb(c,new Uf(b,a.mb),null)}function qi(a,b){return Hi(a,b,a.va,null,new Uf(M,a.mb))}function Hi(a,b,c,d,e){if(b.path.e())return Ii(a,b,c,d,e);var f=c.get(M);null==d&&null!=f&&(d=f.kb(M));var g=[],k=K(b.path),m=b.$c(k);if((c=c.children.get(k))&&m){var l=d?d.T(k):null;k=e.o(k),g=g.concat(Hi(a,m,c,l,k))}return f&&(g=g.concat(f.gb(b,e,d))),g}function Ii(a,b,c,d,e){var f=c.get(M);null==d&&null!=f&&(d=f.kb(M));var g=[];return c.children.ka(function(c,f){var l=d?d.T(c):null,t=e.o(c),A=b.$c(c);A&&(g=g.concat(Ii(a,A,f,l,t)))}),f&&(g=g.concat(f.gb(b,e,d))),g}function Ji(a,b){this.G=a,this.Xa=uc(a),this.hd=null,this.fa=new Zb,this.Kd=1,this.Va=null,b||0<=("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)?(this.da=new cf(this.G,u(this.Kb,this)),setTimeout(u(this.Xc,this,!0),0)):this.da=this.Va=new Rh(this.G,u(this.Kb,this),u(this.Xc,this),u(this.Se,this)),this.eh=vc(a,u(function(){return new pc(this.Xa,this.da)},this)),this.yc=new Wf,this.Ge=new Sb;var c=this;this.Fd=new oi({af:function(a,b,f,g){return b=[],(f=c.Ge.j(a.path)).e()||(b=qi(c.Fd,new Ac(Gf,a.path,f)),setTimeout(function(){g("ok")},0)),b},de:aa}),Ki(this,"connected",!1),this.na=new Vc,this.O=new Yg(a,u(this.da.O,this.da),u(this.da.je,this.da),u(this.Pe,this)),this.ud=0,this.He=null,this.M=new oi({af:function(a,b,f,g){return c.da.Cf(a,f,b,function(b,e){var f=g(b,e);dc(c.fa,a.path,f)}),[]},de:function(a,b){c.da.$f(a,b)}})}function Li(a){return a=a.Ge.j(new P(".info/serverTimeOffset")).J()||0,(new Date).getTime()+a}function Mi(a){return(a=a={timestamp:Li(a)}).timestamp=a.timestamp||(new Date).getTime(),a}function Ki(a,b,c){b=new P("/.info/"+b),c=Q(c);var d=a.Ge;d.Zd=d.Zd.H(b,c),c=qi(a.Fd,new Ac(Gf,b,c)),dc(a.fa,b,c)}function Oi(a){a.f("onDisconnectEvents");var b=Mi(a),c=[];Wc(Uc(a.na,b),M,function(b,e){c=c.concat(qi(a.M,new Ac(Gf,b,e)));var f=Qi(a,b);Ni(a,f)}),a.na=new Vc,dc(a.fa,M,c)}function fi(a,b,c,d){var e=Q(c);a.da.Qe(b.toString(),e.J(!0),function(c,g){"ok"===c&&a.na.rc(b,e),Pi(d,c,g)})}function gi(a,b,c,d,e){var f=Q(c,d);a.da.Qe(b.toString(),f.J(!0),function(c,d){"ok"===c&&a.na.rc(b,f),Pi(e,c,d)})}function hi(a,b,c,d){var f,e=!0;for(f in c)e=!1;e?(fc("onDisconnect().update() called with empty data.  Don't do anything."),Pi(d,"ok")):a.da.Gf(b.toString(),c,function(e,f){if("ok"===e)for(var m in c){var l=Q(c[m]);a.na.rc(b.o(m),l)}Pi(d,e,f)})}function Ri(a,b,c){c=".info"===K(b.path)?a.Fd.Tb(b,c):a.M.Tb(b,c),bc(a.fa,b.path,c)}function Pi(a,b,c){a&&gc(function(){if("ok"==b)a(null);else{var d=(b||"error").toUpperCase(),e=d;c&&(e+=": "+c),(e=Error(e)).code=d,a(e)}})}function Si(a,b,c,d,e){function f(){}a.f("transaction on "+b);var g=new X(a,b);if(g.Ib("value",f),c={path:b,update:c,I:d,status:null,Lf:id(),gf:e,Sf:0,le:function(){g.mc("value",f)},ne:null,Da:null,rd:null,sd:null,td:null},d=a.M.Aa(b,void 0)||H,c.rd=d,p(d=c.update(d.J()))){hg("transaction failed: Data returned ",d,c.path),c.status=1;var k=(e=Xf(a.yc,b)).Ea()||[];k.push(c),Yf(e,k),"object"==typeof d&&null!==d&&y(d,".priority")?(k=z(d,".priority"),O(fg(k),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):k=(a.M.Aa(b)||H).C().J(),e=Mi(a),e=Xc(d=Q(d,k),e),c.sd=d,c.td=e,c.Da=a.Kd++,c=pi(a.M,b,e,c.Da,c.gf),dc(a.fa,b,c),Ti(a)}else c.le(),c.sd=null,c.td=null,c.I&&(a=new W(c.rd,new X(a,c.path),R),c.I(null,!1,a))}function Ti(a,b){var c=b||a.yc;if(b||Ui(a,c),null!==c.Ea()){var d=Vi(a,c);O(0<d.length,"Sending zero length transaction queue"),Qa(d,function(a){return 1===a.status})&&Wi(a,c.path(),d)}else c.zd()&&c.R(function(b){Ti(a,b)})}function Wi(a,b,c){for(var d=Oa(c,function(a){
return a.Da}),e=(d=e=a.M.Aa(b,d)||H,e.hash()),f=0;f<c.length;f++){var g=c[f];O(1===g.status,"tryToSendTransactionQueue_: items in queue should all be run."),g.status=2,g.Sf++;var k=lf(b,g.path);d=d.H(k,g.sd)}d=d.J(!0),a.da.put(b.toString(),d,function(d){a.f("transaction put response",{path:b.toString(),status:d});var e=[];if("ok"===d){for(d=[],f=0;f<c.length;f++){if(c[f].status=3,e=e.concat(si(a.M,c[f].Da)),c[f].I){var g=c[f].td,k=new X(a,c[f].path);d.push(u(c[f].I,null,null,!0,new W(g,k,R)))}c[f].le()}for(Ui(a,Xf(a.yc,b)),Ti(a),dc(a.fa,b,e),f=0;f<d.length;f++)gc(d[f])}else{if("datastale"===d)for(f=0;f<c.length;f++)c[f].status=4===c[f].status?5:1;else for(S("transaction at "+b.toString()+" failed: "+d),f=0;f<c.length;f++)c[f].status=5,c[f].ne=d;Ni(a,b)}},e)}function Ni(a,b){var c,d=(c=Xi(a,b)).path();return Yi(a,c=Vi(a,c),d),d}function Yi(a,b,c){if(0!==b.length){for(var d=[],e=[],f=Na(b,function(a){return 1===a.status}),g=(f=Oa(f,function(a){return a.Da}),0);g<b.length;g++){var t,k=b[g],m=lf(c,k.path),l=!1;if(O(null!==m,"rerunTransactionsUnderNode_: relativePath should not be null."),5===k.status)l=!0,t=k.ne,e=e.concat(si(a.M,k.Da,!0));else if(1===k.status)if(25<=k.Sf)l=!0,t="maxretry",e=e.concat(si(a.M,k.Da,!0));else{var A=a.M.Aa(k.path,f)||H;k.rd=A;var I=b[g].update(A.J());p(I)?(hg("transaction failed: Data returned ",I,k.path),m=Q(I),"object"==typeof I&&null!=I&&y(I,".priority")||(m=m.ia(A.C())),A=k.Da,I=Xc(m,I=Mi(a)),k.sd=m,k.td=I,k.Da=a.Kd++,Ta(f,A),e=(e=e.concat(pi(a.M,k.path,I,k.Da,k.gf))).concat(si(a.M,A,!0))):(l=!0,t="nodata",e=e.concat(si(a.M,k.Da,!0)))}dc(a.fa,c,e),e=[],l&&(b[g].status=3,setTimeout(b[g].le,Math.floor(0)),b[g].I&&("nodata"===t?(k=new X(a,b[g].path),d.push(u(b[g].I,null,null,!1,new W(b[g].rd,k,R)))):d.push(u(b[g].I,null,Error(t),!1,null))))}for(Ui(a,a.yc),g=0;g<d.length;g++)gc(d[g]);Ti(a)}}function Xi(a,b){for(var c,d=a.yc;null!==(c=K(b))&&null===d.Ea();)d=Xf(d,c),b=N(b);return d}function Vi(a,b){var c=[];return Zi(a,b,c),c.sort(function(a,b){return a.Lf-b.Lf}),c}function Zi(a,b,c){var d=b.Ea();if(null!==d)for(var e=0;e<d.length;e++)c.push(d[e]);b.R(function(b){Zi(a,b,c)})}function Ui(a,b){var c=b.Ea();if(c){for(var d=0,e=0;e<c.length;e++)3!==c[e].status&&(c[d]=c[e],d++);c.length=d,Yf(b,0<c.length?c:null)}b.R(function(b){Ui(a,b)})}function Qi(a,b){var c=Xi(a,b).path(),d=Xf(a.yc,b);return ag(d,function(b){$i(a,b)}),$i(a,d),$f(d,function(b){$i(a,b)}),c}function $i(a,b){var c=b.Ea();if(null!==c){for(var d=[],e=[],f=-1,g=0;g<c.length;g++)4!==c[g].status&&(2===c[g].status?(O(f===g-1,"All SENT items should be at beginning of queue."),f=g,c[g].status=4,c[g].ne="set"):(O(1===c[g].status,"Unexpected transaction status in abort"),c[g].le(),e=e.concat(si(a.M,c[g].Da,!0)),c[g].I&&d.push(u(c[g].I,null,Error("set"),!1,null))));for(-1===f?Yf(b,null):c.length=f+1,dc(a.fa,b.path(),e),g=0;g<d.length;g++)gc(d[g])}}function aj(){this.sc={},this.ag=!1}function Y(a,b,c,d){this.k=a,this.path=b,this.n=c,this.pc=d}function bj(a){var b=null,c=null;if(a.oa&&(b=Od(a)),a.ra&&(c=Rd(a)),a.g===re){if(a.oa){if("[MIN_NAME]"!=Nd(a))throw Error("Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().");if("string"!=typeof b)throw Error("Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.")}if(a.ra){if("[MAX_NAME]"!=Pd(a))throw Error("Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().");if("string"!=typeof c)throw Error("Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.")}}else if(a.g===R){if(null!=b&&!fg(b)||null!=c&&!fg(c))throw Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(O(a.g instanceof ve||a.g===Be,"unknown index type."),null!=b&&"object"==typeof b||null!=c&&"object"==typeof c)throw Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")}function cj(a){if(a.oa&&a.ra&&a.la&&(!a.la||""===a.Rb))throw Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")}function dj(a,b){if(!0===a.pc)throw Error(b+": You can't combine multiple orderBy calls.")}function ej(a,b,c){var d={cancel:null,Qa:null};if(b&&c)d.cancel=b,F(a,3,d.cancel,!0),d.Qa=c,Qb(a,4,d.Qa);else if(b)if("object"==typeof b&&null!==b)d.Qa=b;else{if("function"!=typeof b)throw Error(E(a,3,!0)+" must either be a cancel callback or a context object.");d.cancel=b}return d}function X(a,b){var c,d,e;if(a instanceof Ji)c=a,d=b;else{var f;if(D("new Firebase",1,2,arguments.length),c=(d=sd(arguments[0])).fh,"firebase"===d.domain&&rd(d.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),c&&"undefined"!=c||rd("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),d.ob||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&S("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),c=new dd(d.host,d.ob,c,"ws"===d.scheme||"wss"===d.scheme),e=(d=new P(d.bd)).toString(),!(f=!q(c.host)||0===c.host.length||!eg(c.lc))&&(f=0!==e.length)&&(e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),f=!(q(e)&&0!==e.length&&!cg.test(e))),f)throw Error(E("new Firebase",1,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".');if(b)if(b instanceof aj)e=b;else{if(!q(b))throw Error("Expected a valid Firebase.Context for second argument to new Firebase()");e=aj.yb(),c.Rd=b}else e=aj.yb();f=c.toString();var g=z(e.sc,f);g||(g=new Ji(c,e.ag),e.sc[f]=g),c=g}Y.call(this,c,d,De,!1),this.then=void 0,this["catch"]=void 0}var h,n=this,ja=Date.now||function(){return+new Date};ka(la,Error),la.prototype.name="CustomError";var xa="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),Da={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\x0B":"\\u000b"},Ea=/\uffff/.test("\uffff")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g,w;a:{var Ga=n.navigator;if(Ga){var Ha=Ga.userAgent;if(Ha){w=Ha;break a}}w=""}ka(Ja,Ia),Ja.prototype.reset=function(){this.P[0]=1732584193,this.P[1]=4023233417,this.P[2]=2562383102,this.P[3]=271733878,this.P[4]=3285377520,this.ge=this.ec=0},Ja.prototype.update=function(a,b){if(null!=a){p(b)||(b=a.length);for(var c=b-this.Ya,d=0,e=this.pe,f=this.ec;d<b;){if(0==f)for(;d<=c;)Ka(this,a,d),d+=this.Ya;if(q(a)){for(;d<b;)if(e[f]=a.charCodeAt(d),++d,++f==this.Ya){Ka(this,e),f=0;break}}else for(;d<b;)if(e[f]=a[d],++d,++f==this.Ya){Ka(this,e),f=0;break}}this.ec=f,this.ge+=b}};var x=Array.prototype,La=x.indexOf?function(a,b,c){return x.indexOf.call(a,b,c)}:function(a,b,c){if(c=null==c?0:0>c?Math.max(0,a.length+c):c,q(a))return q(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},Ma=x.forEach?function(a,b,c){x.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=q(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},Na=x.filter?function(a,b,c){return x.filter.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=[],f=0,g=q(a)?a.split(""):a,k=0;k<d;k++)if(k in g){var m=g[k];b.call(c,m,k,a)&&(e[f++]=m)}return e},Oa=x.map?function(a,b,c){return x.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),f=q(a)?a.split(""):a,g=0;g<d;g++)g in f&&(e[g]=b.call(c,f[g],g,a));return e},Pa=x.reduce?function(a,b,c,d){for(var e=[],f=1,g=arguments.length;f<g;f++)e.push(arguments[f]);return d&&(e[0]=u(b,d)),x.reduce.apply(a,e)}:function(a,b,c,d){var e=c;return Ma(a,function(c,g){e=b.call(d,e,c,g,a)}),e},Qa=x.every?function(a,b,c){return x.every.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=q(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&!b.call(c,e[f],f,a))return!1;return!0},Ya,ab,cb=!1,db=[];[].push(function(){cb=!1,db=[]});var gb=-1!=w.indexOf("Opera")||-1!=w.indexOf("OPR"),hb=-1!=w.indexOf("Trident")||-1!=w.indexOf("MSIE"),ib=-1!=w.indexOf("Gecko")&&-1==w.toLowerCase().indexOf("webkit")&&!(-1!=w.indexOf("Trident")||-1!=w.indexOf("MSIE")),jb=-1!=w.toLowerCase().indexOf("webkit"),b,a;a="",gb&&n.opera?r(a=n.opera.version)&&a():(ib?b=/rv\:([^\);]+)(\)|;)/:hb?b=/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/:jb&&(b=/WebKit\/(\S+)/),b&&(a=(a=b.exec(w))?a[1]:""),hb&&(b=(b=n.document)?b.documentMode:void 0)>parseFloat(a)&&String(b));var kb=null,lb=null,mb=null,qb=0,tb=2,vb=3;pb.prototype.then=function(a,b,c){return wb(this,r(a)?a:null,r(b)?b:null,c)},pb.prototype.then=pb.prototype.then,pb.prototype.$goog_Thenable=!0,h=pb.prototype,h.gh=function(a,b){return wb(this,null,a,b)},h.cancel=function(a){this.N==qb&&$a(function(){xb(this,new ub(a))},this)},h.Yf=function(a){this.N=qb,sb(this,tb,a)},h.Zf=function(a){this.N=qb,sb(this,vb,a)},h.wg=function(){for(;this.Ba&&this.Ba.length;){var a=this.Ba;this.Ba=null;for(var b=0;b<a.length;b++)yb(this,a[b],this.N,this.Rf)}this.ye=!1};var Db=Xa;ka(ub,la),ub.prototype.name="cancel";var Eb=Eb||"2.4.2",Mb=n.Promise||pb;pb.prototype["catch"]=pb.prototype.gh,Sb.prototype.j=function(a){return this.Zd.S(a)},Sb.prototype.toString=function(){return this.Zd.toString()},Tb.prototype.uf=function(){return null},Tb.prototype.Ce=function(){return null};var Ub=new Tb;Vb.prototype.uf=function(a){var b=this.Oa.Q;return Wb(b,a)?b.j().T(a):(b=null!=this.Nd?new Xb(this.Nd,!0,!1):this.Oa.w(),this.bg.Bc(a,b))},Vb.prototype.Ce=function(a,b,c){var d=null!=this.Nd?this.Nd:Yb(this.Oa);return 0===(a=this.bg.qe(d,b,1,c,a)).length?null:a[0]},ac.prototype.add=function(a){this.xd.push(a)},ac.prototype.cc=function(){return this.ta};var ic="value";jc.prototype.cc=function(){var a=this.be.Mb();return"value"===this.wd?a.path:a.parent().path},jc.prototype.De=function(){return this.wd},jc.prototype.Zb=function(){return this.xe.Zb(this)},jc.prototype.toString=function(){return this.cc().toString()+":"+this.wd+":"+G(this.be.qf())},kc.prototype.cc=function(){return this.path},kc.prototype.De=function(){return"cancel"},kc.prototype.Zb=function(){return this.xe.Zb(this)},kc.prototype.toString=function(){return this.path.toString()+":cancel"},Xb.prototype.j=function(){return this.A},oc.prototype.get=function(){var a=this.pg.get(),b=wa(a);if(this.Gd)for(var c in this.Gd)b[c]-=this.Gd[c];return this.Gd=a,b},pc.prototype.Of=function(){var d,a=this.hd.get(),b={},c=!1;for(d in a)0<a[d]&&y(this.Vf,d)&&(b[d]=a[d],c=!0);c&&this.da.Ye(b),setTimeout(u(this.Of,this),Math.floor(6e5*Math.random()))},qc.prototype.get=function(){return wa(this.Hc)};var sc={},tc={};Ac.prototype.$c=function(a){return this.path.e()?new Ac(this.source,M,this.Ja.T(a)):new Ac(this.source,N(this.path),this.Ja)},Ac.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" overwrite: "+this.Ja.toString()+")"},Cc.prototype.$c=function(){return this.path.e()?new Cc(this.source,M):new Cc(this.source,N(this.path))},Cc.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" listen_complete)"},h=Ec.prototype,h.Sa=function(a,b){return new Ec(this.Pa,this.xa.Sa(a,b,this.Pa).$(null,null,!1,null,null))},h.remove=function(a){return new Ec(this.Pa,this.xa.remove(a,this.Pa).$(null,null,!1,null,null))},h.get=function(a){for(var b,c=this.xa;!c.e();){if(0===(b=this.Pa(a,c.key)))return c.value;0>b?c=c.left:0<b&&(c=c.right)}return null},h.e=function(){return this.xa.e()},h.count=function(){return this.xa.count()},h.Vc=function(){return this.xa.Vc()},h.jc=function(){return this.xa.jc()},h.ka=function(a){return this.xa.ka(a)},h.ac=function(a){return new Hc(this.xa,null,this.Pa,!1,a)},h.bc=function(a,b){return new Hc(this.xa,a,this.Pa,!1,b)},h.dc=function(a,b){return new Hc(this.xa,a,this.Pa,!0,b)},h.xf=function(a){return new Hc(this.xa,null,this.Pa,!0,a)},h=Kc.prototype,h.$=function(a,b,c,d,e){return new Kc(null!=a?a:this.key,null!=b?b:this.value,null!=c?c:this.color,null!=d?d:this.left,null!=e?e:this.right)},h.count=function(){return this.left.count()+1+this.right.count()},h.e=function(){return!1},h.ka=function(a){return this.left.ka(a)||a(this.key,this.value)||this.right.ka(a)},h.Vc=function(){return Lc(this).key},h.jc=function(){return this.right.e()?this.key:this.right.jc()},h.Sa=function(a,b,c){var d,e;return Mc(e=0>(d=c(a,(e=this).key))?e.$(null,null,null,e.left.Sa(a,b,c),null):0===d?e.$(null,b,null,null,null):e.$(null,null,null,null,e.right.Sa(a,b,c)))},h.remove=function(a,b){var c,d;if(0>b(a,(c=this).key))c.left.e()||c.left.ha()||c.left.left.ha()||(c=Oc(c)),c=c.$(null,null,null,c.left.remove(a,b),null);else{if(c.left.ha()&&(c=Pc(c)),c.right.e()||c.right.ha()||c.right.left.ha()||(c=Qc(c)).left.left.ha()&&(c=Qc(c=Pc(c))),0===b(a,c.key)){if(c.right.e())return Fc;d=Lc(c.right),c=c.$(d.key,d.value,null,null,Nc(c.right))}c=c.$(null,null,null,null,c.right.remove(a,b))}return Mc(c)},h.ha=function(){return this.color},h=Sc.prototype,h.$=function(){return this},h.Sa=function(a,b){return new Kc(a,b,null)},h.remove=function(){return this},h.count=function(){return 0},h.e=function(){return!0},h.ka=function(){return!1},h.Vc=function(){return null},h.jc=function(){return null},h.ha=function(){return!1};var Fc=new Sc;Zc.prototype.set=function(a,b){null==b?delete this.Ac[a]:this.Ac[a]=b},Zc.prototype.get=function(a){return y(this.Ac,a)?this.Ac[a]:null},Zc.prototype.remove=function(a){delete this.Ac[a]},Zc.prototype.Af=!0,h=$c.prototype,h.set=function(a,b){null==b?this.Ic.removeItem(this.Sd+a):this.Ic.setItem(this.Sd+a,G(b))},h.get=function(a){return null==(a=this.Ic.getItem(this.Sd+a))?null:Rb(a)},h.remove=function(a){this.Ic.removeItem(this.Sd+a)},h.Af=!1,h.toString=function(){return this.Ic.toString()};var bd=ad("localStorage"),cd=ad("sessionStorage");dd.prototype.toString=function(){var a=(this.ob?"https://":"http://")+this.host;return this.Rd&&(a+="<"+this.Rd+">"),a};var id=function(){var a=1;return function(){return a++}}(),O=Kb,jd=Lb,ec=null,nd=!0,Bd=/^-?\d{1,10}$/;Fd.prototype.qg=function(a,b){if(null==a.Za||null==b.Za)throw jd("Should only compare child_ events.");return this.g.compare(new L(a.Za,a.Na),new L(b.Za,b.Na))},h=Ld.prototype,h.H=function(a,b,c,d,e,f){return O(a.Mc(this.g),"A node must be indexed if only a child is updated"),(e=a.T(b)).S(d).ea(c.S(d))&&e.e()==c.e()?a:(null!=f&&(c.e()?a.Fa(b)?Kd(f,new J("child_removed",e,b)):O(a.L(),"A child remove without an old child only makes sense on a leaf node"):e.e()?Kd(f,new J("child_added",c,b)):Kd(f,new J("child_changed",c,b,e))),a.L()&&c.e()?a:a.W(b,c).pb(this.g))},h.ya=function(a,b,c){return null!=c&&(a.L()||a.R(R,function(a,e){b.Fa(a)||Kd(c,new J("child_removed",e,a))}),b.L()||b.R(R,function(b,e){if(a.Fa(b)){var f=a.T(b);f.ea(e)||Kd(c,new J("child_changed",e,b,f))}else Kd(c,new J("child_added",e,b))})),b.pb(this.g)},h.ia=function(a,b){return a.e()?H:a.ia(b)},h.Ra=function(){return!1},h.$b=function(){return this},h=Md.prototype,h.matches=function(a){return 0>=this.g.compare(this.gd,a)&&0>=this.g.compare(a,this.Jc)},h.H=function(a,b,c,d,e,f){return this.matches(new L(b,c))||(c=H),this.Fe.H(a,b,c,d,e,f)},h.ya=function(a,b,c){b.L()&&(b=H);var d=(d=b.pb(this.g)).ia(H),e=this;return b.R(R,function(a,b){e.matches(new L(a,b))||(d=d.W(a,H))}),this.Fe.ya(a,d,c)},h.ia=function(a){return a},h.Ra=function(){return!0},h.$b=function(){return this.Fe},h=Sd.prototype,h.H=function(a,b,c,d,e,f){return this.ua.matches(new L(b,c))||(c=H),a.T(b).ea(c)?a:a.Hb()<this.ma?this.ua.$b().H(a,b,c,d,e,f):Ud(this,a,b,c,e,f)},h.ya=function(a,b,c){var d;if(b.L()||b.e())d=H.pb(this.g);else if(2*this.ma<b.Hb()&&b.Mc(this.g)){d=H.pb(this.g),b=this.Nb?b.dc(this.ua.Jc,this.g):b.bc(this.ua.gd,this.g);for(var e=0;0<b.Ta.length&&e<this.ma;){var f=Ic(b);if(!(this.Nb?0>=this.g.compare(this.ua.gd,f):0>=this.g.compare(f,this.ua.Jc)))break;d=d.W(f.name,f.U),e++}}else{var k,m,l;if(d=(d=b.pb(this.g)).ia(H),this.Nb){b=d.xf(this.g),k=this.ua.Jc,m=this.ua.gd;var t=Vd(this.g);l=function(a,b){return t(b,a)}}else b=d.ac(this.g),k=this.ua.gd,m=this.ua.Jc,l=Vd(this.g);e=0;for(var A=!1;0<b.Ta.length;)f=Ic(b),!A&&0>=l(k,f)&&(A=!0),A&&e<this.ma&&0>=l(f,m)?e++:d=d.W(f.name,H)}return this.ua.$b().ya(a,d,c)},h.ia=function(a){return a},h.Ra=function(){return!0},h.$b=function(){return this.ua.$b()},Zd.prototype.gb=function(a,b,c,d){var f,e=new Jd;if(b.type===Bc)b.source.Ae?c=$d(this,a,b.path,b.Ja,c,d,e):(O(b.source.tf,"Unknown source."),f=b.source.ef||mc(a.w())&&!b.path.e(),c=ae(this,a,b.path,b.Ja,c,d,f,e));else if(b.type===be)b.source.Ae?c=ce(this,a,b.path,b.children,c,d,e):(O(b.source.tf,"Unknown source."),f=b.source.ef||mc(a.w()),c=de(this,a,b.path,b.children,c,d,f,e));else if(b.type===ee)if(b.Yd)if(b=b.path,null!=c.xc(b))c=a;else{if(f=new Vb(c,a,d),d=a.Q.j(),b.e()||".priority"===K(b))lc(a.w())?b=c.Aa(Yb(a)):(b=a.w().j(),O(b instanceof fe,"serverChildren would be complete if leaf node"),b=c.Cc(b)),b=this.X.ya(d,b,e);else{var g=K(b),k=c.Bc(g,a.w());null==k&&Wb(a.w(),g)&&(k=d.T(g)),(b=null!=k?this.X.H(d,g,k,N(b),f,e):a.Q.j().Fa(g)?this.X.H(d,g,H,N(b),f,e):d).e()&&lc(a.w())&&((d=c.Aa(Yb(a))).L()&&(b=this.X.ya(b,d,e)))}c=ge(a,b,d=lc(a.w())||null!=c.xc(M),this.X.Ra())}else c=he(this,a,b.path,b.Ub,c,d,e);else{if(b.type!==Dc)throw jd("Unknown operation type: "+b.type);d=b.path,f=(b=a.w()).j(),g=b.ga||d.e(),c=ie(this,new je(a.Q,new Xb(f,g,b.Yb)),d,c,Ub,e)}return e=qa(e.ib),(b=(d=c).Q).ga&&(f=b.j().L()||b.j().e(),g=ke(a),(0<e.length||!a.Q.ga||f&&!b.j().ea(g)||!b.j().C().ea(g.C()))&&e.push(hc(ke(d)))),new Yd(c,e)};var te={};se.prototype.Dd=function(a,b){return 0!==this.compare(new L("[MIN_NAME]",a),new L("[MIN_NAME]",b))},se.prototype.Wc=function(){return ue},ka(ve,se),h=ve.prototype,h.Lc=function(a){return!a.S(this.gc).e()},h.compare=function(a,b){var c=a.U.S(this.gc),d=b.U.S(this.gc);return 0===(c=c.Gc(d))?yc(a.name,b.name):c},h.Sc=function(a,b){var c=Q(a);return new L(b,c=H.H(this.gc,c))},h.Tc=function(){return new L("[MAX_NAME]",H.H(this.gc,we))},h.toString=function(){return this.gc.slice().join("/")},ka(xe,se),h=xe.prototype,h.compare=function(a,b){var c=a.U.C(),d=b.U.C();return 0===(c=c.Gc(d))?yc(a.name,b.name):c},h.Lc=function(a){return!a.C().e()},h.Dd=function(a,b){return!a.C().ea(b.C())},h.Wc=function(){return ue},h.Tc=function(){return new L("[MAX_NAME]",new Yc("[PRIORITY-POST]",we))},h.Sc=function(a,b){return new L(b,new Yc("[PRIORITY-POST]",Q(a)))},h.toString=function(){return".priority"};var R=new xe;ka(ye,se),h=ye.prototype,h.compare=function(a,b){return yc(a.name,b.name)},h.Lc=function(){throw jd("KeyIndex.isDefinedOn not expected to be called.")},h.Dd=function(){return!1},h.Wc=function(){return ue},h.Tc=function(){return new L("[MAX_NAME]",H)},h.Sc=function(a){return O(q(a),"KeyIndex indexValue must always be a string."),new L(a,H)},h.toString=function(){return".key"};var re=new ye;ka(ze,se),h=ze.prototype,h.compare=function(a,b){var c=a.U.Gc(b.U);return 0===c?yc(a.name,b.name):c},h.Lc=function(){return!0},h.Dd=function(a,b){return!a.ea(b)},h.Wc=function(){return ue},h.Tc=function(){return Ae},h.Sc=function(a,b){return new L(b,Q(a))},h.toString=function(){return".value"};var Be=new ze,De=new Ce;h=Ce.prototype,h.Le=function(a){var b=Ee(this);return b.la=!0,b.ma=a,b.Rb="",b},h.Me=function(a){var b=Ee(this);return b.la=!0,b.ma=a,b.Rb="l",b},h.Ne=function(a){var b=Ee(this);return b.la=!0,b.ma=a,b.Rb="r",b},h.ce=function(a,b){var c=Ee(this);return c.oa=!0,p(a)||(a=null),c.ic=a,null!=b?(c.Pb=!0,c.Bb=b):(c.Pb=!1,c.Bb=""),c},h.vd=function(a,b){var c=Ee(this);return c.ra=!0,p(a)||(a=null),c.fc=a,p(b)?(c.Xb=!0,c.zb=b):(c.oh=!1,c.zb=""),c},h.toString=function(){return G(Ge(this))},Ke.prototype.get=function(a){var b=z(this.Ed,a);if(!b)throw Error("No index defined for "+a);return b===te?null:b};var Oe=new Ke({".priority":te},{".priority":R}),Qe=["object","boolean","number","string"];h=Yc.prototype,h.L=function(){return!0},h.C=function(){return this.ca},h.ia=function(a){return new Yc(this.B,a)},h.T=function(a){return".priority"===a?this.ca:H},h.S=function(a){return a.e()?this:".priority"===K(a)?this.ca:H},h.Fa=function(){return!1},h.wf=function(){return null},h.W=function(a,b){return".priority"===a?this.ia(b):b.e()&&".priority"!==a?this:H.W(a,b).ia(this.ca)},h.H=function(a,b){var c=K(a);return null===c?b:b.e()&&".priority"!==c?this:(O(".priority"!==c||1===le(a),".priority must be the last token in a path"),this.W(c,H.H(N(a),b)))},h.e=function(){return!1},h.Hb=function(){return 0},h.R=function(){return!1},h.J=function(a){return a&&!this.C().e()?{".value":this.Ea(),".priority":this.C().J()}:this.Ea()},h.hash=function(){if(null===this.Gb){var a="";this.ca.e()||(a+="priority:"+Re(this.ca.J())+":");var b=typeof this.B;a=a+(b+":"),a="number"===b?a+Ad(this.B):a+this.B;this.Gb=ld(a)}return this.Gb},h.Ea=function(){return this.B},h.Gc=function(a){if(a===H)return 1;if(a instanceof fe)return-1;O(a.L(),"Unknown node type");var b=typeof a.B,c=typeof this.B,d=La(Qe,b),e=La(Qe,c);return O(0<=d,"Unknown leaf type: "+b),O(0<=e,"Unknown leaf type: "+c),d===e?"object"===c?0:this.B<a.B?-1:this.B===a.B?0:1:e-d},h.pb=function(){return this},h.Mc=function(){return!0},h.ea=function(a){return a===this||!!a.L()&&(this.B===a.B&&this.ca.ea(a.ca))},h.toString=function(){return G(this.J(!0))},h=fe.prototype,h.L=function(){return!1},h.C=function(){return this.ca||H},h.ia=function(a){return this.m.e()?this:new fe(this.m,a,this.Ab)},h.T=function(a){return".priority"===a?this.C():null===(a=this.m.get(a))?H:a},h.S=function(a){var b=K(a);return null===b?this:this.T(b).S(N(a))},h.Fa=function(a){return null!==this.m.get(a)},h.W=function(a,b){if(O(b,"We should always be passing snapshot nodes"),".priority"===a)return this.ia(b);var d,c=new L(a,b);return b.e()?(d=this.m.remove(a),c=Ne(this.Ab,c,this.m)):(d=this.m.Sa(a,b),c=Le(this.Ab,c,this.m)),new fe(d,d.e()?H:this.ca,c)},h.H=function(a,b){var c=K(a);if(null===c)return b;O(".priority"!==K(a)||1===le(a),".priority must be the last token in a path");var d=this.T(c).H(N(a),b);return this.W(c,d)},h.e=function(){return this.m.e()},h.Hb=function(){return this.m.count()};var Se=/^(0|[1-9]\d*)$/;h=fe.prototype,h.J=function(a){if(this.e())return null;var b={},c=0,d=0,e=!0;if(this.R(R,function(f,g){b[f]=g.J(a),c++,e&&Se.test(f)?d=Math.max(d,Number(f)):e=!1}),!a&&e&&d<2*c){var g,f=[];for(g in b)f[g]=b[g];return f}return a&&!this.C().e()&&(b[".priority"]=this.C().J()),b},h.hash=function(){if(null===this.Gb){var a="";this.C().e()||(a+="priority:"+Re(this.C().J())+":"),this.R(R,function(b,c){var d=c.hash();""!==d&&(a+=":"+b+":"+d)}),this.Gb=""===a?"":ld(a)}return this.Gb},h.wf=function(a,b,c){return(c=Te(this,c))?(a=Gc(c,new L(a,b)))?a.name:null:Gc(this.m,a)},h.R=function(a,b){var c=Te(this,a);return c?c.ka(function(a){return b(a.name,a.U)}):this.m.ka(b)},h.ac=function(a){return this.bc(a.Wc(),a)},h.bc=function(a,b){if(c=Te(this,b))return c.bc(a,function(a){return a});for(var c,d=Jc(c=this.m.bc(a.name,wc));null!=d&&0>b.compare(d,a);)Ic(c),d=Jc(c);return c},h.xf=function(a){return this.dc(a.Tc(),a)},h.dc=function(a,b){if(c=Te(this,b))return c.dc(a,function(a){return a});for(var c,d=Jc(c=this.m.dc(a.name,wc));null!=d&&0<b.compare(d,a);)Ic(c),d=Jc(c);return c},h.Gc=function(a){return this.e()?a.e()?0:-1:a.L()||a.e()?1:a===we?-1:0},h.pb=function(a){if(a===re||sa(this.Ab.hc,a.toString()))return this;var b=this.Ab,c=this.m;O(a!==re,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var d=[],e=!1,f=Ic(c=c.ac(wc));f;)e=e||a.Lc(f.U),d.push(f),f=Ic(c);return d=e?Me(d,Vd(a)):te,e=a.toString(),(c=wa(b.hc))[e]=a,(a=wa(b.Ed))[e]=d,new fe(this.m,this.ca,new Ke(a,c))},h.Mc=function(a){return a===re||sa(this.Ab.hc,a.toString())},h.ea=function(a){if(a===this)return!0;if(a.L())return!1;if(this.C().ea(a.C())&&this.m.count()===a.m.count()){var b=this.ac(R);a=a.ac(R);for(var c=Ic(b),d=Ic(a);c&&d;){if(c.name!==d.name||!c.U.ea(d.U))return!1;c=Ic(b),d=Ic(a)}return null===c&&null===d}return!1},h.toString=function(){return G(this.J(!0))};var Ue=Math.log(2),H=new fe(new Ec(zc),null,Oe);ka(Xe,fe),h=Xe.prototype,h.Gc=function(a){return a===this?0:1},h.ea=function(a){return a===this},h.C=function(){return this},h.T=function(){return H},h.e=function(){return!1};var we=new Xe,ue=new L("[MIN_NAME]",H),Ae=new L("[MAX_NAME]",we);je.prototype.w=function(){return this.ae},h=Ye.prototype,h.w=function(){return this.Oa.w().j()},h.kb=function(a){var b=Yb(this.Oa);return b&&(He(this.Y.n)||!a.e()&&!b.T(K(a)).e())?b.S(a):null},h.e=function(){return 0===this.$a.length},h.Tb=function(a){this.$a.push(a)},h.nb=function(a,b){var c=[];if(b){O(null==a,"A cancel should cancel all event registrations.");var d=this.Y.path;Ma(this.$a,function(a){(a=a.lf(b,d))&&c.push(a)})}if(a){for(var e=[],f=0;f<this.$a.length;++f){var g=this.$a[f];if(g.matches(a)){if(a.yf()){e=e.concat(this.$a.slice(f+1));break}}else e.push(g)}this.$a=e}else this.$a=[];return c},h.gb=function(a,b,c){a.type===be&&null!==a.source.Lb&&(O(Yb(this.Oa),"We should always have a full cache before handling merges"),O(ke(this.Oa),"Missing event cache, even though we have a server cache"));var d=this.Oa;return a=this.Nf.gb(d,a,b,c),b=this.Nf,c=a.me,O(c.Q.j().Mc(b.X.g),"Event snap not indexed"),O(c.w().j().Mc(b.X.g),"Server snap not indexed"),O(lc(a.me.w())||!lc(d.w()),"Once a server snap is complete, it should never go back"),this.Oa=a.me,$e(this,a.og,a.me.Q.j(),null)},bf.prototype.$c=function(a){return this.path.e()?(a=this.children.subtree(new P(a))).e()?null:a.value?new Ac(this.source,M,a.value):new bf(this.source,M,a):(O(K(this.path)===a,"Can't get a merge for a child not on the path of the operation"),new bf(this.source,N(this.path),this.children))},bf.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},h=cf.prototype,h.Cf=function(a,b,c,d){var e=a.path.toString();this.f("Listen called for "+e+" "+a.wa());var f=df(a,c),g={};this.ba[f]=g,a=Je(a.n);var k=this;ef(this,e+".json",a,function(a,b){var t=b;404===a&&(a=t=null),null===a&&k.Kb(e,t,!1,c),z(k.ba,f)===g&&d(a?401==a?"permission_denied":"rest_error:"+a:"ok",null)})},h.$f=function(a,b){var c=df(a,b);delete this.ba[c]},h.O=function(a,b){this.Ca=a;var d=(c=Cd(a)).data,c=c.Ec&&c.Ec.exp;b&&b("ok",{auth:d,expires:c})},h.je=function(a){this.Ca=null,a("ok",null)},h.Qe=function(){},h.Gf=function(){},h.Md=function(){},h.put=function(){},h.Df=function(){},h.Ye=function(){},ff.prototype.ie=function(a){var c,d=(c=this.Rc[a]||[]).length;if(0<d){for(var e=Array(d),f=0;f<d;f++)e[f]=c[f];c=e}else c=[];for(d=0;d<c.length;d++)c[d].Dc.apply(c[d].Qa,Array.prototype.slice.call(arguments,1))},ff.prototype.Ib=function(a,b,c){gf(this,a),this.Rc[a]=this.Rc[a]||[],this.Rc[a].push({Dc:b,Qa:c}),(a=this.Ee(a))&&b.apply(c,a)},ff.prototype.mc=function(a,b,c){gf(this,a),a=this.Rc[a]||[];for(var d=0;d<a.length;d++)if(a[d].Dc===b&&(!c||c===a[d].Qa)){a.splice(d,1);break}};var hf=function(){var a=0,b=[];return function(c){var d=c===a;a=c;for(var e=Array(8),f=7;0<=f;f--)e[f]="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz".charAt(c%64),c=Math.floor(c/64);if(O(0===c,"Cannot push at time == 0"),c=e.join(""),d){for(f=11;0<=f&&63===b[f];f--)b[f]=0;b[f]++}else for(f=0;12>f;f++)b[f]=Math.floor(64*Math.random());for(f=0;12>f;f++)c+="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz".charAt(b[f]);return O(20===c.length,"nextPushId: Length should be 20."),c}}();ka(jf,ff),jf.prototype.Ee=function(a){return O("online"===a,"Unknown event type: "+a),[this.oc]},ba(jf),ka(kf,ff),kf.prototype.Ee=function(a){return O("visible"===a,"Unknown event type: "+a),[this.Sb]},ba(kf),h=P.prototype,h.toString=function(){for(var a="",b=this.aa;b<this.u.length;b++)""!==this.u[b]&&(a+="/"+this.u[b]);return a||"/"},h.slice=function(a){return this.u.slice(this.aa+(a||0))},h.parent=function(){if(this.aa>=this.u.length)return null;for(var a=[],b=this.aa;b<this.u.length-1;b++)a.push(this.u[b]);return new P(a,0)},h.o=function(a){for(var b=[],c=this.aa;c<this.u.length;c++)b.push(this.u[c]);if(a instanceof P)for(c=a.aa;c<a.u.length;c++)b.push(a.u[c]);else for(a=a.split("/"),c=0;c<a.length;c++)0<a[c].length&&b.push(a[c]);return new P(b,0)},h.e=function(){return this.aa>=this.u.length},h.ea=function(a){if(le(this)!==le(a))return!1;for(var b=this.aa,c=a.aa;b<=this.u.length;b++,c++)if(this.u[b]!==a.u[c])return!1;return!0},h.contains=function(a){var b=this.aa,c=a.aa;if(le(this)>le(a))return!1;for(;b<this.u.length;){if(this.u[b]!==a.u[c])return!1;++b,++c}return!0};var M=new P("");nf.prototype.push=function(a){0<this.Ua.length&&(this.Ka+=1),this.Ua.push(a),this.Ka+=Pb(a),of(this)},nf.prototype.pop=function(){var a=this.Ua.pop();this.Ka-=Pb(a),0<this.Ua.length&&--this.Ka};var rf=new Ec(function(a,b){return a===b?0:a<b?-1:1});h=qf.prototype,h.e=function(){return null===this.value&&this.children.e()},h.subtree=function(a){if(a.e())return this;var b=this.children.get(K(a));return null!==b?b.subtree(N(a)):qe},h.set=function(a,b){if(a.e())return new qf(b,this.children);var c=K(a),d=(this.children.get(c)||qe).set(N(a),b);c=this.children.Sa(c,d);return new qf(this.value,c)},h.remove=function(a){if(a.e())return this.children.e()?qe:new qf(null,this.children);var b=K(a),c=this.children.get(b);return c?(b=(a=c.remove(N(a))).e()?this.children.remove(b):this.children.Sa(b,a),null===this.value&&b.e()?qe:new qf(this.value,b)):this},h.get=function(a){if(a.e())return this.value;var b=this.children.get(K(a));return b?b.get(N(a)):null};var qe=new qf(null);qf.prototype.toString=function(){var a={};return ne(this,function(b,c){a[b.toString()]=c.toString()}),G(a)},Df.prototype.$c=function(a){return this.path.e()?null!=this.Ub.value?(O(this.Ub.children.e(),"affectedTree should not have overlapping affected paths."),this):(a=this.Ub.subtree(new P(a)),new Df(M,a,this.Yd)):(O(K(this.path)===a,"operationForChild called for unrelated child."),new Df(N(this.path),this.Ub,this.Yd))},Df.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" ack write revert="+this.Yd+" affectedTree="+this.Ub+")"};var Bc=0,be=1,ee=2,Dc=3,Ef=new Ff(!0,!1,null,!1),Gf=new Ff(!1,!0,null,!1);Ff.prototype.toString=function(){return this.Ae?"user":this.ef?"server(queryID="+this.Lb+")":"server"};var If=new Hf(new qf(null));Hf.prototype.Ud=function(a){return a.e()?If:new Hf(a=pe(this.Z,a,qe))},Hf.prototype.e=function(){return this.Z.e()},Hf.prototype.apply=function(a){return Of(M,this.Z,a)},h=Pf.prototype,h.Ud=function(a){var b=Sa(this.pa,function(b){return b.md===a});O(0<=b,"removeWrite called with nonexistent writeId.");var c=this.pa[b];this.pa.splice(b,1);for(var d=c.visible,e=!1,f=this.pa.length-1;d&&0<=f;){var g=this.pa[f];g.visible&&(f>=b&&Rf(g,c.path)?d=!1:c.path.contains(g.path)&&(e=!0)),f--}if(d){if(e)this.V=Sf(this.pa,Tf,M),this.Pc=0<this.pa.length?this.pa[this.pa.length-1].md:-1;else if(c.Ja)this.V=this.V.Ud(c.path);else{var k=this;v(c.children,function(a,b){k.V=k.V.Ud(c.path.o(b))})}return!0}return!1},h.Aa=function(a,b,c,d){if(c||d){var e=Nf(this.V,a);return!d&&e.e()?b:d||null!=b||null!=Lf(e,M)?(e=Sf(this.pa,function(b){return(b.visible||d)&&(!c||!(0<=La(c,b.md)))&&(b.path.contains(a)||a.contains(b.path))},a),b=b||H,e.apply(b)):null}return null!=(e=Lf(this.V,a))?e:(e=Nf(this.V,a)).e()?b:null!=b||null!=Lf(e,M)?(b=b||H,e.apply(b)):null},h.Cc=function(a,b){var c=H,d=Lf(this.V,a);if(d)d.L()||d.R(R,function(a,b){c=c.W(a,b)});else if(b){var e=Nf(this.V,a);b.R(R,function(a,b){var d=Nf(e,new P(a)).apply(b);c=c.W(a,d)}),Ma(Mf(e),function(a){c=c.W(a.name,a.U)})}else e=Nf(this.V,a),Ma(Mf(e),function(a){c=c.W(a.name,a.U)});return c},h.nd=function(a,b,c,d){return O(c||d,"Either existingEventSnap or existingServerSnap must exist"),a=a.o(b),null!=Lf(this.V,a)?null:(a=Nf(this.V,a)).e()?d.S(b):a.apply(d.S(b))},h.Bc=function(a,b,c){a=a.o(b);var d=Lf(this.V,a);return null!=d?d:Wb(c,b)?Nf(this.V,a).apply(c.j().T(b)):null},h.xc=function(a){return Lf(this.V,a)},h.qe=function(a,b,c,d,e,f){var g;if(null==(g=Lf(a=Nf(this.V,a),M))){if(null==b)return[];g=a.apply(b)}if((g=g.pb(f)).e()||g.L())return[];for(b=[],a=Vd(f),f=Ic(e=e?g.dc(c,f):g.bc(c,f));f&&b.length<d;)0!==a(f,c)&&b.push(f),f=Ic(e);return b},h=Uf.prototype,h.Aa=function(a,b,c){return this.Z.Aa(this.Qb,a,b,c)},h.Cc=function(a){return this.Z.Cc(this.Qb,a)},h.nd=function(a,b,c){return this.Z.nd(this.Qb,a,b,c)},h.xc=function(a){return this.Z.xc(this.Qb.o(a))},h.qe=function(a,b,c,d,e){return this.Z.qe(this.Qb,a,b,c,d,e)},h.Bc=function(a,b){return this.Z.Bc(this.Qb,a,b)},h.o=function(a){return new Uf(this.Qb.o(a),this.Z)},h=Wf.prototype,h.Ea=function(){return this.A.value},h.clear=function(){this.A.value=null,this.A.children={},this.A.pd=0,Zf(this)},h.zd=function(){return 0<this.A.pd},h.e=function(){
return null===this.Ea()&&!this.zd()},h.R=function(a){var b=this;v(this.A.children,function(c,d){a(new Wf(d,b,c))})},h.path=function(){return new P(null===this.Ha?this.Jd:this.Ha.path()+"/"+this.Jd)},h.name=function(){return this.Jd},h.parent=function(){return this.Ha};var bg=/[\[\].#$\/\u0000-\u001F\u007F]/,cg=/[\[\].#$\u0000-\u001F\u007F]/,dg=/^[a-zA-Z][a-zA-Z._\-+]+$/;h=ug.prototype,h.add=function(a,b){this.set[a]=null===b||b},h.contains=function(a){return y(this.set,a)},h.get=function(a){return this.contains(a)?this.set[a]:void 0},h.remove=function(a){delete this.set[a]},h.clear=function(){this.set={}},h.e=function(){return va(this.set)},h.count=function(){return oa(this.set)},h.keys=function(){var a=[];return v(this.set,function(b,c){a.push(c)}),a},Vc.prototype.find=function(a){if(null!=this.B)return this.B.S(a);if(a.e()||null==this.m)return null;var b=K(a);return a=N(a),this.m.contains(b)?this.m.get(b).find(a):null},Vc.prototype.rc=function(a,b){if(a.e())this.B=b,this.m=null;else if(null!==this.B)this.B=this.B.H(a,b);else{null==this.m&&(this.m=new ug);var c=K(a);this.m.contains(c)||this.m.add(c,new Vc),c=this.m.get(c),a=N(a),c.rc(a,b)}},Vc.prototype.R=function(a){null!==this.m&&vg(this.m,function(b,c){a(b,c)})};var xg="auth.firebase.com",zg=["remember","redirectTo"];Bg.prototype.set=function(a,b){if(!b){if(!this.ee.length)throw Error("fb.login.SessionManager : No storage options available!");b=this.ee[0]}b.set(this.Ue,a)},Bg.prototype.get=function(){var a=Oa(this.ee,u(this.Bg,this));return Va(a=Na(a,function(a){return null!==a}),function(a,c){return Dd(c.token)-Dd(a.token)}),0<a.length?a.shift():null},Bg.prototype.Bg=function(a){try{var b=a.get(this.Ue);if(b&&b.token)return b}catch(c){}return null},Bg.prototype.clear=function(){var a=this;Ma(this.ee,function(b){b.remove(a.Ue)})},Og.prototype.nc=function(a){var c,b=this;try{c=Rb(a.data)}catch(d){}c&&"request"===c.a&&(Ig(window,"message",this.nc),this.fe=a.origin,this.hb&&setTimeout(function(){b.hb(b.fe,c.d,function(a,c){b.mg=!c,b.hb=void 0,Pg(b,{a:"response",d:a,forceKeepWindowOpen:c})})},0))},Og.prototype.Ng=function(){try{Ig(this.Cd,"message",this.Ff)}catch(a){}this.hb&&(Pg(this,{a:"error",d:"unknown closed window"}),this.hb=void 0);try{window.close()}catch(b){}},Og.prototype.Ff=function(a){if(this.mg&&"die"===a.data)try{window.close()}catch(b){}},Qg.prototype.open=function(a,b){cd.set("redirect_request_id",this.tc),cd.set("redirect_request_id",this.tc),b.requestId=this.tc,b.redirectTo=b.redirectTo||window.location.href,a+=(/\?/.test(a)?"":"?")+Ib(b),window.location=a},Qg.isAvailable=function(){return!Eg()&&!Dg()},Qg.prototype.Fc=function(){return"redirect"};var Rg={NETWORK_ERROR:"Unable to contact the Firebase server.",SERVER_ERROR:"An unknown server error occurred.",TRANSPORT_UNAVAILABLE:"There are no login transports available for the requested method.",REQUEST_INTERRUPTED:"The browser redirected the page before the login request could complete.",USER_CANCELLED:"The user cancelled authentication."};Tg.prototype.open=function(a,b,c){function d(a){if(g&&(document.body.removeChild(g),g=void 0),t&&(t=clearInterval(t)),Ig(window,"message",e),Ig(window,"unload",d),l&&!a)try{l.close()}catch(b){k.postMessage("die",m)}l=k=void 0}function e(a){if(a.origin===m)try{var b=Rb(a.data);"ready"===b.a?k.postMessage(A,m):"error"===b.a?(d(!1),c&&(c(b.d),c=null)):"response"===b.a&&(d(b.forceKeepWindowOpen),c&&(c(null,b.d),c=null))}catch(e){}}var g,k,f=Fg(8);if(!this.options.relay_url)return c(Error("invalid arguments: origin of url and relay_url must match"));var m=Jg(a);if(m!==Jg(this.options.relay_url))c&&setTimeout(function(){c(Error("invalid arguments: origin of url and relay_url must match"))},0);else{f&&((g=document.createElement("iframe")).setAttribute("src",this.options.relay_url),g.style.display="none",g.setAttribute("name","__winchan_relay_frame"),document.body.appendChild(g),k=g.contentWindow),a+=(/\?/.test(a)?"":"?")+Ib(b);var l=window.open(a,this.options.window_name,this.options.window_features);k||(k=l);var t=setInterval(function(){l&&l.closed&&(d(!1),c&&(c(Sg("USER_CANCELLED")),c=null))},500),A=G({a:"request",d:b});Hg(window,"unload",d),Hg(window,"message",e)}},Tg.isAvailable=function(){var a;return(a="postMessage"in window&&!Eg())&&((a=Dg()||"undefined"!=typeof navigator&&(!!Cg().match(/Windows Phone/)||!!window.Windows&&/^ms-appx:/.test(location.href)))||(a=Cg(),a="undefined"!=typeof navigator&&"undefined"!=typeof window&&!!(a.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i)||a.match(/CriOS/)||a.match(/Twitter for iPhone/)||a.match(/FBAN\/FBIOS/)||window.navigator.standalone)),a=!a),a&&!Cg().match(/PhantomJS/)},Tg.prototype.Fc=function(){return"popup"},Ug.prototype.open=function(a,b,c){function d(){c&&(c(Sg("REQUEST_INTERRUPTED")),c=null)}var g,e=new XMLHttpRequest,f=this.options.method.toUpperCase();if(Hg(window,"beforeunload",d),e.onreadystatechange=function(){if(c&&4===e.readyState){var a;if(200<=e.status&&300>e.status){try{a=Rb(e.responseText)}catch(b){}c(null,a)}else 500<=e.status&&600>e.status?c(Sg("SERVER_ERROR")):c(Sg("NETWORK_ERROR"));c=null,Ig(window,"beforeunload",d)}},"GET"===f)a+=(/\?/.test(a)?"":"?")+Ib(b),g=null;else{var k=this.options.headers.content_type;"application/json"===k&&(g=G(b)),"application/x-www-form-urlencoded"===k&&(g=Ib(b))}for(var m in e.open(f,a,!0),ya(a={"X-Requested-With":"XMLHttpRequest",Accept:"application/json;text/plain"},this.options.headers),a)e.setRequestHeader(m,a[m]);e.send(g)},Ug.isAvailable=function(){var a;return(a=!!window.XMLHttpRequest)&&(a=!((a=Cg()).match(/MSIE/)||a.match(/Trident/))||Fg(10)),a},Ug.prototype.Fc=function(){return"json"},Vg.prototype.open=function(a,b,c){function d(){c&&(c(Sg("USER_CANCELLED")),c=null)}var g,e=this,f=sd(xg);b.requestId=this.tc,b.redirectTo=f.scheme+"://"+f.host+"/blank/page.html",a+=/\?/.test(a)?"":"?",a+=Ib(b),(g=window.open(a,"_blank","location=no"))&&r(g.addEventListener)?(g.addEventListener("loadstart",function(a){var b;if(b=a&&a.url)a:{try{var l=document.createElement("a");l.href=a.url,b=l.host===f.host&&"/blank/page.html"===l.pathname;break a}catch(t){}b=!1}b&&(a=Kg(a.url),g.removeEventListener("exit",d),g.close(),a=new yg(null,null,{requestId:e.tc,requestKey:a}),e.Kf.requestWithCredential("/auth/session",a,c),c=null)}),g.addEventListener("exit",d)):c(Sg("TRANSPORT_UNAVAILABLE"))},Vg.isAvailable=function(){return Dg()},Vg.prototype.Fc=function(){return"redirect"},Wg.prototype.open=function(a,b,c){function d(){c&&(c(Sg("REQUEST_INTERRUPTED")),c=null)}function e(){setTimeout(function(){window.__firebase_auth_jsonp[f]=void 0,va(window.__firebase_auth_jsonp)&&(window.__firebase_auth_jsonp=void 0);try{var a=document.getElementById(f);a&&a.parentNode.removeChild(a)}catch(b){}},1),Ig(window,"beforeunload",d)}var f="fn"+(new Date).getTime()+Math.floor(99999*Math.random());b[this.options.callback_parameter]="__firebase_auth_jsonp."+f,a+=(/\?/.test(a)?"":"?")+Ib(b),Hg(window,"beforeunload",d),window.__firebase_auth_jsonp[f]=function(a){c&&(c(null,a),c=null),e()},Xg(f,a,c)},Wg.isAvailable=function(){return"undefined"!=typeof document&&null!=document.createElement},Wg.prototype.Fc=function(){return"json"},ka(Yg,ff),h=Yg.prototype,h.Be=function(){return this.qb||null},h.ve=function(a,b){gh(this);var c=Ag(a);c.fb._method="POST",this.uc("/users",c,function(a,c){a?T(b,a):T(b,a,c)})},h.Xe=function(a,b){var c=this;gh(this);var d="/users/"+encodeURIComponent(a.email),e=Ag(a);e.fb._method="DELETE",this.uc(d,e,function(a,d){!a&&d&&d.uid&&c.qb&&c.qb.uid&&c.qb.uid===d.uid&&eh(c),T(b,a)})},h.se=function(a,b){gh(this);var c="/users/"+encodeURIComponent(a.email)+"/password",d=Ag(a);d.fb._method="PUT",d.fb.password=a.newPassword,this.uc(c,d,function(a){T(b,a)})},h.re=function(a,b){gh(this);var c="/users/"+encodeURIComponent(a.oldEmail)+"/email",d=Ag(a);d.fb._method="PUT",d.fb.email=a.newEmail,d.fb.password=a.password,this.uc(c,d,function(a){T(b,a)})},h.Ze=function(a,b){gh(this);var c="/users/"+encodeURIComponent(a.email)+"/password",d=Ag(a);d.fb._method="POST",this.uc(c,d,function(a){T(b,a)})},h.uc=function(a,b,c){jh(this,[Ug,Wg],a,b,c)},h.Ee=function(a){return O("auth_status"===a,'initial event must be of type "auth_status"'),this.We?null:[this.qb]};var gd="websocket",hd="long_polling",oh,ph;nh.prototype.open=function(a,b){this.mf=0,this.na=b,this.Ef=new kh(a),this.Db=!1;var c=this;this.ub=setTimeout(function(){c.f("Timed out trying to connect."),c.bb(),c.ub=null},Math.floor(3e4)),ud(function(){if(!c.Db){c.Wa=new qh(function(a,b,d){if(rh(c,arguments),c.Wa)if(c.ub&&(clearTimeout(c.ub),c.ub=null),c.Kc=!0,"start"==a)c.id=b,c.Mf=d;else{if("close"!==a)throw Error("Unrecognized command received: "+a);b?(c.Wa.$d=!1,lh(c.Ef,b,function(){c.bb()})):c.bb()}},function(a,b){rh(c,arguments),mh(c.Ef,a,b)},function(){c.bb()},c.ld);var a={start:"t"};a.ser=Math.floor(1e8*Math.random()),c.Wa.ke&&(a.cb=c.Wa.ke),a.v="5",c.Xf&&(a.s=c.Xf),c.Fb&&(a.ls=c.Fb),"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf("firebaseio.com")&&(a.r="f"),a=c.ld(a),c.f("Connecting via long-poll to "+a),sh(c.Wa,a,function(){})}})},nh.prototype.start=function(){var a=this.Wa,b=this.Mf;for(a.Gg=this.id,a.Hg=b,a.oe=!0;th(a););a=this.id,b=this.Mf,this.kc=document.createElement("iframe");var c={dframe:"t"};c.id=a,c.pw=b,this.kc.src=this.ld(c),this.kc.style.display="none",document.body.appendChild(this.kc)},nh.isAvailable=function(){return oh||!ph&&"undefined"!=typeof document&&null!=document.createElement&&!("object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"==typeof Windows&&"object"==typeof Windows.kh)&&!0},h=nh.prototype,h.Hd=function(){},h.fd=function(){this.Db=!0,this.Wa&&(this.Wa.close(),this.Wa=null),this.kc&&(document.body.removeChild(this.kc),this.kc=null),this.ub&&(clearTimeout(this.ub),this.ub=null)},h.bb=function(){this.Db||(this.f("Longpoll is closing itself"),this.fd(),this.na&&(this.na(this.Kc),this.na=null))},h.close=function(){this.Db||(this.f("Longpoll is being closed."),this.fd())},h.send=function(a){a=G(a),this.sb+=a.length,rc(this.Xa,"bytes_sent",a.length),a=yd(a=nb(a=Ob(a),!0),1840);for(var b=0;b<a.length;b++){var c=this.Wa;c.cd.push({Yg:this.mf,hh:a.length,of:a[b]}),c.oe&&th(c),this.mf++}},qh.prototype.close=function(){if(this.oe=!1,this.Ga){this.Ga.jb.body.innerHTML="";var a=this;setTimeout(function(){null!==a.Ga&&(document.body.removeChild(a.Ga),a.Ga=null)},Math.floor(0))}var b=this.lb;b&&(this.lb=null,b())};var vh=null,xh;"undefined"!=typeof MozWebSocket?vh=MozWebSocket:"undefined"!=typeof WebSocket&&(vh=WebSocket),wh.prototype.open=function(a,b){this.lb=b,this.Lg=a,this.f("Websocket connecting to "+this.jf),this.Kc=!1,bd.set("previous_websocket_failure",!0);try{this.La=new vh(this.jf)}catch(c){this.f("Error instantiating WebSocket.");var d=c.message||c.data;return d&&this.f(d),void this.bb()}var e=this;this.La.onopen=function(){e.f("Websocket connected."),e.Kc=!0},this.La.onclose=function(){e.f("Websocket connection was disconnected."),e.La=null,e.bb()},this.La.onmessage=function(a){if(null!==e.La)if(a=a.data,e.rb+=a.length,rc(e.Xa,"bytes_received",a.length),yh(e),null!==e.frames)zh(e,a);else{a:{if(O(null===e.frames,"We already have a frame buffer"),6>=a.length){var b=Number(a);if(!isNaN(b)){e.ff=b,e.frames=[],a=null;break a}}e.ff=1,e.frames=[]}null!==a&&zh(e,a)}},this.La.onerror=function(a){e.f("WebSocket error.  Closing connection."),(a=a.message||a.data)&&e.f(a),e.bb()}},wh.prototype.start=function(){},wh.isAvailable=function(){var a=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var b=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);b&&1<b.length&&4.4>parseFloat(b[1])&&(a=!0)}return!a&&null!==vh&&!xh},wh.responsesRequiredToBeHealthy=2,wh.healthyTimeout=3e4,h=wh.prototype,h.Hd=function(){bd.remove("previous_websocket_failure")},h.send=function(a){yh(this),a=G(a),this.sb+=a.length,rc(this.Xa,"bytes_sent",a.length),1<(a=yd(a,16384)).length&&Ah(this,String(a.length));for(var b=0;b<a.length;b++)Ah(this,a[b])},h.fd=function(){this.Db=!0,this.Nc&&(clearInterval(this.Nc),this.Nc=null),this.La&&(this.La.close(),this.La=null)},h.bb=function(){this.Db||(this.f("WebSocket is closing itself"),this.fd(),this.lb&&(this.lb(this.Kc),this.lb=null))},h.close=function(){this.Db||(this.f("WebSocket is being closed"),this.fd())};var Dh=[nh,wh];Fh.prototype.Ia=function(a){Qh(this,{t:"d",d:a})},Fh.prototype.Ld=function(a){Nh(this),this.nc(a)},Fh.prototype.close=function(){2!==this.N&&(this.f("Closing realtime connection."),this.N=2,Mh(this),this.na&&(this.na(),this.na=null))};var Sh=0,Uh=0;h=Rh.prototype,h.Ia=function(a,b,c){var d=++this.Xg;a={r:d,a:a,b:b},this.f(G(a)),O(this.qa,"sendRequest call when we're not connected not allowed."),this.Ma.Ia(a),c&&(this.Wd[d]=c)},h.Cf=function(a,b,c,d){var e=a.wa(),f=a.path.toString();this.f("Listen called for "+f+" "+e),this.ba[f]=this.ba[f]||{},O(Ie(a.n)||!He(a.n),"listen() called for non-default but complete query"),O(!this.ba[f][e],"listen() called twice for same path/queryId."),a={I:d,Ad:b,Ug:a,tag:c},this.ba[f][e]=a,this.qa&&Vh(this,a)},h.O=function(a,b,c){this.Ca={rg:a,sf:!1,Dc:b,od:c},this.f("Authenticating using credential: "+a),Xh(this),(b=40==a.length)||(b="object"==typeof(a=Cd(a).Ec)&&!0===z(a,"admin")),b&&(this.f("Admin auth credential detected.  Reducing max reconnect time."),this.Id=3e4)},h.je=function(a){this.Ca=null,this.qa&&this.Ia("unauth",{},function(b){a(b.s,b.d)})},h.$f=function(a,b){var c=a.path.toString(),d=a.wa();if(this.f("Unlisten called for "+c+" "+d),O(Ie(a.n)||!He(a.n),"unlisten() called for non-default but complete query"),Wh(this,c,d)&&this.qa){var e=Ge(a.n);this.f("Unlisten on "+c+" for "+d),c={p:c},b&&(c.q=e,c.t=b),this.Ia("n",c)}},h.Qe=function(a,b,c){this.qa?Yh(this,"o",a,b,c):this.Yc.push({bd:a,action:"o",data:b,I:c})},h.Gf=function(a,b,c){this.qa?Yh(this,"om",a,b,c):this.Yc.push({bd:a,action:"om",data:b,I:c})},h.Md=function(a,b){this.qa?Yh(this,"oc",a,null,b):this.Yc.push({bd:a,action:"oc",data:null,I:b})},h.put=function(a,b,c,d){Zh(this,"p",a,b,c,d)},h.Df=function(a,b,c,d){Zh(this,"m",a,b,c,d)},h.Ye=function(a){this.qa&&(a={c:a},this.f("reportStats",a),this.Ia("s",a,function(a){"ok"!==a.s&&this.f("reportStats","Error sending stats: "+a.d)}))},h.Ld=function(a){if("r"in a){this.f("from server: "+G(a));var b=a.r,c=this.Wd[b];c&&(delete this.Wd[b],c(a.b))}else{if("error"in a)throw"A server-side error has occurred: "+a.error;"a"in a&&(b=a.a,c=a.b,this.f("handleServerMessage",b,c),"d"===b?this.Kb(c.p,c.d,!1,c.t):"m"===b?this.Kb(c.p,c.d,!0,c.t):"c"===b?ai(this,c.p,c.q):"ac"===b?(a=c.s,b=c.d,c=this.Ca,this.Ca=null,c&&c.od&&c.od(a,b)):"sd"===b?this.$e?this.$e(c):"msg"in c&&"undefined"!=typeof console&&console.log("FIREBASE: "+c.msg.replace("\n","\nFIREBASE: ")):qd("Unrecognized action received from server: "+G(b)+"\nAre you using the latest client?"))}},h.Zc=function(a,b){if(this.f("connection ready"),this.qa=!0,this.Oc=(new Date).getTime(),this.Se({serverTimeOffset:a-(new Date).getTime()}),this.Fb=b,this.rf){var c={};c["sdk.js."+Eb.replace(/\./g,"-")]=1,Dg()?c["framework.cordova"]=1:"object"==typeof navigator&&"ReactNative"===navigator.product&&(c["framework.reactnative"]=1),this.Ye(c)}bi(this),this.rf=!1,this.Xc(!0)},h.Og=function(a){a&&!this.Sb&&this.eb===this.Id&&(this.f("Window became visible.  Reducing delay."),this.eb=1e3,this.Ma||Th(this,0)),this.Sb=a},h.Mg=function(a){a?(this.f("Browser went online."),this.eb=1e3,this.Ma||Th(this,0)):(this.f("Browser went offline.  Killing connection."),this.Ma&&this.Ma.close())},h.If=function(){this.f("data client disconnected"),this.qa=!1,this.Ma=null;for(var a=0;a<this.sa.length;a++){var b=this.sa[a];b&&"h"in b.Pf&&b.Vg&&(b.I&&b.I("disconnect"),delete this.sa[a],this.ad--)}0===this.ad&&(this.sa=[]),this.Wd={},di(this)&&(this.Sb?this.Oc&&(3e4<(new Date).getTime()-this.Oc&&(this.eb=1e3),this.Oc=null):(this.f("Window isn't visible.  Delaying reconnect."),this.eb=this.Id,this.Ke=(new Date).getTime()),a=Math.max(0,this.eb-((new Date).getTime()-this.Ke)),a*=Math.random(),this.f("Trying to reconnect in "+a+"ms"),Th(this,a),this.eb=Math.min(this.Id,1.3*this.eb)),this.Xc(!1)},h.Cb=function(){this.Ie=!0,this.Ma?this.Ma.close():(this.wb&&(clearTimeout(this.wb),this.wb=null),this.qa&&this.If())},h.vc=function(){this.Ie=!1,this.eb=1e3,this.Ma||Th(this,0)};var U={zg:function(){oh=xh=!0}};U.forceLongPolling=U.zg,U.Ag=function(){ph=!0},U.forceWebSockets=U.Ag,U.Eg=function(){return wh.isAvailable()},U.isWebSocketsAvailable=U.Eg,U.ah=function(a,b){a.k.Va.$e=b},U.setSecurityDebugCallback=U.ah,U.bf=function(a,b){a.k.bf(b)},U.stats=U.bf,U.cf=function(a,b){a.k.cf(b)},U.statsIncrementCounter=U.cf,U.ud=function(a){return a.k.ud},U.dataUpdateCount=U.ud,U.Dg=function(a,b){a.k.He=b},U.interceptServerData=U.Dg,U.Kg=function(a){new Og(a)},U.onPopupOpen=U.Kg,U.Zg=function(a){xg=a},U.setAuthenticationServer=U.Zg,V.prototype.cancel=function(a){D("Firebase.onDisconnect().cancel",0,1,arguments.length),F("Firebase.onDisconnect().cancel",1,a,!0);var b=new B;return this.dd.Md(this.ta,C(b,a)),b.D},V.prototype.cancel=V.prototype.cancel,V.prototype.remove=function(a){D("Firebase.onDisconnect().remove",0,1,arguments.length),og("Firebase.onDisconnect().remove",this.ta),F("Firebase.onDisconnect().remove",1,a,!0);var b=new B;return fi(this.dd,this.ta,null,C(b,a)),b.D},V.prototype.remove=V.prototype.remove,V.prototype.set=function(a,b){D("Firebase.onDisconnect().set",1,2,arguments.length),og("Firebase.onDisconnect().set",this.ta),gg("Firebase.onDisconnect().set",a,this.ta,!1),F("Firebase.onDisconnect().set",2,b,!0);var c=new B;return fi(this.dd,this.ta,a,C(c,b)),c.D},V.prototype.set=V.prototype.set,V.prototype.Ob=function(a,b,c){D("Firebase.onDisconnect().setWithPriority",2,3,arguments.length),og("Firebase.onDisconnect().setWithPriority",this.ta),gg("Firebase.onDisconnect().setWithPriority",a,this.ta,!1),kg("Firebase.onDisconnect().setWithPriority",2,b),F("Firebase.onDisconnect().setWithPriority",3,c,!0);var d=new B;return gi(this.dd,this.ta,a,b,C(d,c)),d.D},V.prototype.setWithPriority=V.prototype.Ob,V.prototype.update=function(a,b){if(D("Firebase.onDisconnect().update",1,2,arguments.length),og("Firebase.onDisconnect().update",this.ta),da(a)){for(var c={},d=0;d<a.length;++d)c[""+d]=a[d];a=c,S("Passing an Array to Firebase.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}return jg("Firebase.onDisconnect().update",a,this.ta),F("Firebase.onDisconnect().update",2,b,!0),c=new B,hi(this.dd,this.ta,a,C(c,b)),c.D},V.prototype.update=V.prototype.update,W.prototype.J=function(){return D("Firebase.DataSnapshot.val",0,0,arguments.length),this.A.J()},W.prototype.val=W.prototype.J,W.prototype.qf=function(){return D("Firebase.DataSnapshot.exportVal",0,0,arguments.length),this.A.J(!0)},W.prototype.exportVal=W.prototype.qf,W.prototype.xg=function(){return D("Firebase.DataSnapshot.exists",0,0,arguments.length),!this.A.e()},W.prototype.exists=W.prototype.xg,W.prototype.o=function(a){D("Firebase.DataSnapshot.child",0,1,arguments.length),fa(a)&&(a=String(a)),ng("Firebase.DataSnapshot.child",a);var b=new P(a),c=this.Y.o(b);return new W(this.A.S(b),c,R)},W.prototype.child=W.prototype.o,W.prototype.Fa=function(a){D("Firebase.DataSnapshot.hasChild",1,1,arguments.length),ng("Firebase.DataSnapshot.hasChild",a);var b=new P(a);return!this.A.S(b).e()},W.prototype.hasChild=W.prototype.Fa,W.prototype.C=function(){return D("Firebase.DataSnapshot.getPriority",0,0,arguments.length),this.A.C().J()},W.prototype.getPriority=W.prototype.C,W.prototype.forEach=function(a){if(D("Firebase.DataSnapshot.forEach",1,1,arguments.length),F("Firebase.DataSnapshot.forEach",1,a,!1),this.A.L())return!1;var b=this;return!!this.A.R(this.g,function(c,d){return a(new W(d,b.Y.o(c),R))})},W.prototype.forEach=W.prototype.forEach,W.prototype.zd=function(){return D("Firebase.DataSnapshot.hasChildren",0,0,arguments.length),!this.A.L()&&!this.A.e()},W.prototype.hasChildren=W.prototype.zd,W.prototype.name=function(){return S("Firebase.DataSnapshot.name() being deprecated. Please use Firebase.DataSnapshot.key() instead."),D("Firebase.DataSnapshot.name",0,0,arguments.length),this.key()},W.prototype.name=W.prototype.name,W.prototype.key=function(){return D("Firebase.DataSnapshot.key",0,0,arguments.length),this.Y.key()},W.prototype.key=W.prototype.key,W.prototype.Hb=function(){return D("Firebase.DataSnapshot.numChildren",0,0,arguments.length),this.A.Hb()},W.prototype.numChildren=W.prototype.Hb,W.prototype.Mb=function(){return D("Firebase.DataSnapshot.ref",0,0,arguments.length),this.Y},W.prototype.ref=W.prototype.Mb,h=ii.prototype,h.Qf=function(a){return"value"===a},h.createEvent=function(a,b){var c=b.n.g;return new jc("value",this,new W(a.Na,b.Mb(),c))},h.Zb=function(a){var b=this.vb;if("cancel"===a.De()){O(this.tb,"Raising a cancel event on a listener with no cancel callback");var c=this.tb;return function(){c.call(b,a.error)}}var d=this.Vb;return function(){d.call(b,a.be)}},h.lf=function(a,b){return this.tb?new kc(this,a,b):null},h.matches=function(a){return a instanceof ii&&(!a.Vb||!this.Vb||a.Vb===this.Vb&&a.vb===this.vb)},h.yf=function(){return null!==this.Vb},h=ji.prototype,h.Qf=function(a){return("children_removed"===(a="children_added"===a?"child_added":a)?"child_removed":a)in this.ja},h.lf=function(a,b){return this.tb?new kc(this,a,b):null},h.createEvent=function(a,b){O(null!=a.Za,"Child events should have a childName.");var c=b.Mb().o(a.Za);return new jc(a.type,this,new W(a.Na,c,b.n.g),a.Td)},h.Zb=function(a){var b=this.vb;if("cancel"===a.De()){O(this.tb,"Raising a cancel event on a listener with no cancel callback");var c=this.tb;return function(){c.call(b,a.error)}}var d=this.ja[a.wd];return function(){d.call(b,a.be,a.Td)}},h.matches=function(a){if(a instanceof ji){if(!this.ja||!a.ja)return!0;if(this.vb===a.vb)if((b=oa(a.ja))===oa(this.ja)){if(1===b){var b=pa(a.ja),c=pa(this.ja);return!(c!==b||a.ja[b]&&this.ja[c]&&a.ja[b]!==this.ja[c])}return na(this.ja,function(b,c){return a.ja[c]===b})}}return!1},h.yf=function(){return null!==this.ja},h=ki.prototype,h.e=function(){return va(this.za)},h.gb=function(a,b,c){var d=a.source.Lb;if(null!==d)return d=z(this.za,d),O(null!=d,"SyncTree gave us an op for an invalid query."),d.gb(a,b,c);var e=[];return v(this.za,function(d){e=e.concat(d.gb(a,b,c))}),e},h.Tb=function(a,b,c,d,e){var f=a.wa();if(!(g=z(this.za,f))){var g,k=!1;(g=c.Aa(e?d:null))?k=!0:(g=d instanceof fe?c.Cc(d):H,k=!1),g=new Ye(a,new je(new Xb(g,k,!1),new Xb(d,e,!1))),this.za[f]=g}return g.Tb(b),af(g,b)},h.nb=function(a,b,c){var d=a.wa(),e=[],f=[],g=null!=li(this);if("default"===d){var k=this;v(this.za,function(a,d){f=f.concat(a.nb(b,c)),a.e()&&(delete k.za[d],He(a.Y.n)||e.push(a.Y))})}else{var m=z(this.za,d);m&&(f=f.concat(m.nb(b,c)),m.e()&&(delete this.za[d],He(m.Y.n)||e.push(m.Y)))}return g&&null==li(this)&&e.push(new X(a.k,a.path)),{Wg:e,vg:f}},h.kb=function(a){var b=null;return v(this.za,function(c){b=b||c.kb(a)}),b},oi.prototype.Tb=function(a,b){var c=a.path,d=null,e=!1;zf(this.va,c,function(a,b){var f=lf(a,c);d=d||b.kb(f),e=e||null!=li(b)});var g,f=this.va.get(c);f?(e=e||null!=li(f),d=d||f.kb(M)):(f=new ki,this.va=this.va.set(c,f)),null!=d?g=!0:(g=!1,d=H,Cf(this.va.subtree(c),function(a,b){var c=b.kb(M);c&&(d=d.W(a,c))}));var k=null!=ni(f,a);if(!k&&!He(a.n)){var m=zi(a);O(!(m in this.qc),"View does not exist, but we have a tag");var l=Ai++;this.qc[m]=l,this.df["_"+l]=m}return g=f.Tb(a,b,new Uf(c,this.mb),d,g),k||e||(f=ni(f,a),g=g.concat(Bi(this,a,f))),g},oi.prototype.nb=function(a,b,c){var d=a.path,e=this.va.get(d),f=[];if(e&&("default"===a.wa()||null!=ni(e,a))){f=e.nb(a,b,c),e.e()&&(this.va=this.va.remove(d)),e=f.Wg,f=f.vg,b=-1!==Sa(e,function(a){return He(a.n)});var g=xf(this.va,d,function(a,b){return null!=li(b)});if(b&&!g&&!(d=this.va.subtree(d)).e()){d=Ci(d);for(var k=0;k<d.length;++k){var l=(m=d[k]).Y,m=Di(this,m);this.Qc.af(Ei(l),Fi(this,l),m.Ad,m.I)}}if(!g&&0<e.length&&!c)if(b)this.Qc.de(Ei(a),null);else{var t=this;Ma(e,function(a){a.wa();var b=t.qc[zi(a)];t.Qc.de(Ei(a),b)})}Gi(this,e)}return f},oi.prototype.Aa=function(a,b){var c=this.mb,d=xf(this.va,a,function(b,c){var d=lf(b,a);if(d=c.kb(d))return d});return c.Aa(a,d,b,!0)};var Ai=1;h=Ji.prototype,h.toString=function(){return(this.G.ob?"https://":"http://")+this.G.host},h.name=function(){return this.G.lc},h.Kb=function(a,b,c,d){this.ud++;var e=new P(a);b=this.He?this.He(a,b):b,a=[],d?c?(b=ma(b,function(a){return Q(a)}),a=yi(this.M,e,b,d)):(b=Q(b),a=ui(this.M,e,b,d)):c?(d=ma(b,function(a){return Q(a)}),a=ti(this.M,e,d)):(d=Q(b),a=qi(this.M,new Ac(Gf,e,d))),d=e,0<a.length&&(d=Ni(this,e)),dc(this.fa,d,a)},h.Xc=function(a){Ki(this,"connected",a),!1===a&&Oi(this)},h.Se=function(a){var b=this;zd(a,function(a,d){Ki(b,d,a)})},h.Pe=function(a){Ki(this,"authenticated",a)},h.Ob=function(a,b,c,d){this.f("set",{path:a.toString(),value:b,nh:c});var e=Mi(this),f=(e=Xc(b=Q(b,c),e),this.Kd++);e=pi(this.M,a,e,f,!0);$b(this.fa,e);var g=this;this.da.put(a.toString(),b.J(!0),function(b,c){var e="ok"===b;e||S("set at "+a+" failed: "+b),e=si(g.M,f,!e),dc(g.fa,a,e),Pi(d,b,c)}),Ni(this,e=Qi(this,a)),dc(this.fa,e,[])},h.update=function(a,b,c){this.f("update",{path:a.toString(),value:b});var d=!0,e=Mi(this),f={};if(v(b,function(a,b){d=!1;var c=Q(a);f[b]=Xc(c,e)}),d)fc("update() called with empty data.  Don't do anything."),Pi(c,"ok");else{var g=this.Kd++,k=ri(this.M,a,f,g);$b(this.fa,k);var m=this;this.da.Df(a.toString(),b,function(b,d){(e="ok"===b)||S("update at "+a+" failed: "+b);var e=si(m.M,g,!e),f=a;0<e.length&&(f=Ni(m,a)),dc(m.fa,f,e),Pi(c,b,d)}),Ni(this,b=Qi(this,a)),dc(this.fa,a,[])}},h.Md=function(a,b){var c=this;this.da.Md(a.toString(),function(d,e){"ok"===d&&wg(c.na,a),Pi(b,d,e)})},h.Cb=function(){this.Va&&this.Va.Cb()},h.vc=function(){this.Va&&this.Va.vc()},h.bf=function(a){if("undefined"!=typeof console){a?(this.hd||(this.hd=new oc(this.Xa)),a=this.hd.get()):a=this.Xa.get();var c,b=Pa(ra(a),function(a,b){return Math.max(b.length,a)},0);for(c in a){for(var d=a[c],e=c.length;e<b+2;e++)c+=" ";console.log(c+d)}}},h.cf=function(a){rc(this.Xa,a),this.eh.Vf[a]=!0},h.f=function(){var b="";this.Va&&(b=this.Va.id+":"),fc(b,arguments)},aj.prototype.Cb=function(){for(var a in this.sc)this.sc[a].Cb()},aj.prototype.vc=function(){for(var a in this.sc)this.sc[a].vc()},aj.prototype.ze=function(){this.ag=!0},ba(aj),aj.prototype.interrupt=aj.prototype.Cb,aj.prototype.resume=aj.prototype.vc,h=Y.prototype,h.Mb=function(){return D("Query.ref",0,0,arguments.length),new X(this.k,this.path)},h.Ib=function(a,b,c,d){D("Query.on",2,4,arguments.length),lg("Query.on",a,!1),F("Query.on",2,b,!1);var e=ej("Query.on",c,d);if("value"===a)Ri(this.k,this,new ii(b,e.cancel||null,e.Qa||null));else{var f={};f[a]=b,Ri(this.k,this,new ji(f,e.cancel,e.Qa))}return b},h.mc=function(a,b,c){D("Query.off",0,3,arguments.length),lg("Query.off",a,!0),F("Query.off",2,b,!0),Qb("Query.off",3,c);var d=null,e=null;"value"===a?d=new ii(b||null,null,c||null):a&&(b&&((e={})[a]=b),d=new ji(e,null,c||null)),e=this.k,d=".info"===K(this.path)?e.Fd.nb(this,d):e.M.nb(this,d),bc(e.fa,this.path,d)},h.Pg=function(a,b){function c(k){f&&(f=!1,e.mc(a,c),b&&b.call(d.Qa,k),g.resolve(k))}D("Query.once",1,4,arguments.length),lg("Query.once",a,!1),F("Query.once",2,b,!0);var d=ej("Query.once",arguments[2],arguments[3]),e=this,f=!0,g=new B;return Nb(g.D),this.Ib(a,c,function(b){e.mc(a,c),d.cancel&&d.cancel.call(d.Qa,b),g.reject(b)}),g.D},h.Le=function(a){if(S("Query.limit() being deprecated. Please use Query.limitToFirst() or Query.limitToLast() instead."),D("Query.limit",1,1,arguments.length),!fa(a)||Math.floor(a)!==a||0>=a)throw Error("Query.limit: First argument must be a positive integer.");if(this.n.la)throw Error("Query.limit: Limit was already set (by another call to limit, limitToFirst, orlimitToLast.");var b=this.n.Le(a);return cj(b),new Y(this.k,this.path,b,this.pc)},h.Me=function(a){if(D("Query.limitToFirst",1,1,arguments.length),!fa(a)||Math.floor(a)!==a||0>=a)throw Error("Query.limitToFirst: First argument must be a positive integer.");if(this.n.la)throw Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new Y(this.k,this.path,this.n.Me(a),this.pc)},h.Ne=function(a){if(D("Query.limitToLast",1,1,arguments.length),!fa(a)||Math.floor(a)!==a||0>=a)throw Error("Query.limitToLast: First argument must be a positive integer.");if(this.n.la)throw Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new Y(this.k,this.path,this.n.Ne(a),this.pc)},h.Qg=function(a){if(D("Query.orderByChild",1,1,arguments.length),"$key"===a)throw Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===a)throw Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===a)throw Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');ng("Query.orderByChild",a),dj(this,"Query.orderByChild");var b=new P(a);if(b.e())throw Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");return b=new ve(b),bj(b=Fe(this.n,b)),new Y(this.k,this.path,b,!0)},h.Rg=function(){D("Query.orderByKey",0,0,arguments.length),dj(this,"Query.orderByKey");var a=Fe(this.n,re);return bj(a),new Y(this.k,this.path,a,!0)},h.Sg=function(){D("Query.orderByPriority",0,0,arguments.length),dj(this,"Query.orderByPriority");var a=Fe(this.n,R);return bj(a),new Y(this.k,this.path,a,!0)},h.Tg=function(){D("Query.orderByValue",0,0,arguments.length),dj(this,"Query.orderByValue");var a=Fe(this.n,Be);return bj(a),new Y(this.k,this.path,a,!0)},h.ce=function(a,b){D("Query.startAt",0,2,arguments.length),gg("Query.startAt",a,this.path,!0),mg("Query.startAt",b);var c=this.n.ce(a,b);if(cj(c),bj(c),this.n.oa)throw Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return p(a)||(b=a=null),new Y(this.k,this.path,c,this.pc)},h.vd=function(a,b){D("Query.endAt",0,2,arguments.length),gg("Query.endAt",a,this.path,!0),mg("Query.endAt",b);var c=this.n.vd(a,b);if(cj(c),bj(c),this.n.ra)throw Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new Y(this.k,this.path,c,this.pc)},h.tg=function(a,b){if(D("Query.equalTo",1,2,arguments.length),gg("Query.equalTo",a,this.path,!1),mg("Query.equalTo",b),this.n.oa)throw Error("Query.equalTo: Starting point was already set (by another call to endAt or equalTo).");if(this.n.ra)throw Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.ce(a,b).vd(a,b)},h.toString=function(){D("Query.toString",0,0,arguments.length);for(var a=this.path,b="",c=a.aa;c<a.u.length;c++)""!==a.u[c]&&(b+="/"+encodeURIComponent(String(a.u[c])));return this.k.toString()+(b||"/")},h.wa=function(){var a=xd(Ge(this.n));return"{}"===a?"default":a},Y.prototype.ref=Y.prototype.Mb,Y.prototype.on=Y.prototype.Ib,Y.prototype.off=Y.prototype.mc,Y.prototype.once=Y.prototype.Pg,Y.prototype.limit=Y.prototype.Le,Y.prototype.limitToFirst=Y.prototype.Me,Y.prototype.limitToLast=Y.prototype.Ne,Y.prototype.orderByChild=Y.prototype.Qg,Y.prototype.orderByKey=Y.prototype.Rg,Y.prototype.orderByPriority=Y.prototype.Sg,Y.prototype.orderByValue=Y.prototype.Tg,Y.prototype.startAt=Y.prototype.ce,Y.prototype.endAt=Y.prototype.vd,Y.prototype.equalTo=Y.prototype.tg,Y.prototype.toString=Y.prototype.toString;var Z={};Z.zc=Rh,Z.DataConnection=Z.zc,Rh.prototype.dh=function(a,b){this.Ia("q",{p:a},b)},Z.zc.prototype.simpleListen=Z.zc.prototype.dh,Rh.prototype.sg=function(a,b){this.Ia("echo",{d:a},b)},Z.zc.prototype.echo=Z.zc.prototype.sg,Rh.prototype.interrupt=Rh.prototype.Cb,Z.dg=Fh,Z.RealTimeConnection=Z.dg,Fh.prototype.sendRequest=Fh.prototype.Ia,Fh.prototype.close=Fh.prototype.close,Z.Cg=function(a){var b=Rh.prototype.put;return Rh.prototype.put=function(c,d,e,f){p(f)&&(f=a()),b.call(this,c,d,e,f)},function(){Rh.prototype.put=b}},Z.hijackHash=Z.Cg,Z.cg=dd,Z.ConnectionTarget=Z.cg,Z.wa=function(a){return a.wa()},Z.queryIdentifier=Z.wa,Z.Fg=function(a){return a.k.Va.ba},Z.listens=Z.Fg,Z.ze=function(a){a.ze()},Z.forceRestClient=Z.ze,ka(X,Y);var fj=X,gj=["Firebase"],hj=n,ij;gj[0]in hj||!hj.execScript||hj.execScript("var "+gj[0]);for(;gj.length&&(ij=gj.shift());)!gj.length&&p(fj)?hj[ij]=fj:hj=hj[ij]?hj[ij]:hj[ij]={};X.goOffline=function(){D("Firebase.goOffline",0,0,arguments.length),aj.yb().Cb()},X.goOnline=function(){D("Firebase.goOnline",0,0,arguments.length),aj.yb().vc()},X.enableLogging=od,X.ServerValue={TIMESTAMP:{
".sv":"timestamp"}},X.SDK_VERSION=Eb,X.INTERNAL=U,X.Context=aj,X.TEST_ACCESS=Z,X.prototype.name=function(){return S("Firebase.name() being deprecated. Please use Firebase.key() instead."),D("Firebase.name",0,0,arguments.length),this.key()},X.prototype.name=X.prototype.name,X.prototype.key=function(){return D("Firebase.key",0,0,arguments.length),this.path.e()?null:me(this.path)},X.prototype.key=X.prototype.key,X.prototype.o=function(a){if(D("Firebase.child",1,1,arguments.length),fa(a))a=String(a);else if(!(a instanceof P))if(null===K(this.path)){var b=a;b&&(b=b.replace(/^\/*\.info(\/|$)/,"/")),ng("Firebase.child",b)}else ng("Firebase.child",a);return new X(this.k,this.path.o(a))},X.prototype.child=X.prototype.o,X.prototype.parent=function(){D("Firebase.parent",0,0,arguments.length);var a=this.path.parent();return null===a?null:new X(this.k,a)},X.prototype.parent=X.prototype.parent,X.prototype.root=function(){D("Firebase.ref",0,0,arguments.length);for(var a=this;null!==a.parent();)a=a.parent();return a},X.prototype.root=X.prototype.root,X.prototype.set=function(a,b){D("Firebase.set",1,2,arguments.length),og("Firebase.set",this.path),gg("Firebase.set",a,this.path,!1),F("Firebase.set",2,b,!0);var c=new B;return this.k.Ob(this.path,a,null,C(c,b)),c.D},X.prototype.set=X.prototype.set,X.prototype.update=function(a,b){if(D("Firebase.update",1,2,arguments.length),og("Firebase.update",this.path),da(a)){for(var c={},d=0;d<a.length;++d)c[""+d]=a[d];a=c,S("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}return jg("Firebase.update",a,this.path),F("Firebase.update",2,b,!0),c=new B,this.k.update(this.path,a,C(c,b)),c.D},X.prototype.update=X.prototype.update,X.prototype.Ob=function(a,b,c){if(D("Firebase.setWithPriority",2,3,arguments.length),og("Firebase.setWithPriority",this.path),gg("Firebase.setWithPriority",a,this.path,!1),kg("Firebase.setWithPriority",2,b),F("Firebase.setWithPriority",3,c,!0),".length"===this.key()||".keys"===this.key())throw"Firebase.setWithPriority failed: "+this.key()+" is a read-only object.";var d=new B;return this.k.Ob(this.path,a,b,C(d,c)),d.D},X.prototype.setWithPriority=X.prototype.Ob,X.prototype.remove=function(a){return D("Firebase.remove",0,1,arguments.length),og("Firebase.remove",this.path),F("Firebase.remove",1,a,!0),this.set(null,a)},X.prototype.remove=X.prototype.remove,X.prototype.transaction=function(a,b,c){if(D("Firebase.transaction",1,3,arguments.length),og("Firebase.transaction",this.path),F("Firebase.transaction",1,a,!1),F("Firebase.transaction",2,b,!0),p(c)&&"boolean"!=typeof c)throw Error(E("Firebase.transaction",3,!0)+"must be a boolean.");if(".length"===this.key()||".keys"===this.key())throw"Firebase.transaction failed: "+this.key()+" is a read-only object.";void 0===c&&(c=!0);var d=new B;return r(b)&&Nb(d.D),Si(this.k,this.path,a,function(a,c,g){a?d.reject(a):d.resolve(new ei(c,g)),r(b)&&b(a,c,g)},c),d.D},X.prototype.transaction=X.prototype.transaction,X.prototype.$g=function(a,b){D("Firebase.setPriority",1,2,arguments.length),og("Firebase.setPriority",this.path),kg("Firebase.setPriority",1,a),F("Firebase.setPriority",2,b,!0);var c=new B;return this.k.Ob(this.path.o(".priority"),a,null,C(c,b)),c.D},X.prototype.setPriority=X.prototype.$g,X.prototype.push=function(a,b){D("Firebase.push",0,2,arguments.length),og("Firebase.push",this.path),gg("Firebase.push",a,this.path,!0),F("Firebase.push",2,b,!0);var c=Li(this.k),d=hf(c);c=this.o(d);if(null!=a){var e=this,f=c.set(a,b).then(function(){return e.o(d)});c.then=u(f.then,f),c["catch"]=u(f.then,f,void 0),r(b)&&Nb(f)}return c},X.prototype.push=X.prototype.push,X.prototype.lb=function(){return og("Firebase.onDisconnect",this.path),new V(this.k,this.path)},X.prototype.onDisconnect=X.prototype.lb,X.prototype.O=function(a,b,c){S("FirebaseRef.auth() being deprecated. Please use FirebaseRef.authWithCustomToken() instead."),D("Firebase.auth",1,3,arguments.length),pg("Firebase.auth",a),F("Firebase.auth",2,b,!0),F("Firebase.auth",3,b,!0);var d=new B;return dh(this.k.O,a,{},{remember:"none"},C(d,b),c),d.D},X.prototype.auth=X.prototype.O,X.prototype.je=function(a){D("Firebase.unauth",0,1,arguments.length),F("Firebase.unauth",1,a,!0);var b=new B;return eh(this.k.O,C(b,a)),b.D},X.prototype.unauth=X.prototype.je,X.prototype.Be=function(){return D("Firebase.getAuth",0,0,arguments.length),this.k.O.Be()},X.prototype.getAuth=X.prototype.Be,X.prototype.Jg=function(a,b){D("Firebase.onAuth",1,2,arguments.length),F("Firebase.onAuth",1,a,!1),Qb("Firebase.onAuth",2,b),this.k.O.Ib("auth_status",a,b)},X.prototype.onAuth=X.prototype.Jg,X.prototype.Ig=function(a,b){D("Firebase.offAuth",1,2,arguments.length),F("Firebase.offAuth",1,a,!1),Qb("Firebase.offAuth",2,b),this.k.O.mc("auth_status",a,b)},X.prototype.offAuth=X.prototype.Ig,X.prototype.hg=function(a,b,c){D("Firebase.authWithCustomToken",1,3,arguments.length),2===arguments.length&&Hb(b)&&(c=b,b=void 0),pg("Firebase.authWithCustomToken",a),F("Firebase.authWithCustomToken",2,b,!0),sg("Firebase.authWithCustomToken",3,c,!0);var d=new B;return dh(this.k.O,a,{},c||{},C(d,b)),d.D},X.prototype.authWithCustomToken=X.prototype.hg,X.prototype.ig=function(a,b,c){D("Firebase.authWithOAuthPopup",1,3,arguments.length),2===arguments.length&&Hb(b)&&(c=b,b=void 0),rg("Firebase.authWithOAuthPopup",a),F("Firebase.authWithOAuthPopup",2,b,!0),sg("Firebase.authWithOAuthPopup",3,c,!0);var d=new B;return ih(this.k.O,a,c,C(d,b)),d.D},X.prototype.authWithOAuthPopup=X.prototype.ig,X.prototype.jg=function(a,b,c){D("Firebase.authWithOAuthRedirect",1,3,arguments.length),2===arguments.length&&Hb(b)&&(c=b,b=void 0),rg("Firebase.authWithOAuthRedirect",a),F("Firebase.authWithOAuthRedirect",2,b,!1),sg("Firebase.authWithOAuthRedirect",3,c,!0);var d=new B,e=this.k.O,f=c,g=C(d,b);gh(e);var k=[Qg];f=Ag(f);return"anonymous"===a||"firebase"===a?T(g,Sg("TRANSPORT_UNAVAILABLE")):(cd.set("redirect_client_options",f.qd),hh(e,k,"/auth/"+a,f,g)),d.D},X.prototype.authWithOAuthRedirect=X.prototype.jg,X.prototype.kg=function(a,b,c,d){D("Firebase.authWithOAuthToken",2,4,arguments.length),3===arguments.length&&Hb(c)&&(d=c,c=void 0),rg("Firebase.authWithOAuthToken",a),F("Firebase.authWithOAuthToken",3,c,!0),sg("Firebase.authWithOAuthToken",4,d,!0);var e=new B;return q(b)?(qg("Firebase.authWithOAuthToken",2,b),fh(this.k.O,a+"/token",{access_token:b},d,C(e,c))):(sg("Firebase.authWithOAuthToken",2,b,!1),fh(this.k.O,a+"/token",b,d,C(e,c))),e.D},X.prototype.authWithOAuthToken=X.prototype.kg,X.prototype.gg=function(a,b){D("Firebase.authAnonymously",0,2,arguments.length),1===arguments.length&&Hb(a)&&(b=a,a=void 0),F("Firebase.authAnonymously",1,a,!0),sg("Firebase.authAnonymously",2,b,!0);var c=new B;return fh(this.k.O,"anonymous",{},b,C(c,a)),c.D},X.prototype.authAnonymously=X.prototype.gg,X.prototype.lg=function(a,b,c){D("Firebase.authWithPassword",1,3,arguments.length),2===arguments.length&&Hb(b)&&(c=b,b=void 0),sg("Firebase.authWithPassword",1,a,!1),tg("Firebase.authWithPassword",a,"email"),tg("Firebase.authWithPassword",a,"password"),F("Firebase.authWithPassword",2,b,!0),sg("Firebase.authWithPassword",3,c,!0);var d=new B;return fh(this.k.O,"password",a,c,C(d,b)),d.D},X.prototype.authWithPassword=X.prototype.lg,X.prototype.ve=function(a,b){D("Firebase.createUser",1,2,arguments.length),sg("Firebase.createUser",1,a,!1),tg("Firebase.createUser",a,"email"),tg("Firebase.createUser",a,"password"),F("Firebase.createUser",2,b,!0);var c=new B;return this.k.O.ve(a,C(c,b)),c.D},X.prototype.createUser=X.prototype.ve,X.prototype.Xe=function(a,b){D("Firebase.removeUser",1,2,arguments.length),sg("Firebase.removeUser",1,a,!1),tg("Firebase.removeUser",a,"email"),tg("Firebase.removeUser",a,"password"),F("Firebase.removeUser",2,b,!0);var c=new B;return this.k.O.Xe(a,C(c,b)),c.D},X.prototype.removeUser=X.prototype.Xe,X.prototype.se=function(a,b){D("Firebase.changePassword",1,2,arguments.length),sg("Firebase.changePassword",1,a,!1),tg("Firebase.changePassword",a,"email"),tg("Firebase.changePassword",a,"oldPassword"),tg("Firebase.changePassword",a,"newPassword"),F("Firebase.changePassword",2,b,!0);var c=new B;return this.k.O.se(a,C(c,b)),c.D},X.prototype.changePassword=X.prototype.se,X.prototype.re=function(a,b){D("Firebase.changeEmail",1,2,arguments.length),sg("Firebase.changeEmail",1,a,!1),tg("Firebase.changeEmail",a,"oldEmail"),tg("Firebase.changeEmail",a,"newEmail"),tg("Firebase.changeEmail",a,"password"),F("Firebase.changeEmail",2,b,!0);var c=new B;return this.k.O.re(a,C(c,b)),c.D},X.prototype.changeEmail=X.prototype.re,X.prototype.Ze=function(a,b){D("Firebase.resetPassword",1,2,arguments.length),sg("Firebase.resetPassword",1,a,!1),tg("Firebase.resetPassword",a,"email"),F("Firebase.resetPassword",2,b,!0);var c=new B;return this.k.O.Ze(a,C(c,b)),c.D},X.prototype.resetPassword=X.prototype.Ze}(),
/*!
 * Firepad is an open-source, collaborative code and text editor. It was designed
 * to be embedded inside larger applications. Since it uses Firebase as a backend,
 * it requires no server-side code and can be added to any web app simply by
 * including a couple JavaScript files.
 *
 * Firepad 0.0.0
 * http://www.firepad.io/
 * License: MIT
 * Copyright: 2014 Firebase
 * With code from ot.js (Copyright 2012-2013 Tim Baumann)
 */
function(name,definition,context){"undefined"!=typeof module&&module.exports?module.exports=definition():"function"==typeof context.define&&context.define.amd?define(definition):context[name]=definition()}("Firepad",function(){(firepad=firepad||{}).utils={},firepad.utils.makeEventEmitter=function(clazz,opt_allowedEVents){clazz.prototype.allowedEvents_=opt_allowedEVents,clazz.prototype.on=function(eventType,callback,context){this.validateEventType_(eventType),this.eventListeners_=this.eventListeners_||{},this.eventListeners_[eventType]=this.eventListeners_[eventType]||[],this.eventListeners_[eventType].push({callback:callback,context:context})},clazz.prototype.off=function(eventType,callback){this.validateEventType_(eventType),this.eventListeners_=this.eventListeners_||{};for(var listeners=this.eventListeners_[eventType]||[],i=0;i<listeners.length;i++)if(listeners[i].callback===callback)return void listeners.splice(i,1)},clazz.prototype.trigger=function(eventType){this.eventListeners_=this.eventListeners_||{};for(var listeners=this.eventListeners_[eventType]||[],i=0;i<listeners.length;i++)listeners[i].callback.apply(listeners[i].context,Array.prototype.slice.call(arguments,1))},clazz.prototype.validateEventType_=function(eventType){if(this.allowedEvents_){for(var allowed=!1,i=0;i<this.allowedEvents_.length;i++)if(this.allowedEvents_[i]===eventType){allowed=!0;break}if(!allowed)throw new Error('Unknown event "'+eventType+'"')}}},firepad.utils.elt=function(tag,content,attrs){var e=document.createElement(tag);if("string"==typeof content)firepad.utils.setTextContent(e,content);else if(content)for(var i=0;i<content.length;++i)e.appendChild(content[i]);for(var attr in attrs||{})e.setAttribute(attr,attrs[attr]);return e},firepad.utils.setTextContent=function(e,str){e.innerHTML="",e.appendChild(document.createTextNode(str))},firepad.utils.on=function(emitter,type,f,capture){emitter.addEventListener?emitter.addEventListener(type,f,capture||!1):emitter.attachEvent&&emitter.attachEvent("on"+type,f)},firepad.utils.off=function(emitter,type,f,capture){emitter.removeEventListener?emitter.removeEventListener(type,f,capture||!1):emitter.detachEvent&&emitter.detachEvent("on"+type,f)},firepad.utils.preventDefault=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},firepad.utils.stopPropagation=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},firepad.utils.stopEvent=function(e){firepad.utils.preventDefault(e),firepad.utils.stopPropagation(e)},firepad.utils.stopEventAnd=function(fn){return function(e){return fn(e),firepad.utils.stopEvent(e),!1}},firepad.utils.trim=function(str){return str.replace(/^\s+/g,"").replace(/\s+$/g,"")},firepad.utils.stringEndsWith=function(str,suffix){for(var list="string"==typeof suffix?[suffix]:suffix,i=0;i<list.length;i++){suffix=list[i];if(-1!==str.indexOf(suffix,str.length-suffix.length))return!0}return!1},firepad.utils.assert=function(b,msg){if(!b)throw new Error(msg||"assertion error")},firepad.utils.log=function(){if("undefined"!=typeof console&&"undefined"!=typeof console.log){for(var args=["Firepad:"],i=0;i<arguments.length;i++)args.push(arguments[i]);console.log.apply(console,args)}},(firepad=firepad||{}).Span=function(){function Span(pos,length){this.pos=pos,this.length=length}return Span.prototype.end=function(){return this.pos+this.length},Span}(),(firepad=firepad||{}).TextOp=function(){function TextOp(type){this.type=type,this.chars=null,this.text=null,this.attributes=null,"insert"===type?(this.text=arguments[1],utils.assert("string"==typeof this.text),this.attributes=arguments[2]||{},utils.assert("object"==typeof this.attributes)):"delete"===type?(this.chars=arguments[1],utils.assert("number"==typeof this.chars)):"retain"===type&&(this.chars=arguments[1],utils.assert("number"==typeof this.chars),this.attributes=arguments[2]||{},utils.assert("object"==typeof this.attributes))}var utils=firepad.utils;return TextOp.prototype.isInsert=function(){return"insert"===this.type},TextOp.prototype.isDelete=function(){return"delete"===this.type},TextOp.prototype.isRetain=function(){return"retain"===this.type},TextOp.prototype.equals=function(other){return this.type===other.type&&this.text===other.text&&this.chars===other.chars&&this.attributesEqual(other.attributes)},TextOp.prototype.attributesEqual=function(otherAttributes){for(var attr in this.attributes)if(this.attributes[attr]!==otherAttributes[attr])return!1;for(attr in otherAttributes)if(this.attributes[attr]!==otherAttributes[attr])return!1;return!0},TextOp.prototype.hasEmptyAttributes=function(){var empty=!0;for(var attr in this.attributes){empty=!1;break}return empty},TextOp}(),(firepad=firepad||{}).TextOperation=function(){"use strict";function TextOperation(){if(!this||this.constructor!==TextOperation)return new TextOperation;this.ops=[],this.baseLength=0,this.targetLength=0}function getSimpleOp(operation){var ops=operation.ops;switch(ops.length){case 1:return ops[0];case 2:return ops[0].isRetain()?ops[1]:ops[1].isRetain()?ops[0]:null;case 3:if(ops[0].isRetain()&&ops[2].isRetain())return ops[1]}return null}function getStartIndex(operation){return operation.ops[0].isRetain()?operation.ops[0].chars:0}var TextOp=firepad.TextOp,utils=firepad.utils;return TextOperation.prototype.equals=function(other){if(this.baseLength!==other.baseLength)return!1;if(this.targetLength!==other.targetLength)return!1;if(this.ops.length!==other.ops.length)return!1;for(var i=0;i<this.ops.length;i++)if(!this.ops[i].equals(other.ops[i]))return!1;return!0},TextOperation.prototype.retain=function(n,attributes){if("number"!=typeof n||n<0)throw new Error("retain expects a positive integer.");if(0===n)return this;this.baseLength+=n,this.targetLength+=n,attributes=attributes||{};var prevOp=this.ops.length>0?this.ops[this.ops.length-1]:null;return prevOp&&prevOp.isRetain()&&prevOp.attributesEqual(attributes)?prevOp.chars+=n:this.ops.push(new TextOp("retain",n,attributes)),this},TextOperation.prototype.insert=function(str,attributes){if("string"!=typeof str)throw new Error("insert expects a string");if(""===str)return this;attributes=attributes||{},this.targetLength+=str.length;var prevOp=this.ops.length>0?this.ops[this.ops.length-1]:null,prevPrevOp=this.ops.length>1?this.ops[this.ops.length-2]:null;return prevOp&&prevOp.isInsert()&&prevOp.attributesEqual(attributes)?prevOp.text+=str:prevOp&&prevOp.isDelete()?prevPrevOp&&prevPrevOp.isInsert()&&prevPrevOp.attributesEqual(attributes)?prevPrevOp.text+=str:(this.ops[this.ops.length-1]=new TextOp("insert",str,attributes),this.ops.push(prevOp)):this.ops.push(new TextOp("insert",str,attributes)),this},TextOperation.prototype["delete"]=function(n){if("string"==typeof n&&(n=n.length),"number"!=typeof n||n<0)throw new Error("delete expects a positive integer or a string");if(0===n)return this;this.baseLength+=n;var prevOp=this.ops.length>0?this.ops[this.ops.length-1]:null;return prevOp&&prevOp.isDelete()?prevOp.chars+=n:this.ops.push(new TextOp("delete",n)),this},TextOperation.prototype.isNoop=function(){return 0===this.ops.length||1===this.ops.length&&this.ops[0].isRetain()&&this.ops[0].hasEmptyAttributes()},TextOperation.prototype.clone=function(){for(var clone=new TextOperation,i=0;i<this.ops.length;i++)this.ops[i].isRetain()?clone.retain(this.ops[i].chars,this.ops[i].attributes):this.ops[i].isInsert()?clone.insert(this.ops[i].text,this.ops[i].attributes):clone["delete"](this.ops[i].chars);return clone},TextOperation.prototype.toString=function(){return(Array.prototype.map||function(fn){for(var arr=this,newArr=[],i=0,l=arr.length;i<l;i++)newArr[i]=fn(arr[i]);return newArr}).call(this.ops,function(op){return op.isRetain()?"retain "+op.chars:op.isInsert()?"insert '"+op.text+"'":"delete "+op.chars}).join(", ")},TextOperation.prototype.toJSON=function(){for(var ops=[],i=0;i<this.ops.length;i++)this.ops[i].hasEmptyAttributes()||ops.push(this.ops[i].attributes),"retain"===this.ops[i].type?ops.push(this.ops[i].chars):"insert"===this.ops[i].type?ops.push(this.ops[i].text):"delete"===this.ops[i].type&&ops.push(-this.ops[i].chars);return 0===ops.length&&ops.push(0),ops},TextOperation.fromJSON=function(ops){for(var o=new TextOperation,i=0,l=ops.length;i<l;i++){var op=ops[i],attributes={};"object"==typeof op&&(attributes=op,op=ops[++i]),"number"==typeof op?op>0?o.retain(op,attributes):o["delete"](-op):(utils.assert("string"==typeof op),o.insert(op,attributes))}return o},TextOperation.prototype.apply=function(str,oldAttributes,newAttributes){var operation=this;if(oldAttributes=oldAttributes||[],newAttributes=newAttributes||[],str.length!==operation.baseLength)throw new Error("The operation's base length must be equal to the string's length.");for(var k,attr,newStringParts=[],j=0,oldIndex=0,ops=this.ops,i=0,l=ops.length;i<l;i++){var op=ops[i];if(op.isRetain()){if(oldIndex+op.chars>str.length)throw new Error("Operation can't retain more characters than are left in the string.");for(newStringParts[j++]=str.slice(oldIndex,oldIndex+op.chars),k=0;k<op.chars;k++){var currAttributes=oldAttributes[oldIndex+k]||{},updatedAttributes={};for(attr in currAttributes)updatedAttributes[attr]=currAttributes[attr],utils.assert(!1!==updatedAttributes[attr]);for(attr in op.attributes)!1===op.attributes[attr]?delete updatedAttributes[attr]:updatedAttributes[attr]=op.attributes[attr],utils.assert(!1!==updatedAttributes[attr]);newAttributes.push(updatedAttributes)}oldIndex+=op.chars}else if(op.isInsert())for(newStringParts[j++]=op.text,k=0;k<op.text.length;k++){var insertedAttributes={};for(attr in op.attributes)insertedAttributes[attr]=op.attributes[attr],utils.assert(!1!==insertedAttributes[attr]);newAttributes.push(insertedAttributes)}else oldIndex+=op.chars}if(oldIndex!==str.length)throw new Error("The operation didn't operate on the whole string.");var newString=newStringParts.join("");return utils.assert(newString.length===newAttributes.length),newString},TextOperation.prototype.invert=function(str){for(var strIndex=0,inverse=new TextOperation,ops=this.ops,i=0,l=ops.length;i<l;i++){var op=ops[i];op.isRetain()?(inverse.retain(op.chars),strIndex+=op.chars):op.isInsert()?inverse["delete"](op.text.length):(inverse.insert(str.slice(strIndex,strIndex+op.chars)),strIndex+=op.chars)}return inverse},TextOperation.prototype.compose=function(operation2){function composeAttributes(first,second,firstOpIsInsert){var attr,merged={};for(attr in first)merged[attr]=first[attr];for(attr in second)firstOpIsInsert&&!1===second[attr]?delete merged[attr]:merged[attr]=second[attr];return merged}var operation1=this;if(operation1.targetLength!==operation2.baseLength)throw new Error("The base length of the second operation has to be the target length of the first operation");for(var attributes,operation=new TextOperation,ops1=operation1.clone().ops,ops2=operation2.clone().ops,i1=0,i2=0,op1=ops1[i1++],op2=ops2[i2++];void 0!==op1||void 0!==op2;)if(op1&&op1.isDelete())operation["delete"](op1.chars),op1=ops1[i1++];else if(op2&&op2.isInsert())operation.insert(op2.text,op2.attributes),op2=ops2[i2++];else{if(void 0===op1)throw new Error("Cannot compose operations: first operation is too short.");if(void 0===op2)throw new Error("Cannot compose operations: first operation is too long.");if(op1.isRetain()&&op2.isRetain())attributes=composeAttributes(op1.attributes,op2.attributes),op1.chars>op2.chars?(operation.retain(op2.chars,attributes),op1.chars-=op2.chars,op2=ops2[i2++]):op1.chars===op2.chars?(operation.retain(op1.chars,attributes),op1=ops1[i1++],op2=ops2[i2++]):(operation.retain(op1.chars,attributes),op2.chars-=op1.chars,op1=ops1[i1++]);else if(op1.isInsert()&&op2.isDelete())op1.text.length>op2.chars?(op1.text=op1.text.slice(op2.chars),op2=ops2[i2++]):op1.text.length===op2.chars?(op1=ops1[i1++],op2=ops2[i2++]):(op2.chars-=op1.text.length,op1=ops1[i1++]);else if(op1.isInsert()&&op2.isRetain())attributes=composeAttributes(op1.attributes,op2.attributes,!0),op1.text.length>op2.chars?(operation.insert(op1.text.slice(0,op2.chars),attributes),op1.text=op1.text.slice(op2.chars),op2=ops2[i2++]):op1.text.length===op2.chars?(operation.insert(op1.text,attributes),op1=ops1[i1++],op2=ops2[i2++]):(operation.insert(op1.text,attributes),op2.chars-=op1.text.length,op1=ops1[i1++]);else{if(!op1.isRetain()||!op2.isDelete())throw new Error("This shouldn't happen: op1: "+JSON.stringify(op1)+", op2: "+JSON.stringify(op2));op1.chars>op2.chars?(operation["delete"](op2.chars),op1.chars-=op2.chars,op2=ops2[i2++]):op1.chars===op2.chars?(operation["delete"](op2.chars),op1=ops1[i1++],op2=ops2[i2++]):(operation["delete"](op1.chars),op2.chars-=op1.chars,op1=ops1[i1++])}}return operation},TextOperation.prototype.shouldBeComposedWith=function(other){if(this.isNoop()||other.isNoop())return!0;var startA=getStartIndex(this),startB=getStartIndex(other),simpleA=getSimpleOp(this),simpleB=getSimpleOp(other);return!(!simpleA||!simpleB)&&(simpleA.isInsert()&&simpleB.isInsert()?startA+simpleA.text.length===startB:!(!simpleA.isDelete()||!simpleB.isDelete())&&(startB+simpleB.chars===startA||startA===startB))},TextOperation.prototype.shouldBeComposedWithInverted=function(other){if(this.isNoop()||other.isNoop())return!0;var startA=getStartIndex(this),startB=getStartIndex(other),simpleA=getSimpleOp(this),simpleB=getSimpleOp(other);return!(!simpleA||!simpleB)&&(simpleA.isInsert()&&simpleB.isInsert()?startA+simpleA.text.length===startB||startA===startB:!(!simpleA.isDelete()||!simpleB.isDelete())&&startB+simpleB.chars===startA)},TextOperation.transformAttributes=function(attributes1,attributes2){var attr,attributes1prime={},attributes2prime={},allAttrs={};for(attr in attributes1)allAttrs[attr]=!0;for(attr in attributes2)allAttrs[attr]=!0;for(attr in allAttrs){var attr1=attributes1[attr],attr2=attributes2[attr];utils.assert(null!=attr1||null!=attr2),null==attr1?attributes2prime[attr]=attr2:null==attr2?attributes1prime[attr]=attr1:attr1===attr2||(attributes1prime[attr]=attr1)}return[attributes1prime,attributes2prime]},TextOperation.transform=function(operation1,operation2){if(operation1.baseLength!==operation2.baseLength)throw new Error("Both operations have to have the same base length");for(var operation1prime=new TextOperation,operation2prime=new TextOperation,ops1=operation1.clone().ops,ops2=operation2.clone().ops,i1=0,i2=0,op1=ops1[i1++],op2=ops2[i2++];void 0!==op1||void 0!==op2;)if(op1&&op1.isInsert())operation1prime.insert(op1.text,op1.attributes),operation2prime.retain(op1.text.length),op1=ops1[i1++];else if(op2&&op2.isInsert())operation1prime.retain(op2.text.length),operation2prime.insert(op2.text,op2.attributes),op2=ops2[i2++];else{if(void 0===op1)throw new Error("Cannot transform operations: first operation is too short.");if(void 0===op2)throw new Error("Cannot transform operations: first operation is too long.");var minl;if(op1.isRetain()&&op2.isRetain()){var attributesPrime=TextOperation.transformAttributes(op1.attributes,op2.attributes);op1.chars>op2.chars?(minl=op2.chars,op1.chars-=op2.chars,op2=ops2[i2++]):op1.chars===op2.chars?(minl=op2.chars,op1=ops1[i1++],op2=ops2[i2++]):(minl=op1.chars,op2.chars-=op1.chars,op1=ops1[i1++]),operation1prime.retain(minl,attributesPrime[0]),operation2prime.retain(minl,attributesPrime[1])}else if(op1.isDelete()&&op2.isDelete())op1.chars>op2.chars?(op1.chars-=op2.chars,op2=ops2[i2++]):op1.chars===op2.chars?(op1=ops1[i1++],op2=ops2[i2++]):(op2.chars-=op1.chars,op1=ops1[i1++]);else if(op1.isDelete()&&op2.isRetain())op1.chars>op2.chars?(minl=op2.chars,op1.chars-=op2.chars,op2=ops2[i2++]):op1.chars===op2.chars?(minl=op2.chars,op1=ops1[i1++],op2=ops2[i2++]):(minl=op1.chars,op2.chars-=op1.chars,op1=ops1[i1++]),operation1prime["delete"](minl);else{if(!op1.isRetain()||!op2.isDelete())throw new Error("The two operations aren't compatible");op1.chars>op2.chars?(minl=op2.chars,op1.chars-=op2.chars,op2=ops2[i2++]):op1.chars===op2.chars?(minl=op1.chars,op1=ops1[i1++],op2=ops2[i2++]):(minl=op1.chars,op2.chars-=op1.chars,op1=ops1[i1++]),operation2prime["delete"](minl)}}return[operation1prime,operation2prime]},TextOperation.prototype.transform=function(other){return TextOperation.transform(this,other)},TextOperation}(),(firepad=firepad||{}).AnnotationList=function(){function assert(bool,text){if(!bool)throw new Error("AnnotationList assertion failed"+(text?": "+text:""))}function OldAnnotatedSpan(pos,node){this.pos=pos,this.length=node.length,this.annotation=node.annotation,this.attachedObject_=node.attachedObject}function NewAnnotatedSpan(pos,node){this.pos=pos,this.length=node.length,this.annotation=node.annotation,this.node_=node}function AnnotationList(changeHandler){this.head_=new Node(0,NullAnnotation),this.changeHandler_=changeHandler}function Node(length,annotation){this.length=length,this.annotation=annotation,this.attachedObject=null,this.next=null}var Span=firepad.Span;OldAnnotatedSpan.prototype.getAttachedObject=function(){return this.attachedObject_},NewAnnotatedSpan.prototype.attachObject=function(object){this.node_.attachedObject=object};var NullAnnotation={equals:function(){return!1}};return AnnotationList.prototype.insertAnnotatedSpan=function(span,annotation){this.wrapOperation_(new Span(span.pos,0),function(oldPos,old){assert(!old||null===old.next);var toInsert=new Node(span.length,annotation);if(old){assert(span.pos>oldPos&&span.pos<oldPos+old.length);var newNodes=new Node(0,NullAnnotation);return newNodes.next=new Node(span.pos-oldPos,old.annotation),newNodes.next.next=toInsert,toInsert.next=new Node(oldPos+old.length-span.pos,old.annotation),newNodes.next}return toInsert})},AnnotationList.prototype.removeSpan=function(removeSpan){0!==removeSpan.length&&this.wrapOperation_(removeSpan,function(oldPos,old){assert(null!==old);var newNodes=new Node(0,NullAnnotation),current=newNodes;for(removeSpan.pos>oldPos&&(current.next=new Node(removeSpan.pos-oldPos,old.annotation),current=current.next);removeSpan.end()>oldPos+old.length;)oldPos+=old.length,old=old.next;var afterChars=oldPos+old.length-removeSpan.end();return afterChars>0&&(current.next=new Node(afterChars,old.annotation)),newNodes.next})},AnnotationList.prototype.updateSpan=function(span,updateFn){0!==span.length&&this.wrapOperation_(span,function(oldPos,old){assert(null!==old);var newNodes=new Node(0,NullAnnotation),current=newNodes,currentPos=oldPos,beforeChars=span.pos-currentPos;for(assert(beforeChars<old.length),beforeChars>0&&(current.next=new Node(beforeChars,old.annotation),currentPos+=(current=current.next).length);null!==old&&span.end()>=oldPos+old.length;){var length=oldPos+old.length-currentPos;current.next=new Node(length,updateFn(old.annotation,length)),current=current.next,oldPos+=old.length,old=old.next,currentPos=oldPos}var updateChars=span.end()-currentPos;return updateChars>0&&(assert(updateChars<old.length),current.next=new Node(updateChars,updateFn(old.annotation,updateChars)),currentPos+=(current=current.next).length,current.next=new Node(oldPos+old.length-currentPos,old.annotation)),newNodes.next})},AnnotationList.prototype.wrapOperation_=function(span,operationFn){if(span.pos<0)throw new Error("Span start cannot be negative.");var tail,oldNodes=[],newNodes=[],res=this.getAffectedNodes_(span);null!==res.start?(tail=res.end.next,res.end.next=null):tail=res.succ;var newSegment=operationFn(res.startPos,res.start),includePredInOldNodes=!1,includeSuccInOldNodes=!1;if(newSegment){var newPos;for(this.mergeNodesWithSameAnnotations_(newSegment),res.pred&&res.pred.annotation.equals(newSegment.annotation)?(includePredInOldNodes=!0,newSegment.length+=res.pred.length,res.beforePred.next=newSegment,newPos=res.predPos):(res.beforeStart.next=newSegment,newPos=res.startPos);newSegment.next;)newNodes.push(new NewAnnotatedSpan(newPos,newSegment)),newPos+=newSegment.length,newSegment=newSegment.next;res.succ&&res.succ.annotation.equals(newSegment.annotation)?(newSegment.length+=res.succ.length,includeSuccInOldNodes=!0,newSegment.next=res.succ.next):newSegment.next=tail,newNodes.push(new NewAnnotatedSpan(newPos,newSegment))}else res.pred&&res.succ&&res.pred.annotation.equals(res.succ.annotation)?(includePredInOldNodes=!0,includeSuccInOldNodes=!0,newSegment=new Node(res.pred.length+res.succ.length,res.pred.annotation),res.beforePred.next=newSegment,newSegment.next=res.succ.next,newNodes.push(new NewAnnotatedSpan(res.startPos-res.pred.length,newSegment))):res.beforeStart.next=tail;includePredInOldNodes&&oldNodes.push(new OldAnnotatedSpan(res.predPos,res.pred));for(var oldPos=res.startPos,oldSegment=res.start;null!==oldSegment;)oldNodes.push(new OldAnnotatedSpan(oldPos,oldSegment)),oldPos+=oldSegment.length,oldSegment=oldSegment.next;includeSuccInOldNodes&&oldNodes.push(new OldAnnotatedSpan(oldPos,res.succ)),this.changeHandler_(oldNodes,newNodes)},AnnotationList.prototype.getAffectedNodes_=function(span){for(var result={},prevprev=null,prev=this.head_,current=prev.next,currentPos=0;null!==current&&span.pos>=currentPos+current.length;)currentPos+=current.length,prevprev=prev,prev=current,current=current.next;if(null===current&&(0!==span.length||span.pos!==currentPos))throw new Error("Span start exceeds the bounds of the AnnotationList.");for(result.startPos=currentPos,0===span.length&&span.pos===currentPos?result.start=null:result.start=current,result.beforeStart=prev,currentPos===span.pos&&currentPos>0?(result.pred=prev,result.predPos=currentPos-prev.length,result.beforePred=prevprev):result.pred=null;null!==current&&span.end()>currentPos;)currentPos+=current.length,prev=current,current=current.next;if(span.end()>currentPos)throw new Error("Span end exceeds the bounds of the AnnotationList.");return 0===span.length&&span.end()===currentPos?result.end=null:result.end=prev,result.succ=currentPos===span.end()?current:null,result},AnnotationList.prototype.mergeNodesWithSameAnnotations_=function(list){if(list)for(var prev=null,curr=list;curr;)prev&&prev.annotation.equals(curr.annotation)?(prev.length+=curr.length,prev.next=curr.next):prev=curr,curr=curr.next},AnnotationList.prototype.forEach=function(callback){for(var current=this.head_.next;null!==current;)callback(current.length,current.annotation,current.attachedObject),current=current.next},AnnotationList.prototype.getAnnotatedSpansForPos=function(pos){for(var currentPos=0,current=this.head_.next,prev=null;null!==current&&currentPos+current.length<=pos;)currentPos+=current.length,prev=current,current=current.next;if(null===current&&currentPos!==pos)throw new Error("pos exceeds the bounds of the AnnotationList");var res=[];return currentPos===pos&&prev&&res.push(new OldAnnotatedSpan(currentPos-prev.length,prev)),current&&res.push(new OldAnnotatedSpan(currentPos,current)),res},AnnotationList.prototype.getAnnotatedSpansForSpan=function(span){if(0===span.length)return[];for(var oldSpans=[],res=this.getAffectedNodes_(span),currentPos=res.startPos,current=res.start;null!==current&&currentPos<span.end();){var start=Math.max(currentPos,span.pos),end=Math.min(currentPos+current.length,span.end()),oldSpan=new Span(start,end-start);oldSpan.annotation=current.annotation,oldSpans.push(oldSpan),currentPos+=current.length,current=current.next}return oldSpans},AnnotationList.prototype.count=function(){for(var count=0,current=this.head_.next,prev=null;null!==current;)prev&&assert(!prev.annotation.equals(current.annotation)),prev=current,current=current.next,count++;return count},Node.prototype.clone=function(){var node=new Node(this.spanLength,this.annotation);return node.next=this.next,node},AnnotationList}(),(firepad=firepad||{}).Cursor=function(){"use strict";function Cursor(position,selectionEnd){this.position=position,this.selectionEnd=selectionEnd}return Cursor.fromJSON=function(obj){return new Cursor(obj.position,obj.selectionEnd)},Cursor.prototype.equals=function(other){return this.position===other.position&&this.selectionEnd===other.selectionEnd},Cursor.prototype.compose=function(other){return other},Cursor.prototype.transform=function(other){function transformIndex(index){for(var newIndex=index,ops=other.ops,i=0,l=other.ops.length;i<l&&(ops[i].isRetain()?index-=ops[i].chars:ops[i].isInsert()?newIndex+=ops[i].text.length:(newIndex-=Math.min(index,ops[i].chars),index-=ops[i].chars),!(index<0));i++);return newIndex}var newPosition=transformIndex(this.position);return this.position===this.selectionEnd?new Cursor(newPosition,newPosition):new Cursor(newPosition,transformIndex(this.selectionEnd))},Cursor}(),(firepad=firepad||{}).FirebaseAdapter=function(){function FirebaseAdapter(ref,userId,userColor){this.ref_=ref,this.ready_=!1,this.firebaseCallbacks_=[],this.zombie_=!1,this.document_=new TextOperation,this.revision_=0,this.pendingReceivedRevisions_={};var self=this;userId?(this.setUserId(userId),this.setColor(userColor),this.firebaseOn_(ref.root().child(".info/connected"),"value",function(snapshot){!0===snapshot.val()&&self.initializeUserData_()},this),this.on("ready",function(){self.monitorCursors_()})):this.userId_=ref.push().key(),setTimeout(function(){self.monitorHistory_()},0)}function assert(b,msg){if(!b)throw new Error(msg||"assertion error")}function revisionToId(revision){if(0===revision)return"A0";for(var str="";revision>0;){var digit=revision%characters.length;str=characters[digit]+str,revision-=digit,revision/=characters.length}return characters[str.length+9]+str}function revisionFromId(revisionId){assert(revisionId.length>0&&revisionId[0]===characters[revisionId.length+8]);for(var revision=0,i=1;i<revisionId.length;i++)revision*=characters.length,revision+=characters.indexOf(revisionId[i]);return revision}"function"==typeof require&&"function"!=typeof Firebase&&(Firebase=require("firebase"));var TextOperation=firepad.TextOperation,utils=firepad.utils,CHECKPOINT_FREQUENCY=100;utils.makeEventEmitter(FirebaseAdapter,["ready","cursor","operation","ack","retry"]),FirebaseAdapter.prototype.dispose=function(){var self=this;this.ready_?(this.removeFirebaseCallbacks_(),this.userRef_&&(this.userRef_.child("cursor").remove(),this.userRef_.child("color").remove()),this.ref_=null,this.document_=null,this.zombie_=!0):this.on("ready",function(){self.dispose()})},FirebaseAdapter.prototype.setUserId=function(userId){this.userRef_&&(this.userRef_.child("cursor").remove(),this.userRef_.child("cursor").onDisconnect().cancel(),this.userRef_.child("color").remove(),this.userRef_.child("color").onDisconnect().cancel()),this.userId_=userId,this.userRef_=this.ref_.child("users").child(userId),this.initializeUserData_()},FirebaseAdapter.prototype.isHistoryEmpty=function(){return assert(this.ready_,"Not ready yet."),0===this.revision_},FirebaseAdapter.prototype.sendOperation=function(operation,callback){function doTransaction(revisionId,revisionData){self.ref_.child("history").child(revisionId).transaction(function(current){if(null===current)return revisionData},function(error,committed){if(error){if("disconnect"!==error.message)throw utils.log("Transaction failure!",error),error;self.sent_&&self.sent_.id===revisionId?setTimeout(function(){doTransaction(revisionId,revisionData)},0):callback&&callback(error,!1)}else callback&&callback(null,committed)},!1)}var self=this;if(this.ready_){assert(this.document_.targetLength===operation.baseLength,"sendOperation() called with invalid operation.");var revisionId=revisionToId(this.revision_);this.sent_={id:revisionId,op:operation},doTransaction(revisionId,{a:self.userId_,o:operation.toJSON(),t:Firebase.ServerValue.TIMESTAMP})}else this.on("ready",function(){self.trigger("retry")})},FirebaseAdapter.prototype.sendCursor=function(obj){this.userRef_.child("cursor").set(obj),this.cursor_=obj},FirebaseAdapter.prototype.setColor=function(color){this.userRef_.child("color").set(color),this.color_=color},FirebaseAdapter.prototype.getDocument=function(){return this.document_},FirebaseAdapter.prototype.registerCallbacks=function(callbacks){for(var eventType in callbacks)this.on(eventType,callbacks[eventType])},FirebaseAdapter.prototype.initializeUserData_=function(){this.userRef_.child("cursor").onDisconnect().remove(),this.userRef_.child("color").onDisconnect().remove(),this.sendCursor(this.cursor_||null),this.setColor(this.color_||null)},FirebaseAdapter.prototype.monitorCursors_=function(){function childChanged(childSnap){var userId=childSnap.key(),userData=childSnap.val();self.trigger("cursor",userId,userData.cursor,userData.color)}var usersRef=this.ref_.child("users"),self=this;this.firebaseOn_(usersRef,"child_added",childChanged),this.firebaseOn_(usersRef,"child_changed",childChanged),this.firebaseOn_(usersRef,"child_removed",function(childSnap){var userId=childSnap.key();self.trigger("cursor",userId,null)})},FirebaseAdapter.prototype.monitorHistory_=function(){var self=this;this.ref_.child("checkpoint").once("value",function(s){if(!self.zombie_){var revisionId=s.child("id").val(),op=s.child("o").val(),author=s.child("a").val();null!=op&&null!=revisionId&&null!==author?(self.pendingReceivedRevisions_[revisionId]={o:op,a:author},self.checkpointRevision_=revisionFromId(revisionId),self.monitorHistoryStartingAt_(self.checkpointRevision_+1)):(self.checkpointRevision_=0,self.monitorHistoryStartingAt_(self.checkpointRevision_))}})},FirebaseAdapter.prototype.monitorHistoryStartingAt_=function(revision){var historyRef=this.ref_.child("history").startAt(null,revisionToId(revision)),self=this;setTimeout(function(){self.firebaseOn_(historyRef,"child_added",function(revisionSnapshot){var revisionId=revisionSnapshot.key();self.pendingReceivedRevisions_[revisionId]=revisionSnapshot.val(),self.ready_&&self.handlePendingReceivedRevisions_()}),historyRef.once("value",function(){self.handleInitialRevisions_()})},0)},FirebaseAdapter.prototype.handleInitialRevisions_=function(){assert(!this.ready_,"Should not be called multiple times."),this.revision_=this.checkpointRevision_;for(var revisionId=revisionToId(this.revision_),pending=this.pendingReceivedRevisions_;null!=pending[revisionId];){var revision=this.parseRevision_(pending[revisionId]);revision?this.document_=this.document_.compose(revision.operation):utils.log("Invalid operation.",this.ref_.toString(),revisionId,pending[revisionId]),delete pending[revisionId],this.revision_++,revisionId=revisionToId(this.revision_)}this.trigger("operation",this.document_),this.ready_=!0;var self=this;setTimeout(function(){self.trigger("ready")},0)},FirebaseAdapter.prototype.handlePendingReceivedRevisions_=function(){for(var pending=this.pendingReceivedRevisions_,revisionId=revisionToId(this.revision_),triggerRetry=!1;null!=pending[revisionId];){this.revision_++;var revision=this.parseRevision_(pending[revisionId]);revision?(this.document_=this.document_.compose(revision.operation),this.sent_&&revisionId===this.sent_.id?this.sent_.op.equals(revision.operation)&&revision.author===this.userId_?(this.revision_%CHECKPOINT_FREQUENCY==0&&this.saveCheckpoint_(),this.sent_=null,this.trigger("ack")):(triggerRetry=!0,this.trigger("operation",revision.operation)):this.trigger("operation",revision.operation)):utils.log("Invalid operation.",this.ref_.toString(),revisionId,pending[revisionId]),delete pending[revisionId],revisionId=revisionToId(this.revision_)}triggerRetry&&(this.sent_=null,this.trigger("retry"))},FirebaseAdapter.prototype.parseRevision_=function(data){if("object"!=typeof data)return null;if("string"!=typeof data.a||"object"!=typeof data.o)return null;var op=null;try{op=TextOperation.fromJSON(data.o)}catch(e){return null}return op.baseLength!==this.document_.targetLength?null:{author:data.a,operation:op}},FirebaseAdapter.prototype.saveCheckpoint_=function(){this.ref_.child("checkpoint").set({a:this.userId_,o:this.document_.toJSON(),id:revisionToId(this.revision_-1)})},FirebaseAdapter.prototype.firebaseOn_=function(ref,eventType,callback,context){return this.firebaseCallbacks_.push({ref:ref,eventType:eventType,callback:callback,context:context}),ref.on(eventType,callback,context),callback},FirebaseAdapter.prototype.firebaseOff_=function(ref,eventType,callback,context){ref.off(eventType,callback,context);for(var i=0;i<this.firebaseCallbacks_.length;i++){var l=this.firebaseCallbacks_[i];if(l.ref===ref&&l.eventType===eventType&&l.callback===callback&&l.context===context){this.firebaseCallbacks_.splice(i,1);break}}},FirebaseAdapter.prototype.removeFirebaseCallbacks_=function(){for(var i=0;i<this.firebaseCallbacks_.length;i++){var l=this.firebaseCallbacks_[i];l.ref.off(l.eventType,l.callback,l.context)}this.firebaseCallbacks_=[]};var characters="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";return FirebaseAdapter}(),(firepad=firepad||{}).RichTextToolbar=function(){function RichTextToolbar(imageInsertionUI){this.imageInsertionUI=imageInsertionUI,this.element_=this.makeElement_()}var utils=firepad.utils
;return utils.makeEventEmitter(RichTextToolbar,["bold","italic","underline","strike","font","font-size","color","left","center","right","unordered-list","ordered-list","todo-list","indent-increase","indent-decrease","undo","redo","insert-image"]),RichTextToolbar.prototype.element=function(){return this.element_},RichTextToolbar.prototype.makeButton_=function(eventName,iconName){var self=this;iconName=iconName||eventName;var btn=utils.elt("a",[utils.elt("span","",{"class":"firepad-tb-"+iconName})],{"class":"firepad-btn"});return utils.on(btn,"click",utils.stopEventAnd(function(){self.trigger(eventName)})),btn},RichTextToolbar.prototype.makeElement_=function(){var self=this,font=this.makeFontDropdown_(),fontSize=this.makeFontSizeDropdown_(),color=this.makeColorDropdown_(),toolbarOptions=[utils.elt("div",[font],{"class":"firepad-btn-group"}),utils.elt("div",[fontSize],{"class":"firepad-btn-group"}),utils.elt("div",[color],{"class":"firepad-btn-group"}),utils.elt("div",[self.makeButton_("bold"),self.makeButton_("italic"),self.makeButton_("underline"),self.makeButton_("strike","strikethrough")],{"class":"firepad-btn-group"}),utils.elt("div",[self.makeButton_("unordered-list","list-2"),self.makeButton_("ordered-list","numbered-list"),self.makeButton_("todo-list","list")],{"class":"firepad-btn-group"}),utils.elt("div",[self.makeButton_("indent-decrease"),self.makeButton_("indent-increase")],{"class":"firepad-btn-group"}),utils.elt("div",[self.makeButton_("left","paragraph-left"),self.makeButton_("center","paragraph-center"),self.makeButton_("right","paragraph-right")],{"class":"firepad-btn-group"}),utils.elt("div",[self.makeButton_("undo"),self.makeButton_("redo")],{"class":"firepad-btn-group"})];self.imageInsertionUI&&toolbarOptions.push(utils.elt("div",[self.makeButton_("insert-image")],{"class":"firepad-btn-group"}));var toolbarWrapper=utils.elt("div",toolbarOptions,{"class":"firepad-toolbar-wrapper"}),toolbar=utils.elt("div",null,{"class":"firepad-toolbar"});return toolbar.appendChild(toolbarWrapper),toolbar},RichTextToolbar.prototype.makeFontDropdown_=function(){for(var fonts=["Arial","Comic Sans MS","Courier New","Impact","Times New Roman","Verdana"],items=[],i=0;i<fonts.length;i++){var content=utils.elt("span",fonts[i]);content.setAttribute("style","font-family:"+fonts[i]),items.push({content:content,value:fonts[i]})}return this.makeDropdown_("Font","font",items)},RichTextToolbar.prototype.makeFontSizeDropdown_=function(){for(var sizes=[9,10,12,14,18,24,32,42],items=[],i=0;i<sizes.length;i++){var content=utils.elt("span",sizes[i].toString());content.setAttribute("style","font-size:"+sizes[i]+"px; line-height:"+(sizes[i]-6)+"px;"),items.push({content:content,value:sizes[i]})}return this.makeDropdown_("Size","font-size",items,"px")},RichTextToolbar.prototype.makeColorDropdown_=function(){for(var colors=["black","red","green","blue","yellow","cyan","magenta","grey"],items=[],i=0;i<colors.length;i++){var content=utils.elt("div");content.className="firepad-color-dropdown-item",content.setAttribute("style","background-color:"+colors[i]),items.push({content:content,value:colors[i]})}return this.makeDropdown_("Color","color",items)},RichTextToolbar.prototype.makeDropdown_=function(title,eventName,items,value_suffix){function showDropdown(){isShown||(list.style.display="block",utils.on(document,"click",hideDropdown,!0),isShown=!0)}function hideDropdown(){isShown&&(list.style.display="",utils.off(document,"click",hideDropdown,!0),isShown=!1),justDismissed=!0,setTimeout(function(){justDismissed=!1},0)}function addItem(content,value){"object"!=typeof content&&(content=document.createTextNode(String(content)));var element=utils.elt("a",[content]);utils.on(element,"click",utils.stopEventAnd(function(){hideDropdown(),self.trigger(eventName,value+value_suffix)})),list.appendChild(element)}value_suffix=value_suffix||"";var self=this,button=utils.elt("a",title+" \u25be",{"class":"firepad-btn firepad-dropdown"}),list=utils.elt("ul",[],{"class":"firepad-dropdown-menu"});button.appendChild(list);for(var isShown=!1,justDismissed=!1,i=0;i<items.length;i++){addItem(items[i].content,items[i].value)}return utils.on(button,"click",utils.stopEventAnd(function(){justDismissed||showDropdown()})),button},RichTextToolbar}(),(firepad=firepad||{}).WrappedOperation=function(){"use strict";function WrappedOperation(operation,meta){this.wrapped=operation,this.meta=meta}function copy(source,target){for(var key in source)source.hasOwnProperty(key)&&(target[key]=source[key])}function composeMeta(a,b){if(a&&"object"==typeof a){if("function"==typeof a.compose)return a.compose(b);var meta={};return copy(a,meta),copy(b,meta),meta}return b}function transformMeta(meta,operation){return meta&&"object"==typeof meta&&"function"==typeof meta.transform?meta.transform(operation):meta}return WrappedOperation.prototype.apply=function(){return this.wrapped.apply.apply(this.wrapped,arguments)},WrappedOperation.prototype.invert=function(){var meta=this.meta;return new WrappedOperation(this.wrapped.invert.apply(this.wrapped,arguments),meta&&"object"==typeof meta&&"function"==typeof meta.invert?meta.invert.apply(meta,arguments):meta)},WrappedOperation.prototype.compose=function(other){return new WrappedOperation(this.wrapped.compose(other.wrapped),composeMeta(this.meta,other.meta))},WrappedOperation.transform=function(a,b){var pair=a.wrapped.transform(b.wrapped);return[new WrappedOperation(pair[0],transformMeta(a.meta,b.wrapped)),new WrappedOperation(pair[1],transformMeta(b.meta,a.wrapped))]},WrappedOperation.prototype.transform=function(other){return WrappedOperation.transform(this,other)},WrappedOperation}(),(firepad=firepad||{}).UndoManager=function(){"use strict";function UndoManager(maxItems){this.maxItems=maxItems||50,this.state=NORMAL_STATE,this.dontCompose=!1,this.undoStack=[],this.redoStack=[]}function transformStack(stack,operation){for(var newStack=[],Operation=operation.constructor,i=stack.length-1;i>=0;i--){var pair=Operation.transform(stack[i],operation);"function"==typeof pair[0].isNoop&&pair[0].isNoop()||newStack.push(pair[0]),operation=pair[1]}return newStack.reverse()}var NORMAL_STATE="normal",UNDOING_STATE="undoing",REDOING_STATE="redoing";return UndoManager.prototype.add=function(operation,compose){if(this.state===UNDOING_STATE)this.redoStack.push(operation),this.dontCompose=!0;else if(this.state===REDOING_STATE)this.undoStack.push(operation),this.dontCompose=!0;else{var undoStack=this.undoStack;!this.dontCompose&&compose&&undoStack.length>0?undoStack.push(operation.compose(undoStack.pop())):(undoStack.push(operation),undoStack.length>this.maxItems&&undoStack.shift()),this.dontCompose=!1,this.redoStack=[]}},UndoManager.prototype.transform=function(operation){this.undoStack=transformStack(this.undoStack,operation),this.redoStack=transformStack(this.redoStack,operation)},UndoManager.prototype.performUndo=function(fn){if(this.state=UNDOING_STATE,0===this.undoStack.length)throw new Error("undo not possible");fn(this.undoStack.pop()),this.state=NORMAL_STATE},UndoManager.prototype.performRedo=function(fn){if(this.state=REDOING_STATE,0===this.redoStack.length)throw new Error("redo not possible");fn(this.redoStack.pop()),this.state=NORMAL_STATE},UndoManager.prototype.canUndo=function(){return 0!==this.undoStack.length},UndoManager.prototype.canRedo=function(){return 0!==this.redoStack.length},UndoManager.prototype.isUndoing=function(){return this.state===UNDOING_STATE},UndoManager.prototype.isRedoing=function(){return this.state===REDOING_STATE},UndoManager}(),(firepad=firepad||{}).Client=function(){"use strict";function Client(){this.state=synchronized_}function Synchronized(){}function AwaitingConfirm(outstanding){this.outstanding=outstanding}function AwaitingWithBuffer(outstanding,buffer){this.outstanding=outstanding,this.buffer=buffer}Client.prototype.setState=function(state){this.state=state},Client.prototype.applyClient=function(operation){this.setState(this.state.applyClient(this,operation))},Client.prototype.applyServer=function(operation){this.setState(this.state.applyServer(this,operation))},Client.prototype.serverAck=function(){this.setState(this.state.serverAck(this))},Client.prototype.serverRetry=function(){this.setState(this.state.serverRetry(this))},Client.prototype.sendOperation=function(){throw new Error("sendOperation must be defined in child class")},Client.prototype.applyOperation=function(){throw new Error("applyOperation must be defined in child class")},Client.Synchronized=Synchronized,Synchronized.prototype.applyClient=function(client,operation){return client.sendOperation(operation),new AwaitingConfirm(operation)},Synchronized.prototype.applyServer=function(client,operation){return client.applyOperation(operation),this},Synchronized.prototype.serverAck=function(){throw new Error("There is no pending operation.")},Synchronized.prototype.serverRetry=function(){throw new Error("There is no pending operation.")};var synchronized_=new Synchronized;return Client.AwaitingConfirm=AwaitingConfirm,AwaitingConfirm.prototype.applyClient=function(client,operation){return new AwaitingWithBuffer(this.outstanding,operation)},AwaitingConfirm.prototype.applyServer=function(client,operation){var pair=this.outstanding.transform(operation);return client.applyOperation(pair[1]),new AwaitingConfirm(pair[0])},AwaitingConfirm.prototype.serverAck=function(){return synchronized_},AwaitingConfirm.prototype.serverRetry=function(client){return client.sendOperation(this.outstanding),this},Client.AwaitingWithBuffer=AwaitingWithBuffer,AwaitingWithBuffer.prototype.applyClient=function(client,operation){var newBuffer=this.buffer.compose(operation);return new AwaitingWithBuffer(this.outstanding,newBuffer)},AwaitingWithBuffer.prototype.applyServer=function(client,operation){var pair1=this.outstanding.transform(operation),pair2=this.buffer.transform(pair1[1]);return client.applyOperation(pair2[1]),new AwaitingWithBuffer(pair1[0],pair2[0])},AwaitingWithBuffer.prototype.serverRetry=function(client){var outstanding=this.outstanding.compose(this.buffer);return client.sendOperation(outstanding),new AwaitingConfirm(outstanding)},AwaitingWithBuffer.prototype.serverAck=function(client){return client.sendOperation(this.buffer),new AwaitingConfirm(this.buffer)},Client}(),(firepad=firepad||{}).EditorClient=function(){"use strict";function SelfMeta(cursorBefore,cursorAfter){this.cursorBefore=cursorBefore,this.cursorAfter=cursorAfter}function OtherClient(id,editorAdapter){this.id=id,this.editorAdapter=editorAdapter,this.li=document.createElement("li")}function EditorClient(serverAdapter,editorAdapter){Client.call(this),this.serverAdapter=serverAdapter,this.editorAdapter=editorAdapter,this.undoManager=new UndoManager,this.clients={};var self=this;this.editorAdapter.registerCallbacks({change:function(operation,inverse){self.onChange(operation,inverse)},cursorActivity:function(){self.onCursorActivity()},blur:function(){self.onBlur()},focus:function(){self.onFocus()}}),this.editorAdapter.registerUndo(function(){self.undo()}),this.editorAdapter.registerRedo(function(){self.redo()}),this.serverAdapter.registerCallbacks({ack:function(){self.serverAck(),self.focused&&self.state instanceof Client.Synchronized&&(self.updateCursor(),self.sendCursor(self.cursor)),self.emitStatus()},retry:function(){self.serverRetry()},operation:function(operation){self.applyServer(operation)},cursor:function(clientId,cursor,color){if(self.serverAdapter.userId_!==clientId&&self.state instanceof Client.Synchronized){var client=self.getClientObject(clientId);cursor?(color&&client.setColor(color),client.updateCursor(Cursor.fromJSON(cursor))):client.removeCursor()}}})}function inherit(Const,Super){function F(){}F.prototype=Super.prototype,Const.prototype=new F,Const.prototype.constructor=Const}function last(arr){return arr[arr.length-1]}var Client=firepad.Client,Cursor=firepad.Cursor,UndoManager=firepad.UndoManager,WrappedOperation=firepad.WrappedOperation;return SelfMeta.prototype.invert=function(){return new SelfMeta(this.cursorAfter,this.cursorBefore)},SelfMeta.prototype.compose=function(other){return new SelfMeta(this.cursorBefore,other.cursorAfter)},SelfMeta.prototype.transform=function(operation){return new SelfMeta(this.cursorBefore?this.cursorBefore.transform(operation):null,this.cursorAfter?this.cursorAfter.transform(operation):null)},OtherClient.prototype.setColor=function(color){this.color=color},OtherClient.prototype.updateCursor=function(cursor){this.removeCursor(),this.cursor=cursor,this.mark=this.editorAdapter.setOtherCursor(cursor,this.color,this.id)},OtherClient.prototype.removeCursor=function(){this.mark&&this.mark.clear()},inherit(EditorClient,Client),EditorClient.prototype.getClientObject=function(clientId){var client=this.clients[clientId];return client||(this.clients[clientId]=new OtherClient(clientId,this.editorAdapter))},EditorClient.prototype.applyUnredo=function(operation){this.undoManager.add(this.editorAdapter.invertOperation(operation)),this.editorAdapter.applyOperation(operation.wrapped),this.cursor=operation.meta.cursorAfter,this.cursor&&this.editorAdapter.setCursor(this.cursor),this.applyClient(operation.wrapped)},EditorClient.prototype.undo=function(){var self=this;this.undoManager.canUndo()&&this.undoManager.performUndo(function(o){self.applyUnredo(o)})},EditorClient.prototype.redo=function(){var self=this;this.undoManager.canRedo()&&this.undoManager.performRedo(function(o){self.applyUnredo(o)})},EditorClient.prototype.onChange=function(textOperation,inverse){var cursorBefore=this.cursor;this.updateCursor();var compose=this.undoManager.undoStack.length>0&&inverse.shouldBeComposedWithInverted(last(this.undoManager.undoStack).wrapped),inverseMeta=new SelfMeta(this.cursor,cursorBefore);this.undoManager.add(new WrappedOperation(inverse,inverseMeta),compose),this.applyClient(textOperation)},EditorClient.prototype.updateCursor=function(){this.cursor=this.editorAdapter.getCursor()},EditorClient.prototype.onCursorActivity=function(){var oldCursor=this.cursor;this.updateCursor(),!this.focused||oldCursor&&this.cursor.equals(oldCursor)||this.sendCursor(this.cursor)},EditorClient.prototype.onBlur=function(){this.cursor=null,this.sendCursor(null),this.focused=!1},EditorClient.prototype.onFocus=function(){this.focused=!0,this.onCursorActivity()},EditorClient.prototype.sendCursor=function(cursor){this.state instanceof Client.AwaitingWithBuffer||this.serverAdapter.sendCursor(cursor)},EditorClient.prototype.sendOperation=function(operation){this.serverAdapter.sendOperation(operation),this.emitStatus()},EditorClient.prototype.applyOperation=function(operation){this.editorAdapter.applyOperation(operation),this.updateCursor(),this.undoManager.transform(new WrappedOperation(operation,null))},EditorClient.prototype.emitStatus=function(){var self=this;setTimeout(function(){self.trigger("synced",self.state instanceof Client.Synchronized)},0)},EditorClient}(),firepad.utils.makeEventEmitter(firepad.EditorClient,["synced"]);var firepad,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__slice=[].slice;return null==firepad&&(firepad={}),firepad.ACEAdapter=function(){function ACEAdapter(aceInstance){var _ref;this.onCursorActivity=__bind(this.onCursorActivity,this),this.onFocus=__bind(this.onFocus,this),this.onBlur=__bind(this.onBlur,this),this.onChange=__bind(this.onChange,this),this.ace=aceInstance,this.aceSession=this.ace.getSession(),this.aceDoc=this.aceSession.getDocument(),this.aceDoc.setNewLineMode("unix"),this.grabDocumentState(),this.ace.on("change",this.onChange),this.ace.on("blur",this.onBlur),this.ace.on("focus",this.onFocus),this.aceSession.selection.on("changeCursor",this.onCursorActivity),null==this.aceRange&&(this.aceRange=(null!=(_ref=ace.require)?_ref:require)("ace/range").Range)}return ACEAdapter.prototype.ignoreChanges=!1,ACEAdapter.prototype.grabDocumentState=function(){return this.lastDocLines=this.aceDoc.getAllLines(),this.lastCursorRange=this.aceSession.selection.getRange()},ACEAdapter.prototype.detach=function(){return this.ace.removeListener("change",this.onChange),this.ace.removeListener("blur",this.onBlur),this.ace.removeListener("focus",this.onCursorActivity),this.aceSession.selection.removeListener("changeCursor",this.onCursorActivity)},ACEAdapter.prototype.onChange=function(change){var pair;if(!this.ignoreChanges)return pair=this.operationFromACEChange(change),this.trigger.apply(this,["change"].concat(__slice.call(pair))),this.grabDocumentState()},ACEAdapter.prototype.onBlur=function(){if(this.ace.selection.isEmpty())return this.trigger("blur")},ACEAdapter.prototype.onFocus=function(){return this.trigger("focus")},ACEAdapter.prototype.onCursorActivity=function(){var _this=this;return setTimeout(function(){return _this.trigger("cursorActivity")},0)},ACEAdapter.prototype.operationFromACEChange=function(change){var delete_op,delta,insert_op,restLength,start,text,_ref;return change.data?("insertLines"===(_ref=(delta=change.data).action)||"removeLines"===_ref?(text=delta.lines.join("\n")+"\n",delta.action.replace("Lines","")):(text=delta.text.replace(this.aceDoc.getNewLineCharacter(),"\n"),delta.action.replace("Text","")),start=this.indexFromPos(delta.range.start)):(text=change.lines.join("\n"),start=this.indexFromPos(change.start)),restLength=this.lastDocLines.join("\n").length-start,"remove"===change.action&&(restLength-=text.length),insert_op=(new firepad.TextOperation).retain(start).insert(text).retain(restLength),delete_op=(new firepad.TextOperation).retain(start)["delete"](text).retain(restLength),"remove"===change.action?[delete_op,insert_op]:[insert_op,delete_op]},ACEAdapter.prototype.applyOperationToACE=function(operation){var from,index,op,range,to,_i,_len,_ref;for(index=0,_i=0,_len=(_ref=operation.ops).length;_i<_len;_i++)(op=_ref[_i]).isRetain()?index+=op.chars:op.isInsert()?(this.aceDoc.insert(this.posFromIndex(index),op.text),index+=op.text.length):op.isDelete()&&(from=this.posFromIndex(index),to=this.posFromIndex(index+op.chars),range=this.aceRange.fromPoints(from,to),this.aceDoc.remove(range));return this.grabDocumentState()},ACEAdapter.prototype.posFromIndex=function(index){var line,row,_i,_len,_ref;for(row=_i=0,_len=(_ref=this.aceDoc.$lines).length;_i<_len&&!(index<=(line=_ref[row]).length);row=++_i)index-=line.length+1;return{row:row,column:index}},ACEAdapter.prototype.indexFromPos=function(pos,lines){var i,index,_i,_ref;for(null==lines&&(lines=this.lastDocLines),index=0,i=_i=0,_ref=pos.row;0<=_ref?_i<_ref:_i>_ref;i=0<=_ref?++_i:--_i)index+=this.lastDocLines[i].length+1;return index+pos.column},ACEAdapter.prototype.getValue=function(){return this.aceDoc.getValue()},ACEAdapter.prototype.getCursor=function(){var e2,end,start,_ref,_ref1;try{start=this.indexFromPos(this.aceSession.selection.getRange().start,this.aceDoc.$lines),end=this.indexFromPos(this.aceSession.selection.getRange().end,this.aceDoc.$lines)}catch(_error){_error;try{start=this.indexFromPos(this.lastCursorRange.start),end=this.indexFromPos(this.lastCursorRange.end)}catch(_error){e2=_error,console.log("Couldn't figure out the cursor range:",e2,"-- setting it to 0:0."),start=(_ref=[0,0])[0],end=_ref[1]}}return start>end&&(start=(_ref1=[end,start])[0],end=_ref1[1]),new firepad.Cursor(start,end)},ACEAdapter.prototype.setCursor=function(cursor){var end,start,_ref;return start=this.posFromIndex(cursor.position),end=this.posFromIndex(cursor.selectionEnd),cursor.position>cursor.selectionEnd&&(start=(_ref=[end,start])[0],end=_ref[1]),this.aceSession.selection.setSelectionRange(new this.aceRange(start.row,start.column,end.row,end.column))},ACEAdapter.prototype.setOtherCursor=function(cursor,color,clientId){var clazz,css,cursorRange,end,justCursor,self,start,_ref,_this=this;return null==this.otherCursors&&(this.otherCursors={}),(cursorRange=this.otherCursors[clientId])&&(cursorRange.start.detach(),cursorRange.end.detach(),this.aceSession.removeMarker(cursorRange.id)),start=this.posFromIndex(cursor.position),end=this.posFromIndex(cursor.selectionEnd),cursor.selectionEnd<cursor.position&&(start=(_ref=[end,start])[0],end=_ref[1]),clazz="other-client-selection-"+color.replace("#",""),(justCursor=cursor.position===cursor.selectionEnd)&&(clazz=clazz.replace("selection","cursor")),css="."+clazz+" {\n  position: absolute;\n  background-color: "+(justCursor?"transparent":color)+";\n  border-left: 2px solid "+color+";\n}",this.addStyleRule(css),this.otherCursors[clientId]=cursorRange=new this.aceRange(start.row,start.column,end.row,end.column),self=this,cursorRange.clipRows=function(){var range;return(range=self.aceRange.prototype.clipRows.apply(this,arguments)).isEmpty=function(){return!1},range},cursorRange.start=this.aceDoc.createAnchor(cursorRange.start),cursorRange.end=this.aceDoc.createAnchor(cursorRange.end),cursorRange.id=this.aceSession.addMarker(cursorRange,clazz,"text"),{clear:function(){return cursorRange.start.detach(),cursorRange.end.detach(),_this.aceSession.removeMarker(cursorRange.id)}}},ACEAdapter.prototype.addStyleRule=function(css){var styleElement;if("undefined"!=typeof document&&null!==document&&(this.addedStyleRules||(this.addedStyleRules={},styleElement=document.createElement("style"),document.documentElement.getElementsByTagName("head")[0].appendChild(styleElement),this.addedStyleSheet=styleElement.sheet),!this.addedStyleRules[css]))return this.addedStyleRules[css]=!0,this.addedStyleSheet.insertRule(css,0)},ACEAdapter.prototype.registerCallbacks=function(callbacks){this.callbacks=callbacks},ACEAdapter.prototype.trigger=function(){var args,event,_ref,_ref1;return event=arguments[0],args=2<=arguments.length?__slice.call(arguments,1):[],null!=(_ref=this.callbacks)&&null!=(_ref1=_ref[event])?_ref1.apply(this,args):void 0},ACEAdapter.prototype.applyOperation=function(operation){return operation.isNoop()||(this.ignoreChanges=!0),this.applyOperationToACE(operation),this.ignoreChanges=!1},ACEAdapter.prototype.registerUndo=function(undoFn){return this.ace.undo=undoFn},ACEAdapter.prototype.registerRedo=function(redoFn){return this.ace.redo=redoFn},ACEAdapter.prototype.invertOperation=function(operation){return operation.invert(this.getValue())},ACEAdapter}(),(firepad=firepad||{}).AttributeConstants={BOLD:"b",ITALIC:"i",UNDERLINE:"u",STRIKE:"s",FONT:"f",FONT_SIZE:"fs",COLOR:"c",BACKGROUND_COLOR:"bc",ENTITY_SENTINEL:"ent",LINE_SENTINEL:"l",LINE_INDENT:"li",LINE_ALIGN:"la",LIST_TYPE:"lt"},firepad.sentinelConstants={LINE_SENTINEL_CHARACTER:"\ue000",ENTITY_SENTINEL_CHARACTER:"\ue001"},(firepad=firepad||{}).EntityManager=function(){function EntityManager(){this.entities_={};var attrs=["src","alt","width","height","style","class"];this.register("img",{render:function(info){utils.assert(info.src,"image entity should have 'src'!");for(var attrs=["src","alt","width","height","style","class"],html="<img ",i=0;i<attrs.length;i++){var attr=attrs[i];attr in info&&(html+=" "+attr+'="'+info[attr]+'"')}return html+=">"},fromElement:function(element){for(var info={},i=0;i<attrs.length;i++){var attr=attrs[i];element.hasAttribute(attr)&&(info[attr]=element.getAttribute(attr))}return info}})}var utils=firepad.utils;return EntityManager.prototype.register=function(type,options){firepad.utils.assert(options.render,"Entity options should include a 'render' function!"),firepad.utils.assert(options.fromElement,"Entity options should include a 'fromElement' function!"),this.entities_[type]=options},EntityManager.prototype.renderToElement=function(entity,entityHandle){return this.tryRenderToElement_(entity,"render",entityHandle)},EntityManager.prototype.exportToElement=function(entity){var elt=this.tryRenderToElement_(entity,"export")||this.tryRenderToElement_(entity,"getHtml")||this.tryRenderToElement_(entity,"render");return elt.setAttribute("data-firepad-entity",entity.type),elt},EntityManager.prototype.updateElement=function(entity,element){var type=entity.type,info=entity.info;this.entities_[type]&&"undefined"!=typeof this.entities_[type].update&&this.entities_[type].update(info,element)},EntityManager.prototype.fromElement=function(element){var type=element.getAttribute("data-firepad-entity");if(type||(type=element.nodeName.toLowerCase()),type&&this.entities_[type]){var info=this.entities_[type].fromElement(element);return new firepad.Entity(type,info)}},EntityManager.prototype.tryRenderToElement_=function(entity,renderFn,entityHandle){var type=entity.type,info=entity.info;if(this.entities_[type]&&this.entities_[type][renderFn]){var windowDocument=firepad.document||window&&window.document,res=this.entities_[type][renderFn](info,entityHandle,windowDocument);if(res){if("string"==typeof res){var div=(firepad.document||document).createElement("div");return div.innerHTML=res,div.childNodes[0]}if("object"==typeof res)return firepad.utils.assert("undefined"!=typeof res.nodeType,"Error rendering "+type+" entity.  render() function must return an html string or a DOM element."),res}}},EntityManager.prototype.entitySupportsUpdate=function(entityType){return this.entities_[entityType]&&this.entities_[entityType].update},EntityManager}(),(firepad=firepad||{}).Entity=function(){function Entity(type,info){if(!(this instanceof Entity))return new Entity(type,info);this.type=type,this.info=info||{}}var SENTINEL=firepad.AttributeConstants.ENTITY_SENTINEL,PREFIX=SENTINEL+"_";return Entity.prototype.toAttributes=function(){var attrs={};for(var attr in attrs[SENTINEL]=this.type,this.info)attrs[PREFIX+attr]=this.info[attr];return attrs},Entity.fromAttributes=function(attributes){var type=attributes[SENTINEL],info={};for(var attr in attributes)0===attr.indexOf(PREFIX)&&(info[attr.substr(PREFIX.length)]=attributes[attr]);return new Entity(type,info)},Entity}(),(firepad=firepad||{}).RichTextCodeMirror=function(){function RichTextCodeMirror(codeMirror,entityManager,options){this.codeMirror=codeMirror,this.options_=options||{},this.entityManager_=entityManager,this.currentAttributes_=null;var self=this;this.annotationList_=new AnnotationList(function(oldNodes,newNodes){self.onAnnotationsChanged_(oldNodes,newNodes)}),this.initAnnotationList_(),bind(this,"onCodeMirrorBeforeChange_"),bind(this,"onCodeMirrorChange_"),bind(this,"onCursorActivity_"),parseInt(CodeMirror.version)>=4?this.codeMirror.on("changes",this.onCodeMirrorChange_):this.codeMirror.on("change",this.onCodeMirrorChange_),this.codeMirror.on("beforeChange",this.onCodeMirrorBeforeChange_),this.codeMirror.on("cursorActivity",this.onCursorActivity_),this.changeId_=0,this.outstandingChanges_={},this.dirtyLines_=[]}function cmpPos(a,b){return a.line-b.line||a.ch-b.ch}function posLe(a,b){return cmpPos(a,b)<=0}function last(arr){return arr[arr.length-1]}function sumLengths(strArr){if(0===strArr.length)return 0;for(var sum=0,i=0;i<strArr.length;i++)sum+=strArr[i].length;return sum+strArr.length-1}function RichTextAnnotation(attributes){this.attributes=attributes||{}}function emptyAttributes(attributes){for(var attr in attributes)return!1;return!0}function bind(obj,method){var fn=obj[method];obj[method]=function(){fn.apply(obj,arguments)}}var AnnotationList=firepad.AnnotationList,Span=firepad.Span,utils=firepad.utils,ATTR=firepad.AttributeConstants,RichTextClassPrefixDefault="cmrt-",RichTextOriginPrefix="cmrt-",DynamicStyleAttributes={c:"color",bc:"background-color",fs:"font-size",li:function(indent){return"padding-left: "+40*indent+"px"}},StyleCache_={};utils.makeEventEmitter(RichTextCodeMirror,["change","attributesChange","newLine"]);var LineSentinelCharacter=firepad.sentinelConstants.LINE_SENTINEL_CHARACTER,EntitySentinelCharacter=firepad.sentinelConstants.ENTITY_SENTINEL_CHARACTER;return RichTextCodeMirror.prototype.detach=function(){this.codeMirror.off("beforeChange",this.onCodeMirrorBeforeChange_),this.codeMirror.off("change",this.onCodeMirrorChange_),this.codeMirror.off("changes",this.onCodeMirrorChange_),this.codeMirror.off("cursorActivity",this.onCursorActivity_),this.clearAnnotations_()},RichTextCodeMirror.prototype.toggleAttribute=function(attribute,value){var trueValue=value||!0;if(this.emptySelection_()){var attrs=this.getCurrentAttributes_();attrs[attribute]===trueValue?delete attrs[attribute]:attrs[attribute]=trueValue,this.currentAttributes_=attrs}else{var newValue=this.getCurrentAttributes_()[attribute]!==trueValue&&trueValue;this.setAttribute(attribute,newValue)}},RichTextCodeMirror.prototype.setAttribute=function(attribute,value){var cm=this.codeMirror;if(this.emptySelection_()){var attrs=this.getCurrentAttributes_();!1===value?delete attrs[attribute]:attrs[attribute]=value,this.currentAttributes_=attrs}else this.updateTextAttributes(cm.indexFromPos(cm.getCursor("start")),cm.indexFromPos(cm.getCursor("end")),function(attributes){!1===value?delete attributes[attribute]:attributes[attribute]=value}),this.updateCurrentAttributes_()},RichTextCodeMirror.prototype.updateTextAttributes=function(start,end,updateFn,origin,doLineAttributes){var newChanges=[],pos=start,self=this;this.annotationList_.updateSpan(new Span(start,end-start),function(annotation,length){var attributes={};for(var attr in annotation.attributes)attributes[attr]=annotation.attributes[attr];attributes[ATTR.LINE_SENTINEL]&&!doLineAttributes||updateFn(attributes);var changedAttributes={},changedAttributesInverse={};return self.computeChangedAttributes_(annotation.attributes,attributes,changedAttributes,changedAttributesInverse),emptyAttributes(changedAttributes)||newChanges.push({start:pos,end:pos+length,attributes:changedAttributes,attributesInverse:changedAttributesInverse,origin:origin}),pos+=length,new RichTextAnnotation(attributes)}),newChanges.length>0&&this.trigger("attributesChange",this,newChanges)},RichTextCodeMirror.prototype.computeChangedAttributes_=function(oldAttrs,newAttrs,changed,inverseChanged){var attr,attrs={};for(attr in oldAttrs)attrs[attr]=!0;for(attr in newAttrs)attrs[attr]=!0;for(attr in attrs)attr in newAttrs?attr in oldAttrs?oldAttrs[attr]!==newAttrs[attr]&&(changed[attr]=newAttrs[attr],inverseChanged[attr]=oldAttrs[attr]):(changed[attr]=newAttrs[attr],inverseChanged[attr]=!1):(changed[attr]=!1,inverseChanged[attr]=oldAttrs[attr])},RichTextCodeMirror.prototype.toggleLineAttribute=function(attribute,value){var newValue,currentAttributes=this.getCurrentLineAttributes_();newValue=!(attribute in currentAttributes&&currentAttributes[attribute]===value)&&value,this.setLineAttribute(attribute,newValue)},RichTextCodeMirror.prototype.setLineAttribute=function(attribute,value){this.updateLineAttributesForSelection(function(attributes){!1===value?delete attributes[attribute]:attributes[attribute]=value})},RichTextCodeMirror.prototype.updateLineAttributesForSelection=function(updateFn){var cm=this.codeMirror,start=cm.getCursor("start"),end=cm.getCursor("end"),startLine=start.line,endLine=end.line,endLineText=cm.getLine(endLine),endsAtBeginningOfLine=this.areLineSentinelCharacters_(endLineText.substr(0,end.ch));endLine>startLine&&endsAtBeginningOfLine&&endLine--,this.updateLineAttributes(startLine,endLine,updateFn)},RichTextCodeMirror.prototype.updateLineAttributes=function(startLine,endLine,updateFn){for(var line=startLine;line<=endLine;line++){var text=this.codeMirror.getLine(line),lineStartIndex=this.codeMirror.indexFromPos({line:line,ch:0});if(text[0]!==LineSentinelCharacter){var attributes={};attributes[ATTR.LINE_SENTINEL]=!0,updateFn(attributes),this.insertText(lineStartIndex,LineSentinelCharacter,attributes)}else this.updateTextAttributes(lineStartIndex,lineStartIndex+1,updateFn,null,!0)}},RichTextCodeMirror.prototype.replaceText=function(start,end,text,attributes,origin){this.changeId_++;var newOrigin=RichTextOriginPrefix+this.changeId_;this.outstandingChanges_[newOrigin]={origOrigin:origin,attributes:attributes};var cm=this.codeMirror,from=cm.posFromIndex(start),to="number"==typeof end?cm.posFromIndex(end):null;cm.replaceRange(text,from,to,newOrigin)},RichTextCodeMirror.prototype.insertText=function(index,text,attributes,origin){var cm=this.codeMirror,cursor=cm.getCursor(),resetCursor="RTCMADAPTER"==origin&&!cm.somethingSelected()&&index==cm.indexFromPos(cursor);this.replaceText(index,null,text,attributes,origin),resetCursor&&cm.setCursor(cursor)},RichTextCodeMirror.prototype.removeText=function(start,end,origin){var cm=this.codeMirror;cm.replaceRange("",cm.posFromIndex(start),cm.posFromIndex(end),origin)},RichTextCodeMirror.prototype.insertEntityAtCursor=function(type,info,origin){var cm=this.codeMirror,index=cm.indexFromPos(cm.getCursor("head"));this.insertEntityAt(index,type,info,origin)},RichTextCodeMirror.prototype.insertEntityAt=function(index,type,info,origin){this.codeMirror;this.insertEntity_(index,new firepad.Entity(type,info),origin)},
RichTextCodeMirror.prototype.insertEntity_=function(index,entity,origin){this.replaceText(index,null,EntitySentinelCharacter,entity.toAttributes(),origin)},RichTextCodeMirror.prototype.getAttributeSpans=function(start,end){for(var spans=[],annotatedSpans=this.annotationList_.getAnnotatedSpansForSpan(new Span(start,end-start)),i=0;i<annotatedSpans.length;i++)spans.push({length:annotatedSpans[i].length,attributes:annotatedSpans[i].annotation.attributes});return spans},RichTextCodeMirror.prototype.end=function(){var lastLine=this.codeMirror.lineCount()-1;return this.codeMirror.indexFromPos({line:lastLine,ch:this.codeMirror.getLine(lastLine).length})},RichTextCodeMirror.prototype.getRange=function(start,end){var from=this.codeMirror.posFromIndex(start),to=this.codeMirror.posFromIndex(end);return this.codeMirror.getRange(from,to)},RichTextCodeMirror.prototype.initAnnotationList_=function(){var end=this.end();0!==end&&this.annotationList_.insertAnnotatedSpan(new Span(0,end),new RichTextAnnotation)},RichTextCodeMirror.prototype.onAnnotationsChanged_=function(oldNodes,newNodes){var marker,linesToReMark={};this.tryToUpdateEntitiesInPlace(oldNodes,newNodes);for(var i=0;i<oldNodes.length;i++){var attributes=oldNodes[i].annotation.attributes;ATTR.LINE_SENTINEL in attributes&&(linesToReMark[this.codeMirror.posFromIndex(oldNodes[i].pos).line]=!0),(marker=oldNodes[i].getAttachedObject())&&marker.clear()}for(i=0;i<newNodes.length;i++){var annotation=newNodes[i].annotation,forLine=ATTR.LINE_SENTINEL in annotation.attributes,entity=ATTR.ENTITY_SENTINEL in annotation.attributes,from=this.codeMirror.posFromIndex(newNodes[i].pos);if(forLine)linesToReMark[from.line]=!0;else if(entity)this.markEntity_(newNodes[i]);else{var className=this.getClassNameForAttributes_(annotation.attributes);if(""!==className){var to=this.codeMirror.posFromIndex(newNodes[i].pos+newNodes[i].length);marker=this.codeMirror.markText(from,to,{className:className}),newNodes[i].attachObject(marker)}}}for(var line in linesToReMark)this.dirtyLines_.push(this.codeMirror.getLineHandle(Number(line))),this.queueLineMarking_()},RichTextCodeMirror.prototype.tryToUpdateEntitiesInPlace=function(oldNodes,newNodes){for(var oldNodesLen=oldNodes.length;oldNodesLen--;)for(var oldNode=oldNodes[oldNodesLen],newNodesLen=newNodes.length;newNodesLen--;){var newNode=newNodes[newNodesLen];if(oldNode.pos==newNode.pos&&oldNode.length==newNode.length&&oldNode.annotation.attributes.ent&&oldNode.annotation.attributes.ent==newNode.annotation.attributes.ent){var entityType=newNode.annotation.attributes.ent;if(this.entityManager_.entitySupportsUpdate(entityType)){oldNodes.splice(oldNodesLen,1),newNodes.splice(newNodesLen,1);var marker=oldNode.getAttachedObject();marker.update(newNode.annotation.attributes),newNode.attachObject(marker)}}}},RichTextCodeMirror.prototype.queueLineMarking_=function(){if(null==this.lineMarkTimeout_){var self=this;this.lineMarkTimeout_=setTimeout(function(){self.lineMarkTimeout_=null;for(var dirtyLineNumbers=[],i=0;i<self.dirtyLines_.length;i++){var lineNum=self.codeMirror.getLineNumber(self.dirtyLines_[i]);dirtyLineNumbers.push(Number(lineNum))}self.dirtyLines_=[],dirtyLineNumbers.sort(function(a,b){return a-b});var lastLineMarked=-1;for(i=0;i<dirtyLineNumbers.length;i++){var lineNumber=dirtyLineNumbers[i];lineNumber>lastLineMarked&&(lastLineMarked=self.markLineSentinelCharactersForChangedLines_(lineNumber,lineNumber))}},0)}},RichTextCodeMirror.prototype.addStyleWithCSS_=function(css){var head=document.getElementsByTagName("head")[0],style=document.createElement("style");style.type="text/css",style.styleSheet?style.styleSheet.cssText=css:style.appendChild(document.createTextNode(css)),head.appendChild(style)},RichTextCodeMirror.prototype.getClassNameForAttributes_=function(attributes){var globalClassName="";for(var attr in attributes){var val=attributes[attr];if(attr===ATTR.LINE_SENTINEL)firepad.utils.assert(!0===val,"LINE_SENTINEL attribute should be true if it exists.");else{var className=(this.options_.cssPrefix||RichTextClassPrefixDefault)+attr;if(!0!==val){attr===ATTR.FONT_SIZE&&"string"!=typeof val&&(val+="px");var classVal=val.toString().toLowerCase().replace(/[^a-z0-9-_]/g,"-");if(className+="-"+classVal,DynamicStyleAttributes[attr]&&(StyleCache_[attr]||(StyleCache_[attr]={}),!StyleCache_[attr][classVal])){StyleCache_[attr][classVal]=!0;var dynStyle=DynamicStyleAttributes[attr],css="function"==typeof dynStyle?dynStyle(val):dynStyle+": "+val,selector=attr==ATTR.LINE_INDENT?"pre."+className:"."+className;this.addStyleWithCSS_(selector+" { "+css+" }")}}globalClassName=globalClassName+" "+className}}return globalClassName},RichTextCodeMirror.prototype.markEntity_=function(annotationNode){for(var attributes=annotationNode.annotation.attributes,entity=firepad.Entity.fromAttributes(attributes),cm=this.codeMirror,self=this,markers=[],i=0;i<annotationNode.length;i++){var from=cm.posFromIndex(annotationNode.pos+i),to=cm.posFromIndex(annotationNode.pos+i+1),options={collapsed:!0,atomic:!0,inclusiveLeft:!1,inclusiveRight:!1},entityHandle=this.createEntityHandle_(entity,annotationNode.pos),element=this.entityManager_.renderToElement(entity,entityHandle);element&&(options.replacedWith=element);var marker=cm.markText(from,to,options);markers.push(marker),entityHandle.setMarker(marker)}annotationNode.attachObject({clear:function(){for(var i=0;i<markers.length;i++)markers[i].clear()},update:function(info){for(var entity=firepad.Entity.fromAttributes(info),i=0;i<markers.length;i++)self.entityManager_.updateElement(entity,markers[i].replacedWith)}}),this.queueRefresh_()},RichTextCodeMirror.prototype.queueRefresh_=function(){var self=this;this.refreshTimer_||(this.refreshTimer_=setTimeout(function(){self.codeMirror.refresh(),self.refreshTimer_=null},0))},RichTextCodeMirror.prototype.createEntityHandle_=function(entity,location){function find(){if(marker){var where=marker.find();return where?self.codeMirror.indexFromPos(where.from):null}return location}function remove(){var at=find();null!=at&&(self.codeMirror.focus(),self.removeText(at,at+1))}function replace(info){var SENTINEL=firepad.AttributeConstants.ENTITY_SENTINEL,PREFIX=SENTINEL+"_",at=find();self.updateTextAttributes(at,at+1,function(attrs){for(var member in attrs)delete attrs[member];for(var attr in attrs[SENTINEL]=entity.type,info)attrs[PREFIX+attr]=info[attr]})}function setMarker(m){marker=m}var marker=null,self=this;return{find:find,remove:remove,replace:replace,setMarker:setMarker}},RichTextCodeMirror.prototype.lineClassRemover_=function(lineNum){var cm=this.codeMirror,lineHandle=cm.getLineHandle(lineNum);return{clear:function(){cm.removeLineClass(lineHandle,"text",".*")}}},RichTextCodeMirror.prototype.emptySelection_=function(){var start=this.codeMirror.getCursor("start"),end=this.codeMirror.getCursor("end");return start.line===end.line&&start.ch===end.ch},RichTextCodeMirror.prototype.onCodeMirrorBeforeChange_=function(cm,change){if("+input"===change.origin||"paste"===change.origin){for(var newText=[],i=0;i<change.text.length;i++){var t=change.text[i];t=t.replace(new RegExp("["+LineSentinelCharacter+EntitySentinelCharacter+"]","g"),""),newText.push(t)}change.update(change.from,change.to,newText)}},RichTextCodeMirror.prototype.onCodeMirrorChange_=function(cm,cmChanges){if("object"==typeof cmChanges.from){for(var changeArray=[];cmChanges;)changeArray.push(cmChanges),cmChanges=cmChanges.next;cmChanges=changeArray}for(var changes=this.convertCoordinateSystemForChanges_(cmChanges),newChanges=[],i=0;i<changes.length;i++){var attributes,change=changes[i],start=change.start,text=(change.end,change.text),removed=change.removed,origin=change.origin;if(removed.length>0){for(var oldAnnotationSpans=this.annotationList_.getAnnotatedSpansForSpan(new Span(start,removed.length)),removedPos=0,j=0;j<oldAnnotationSpans.length;j++){var span=oldAnnotationSpans[j];newChanges.push({start:start,end:start+span.length,removedAttributes:span.annotation.attributes,removed:removed.substr(removedPos,span.length),attributes:{},text:"",origin:change.origin}),removedPos+=span.length}this.annotationList_.removeSpan(new Span(start,removed.length))}if(text.length>0)"+input"===change.origin||"paste"===change.origin?attributes=this.currentAttributes_||{}:origin in this.outstandingChanges_?(attributes=this.outstandingChanges_[origin].attributes,origin=this.outstandingChanges_[origin].origOrigin,delete this.outstandingChanges_[origin]):attributes={},this.annotationList_.insertAnnotatedSpan(new Span(start,text.length),new RichTextAnnotation(attributes)),newChanges.push({start:start,end:start,removedAttributes:{},removed:"",text:text,attributes:attributes,origin:origin})}this.markLineSentinelCharactersForChanges_(cmChanges),newChanges.length>0&&this.trigger("change",this,newChanges)},RichTextCodeMirror.prototype.convertCoordinateSystemForChanges_=function(changes){function updateIndexFromPos(indexFromPos,change){return function(pos){return posLe(pos,change.from)?indexFromPos(pos):posLe(change.to,pos)?indexFromPos({line:pos.line+change.text.length-1-(change.to.line-change.from.line),ch:change.to.line<pos.line?pos.ch:change.text.length<=1?pos.ch-(change.to.ch-change.from.ch)+sumLengths(change.text):pos.ch-change.to.ch+last(change.text).length})+sumLengths(change.removed)-sumLengths(change.text):change.from.line===pos.line?indexFromPos(change.from)+pos.ch-change.from.ch:indexFromPos(change.from)+sumLengths(change.removed.slice(0,pos.line-change.from.line))+1+pos.ch}}for(var self=this,indexFromPos=function(pos){return self.codeMirror.indexFromPos(pos)},newChanges=[],i=changes.length-1;i>=0;i--){var change=changes[i],start=(indexFromPos=updateIndexFromPos(indexFromPos,change))(change.from),removedText=change.removed.join("\n"),text=change.text.join("\n");newChanges.unshift({start:start,end:start+removedText.length,removed:removedText,text:text,origin:change.origin})}return newChanges},RichTextCodeMirror.prototype.markLineSentinelCharactersForChanges_=function(changes){for(var startLine=Number.MAX_VALUE,endLine=-1,i=0;i<changes.length;i++){var change=changes[i],line=change.from.line;change.from.ch;(change.removed.length>1||change.removed[0].indexOf(LineSentinelCharacter)>=0)&&(startLine=Math.min(startLine,line),endLine=Math.max(endLine,line)),change.text.length>1?(startLine=Math.min(startLine,line),endLine=Math.max(endLine,line+change.text.length-1)):change.text[0].indexOf(LineSentinelCharacter)>=0&&(startLine=Math.min(startLine,line),endLine=Math.max(endLine,line))}endLine=Math.min(endLine,this.codeMirror.lineCount()-1),this.markLineSentinelCharactersForChangedLines_(startLine,endLine)},RichTextCodeMirror.prototype.markLineSentinelCharactersForChangedLines_=function(startLine,endLine){if(startLine<Number.MAX_VALUE)for(;startLine>0&&this.lineIsListItemOrIndented_(startLine-1);)startLine--;if(endLine>-1)for(var lineCount=this.codeMirror.lineCount();endLine+1<lineCount&&this.lineIsListItemOrIndented_(endLine+1);)endLine++;for(var listNumber=[],cm=this.codeMirror,line=startLine;line<=endLine;line++){var text=cm.getLine(line),lineHandle=cm.getLineHandle(line);if(cm.removeLineClass(lineHandle,"text",".*"),text.length>0)for(var markIndex=text.indexOf(LineSentinelCharacter);markIndex>=0;){for(var markStartIndex=markIndex;markIndex<text.length&&text[markIndex]===LineSentinelCharacter;){for(var marks=cm.findMarksAt({line:line,ch:markIndex}),i=0;i<marks.length;i++)marks[i].isForLineSentinel&&marks[i].clear();markIndex++}this.markLineSentinelCharacters_(line,markStartIndex,markIndex,listNumber),markIndex=text.indexOf(LineSentinelCharacter,markIndex)}else listNumber=[]}return endLine},RichTextCodeMirror.prototype.markLineSentinelCharacters_=function(line,startIndex,endIndex,listNumber){var cm=this.codeMirror,element=null,marker=null,getMarkerLine=function(){var span=marker.find();return span?span.from.line:null};if(0===startIndex){var attributes=this.getLineAttributes_(line),listType=attributes[ATTR.LIST_TYPE],indent=attributes[ATTR.LINE_INDENT]||0;for(listType&&0===indent&&(indent=1);indent>=listNumber.length;)listNumber.push(1);"o"===listType?(element=this.makeOrderedListElement_(listNumber[indent]),listNumber[indent]++):"u"===listType?(element=this.makeUnorderedListElement_(),listNumber[indent]=1):"t"===listType?(element=this.makeTodoListElement_(!1,getMarkerLine),listNumber[indent]=1):"tc"===listType&&(element=this.makeTodoListElement_(!0,getMarkerLine),listNumber[indent]=1);var className=this.getClassNameForAttributes_(attributes);""!==className&&this.codeMirror.addLineClass(line,"text",className),listNumber=listNumber.slice(0,indent+1)}var markerOptions={inclusiveLeft:!0,collapsed:!0};element&&(markerOptions.replacedWith=element),(marker=cm.markText({line:line,ch:startIndex},{line:line,ch:endIndex},markerOptions)).isForLineSentinel=!0},RichTextCodeMirror.prototype.makeOrderedListElement_=function(number){return utils.elt("div",number+".",{"class":"firepad-list-left"})},RichTextCodeMirror.prototype.makeUnorderedListElement_=function(){return utils.elt("div","\u2022",{"class":"firepad-list-left"})},RichTextCodeMirror.prototype.toggleTodo=function(noRemove){var newValue,attribute=ATTR.LIST_TYPE,currentAttributes=this.getCurrentLineAttributes_();attribute in currentAttributes&&("t"===currentAttributes[attribute]||"tc"===currentAttributes[attribute])?"t"===currentAttributes[attribute]?newValue="tc":"tc"===currentAttributes[attribute]&&(newValue=!!noRemove&&"t"):newValue="t",this.setLineAttribute(attribute,newValue)},RichTextCodeMirror.prototype.makeTodoListElement_=function(checked,getMarkerLine){var params={type:"checkbox","class":"firepad-todo-left"};checked&&(params.checked=!0);var el=utils.elt("input",!1,params),self=this;return utils.on(el,"click",utils.stopEventAnd(function(){self.codeMirror.setCursor({line:getMarkerLine(),ch:1}),self.toggleTodo(!0)})),el},RichTextCodeMirror.prototype.lineIsListItemOrIndented_=function(lineNum){var attrs=this.getLineAttributes_(lineNum);return!1!==(attrs[ATTR.LIST_TYPE]||!1)||0!==(attrs[ATTR.LINE_INDENT]||0)},RichTextCodeMirror.prototype.onCursorActivity_=function(){var self=this;setTimeout(function(){self.updateCurrentAttributes_()},1)},RichTextCodeMirror.prototype.getCurrentAttributes_=function(){return this.currentAttributes_||this.updateCurrentAttributes_(),this.currentAttributes_},RichTextCodeMirror.prototype.updateCurrentAttributes_=function(){var cm=this.codeMirror,anchor=cm.indexFromPos(cm.getCursor("anchor")),head=cm.indexFromPos(cm.getCursor("head")),pos=head;if(anchor>head){for(;pos<this.end();){var c=this.getRange(pos,pos+1);if("\n"!==c&&c!==LineSentinelCharacter)break;pos++}pos<this.end()&&pos++}else for(;pos>0&&("\n"===(c=this.getRange(pos-1,pos))||c===LineSentinelCharacter);)pos--;var spans=this.annotationList_.getAnnotatedSpansForPos(pos);this.currentAttributes_={};var attributes={};for(var attr in spans.length>0&&!(ATTR.LINE_SENTINEL in spans[0].annotation.attributes)?attributes=spans[0].annotation.attributes:spans.length>1&&(firepad.utils.assert(!(ATTR.LINE_SENTINEL in spans[1].annotation.attributes),"Cursor can't be between two line sentinel characters."),attributes=spans[1].annotation.attributes),attributes)"l"!==attr&&"lt"!==attr&&"li"!==attr&&0!==attr.indexOf(ATTR.ENTITY_SENTINEL)&&(this.currentAttributes_[attr]=attributes[attr])},RichTextCodeMirror.prototype.getCurrentLineAttributes_=function(){var cm=this.codeMirror,anchor=cm.getCursor("anchor"),head=cm.getCursor("head"),line=head.line;return 0===head.ch&&anchor.line<head.line&&line--,this.getLineAttributes_(line)},RichTextCodeMirror.prototype.getLineAttributes_=function(lineNum){var attributes={},line=this.codeMirror.getLine(lineNum);if(line.length>0&&line[0]===LineSentinelCharacter){var lineStartIndex=this.codeMirror.indexFromPos({line:lineNum,ch:0}),spans=this.annotationList_.getAnnotatedSpansForSpan(new Span(lineStartIndex,1));for(var attr in firepad.utils.assert(1===spans.length),spans[0].annotation.attributes)attributes[attr]=spans[0].annotation.attributes[attr]}return attributes},RichTextCodeMirror.prototype.clearAnnotations_=function(){this.annotationList_.updateSpan(new Span(0,this.end()),function(){return new RichTextAnnotation({})})},RichTextCodeMirror.prototype.newline=function(){var cm=this.codeMirror,self=this;if(this.emptySelection_()){var cursorLine=cm.getCursor("head").line,lineAttributes=this.getLineAttributes_(cursorLine),listType=lineAttributes[ATTR.LIST_TYPE];listType&&1===cm.getLine(cursorLine).length?this.updateLineAttributes(cursorLine,cursorLine,function(attributes){delete attributes[ATTR.LIST_TYPE],delete attributes[ATTR.LINE_INDENT]}):(cm.replaceSelection("\n","end","+input"),this.updateLineAttributes(cursorLine+1,cursorLine+1,function(attributes){for(var attr in lineAttributes)attributes[attr]=lineAttributes[attr];"tc"===listType&&(attributes[ATTR.LIST_TYPE]="t"),self.trigger("newLine",{line:cursorLine+1,attr:attributes})}))}else cm.replaceSelection("\n","end","+input")},RichTextCodeMirror.prototype.deleteLeft=function(){var cm=this.codeMirror,cursorPos=cm.getCursor("head"),lineAttributes=this.getLineAttributes_(cursorPos.line),listType=lineAttributes[ATTR.LIST_TYPE],indent=lineAttributes[ATTR.LINE_INDENT],backspaceAtStartOfLine=this.emptySelection_()&&1===cursorPos.ch;backspaceAtStartOfLine&&listType?this.updateLineAttributes(cursorPos.line,cursorPos.line,function(attributes){delete attributes[ATTR.LIST_TYPE],delete attributes[ATTR.LINE_INDENT]}):backspaceAtStartOfLine&&indent&&indent>0?this.unindent():cm.deleteH(-1,"char")},RichTextCodeMirror.prototype.deleteRight=function(){var cm=this.codeMirror,cursorPos=cm.getCursor("head"),text=cm.getLine(cursorPos.line),emptyLine=this.areLineSentinelCharacters_(text),nextLineText=cursorPos.line+1<cm.lineCount()?cm.getLine(cursorPos.line+1):"";this.emptySelection_()&&emptyLine&&nextLineText[0]===LineSentinelCharacter?(cm.replaceRange("",{line:cursorPos.line,ch:0},{line:cursorPos.line+1,ch:0},"+input"),cm.setCursor({line:cursorPos.line,ch:0})):cm.deleteH(1,"char")},RichTextCodeMirror.prototype.indent=function(){this.updateLineAttributesForSelection(function(attributes){var indent=attributes[ATTR.LINE_INDENT],listType=attributes[ATTR.LIST_TYPE];indent?attributes[ATTR.LINE_INDENT]++:attributes[ATTR.LINE_INDENT]=listType?2:1})},RichTextCodeMirror.prototype.unindent=function(){this.updateLineAttributesForSelection(function(attributes){var indent=attributes[ATTR.LINE_INDENT];indent&&indent>1?attributes[ATTR.LINE_INDENT]=indent-1:(delete attributes[ATTR.LIST_TYPE],delete attributes[ATTR.LINE_INDENT])})},RichTextCodeMirror.prototype.getText=function(){return this.codeMirror.getValue().replace(new RegExp(LineSentinelCharacter,"g"),"")},RichTextCodeMirror.prototype.areLineSentinelCharacters_=function(text){for(var i=0;i<text.length;i++)if(text[i]!==LineSentinelCharacter)return!1;return!0},RichTextAnnotation.prototype.equals=function(other){if(!(other instanceof RichTextAnnotation))return!1;var attr;for(attr in this.attributes)if(other.attributes[attr]!==this.attributes[attr])return!1;for(attr in other.attributes)if(other.attributes[attr]!==this.attributes[attr])return!1;return!0},RichTextCodeMirror}(),(firepad=firepad||{}).RichTextCodeMirrorAdapter=function(){"use strict";function RichTextCodeMirrorAdapter(rtcm){this.rtcm=rtcm,this.cm=rtcm.codeMirror,bind(this,"onChange"),bind(this,"onAttributesChange"),bind(this,"onCursorActivity"),bind(this,"onFocus"),bind(this,"onBlur"),this.rtcm.on("change",this.onChange),this.rtcm.on("attributesChange",this.onAttributesChange),this.cm.on("cursorActivity",this.onCursorActivity),this.cm.on("focus",this.onFocus),this.cm.on("blur",this.onBlur)}function cmpPos(a,b){return a.line<b.line?-1:a.line>b.line?1:a.ch<b.ch?-1:a.ch>b.ch?1:0}function posEq(a,b){return 0===cmpPos(a,b)}function codemirrorLength(cm){var lastLine=cm.lineCount()-1;return cm.indexFromPos({line:lastLine,ch:cm.getLine(lastLine).length})}function assert(b,msg){if(!b)throw new Error(msg||"assertion error")}function bind(obj,method){var fn=obj[method];obj[method]=function(){fn.apply(obj,arguments)}}function emptyAttributes(attrs){for(var attr in attrs)return!1;return!0}function hex2rgb(hex,transparency){if("string"!=typeof hex)throw new TypeError("Expected a string");3===(hex=hex.replace(/^#/,"")).length&&(hex=hex[0]+hex[0]+hex[1]+hex[1]+hex[2]+hex[2]);var num=parseInt(hex,16),rgb=[num>>16,num>>8&255,255&num],type="rgb";return exists(transparency)&&(type="rgba",rgb.push(transparency)),type+"("+rgb.join(",")+")"}function exists(val){return null!==val&&val!==undefined}var TextOperation=firepad.TextOperation,WrappedOperation=firepad.WrappedOperation,Cursor=firepad.Cursor;return RichTextCodeMirrorAdapter.prototype.detach=function(){this.rtcm.off("change",this.onChange),this.rtcm.off("attributesChange",this.onAttributesChange),this.cm.off("cursorActivity",this.onCursorActivity),this.cm.off("focus",this.onFocus),this.cm.off("blur",this.onBlur)},RichTextCodeMirrorAdapter.operationFromCodeMirrorChanges=function(changes,cm){for(var docEndLength=codemirrorLength(cm),operation=(new TextOperation).retain(docEndLength),inverse=(new TextOperation).retain(docEndLength),i=changes.length-1;i>=0;i--){var change=changes[i],fromIndex=change.start,restLength=docEndLength-fromIndex-change.text.length;operation=(new TextOperation).retain(fromIndex)["delete"](change.removed.length).insert(change.text,change.attributes).retain(restLength).compose(operation),inverse=inverse.compose((new TextOperation).retain(fromIndex)["delete"](change.text.length).insert(change.removed,change.removedAttributes).retain(restLength)),docEndLength+=change.removed.length-change.text.length}return[operation,inverse]},RichTextCodeMirrorAdapter.operationFromAttributesChanges=function(changes,cm){for(var docEndLength=codemirrorLength(cm),operation=new TextOperation,inverse=new TextOperation,pos=0,i=0;i<changes.length;i++){var change=changes[i],toRetain=change.start-pos;assert(toRetain>=0),operation.retain(toRetain),inverse.retain(toRetain);var length=change.end-change.start;operation.retain(length,change.attributes),inverse.retain(length,change.attributesInverse),pos=change.start+length}return operation.retain(docEndLength-pos),inverse.retain(docEndLength-pos),[operation,inverse]},RichTextCodeMirrorAdapter.prototype.registerCallbacks=function(cb){this.callbacks=cb},RichTextCodeMirrorAdapter.prototype.onChange=function(_,changes){if("RTCMADAPTER"!==changes[0].origin){var pair=RichTextCodeMirrorAdapter.operationFromCodeMirrorChanges(changes,this.cm);this.trigger("change",pair[0],pair[1])}},RichTextCodeMirrorAdapter.prototype.onAttributesChange=function(_,changes){if("RTCMADAPTER"!==changes[0].origin){var pair=RichTextCodeMirrorAdapter.operationFromAttributesChanges(changes,this.cm);this.trigger("change",pair[0],pair[1])}},RichTextCodeMirrorAdapter.prototype.onCursorActivity=function(){var self=this;setTimeout(function(){self.trigger("cursorActivity")},1)},RichTextCodeMirrorAdapter.prototype.onFocus=function(){this.trigger("focus")},RichTextCodeMirrorAdapter.prototype.onBlur=function(){this.cm.somethingSelected()||this.trigger("blur")},RichTextCodeMirrorAdapter.prototype.getValue=function(){return this.cm.getValue()},RichTextCodeMirrorAdapter.prototype.getCursor=function(){var selectionEnd,cm=this.cm,cursorPos=cm.getCursor(),position=cm.indexFromPos(cursorPos);if(cm.somethingSelected()){var startPos=cm.getCursor(!0),selectionEndPos=posEq(cursorPos,startPos)?cm.getCursor(!1):startPos;selectionEnd=cm.indexFromPos(selectionEndPos)}else selectionEnd=position;return new Cursor(position,selectionEnd)},RichTextCodeMirrorAdapter.prototype.setCursor=function(cursor){this.cm.setSelection(this.cm.posFromIndex(cursor.position),this.cm.posFromIndex(cursor.selectionEnd))},RichTextCodeMirrorAdapter.prototype.addStyleRule=function(css){if("undefined"!=typeof document&&null!==document){if(!this.addedStyleRules){this.addedStyleRules={};var styleElement=document.createElement("style");document.documentElement.getElementsByTagName("head")[0].appendChild(styleElement),this.addedStyleSheet=styleElement.sheet}if(!this.addedStyleRules[css])return this.addedStyleRules[css]=!0,this.addedStyleSheet.insertRule(css,0)}},RichTextCodeMirrorAdapter.prototype.setOtherCursor=function(cursor,color,clientId){var cursorPos=this.cm.posFromIndex(cursor.position);if("string"==typeof color&&color.match(/^#[a-fA-F0-9]{3,6}$/)){var end=this.rtcm.end();if("object"==typeof cursor&&"number"==typeof cursor.position&&"number"==typeof cursor.selectionEnd&&!(cursor.position<0||cursor.position>end||cursor.selectionEnd<0||cursor.selectionEnd>end)){if(cursor.position===cursor.selectionEnd){var cursorCoords=this.cm.cursorCoords(cursorPos),cursorEl=document.createElement("span");return cursorEl.className="other-client",cursorEl.style.borderLeftWidth="2px",cursorEl.style.borderLeftStyle="solid",cursorEl.style.borderLeftColor=color,cursorEl.style.marginLeft=cursorEl.style.marginRight="-1px",cursorEl.style.height=.9*(cursorCoords.bottom-cursorCoords.top)+"px",cursorEl.setAttribute("data-clientid",clientId),cursorEl.style.zIndex=0,this.cm.setBookmark(cursorPos,{widget:cursorEl,insertLeft:!0})}var fromPos,toPos,selectionClassName="selection-"+color.replace("#",""),transparency=.4,rule="."+selectionClassName+" { background: "+hex2rgb(color)+";\n background: "+hex2rgb(color,transparency)+";}";return this.addStyleRule(rule),cursor.selectionEnd>cursor.position?(fromPos=cursorPos,toPos=this.cm.posFromIndex(cursor.selectionEnd)):(fromPos=this.cm.posFromIndex(cursor.selectionEnd),toPos=cursorPos),this.cm.markText(fromPos,toPos,{className:selectionClassName})}}},RichTextCodeMirrorAdapter.prototype.trigger=function(event){var args=Array.prototype.slice.call(arguments,1),action=this.callbacks&&this.callbacks[event];action&&action.apply(this,args)},RichTextCodeMirrorAdapter.prototype.applyOperation=function(operation){operation.ops.length>10&&this.rtcm.codeMirror.getWrapperElement().setAttribute("style","display: none");for(var ops=operation.ops,index=0,i=0,l=ops.length;i<l;i++){var op=ops[i];op.isRetain()?(emptyAttributes(op.attributes)||this.rtcm.updateTextAttributes(index,index+op.chars,function(attributes){for(var attr in op.attributes)!1===op.attributes[attr]?delete attributes[attr]:attributes[attr]=op.attributes[attr]},"RTCMADAPTER",!0),index+=op.chars):op.isInsert()?(this.rtcm.insertText(index,op.text,op.attributes,"RTCMADAPTER"),index+=op.text.length):op.isDelete()&&this.rtcm.removeText(index,index+op.chars,"RTCMADAPTER")}operation.ops.length>10&&(this.rtcm.codeMirror.getWrapperElement().setAttribute("style",""),this.rtcm.codeMirror.refresh())},RichTextCodeMirrorAdapter.prototype.registerUndo=function(undoFn){this.cm.undo=undoFn},RichTextCodeMirrorAdapter.prototype.registerRedo=function(redoFn){this.cm.redo=redoFn},RichTextCodeMirrorAdapter.prototype.invertOperation=function(operation){for(var spans,i,pos=0,cm=this.rtcm.codeMirror,inverse=new TextOperation,opIndex=0;opIndex<operation.wrapped.ops.length;opIndex++){var op=operation.wrapped.ops[opIndex];if(op.isRetain())if(emptyAttributes(op.attributes))inverse.retain(op.chars),pos+=op.chars;else for(spans=this.rtcm.getAttributeSpans(pos,pos+op.chars),i=0;i<spans.length;i++){var inverseAttributes={};for(var attr in op.attributes){var opValue=op.attributes[attr],curValue=spans[i].attributes[attr];!1===opValue?curValue&&(inverseAttributes[attr]=curValue):opValue!==curValue&&(inverseAttributes[attr]=curValue||!1)}inverse.retain(spans[i].length,inverseAttributes),pos+=spans[i].length}else if(op.isInsert())inverse["delete"](op.text.length);else if(op.isDelete()){var text=cm.getRange(cm.posFromIndex(pos),cm.posFromIndex(pos+op.chars));spans=this.rtcm.getAttributeSpans(pos,pos+op.chars);var delTextPos=0;for(i=0;i<spans.length;i++)inverse.insert(text.substr(delTextPos,spans[i].length),spans[i].attributes),delTextPos+=spans[i].length;pos+=op.chars}}return new WrappedOperation(inverse,operation.meta.invert())},RichTextCodeMirrorAdapter}(),(firepad=firepad||{}).Formatting=function(){function Formatting(attributes){if(!(this instanceof Formatting))return new Formatting(attributes);this.attributes=attributes||{}}var ATTR=firepad.AttributeConstants;return Formatting.prototype.cloneWithNewAttribute_=function(attribute,value){var attributes={};for(var attr in this.attributes)attributes[attr]=this.attributes[attr];return!1===value?delete attributes[attribute]:attributes[attribute]=value,new Formatting(attributes)},Formatting.prototype.bold=function(val){return this.cloneWithNewAttribute_(ATTR.BOLD,val)},Formatting.prototype.italic=function(val){return this.cloneWithNewAttribute_(ATTR.ITALIC,val)},Formatting.prototype.underline=function(val){return this.cloneWithNewAttribute_(ATTR.UNDERLINE,val)},Formatting.prototype.strike=function(val){return this.cloneWithNewAttribute_(ATTR.STRIKE,val)},Formatting.prototype.font=function(font){return this.cloneWithNewAttribute_(ATTR.FONT,font)},Formatting.prototype.fontSize=function(size){return this.cloneWithNewAttribute_(ATTR.FONT_SIZE,size)},Formatting.prototype.color=function(color){return this.cloneWithNewAttribute_(ATTR.COLOR,color)},Formatting.prototype.backgroundColor=function(color){return this.cloneWithNewAttribute_(ATTR.BACKGROUND_COLOR,color)},Formatting}(),(firepad=firepad||{}).Text=function(){function Text(text,formatting){if(!(this instanceof Text))return new Text(text,formatting);this.text=text,this.formatting=formatting||firepad.Formatting()}return Text}(),(firepad=firepad||{}).LineFormatting=function(){function LineFormatting(attributes){if(!(this instanceof LineFormatting))return new LineFormatting(attributes);this.attributes=attributes||{},this.attributes[ATTR.LINE_SENTINEL]=!0}var ATTR=firepad.AttributeConstants;return LineFormatting.LIST_TYPE={NONE:!1,ORDERED:"o",UNORDERED:"u",TODO:"t",TODOCHECKED:"tc"},LineFormatting.prototype.cloneWithNewAttribute_=function(attribute,value){var attributes={};for(var attr in this.attributes)attributes[attr]=this.attributes[attr];return!1===value?delete attributes[attribute]:attributes[attribute]=value,new LineFormatting(attributes)},LineFormatting.prototype.indent=function(indent){return this.cloneWithNewAttribute_(ATTR.LINE_INDENT,indent)},LineFormatting.prototype.align=function(align){return this.cloneWithNewAttribute_(ATTR.LINE_ALIGN,align)},LineFormatting.prototype.listItem=function(val){return firepad.utils.assert(!1===val||"u"===val||"o"===val||"t"===val||"tc"===val),this.cloneWithNewAttribute_(ATTR.LIST_TYPE,val)},LineFormatting.prototype.getIndent=function(){return this.attributes[ATTR.LINE_INDENT]||0},LineFormatting.prototype.getAlign=function(){return this.attributes[ATTR.LINE_ALIGN]||0},LineFormatting.prototype.getListItem=function(){return this.attributes[ATTR.LIST_TYPE]||!1},LineFormatting}(),(firepad=firepad||{}).Line=function(){function Line(textPieces,formatting){if(!(this instanceof Line))return new Line(textPieces,formatting);"[object Array]"!==Object.prototype.toString.call(textPieces)&&(textPieces=void 0===textPieces?[]:[textPieces]),this.textPieces=textPieces,this.formatting=formatting||firepad.LineFormatting()}return Line}(),(firepad=firepad||{}).ParseHtml=function(){function ParseState(opt_listType,opt_lineFormatting,opt_textFormatting){this.listType=opt_listType||LIST_TYPE.UNORDERED,this.lineFormatting=opt_lineFormatting||firepad.LineFormatting(),this.textFormatting=opt_textFormatting||firepad.Formatting()}function ParseOutput(){this.lines=[],this.currentLine=[],this.currentLineListItemType=null}function parseHtml(html,entityManager){var div=(firepad.document||document).createElement("div");div.innerHTML=html,entityManager_=entityManager;var output=new ParseOutput;return parseNode(div,new ParseState,output),output.lines}function parseNode(node,state,output){if(node.nodeType===Node.ELEMENT_NODE){var entity=entityManager_.fromElement(node);if(entity)return void output.currentLine.push(new firepad.Text(firepad.sentinelConstants.ENTITY_SENTINEL_CHARACTER,new firepad.Formatting(entity.toAttributes())))}switch(node.nodeType){case Node.TEXT_NODE:var text=node.nodeValue.replace(/[ \n\t]+/g," ");output.currentLine.push(firepad.Text(text,state.textFormatting));break;case Node.ELEMENT_NODE:switch(state=parseStyle(state,node.getAttribute("style")||""),node.nodeName.toLowerCase()){case"div":case"h1":case"h2":case"h3":case"p":output.newlineIfNonEmpty(state),parseChildren(node,state,output),output.newlineIfNonEmpty(state);break;case"center":state=state.withAlign("center"),output.newlineIfNonEmpty(state),parseChildren(node,state.withAlign("center"),output),output.newlineIfNonEmpty(state);break;case"b":case"strong":parseChildren(node,state.withTextFormatting(state.textFormatting.bold(!0)),output);break;case"u":
parseChildren(node,state.withTextFormatting(state.textFormatting.underline(!0)),output);break;case"i":case"em":parseChildren(node,state.withTextFormatting(state.textFormatting.italic(!0)),output);break;case"s":parseChildren(node,state.withTextFormatting(state.textFormatting.strike(!0)),output);break;case"font":var face=node.getAttribute("face"),color=node.getAttribute("color"),size=parseInt(node.getAttribute("size"));face&&(state=state.withTextFormatting(state.textFormatting.font(face))),color&&(state=state.withTextFormatting(state.textFormatting.color(color))),size&&(state=state.withTextFormatting(state.textFormatting.fontSize(size))),parseChildren(node,state,output);break;case"br":output.newline(state);break;case"ul":output.newlineIfNonEmptyOrListItem(state);var listType="firepad-todo"===node.getAttribute("class")?LIST_TYPE.TODO:LIST_TYPE.UNORDERED;parseChildren(node,state.withListType(listType).withIncreasedIndent(),output),output.newlineIfNonEmpty(state);break;case"ol":output.newlineIfNonEmptyOrListItem(state),parseChildren(node,state.withListType(LIST_TYPE.ORDERED).withIncreasedIndent(),output),output.newlineIfNonEmpty(state);break;case"li":parseListItem(node,state,output);break;case"style":break;default:parseChildren(node,state,output)}}}function parseChildren(node,state,output){if(node.hasChildNodes())for(var i=0;i<node.childNodes.length;i++)parseNode(node.childNodes[i],state,output)}function parseListItem(node,state,output){output.newlineIfNonEmptyOrListItem(state);var listType="firepad-checked"===node.getAttribute("class")?LIST_TYPE.TODOCHECKED:state.listType;output.makeListItem(listType);var oldLine=output.currentLine;parseChildren(node,state,output),(oldLine===output.currentLine||output.currentLine.length>0)&&output.newline(state)}function parseStyle(state,styleString){for(var textFormatting=state.textFormatting,lineFormatting=state.lineFormatting,styles=styleString.split(";"),i=0;i<styles.length;i++){var stylePieces=styles[i].split(":");if(2===stylePieces.length){var prop=firepad.utils.trim(stylePieces[0]).toLowerCase(),val=firepad.utils.trim(stylePieces[1]).toLowerCase();switch(prop){case"text-decoration":var underline=val.indexOf("underline")>=0,strike=val.indexOf("line-through")>=0;textFormatting=textFormatting.underline(underline).strike(strike);break;case"font-weight":var bold="bold"===val||parseInt(val)>=600;textFormatting=textFormatting.bold(bold);break;case"font-style":var italic="italic"===val||"oblique"===val;textFormatting=textFormatting.italic(italic);break;case"color":textFormatting=textFormatting.color(val);break;case"background-color":textFormatting=textFormatting.backgroundColor(val);break;case"text-align":lineFormatting=lineFormatting.align(val);break;case"font-size":var size=null,allowedValues=["px","pt","%","em","xx-small","x-small","small","medium","large","x-large","xx-large","smaller","larger"];firepad.utils.stringEndsWith(val,allowedValues)?size=val:parseInt(val)&&(size=parseInt(val)+"px"),size&&(textFormatting=textFormatting.fontSize(size));break;case"font-family":var font=firepad.utils.trim(val.split(",")[0]);font=(font=font.replace(/['"]/g,"")).replace(/\w\S*/g,function(txt){return txt.charAt(0).toUpperCase()+txt.substr(1).toLowerCase()}),textFormatting=textFormatting.font(font)}}}return state.withLineFormatting(lineFormatting).withTextFormatting(textFormatting)}var entityManager_,LIST_TYPE=firepad.LineFormatting.LIST_TYPE;ParseState.prototype.withTextFormatting=function(textFormatting){return new ParseState(this.listType,this.lineFormatting,textFormatting)},ParseState.prototype.withLineFormatting=function(lineFormatting){return new ParseState(this.listType,lineFormatting,this.textFormatting)},ParseState.prototype.withListType=function(listType){return new ParseState(listType,this.lineFormatting,this.textFormatting)},ParseState.prototype.withIncreasedIndent=function(){var lineFormatting=this.lineFormatting.indent(this.lineFormatting.getIndent()+1);return new ParseState(this.listType,lineFormatting,this.textFormatting)},ParseState.prototype.withAlign=function(align){var lineFormatting=this.lineFormatting.align(align);return new ParseState(this.listType,lineFormatting,this.textFormatting)},ParseOutput.prototype.newlineIfNonEmpty=function(state){this.cleanLine_(),this.currentLine.length>0&&this.newline(state)},ParseOutput.prototype.newlineIfNonEmptyOrListItem=function(state){this.cleanLine_(),(this.currentLine.length>0||null!==this.currentLineListItemType)&&this.newline(state)},ParseOutput.prototype.newline=function(state){this.cleanLine_();var lineFormatting=state.lineFormatting;null!==this.currentLineListItemType&&(lineFormatting=lineFormatting.listItem(this.currentLineListItemType),this.currentLineListItemType=null),this.lines.push(firepad.Line(this.currentLine,lineFormatting)),this.currentLine=[]},ParseOutput.prototype.makeListItem=function(type){this.currentLineListItemType=type},ParseOutput.prototype.cleanLine_=function(){if(this.currentLine.length>0){var last=this.currentLine.length-1;this.currentLine[0].text=this.currentLine[0].text.replace(/^ +/,""),this.currentLine[last].text=this.currentLine[last].text.replace(/ +$/g,"");for(var i=0;i<this.currentLine.length;i++)this.currentLine[i].text=this.currentLine[i].text.replace(/\u00a0/g," ")}1===this.currentLine.length&&""===this.currentLine[0].text&&(this.currentLine=[])};var Node=Node||{ELEMENT_NODE:1,TEXT_NODE:3};return parseHtml}(),(firepad=firepad||{}).SerializeHtml=function(){function open(listType){return listType===LIST_TYPE.ORDERED?"<ol>":listType===LIST_TYPE.UNORDERED?"<ul>":'<ul class="firepad-todo">'}function close(listType){return listType===LIST_TYPE.ORDERED?"</ol>":"</ul>"}function compatibleListType(l1,l2){return l1===l2||l1===LIST_TYPE.TODO&&l2===LIST_TYPE.TODOCHECKED||l1===LIST_TYPE.TODOCHECKED&&l2===LIST_TYPE.TODO}function textToHtml(text){return text.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\u00a0/g,"&nbsp;")}function serializeHtml(doc,entityManager){for(var html="",newLine=!0,listTypeStack=[],inListItem=!1,firstLine=!0,emptyLine=!0,i=0,op=doc.ops[i],usesTodo=!1;op;){utils.assert(op.isInsert());var attrs=op.attributes;if(newLine){newLine=!1;var indent=0,listType=null,lineAlign="left";ATTR.LINE_SENTINEL in attrs&&(indent=attrs[ATTR.LINE_INDENT]||0,listType=attrs[ATTR.LIST_TYPE]||null,lineAlign=attrs[ATTR.LINE_ALIGN]||"left"),listType&&(indent=indent||1),inListItem?(html+="</li>",inListItem=!1):firstLine||(emptyLine&&(html+="<br/>"),html+="</div>"),firstLine=!1,utils.assert(indent>=0,"Indent must not be negative.");for(;listTypeStack.length>indent||indent===listTypeStack.length&&null!==listType&&!compatibleListType(listType,listTypeStack[listTypeStack.length-1]);)html+=close(listTypeStack.pop());for(;listTypeStack.length<indent;){var toOpen=listType||LIST_TYPE.UNORDERED;usesTodo=listType==LIST_TYPE.TODO||listType==LIST_TYPE.TODOCHECKED||usesTodo,html+=open(toOpen),listTypeStack.push(toOpen)}var style="left"!==lineAlign?' style="text-align:'+lineAlign+'"':"";if(listType){var clazz="";switch(listType){case LIST_TYPE.TODOCHECKED:clazz=' class="firepad-checked"';break;case LIST_TYPE.TODO:clazz=' class="firepad-unchecked"'}html+="<li"+clazz+style+">",inListItem=!0}else html+="<div"+style+">";emptyLine=!0}if(ATTR.LINE_SENTINEL in attrs)op=doc.ops[++i];else if(ATTR.ENTITY_SENTINEL in attrs){for(var j=0;j<op.text.length;j++){var entity=firepad.Entity.fromAttributes(attrs);html+=entityManager.exportToElement(entity).outerHTML}op=doc.ops[++i]}else{var prefix="",suffix="";for(var attr in attrs){var start,end,value=attrs[attr];attr===ATTR.BOLD||attr===ATTR.ITALIC||attr===ATTR.UNDERLINE||attr===ATTR.STRIKE?(utils.assert(!0===value),start=end=attr):attr===ATTR.FONT_SIZE?(start='span style="font-size: '+value,start+="string"!=typeof value||-1===value.indexOf("px",value.length-2)?'px"':'"',end="span"):attr===ATTR.FONT?(start='span style="font-family: '+value+'"',end="span"):attr===ATTR.COLOR?(start='span style="color: '+value+'"',end="span"):attr===ATTR.BACKGROUND_COLOR?(start='span style="background-color: '+value+'"',end="span"):utils.log(!1,"Encountered unknown attribute while rendering html: "+attr),start&&(prefix+="<"+start+">"),end&&(suffix="</"+end+">"+suffix)}var text=op.text,newLineIndex=text.indexOf("\n");newLineIndex>=0?(newLine=!0,op=newLineIndex<text.length-1?new firepad.TextOp("insert",text.substr(newLineIndex+1),attrs):doc.ops[++i],text=text.substr(0,newLineIndex)):op=doc.ops[++i],(text=text.replace(/  +/g,function(str){return new Array(str.length+1).join("\xa0")}).replace(/^ /,"\xa0").replace(/ $/,"\xa0")).length>0&&(emptyLine=!1),html+=prefix+textToHtml(text)+suffix}}for(inListItem?html+="</li>":firstLine||(emptyLine&&(html+="&nbsp;"),html+="</div>");listTypeStack.length>0;)html+=close(listTypeStack.pop());return usesTodo&&(html=TODO_STYLE+html),html}var utils=firepad.utils,ATTR=firepad.AttributeConstants,LIST_TYPE=firepad.LineFormatting.LIST_TYPE,TODO_STYLE='<style>ul.firepad-todo { list-style: none; margin-left: 0; padding-left: 0; } ul.firepad-todo > li { padding-left: 1em; text-indent: -1em; } ul.firepad-todo > li:before { content: "\\2610"; padding-right: 5px; } ul.firepad-todo > li.firepad-checked:before { content: "\\2611"; padding-right: 5px; }</style>\n';return serializeHtml}(),(firepad=firepad||{}).textPiecesToInserts=function(atNewLine,textPieces){function insert(string,attributes){string instanceof firepad.Text&&(attributes=string.formatting.attributes,string=string.text),inserts.push({string:string,attributes:attributes}),atNewLine="\n"===string[string.length-1]}function insertLine(line,withNewline){atNewLine&&insert(firepad.sentinelConstants.LINE_SENTINEL_CHARACTER,line.formatting.attributes);for(var i=0;i<line.textPieces.length;i++)insert(line.textPieces[i]);withNewline&&insert("\n")}for(var inserts=[],i=0;i<textPieces.length;i++)textPieces[i]instanceof firepad.Line?insertLine(textPieces[i],i<textPieces.length-1):insert(textPieces[i]);return inserts},(firepad=firepad||{}).Headless=function(){function Headless(refOrPath){if(!(this instanceof Headless))return new Headless(refOrPath);if("string"==typeof refOrPath){if("function"!=typeof Firebase)var firebase=require("firebase");else firebase=Firebase;var ref=new firebase(refOrPath)}else ref=refOrPath;this.entityManager_=new EntityManager,this.firebaseAdapter_=new FirebaseAdapter(ref),this.ready_=!1,this.zombie_=!1}var TextOperation=firepad.TextOperation,FirebaseAdapter=firepad.FirebaseAdapter,EntityManager=firepad.EntityManager,ParseHtml=firepad.ParseHtml;return Headless.prototype.getDocument=function(callback){var self=this;if(self.ready_)return callback(self.firebaseAdapter_.getDocument());self.firebaseAdapter_.on("ready",function(){self.ready_=!0,callback(self.firebaseAdapter_.getDocument())})},Headless.prototype.getText=function(callback){if(this.zombie_)throw new Error("You can't use a firepad.Headless after calling dispose()!");this.getDocument(function(doc){var text=doc.apply("");for(key in firepad.sentinelConstants)text=text.replace(new RegExp(firepad.sentinelConstants[key],"g"),"");callback(text)})},Headless.prototype.setText=function(text,callback){if(this.zombie_)throw new Error("You can't use a firepad.Headless after calling dispose()!");var op=TextOperation().insert(text);this.sendOperationWithRetry(op,callback)},Headless.prototype.initializeFakeDom=function(callback){"object"==typeof document||"object"==typeof firepad.document?callback():require("jsdom").env("<head></head><body></body>",function(err,window){if(firepad.document)return window.close(),callback();firepad.document=window.document,callback()})},Headless.prototype.getHtml=function(callback){var self=this;if(this.zombie_)throw new Error("You can't use a firepad.Headless after calling dispose()!");self.initializeFakeDom(function(){self.getDocument(function(doc){callback(firepad.SerializeHtml(doc,self.entityManager_))})})},Headless.prototype.setHtml=function(html,callback){var self=this;if(this.zombie_)throw new Error("You can't use a firepad.Headless after calling dispose()!");self.initializeFakeDom(function(){for(var textPieces=ParseHtml(html,self.entityManager_),inserts=firepad.textPiecesToInserts(!0,textPieces),op=new TextOperation,i=0;i<inserts.length;i++)op.insert(inserts[i].string,inserts[i].attributes);self.sendOperationWithRetry(op,callback)})},Headless.prototype.sendOperationWithRetry=function(operation,callback){var self=this;self.getDocument(function(doc){var op=operation.clone()["delete"](doc.targetLength);self.firebaseAdapter_.sendOperation(op,function(err,committed){committed?void 0!==callback&&callback(null,committed):self.sendOperationWithRetry(operation,callback)})})},Headless.prototype.dispose=function(){this.zombie_=!0,this.firebaseAdapter_.dispose()},Headless}(),(firepad=firepad||{}).Firepad=function(global){function Firepad(ref,place,options){var CodeMirror=window.CodeMirror;if(!(this instanceof Firepad))return new Firepad(ref,place,options);if(!CodeMirror&&!ace)throw new Error("Couldn't find CodeMirror or ACE.  Did you forget to include codemirror.js or ace.js?");if(this.zombie_=!1,CodeMirror&&place instanceof CodeMirror){this.codeMirror_=this.editor_=place;var curValue=this.codeMirror_.getValue();if(""!==curValue)throw new Error("Can't initialize Firepad with a CodeMirror instance that already contains text.")}else if(ace&&place&&place.session instanceof ace.EditSession){if(this.ace_=this.editor_=place,""!==(curValue=this.ace_.getValue()))throw new Error("Can't initialize Firepad with an ACE instance that already contains text.")}else this.codeMirror_=this.editor_=new CodeMirror(place);var editorWrapper=this.codeMirror_?this.codeMirror_.getWrapperElement():this.ace_.container;this.firepadWrapper_=utils.elt("div",null,{"class":"firepad"}),editorWrapper.parentNode.replaceChild(this.firepadWrapper_,editorWrapper),this.firepadWrapper_.appendChild(editorWrapper),utils.on(editorWrapper,"dragstart",utils.stopEvent),this.editor_.firepad=this,this.options_=options||{},this.getOption("richTextShortcuts",!1)&&(CodeMirror.keyMap.richtext||this.initializeKeyMap_(),this.codeMirror_.setOption("keyMap","richtext"),this.firepadWrapper_.className+=" firepad-richtext"),this.imageInsertionUI=this.getOption("imageInsertionUI",!0),this.getOption("richTextToolbar",!1)&&(this.addToolbar_(),this.firepadWrapper_.className+=" firepad-richtext firepad-with-toolbar"),this.addPoweredByLogo_(),this.codeMirror_&&this.codeMirror_.refresh();var userId=this.getOption("userId",ref.push().key()),userColor=this.getOption("userColor",colorFromUserId(userId));this.entityManager_=new EntityManager,this.firebaseAdapter_=new FirebaseAdapter(ref,userId,userColor),this.codeMirror_?(this.richTextCodeMirror_=new RichTextCodeMirror(this.codeMirror_,this.entityManager_,{cssPrefix:"firepad-"}),this.editorAdapter_=new RichTextCodeMirrorAdapter(this.richTextCodeMirror_)):this.editorAdapter_=new ACEAdapter(this.ace_),this.client_=new EditorClient(this.firebaseAdapter_,this.editorAdapter_);var self=this;this.firebaseAdapter_.on("cursor",function(){self.trigger.apply(self,["cursor"].concat([].slice.call(arguments)))}),this.codeMirror_&&this.richTextCodeMirror_.on("newLine",function(){self.trigger.apply(self,["newLine"].concat([].slice.call(arguments)))}),this.firebaseAdapter_.on("ready",function(){self.ready_=!0,this.ace_&&this.editorAdapter_.grabDocumentState();var defaultText=self.getOption("defaultText",null);defaultText&&self.isHistoryEmpty()&&self.setText(defaultText),self.trigger("ready")}),this.client_.on("synced",function(isSynced){self.trigger("synced",isSynced)}),"Microsoft Internet Explorer"==navigator.appName&&navigator.userAgent.match(/MSIE 8\./)&&(window.onload=function(){var head=document.getElementsByTagName("head")[0],style=document.createElement("style");style.type="text/css",style.styleSheet.cssText=":before,:after{content:none !important;}",head.appendChild(style),setTimeout(function(){head.removeChild(style)},0)})}function colorFromUserId(userId){for(var a=1,i=0;i<userId.length;i++)a=17*(a+userId.charCodeAt(i))%360;return hsl2hex(a/360,1,.75)}function rgb2hex(r,g,b){function digits(n){var m=Math.round(255*n).toString(16);return 1===m.length?"0"+m:m}return"#"+digits(r)+digits(g)+digits(b)}function hsl2hex(h,s,l){if(0===s)return rgb2hex(l,l,l);var var2=l<.5?l*(1+s):l+s-s*l,var1=2*l-var2,hue2rgb=function(hue){return hue<0&&(hue+=1),hue>1&&(hue-=1),6*hue<1?var1+6*(var2-var1)*hue:2*hue<1?var2:3*hue<2?var1+6*(var2-var1)*(2/3-hue):var1};return rgb2hex(hue2rgb(h+1/3),hue2rgb(h),hue2rgb(h-1/3))}if(!firepad.RichTextCodeMirrorAdapter)throw new Error("Oops! It looks like you're trying to include lib/firepad.js directly.  This is actually one of many source files that make up firepad.  You want dist/firepad.js instead.");var RichTextCodeMirrorAdapter=firepad.RichTextCodeMirrorAdapter,RichTextCodeMirror=firepad.RichTextCodeMirror,RichTextToolbar=firepad.RichTextToolbar,ACEAdapter=firepad.ACEAdapter,FirebaseAdapter=firepad.FirebaseAdapter,EditorClient=firepad.EditorClient,EntityManager=firepad.EntityManager,ATTR=firepad.AttributeConstants,utils=firepad.utils,CodeMirror=(firepad.LineFormatting.LIST_TYPE,global.CodeMirror),ace=global.ace;return utils.makeEventEmitter(Firepad),Firepad.fromCodeMirror=Firepad,Firepad.fromACE=Firepad,Firepad.prototype.dispose=function(){this.zombie_=!0;var editorWrapper=this.codeMirror_?this.codeMirror_.getWrapperElement():this.ace_.container;this.firepadWrapper_.removeChild(editorWrapper),this.firepadWrapper_.parentNode.replaceChild(editorWrapper,this.firepadWrapper_),this.editor_.firepad=null,this.codeMirror_&&"richtext"===this.codeMirror_.getOption("keyMap")&&this.codeMirror_.setOption("keyMap","default"),this.firebaseAdapter_.dispose(),this.editorAdapter_.detach(),this.richTextCodeMirror_&&this.richTextCodeMirror_.detach()},Firepad.prototype.setUserId=function(userId){this.firebaseAdapter_.setUserId(userId)},Firepad.prototype.setUserColor=function(color){this.firebaseAdapter_.setColor(color)},Firepad.prototype.getText=function(){return this.assertReady_("getText"),this.codeMirror_?this.richTextCodeMirror_.getText():this.ace_.getSession().getDocument().getValue()},Firepad.prototype.setText=function(textPieces){if(this.assertReady_("setText"),this.ace_)return this.ace_.getSession().getDocument().setValue(textPieces);this.codeMirror_.getWrapperElement().setAttribute("style","display: none"),this.codeMirror_.setValue(""),this.insertText(0,textPieces),this.codeMirror_.getWrapperElement().setAttribute("style",""),this.codeMirror_.refresh(),this.editorAdapter_.setCursor({position:0,selectionEnd:0})},Firepad.prototype.insertTextAtCursor=function(textPieces){this.insertText(this.codeMirror_.indexFromPos(this.codeMirror_.getCursor()),textPieces)},Firepad.prototype.insertText=function(index,textPieces){utils.assert(!this.ace_,"Not supported for ace yet."),this.assertReady_("insertText"),"[object Array]"!==Object.prototype.toString.call(textPieces)&&(textPieces=[textPieces]);var self=this;self.codeMirror_.operation(function(){for(var atNewLine=0===index,inserts=firepad.textPiecesToInserts(atNewLine,textPieces),i=0;i<inserts.length;i++){var string=inserts[i].string,attributes=inserts[i].attributes;self.richTextCodeMirror_.insertText(index,string,attributes),index+=string.length}})},Firepad.prototype.getOperationForSpan=function(start,end){for(var text=this.richTextCodeMirror_.getRange(start,end),spans=this.richTextCodeMirror_.getAttributeSpans(start,end),pos=0,op=new firepad.TextOperation,i=0;i<spans.length;i++)op.insert(text.substr(pos,spans[i].length),spans[i].attributes),pos+=spans[i].length;return op},Firepad.prototype.getHtml=function(){return this.getHtmlFromRange(null,null)},Firepad.prototype.getHtmlFromSelection=function(){var startPos=this.codeMirror_.getCursor("start"),endPos=this.codeMirror_.getCursor("end"),startIndex=this.codeMirror_.indexFromPos(startPos),endIndex=this.codeMirror_.indexFromPos(endPos);return this.getHtmlFromRange(startIndex,endIndex)},Firepad.prototype.getHtmlFromRange=function(start,end){this.assertReady_("getHtmlFromRange");var doc=null!=start&&null!=end?this.getOperationForSpan(start,end):this.getOperationForSpan(0,this.codeMirror_.getValue().length);return firepad.SerializeHtml(doc,this.entityManager_)},Firepad.prototype.insertHtml=function(index,html){var lines=firepad.ParseHtml(html,this.entityManager_);this.insertText(index,lines)},Firepad.prototype.insertHtmlAtCursor=function(html){this.insertHtml(this.codeMirror_.indexFromPos(this.codeMirror_.getCursor()),html)},Firepad.prototype.setHtml=function(html){var lines=firepad.ParseHtml(html,this.entityManager_);this.setText(lines)},Firepad.prototype.isHistoryEmpty=function(){return this.assertReady_("isHistoryEmpty"),this.firebaseAdapter_.isHistoryEmpty()},Firepad.prototype.bold=function(){this.richTextCodeMirror_.toggleAttribute(ATTR.BOLD),this.codeMirror_.focus()},Firepad.prototype.italic=function(){this.richTextCodeMirror_.toggleAttribute(ATTR.ITALIC),this.codeMirror_.focus()},Firepad.prototype.underline=function(){this.richTextCodeMirror_.toggleAttribute(ATTR.UNDERLINE),this.codeMirror_.focus()},Firepad.prototype.strike=function(){this.richTextCodeMirror_.toggleAttribute(ATTR.STRIKE),this.codeMirror_.focus()},Firepad.prototype.fontSize=function(size){this.richTextCodeMirror_.setAttribute(ATTR.FONT_SIZE,size),this.codeMirror_.focus()},Firepad.prototype.font=function(font){this.richTextCodeMirror_.setAttribute(ATTR.FONT,font),this.codeMirror_.focus()},Firepad.prototype.color=function(color){this.richTextCodeMirror_.setAttribute(ATTR.COLOR,color),this.codeMirror_.focus()},Firepad.prototype.highlight=function(){this.richTextCodeMirror_.toggleAttribute(ATTR.BACKGROUND_COLOR,"rgba(255,255,0,.65)"),this.codeMirror_.focus()},Firepad.prototype.align=function(alignment){if("left"!==alignment&&"center"!==alignment&&"right"!==alignment)throw new Error('align() must be passed "left", "center", or "right".');this.richTextCodeMirror_.setLineAttribute(ATTR.LINE_ALIGN,alignment),this.codeMirror_.focus()},Firepad.prototype.orderedList=function(){this.richTextCodeMirror_.toggleLineAttribute(ATTR.LIST_TYPE,"o"),this.codeMirror_.focus()},Firepad.prototype.unorderedList=function(){this.richTextCodeMirror_.toggleLineAttribute(ATTR.LIST_TYPE,"u"),this.codeMirror_.focus()},Firepad.prototype.todo=function(){this.richTextCodeMirror_.toggleTodo(),this.codeMirror_.focus()},Firepad.prototype.newline=function(){this.richTextCodeMirror_.newline()},Firepad.prototype.deleteLeft=function(){this.richTextCodeMirror_.deleteLeft()},Firepad.prototype.deleteRight=function(){this.richTextCodeMirror_.deleteRight()},Firepad.prototype.indent=function(){this.richTextCodeMirror_.indent(),this.codeMirror_.focus()},Firepad.prototype.unindent=function(){this.richTextCodeMirror_.unindent(),this.codeMirror_.focus()},Firepad.prototype.undo=function(){this.codeMirror_.undo()},Firepad.prototype.redo=function(){this.codeMirror_.redo()},Firepad.prototype.insertEntity=function(type,info,origin){this.richTextCodeMirror_.insertEntityAtCursor(type,info,origin)},Firepad.prototype.insertEntityAt=function(index,type,info,origin){this.richTextCodeMirror_.insertEntityAt(index,type,info,origin)},Firepad.prototype.registerEntity=function(type,options){this.entityManager_.register(type,options)},Firepad.prototype.getOption=function(option,def){return option in this.options_?this.options_[option]:def},Firepad.prototype.assertReady_=function(funcName){if(!this.ready_)throw new Error('You must wait for the "ready" event before calling '+funcName+".");if(this.zombie_)throw new Error("You can't use a Firepad after calling dispose()!  [called "+funcName+"]")},Firepad.prototype.makeImageDialog_=function(){this.makeDialog_("img","Insert image url")},Firepad.prototype.makeDialog_=function(id,placeholder){var self=this,hideDialog=function(){var dialog=document.getElementById("overlay");dialog.style.visibility="hidden",self.firepadWrapper_.removeChild(dialog)},cb=function(){var dialog=document.getElementById("overlay");dialog.style.visibility="hidden";var src=document.getElementById(id).value;null!==src&&self.insertEntity(id,{src:src}),self.firepadWrapper_.removeChild(dialog)},input=utils.elt("input",null,{"class":"firepad-dialog-input",id:id,type:"text",placeholder:placeholder,autofocus:"autofocus"}),submit=utils.elt("a","Submit",{"class":"firepad-btn",id:"submitbtn"});utils.on(submit,"click",utils.stopEventAnd(cb));var cancel=utils.elt("a","Cancel",{"class":"firepad-btn"});utils.on(cancel,"click",utils.stopEventAnd(hideDialog));var buttonsdiv=utils.elt("div",[submit,cancel],{"class":"firepad-btn-group"}),div=utils.elt("div",[input,buttonsdiv],{"class":"firepad-dialog-div"}),dialog=utils.elt("div",[div],{"class":"firepad-dialog",id:"overlay"});this.firepadWrapper_.appendChild(dialog)},Firepad.prototype.addToolbar_=function(){this.toolbar=new RichTextToolbar(this.imageInsertionUI),this.toolbar.on("undo",this.undo,this),this.toolbar.on("redo",this.redo,this),this.toolbar.on("bold",this.bold,this),this.toolbar.on("italic",this.italic,this),this.toolbar.on("underline",this.underline,this),this.toolbar.on("strike",this.strike,this),this.toolbar.on("font-size",this.fontSize,this),this.toolbar.on("font",this.font,this),this.toolbar.on("color",this.color,this),this.toolbar.on("left",function(){this.align("left")},this),this.toolbar.on("center",function(){this.align("center")},this),this.toolbar.on("right",function(){this.align("right")},this),this.toolbar.on("ordered-list",this.orderedList,this),this.toolbar.on("unordered-list",this.unorderedList,this),this.toolbar.on("todo-list",this.todo,this),this.toolbar.on("indent-increase",this.indent,this),this.toolbar.on("indent-decrease",this.unindent,this),this.toolbar.on("insert-image",this.makeImageDialog_,this),this.firepadWrapper_.insertBefore(this.toolbar.element(),this.firepadWrapper_.firstChild)},Firepad.prototype.addPoweredByLogo_=function(){var poweredBy=utils.elt("a",null,{"class":"powered-by-firepad"});poweredBy.setAttribute("href","http://www.firepad.io/"),poweredBy.setAttribute("target","_blank"),this.firepadWrapper_.appendChild(poweredBy)},Firepad.prototype.initializeKeyMap_=function(){function binder(fn){return function(cm){setTimeout(function(){fn.call(cm.firepad)},0)}}CodeMirror.keyMap.richtext={"Ctrl-B":binder(this.bold),"Cmd-B":binder(this.bold),"Ctrl-I":binder(this.italic),"Cmd-I":binder(this.italic),"Ctrl-U":binder(this.underline),"Cmd-U":binder(this.underline),"Ctrl-H":binder(this.highlight),"Cmd-H":binder(this.highlight),Enter:binder(this.newline),Delete:binder(this.deleteRight),Backspace:binder(this.deleteLeft),Tab:binder(this.indent),"Shift-Tab":binder(this.unindent),fallthrough:["default"]}},Firepad}(this),firepad.Firepad.Formatting=firepad.Formatting,firepad.Firepad.Text=firepad.Text,firepad.Firepad.Entity=firepad.Entity,firepad.Firepad.LineFormatting=firepad.LineFormatting,firepad.Firepad.Line=firepad.Line,firepad.Firepad.TextOperation=firepad.TextOperation,firepad.Firepad.Headless=firepad.Headless,firepad.Firepad.RichTextCodeMirrorAdapter=firepad.RichTextCodeMirrorAdapter,firepad.Firepad.ACEAdapter=firepad.ACEAdapter,firepad.Firepad},this),function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory():"function"==typeof define&&define.amd?define(factory):global.i18next=factory()}(this,function(){"use strict";function makeString(object){return null==object?"":""+object}function copy(a,s,t){a.forEach(function(m){s[m]&&(t[m]=s[m])})}function getLastOfPath(object,path,Empty){function cleanKey(key){return key&&key.indexOf("###")>-1?key.replace(/###/g,"."):key}function canNotTraverseDeeper(){return!object||"string"==typeof object}for(var stack="string"!=typeof path?[].concat(path):path.split(".");stack.length>1;){if(canNotTraverseDeeper())return{};var key=cleanKey(stack.shift());!object[key]&&Empty&&(object[key]=new Empty),object=object[key]}return canNotTraverseDeeper()?{}:{obj:object,k:cleanKey(stack.shift())}}function setPath(object,path,newValue){var _getLastOfPath=getLastOfPath(object,path,Object);_getLastOfPath.obj[_getLastOfPath.k]=newValue}function pushPath(object,path,newValue,concat){var _getLastOfPath2=getLastOfPath(object,path,Object),obj=_getLastOfPath2.obj,k=_getLastOfPath2.k;obj[k]=obj[k]||[],concat&&(obj[k]=obj[k].concat(newValue)),concat||obj[k].push(newValue)}function getPath(object,path){var _getLastOfPath3=getLastOfPath(object,path),obj=_getLastOfPath3.obj,k=_getLastOfPath3.k;return obj?obj[k]:undefined}function deepExtend(target,source,overwrite){for(var prop in source)prop in target?"string"==typeof target[prop]||target[prop]instanceof String||"string"==typeof source[prop]||source[prop]instanceof String?overwrite&&(target[prop]=source[prop]):deepExtend(target[prop],source[prop],overwrite):target[prop]=source[prop];return target}function regexEscape(str){return str.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}function escape(data){return"string"==typeof data?data.replace(/[&<>"'\/]/g,function(s){return _entityMap[s]}):data}function convertInterpolation(options){return options.interpolation={unescapeSuffix:"HTML"},options.interpolation.prefix=options.interpolationPrefix||"__",options.interpolation.suffix=options.interpolationSuffix||"__",options.interpolation.escapeValue=options.escapeInterpolation||!1,options.interpolation.nestingPrefix=options.reusePrefix||"$t(",options.interpolation.nestingSuffix=options.reuseSuffix||")",options}function convertAPIOptions(options){return options.resStore&&(options.resources=options.resStore),options.ns&&options.ns.defaultNs?(options.defaultNS=options.ns.defaultNs,options.ns=options.ns.namespaces):options.defaultNS=options.ns||"translation",options.fallbackToDefaultNS&&options.defaultNS&&(options.fallbackNS=options.defaultNS),options.saveMissing=options.sendMissing,options.saveMissingTo=options.sendMissingTo||"current",options.returnNull=!options.fallbackOnNull,options.returnEmptyString=!options.fallbackOnEmpty,options.returnObjects=options.returnObjectTrees,options.joinArrays="\n",options.returnedObjectHandler=options.objectTreeKeyHandler,options.parseMissingKeyHandler=options.parseMissingKey,options.appendNamespaceToMissingKey=!0,options.nsSeparator=options.nsseparator||":",options.keySeparator=options.keyseparator||".","sprintf"===options.shortcutFunction&&(options.overloadTranslationOptionHandler=function(args){for(var values=[],i=1;i<args.length;i++)values.push(args[i]);return{postProcess:"sprintf",sprintf:values}}),options.whitelist=options.lngWhitelist,options.preload=options.preload,"current"===options.load&&(options.load="currentOnly"),"unspecific"===options.load&&(options.load="languageOnly"),options.backend=options.backend||{},options.backend.loadPath=options.resGetPath||"locales/__lng__/__ns__.json",options.backend.addPath=options.resPostPath||"locales/add/__lng__/__ns__",options.backend.allowMultiLoading=options.dynamicLoad,options.cache=options.cache||{},options.cache.prefix="res_",options.cache.expirationTime=6048e5,options.cache.enabled=!!options.useLocalStorage,(options=convertInterpolation(options)).defaultVariables&&(options.interpolation.defaultVariables=options.defaultVariables),options}function convertJSONOptions(options){return(options=convertInterpolation(options)).joinArrays="\n",options}function convertTOptions(options){return(options.interpolationPrefix||options.interpolationSuffix||options.escapeInterpolation)&&(options=convertInterpolation(options)),options.nsSeparator=options.nsseparator,options.keySeparator=options.keyseparator,options.returnObjects=options.returnObjectTrees,options}function appendBackwardsAPI(i18n){i18n.lng=function(){return baseLogger.deprecate("i18next.lng() can be replaced by i18next.language for detected language or i18next.languages for languages ordered by translation lookup."),i18n.services.languageUtils.toResolveHierarchy(i18n.language)[0]},i18n.preload=function(lngs,cb){baseLogger.deprecate("i18next.preload() can be replaced with i18next.loadLanguages()"),i18n.loadLanguages(lngs,cb)},i18n.setLng=function(lng,options,callback){if(baseLogger.deprecate("i18next.setLng() can be replaced with i18next.changeLanguage() or i18next.getFixedT() to get a translation function with fixed language or namespace."),"function"==typeof options&&(callback=options,options={}),options||(options={}),!0===options.fixLng&&callback)return callback(null,i18n.getFixedT(lng));i18n.changeLanguage(lng,callback)},i18n.addPostProcessor=function(name,fc){baseLogger.deprecate("i18next.addPostProcessor() can be replaced by i18next.use({ type: 'postProcessor', name: 'name', process: fc })"),i18n.use({type:"postProcessor",name:name,
process:fc})}}function capitalize(string){return string.charAt(0).toUpperCase()+string.slice(1)}function createRules(){var rules={};return sets.forEach(function(set$$1){set$$1.lngs.forEach(function(l){return rules[l]={numbers:set$$1.nr,plurals:_rulesPluralsTypes[set$$1.fc]}})}),rules}function remove(arr,what){for(var found=arr.indexOf(what);-1!==found;)arr.splice(found,1),found=arr.indexOf(what)}function get$1(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,whitelist:!1,nonExplicitWhitelist:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",saveMissing:!1,saveMissingTo:"fallback",missingKeyHandler:!1,postProcess:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:function(){},parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(args){return{defaultValue:args[1]}},interpolation:{escapeValue:!0,format:function(value){return value},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",defaultVariables:undefined}}}function transformOptions(options){return"string"==typeof options.ns&&(options.ns=[options.ns]),"string"==typeof options.fallbackLng&&(options.fallbackLng=[options.fallbackLng]),"string"==typeof options.fallbackNS&&(options.fallbackNS=[options.fallbackNS]),options.whitelist&&options.whitelist.indexOf("cimode")<0&&options.whitelist.push("cimode"),options}function noop(){}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},classCallCheck=function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")},_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},inherits=function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)},possibleConstructorReturn=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call},slicedToArray=function(){function sliceIterator(arr,i){var _arr=[],_n=!0,_d=!1,_e=undefined;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{!_n&&_i["return"]&&_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return sliceIterator(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),consoleLogger={type:"logger",log:function(args){this._output("log",args)},warn:function(args){this._output("warn",args)},error:function(args){this._output("error",args)},_output:function(type,args){console&&console[type]&&console[type].apply(console,Array.prototype.slice.call(args))}},baseLogger=new(function(){function Logger(concreteLogger){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};classCallCheck(this,Logger),this.init(concreteLogger,options)}return Logger.prototype.init=function(concreteLogger){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};this.prefix=options.prefix||"i18next:",this.logger=concreteLogger||consoleLogger,this.options=options,this.debug=!1!==options.debug},Logger.prototype.setDebug=function(bool){this.debug=bool},Logger.prototype.log=function(){this.forward(arguments,"log","",!0)},Logger.prototype.warn=function(){this.forward(arguments,"warn","",!0)},Logger.prototype.error=function(){this.forward(arguments,"error","")},Logger.prototype.deprecate=function(){this.forward(arguments,"warn","WARNING DEPRECATED: ",!0)},Logger.prototype.forward=function(args,lvl,prefix,debugOnly){debugOnly&&!this.debug||("string"==typeof args[0]&&(args[0]=prefix+this.prefix+" "+args[0]),this.logger[lvl](args))},Logger.prototype.create=function(moduleName){return new Logger(this.logger,_extends({prefix:this.prefix+":"+moduleName+":"},this.options))},Logger}()),EventEmitter=function(){function EventEmitter(){classCallCheck(this,EventEmitter),this.observers={}}return EventEmitter.prototype.on=function(events,listener){var _this=this;events.split(" ").forEach(function(event){_this.observers[event]=_this.observers[event]||[],_this.observers[event].push(listener)})},EventEmitter.prototype.off=function(event,listener){var _this2=this;this.observers[event]&&this.observers[event].forEach(function(){if(listener){var index=_this2.observers[event].indexOf(listener);index>-1&&_this2.observers[event].splice(index,1)}else delete _this2.observers[event]})},EventEmitter.prototype.emit=function(event){for(var _len=arguments.length,args=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];this.observers[event]&&[].concat(this.observers[event]).forEach(function(observer){observer.apply(undefined,args)});this.observers["*"]&&[].concat(this.observers["*"]).forEach(function(observer){var _ref;observer.apply(observer,(_ref=[event]).concat.apply(_ref,args))})},EventEmitter}(),_entityMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},ResourceStore=function(_EventEmitter){function ResourceStore(){var data=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{ns:["translation"],defaultNS:"translation"};classCallCheck(this,ResourceStore);var _this=possibleConstructorReturn(this,_EventEmitter.call(this));return _this.data=data,_this.options=options,_this}return inherits(ResourceStore,_EventEmitter),ResourceStore.prototype.addNamespaces=function(ns){this.options.ns.indexOf(ns)<0&&this.options.ns.push(ns)},ResourceStore.prototype.removeNamespaces=function(ns){var index=this.options.ns.indexOf(ns);index>-1&&this.options.ns.splice(index,1)},ResourceStore.prototype.getResource=function(lng,ns,key){var keySeparator=(arguments.length>3&&arguments[3]!==undefined?arguments[3]:{}).keySeparator||this.options.keySeparator;keySeparator===undefined&&(keySeparator=".");var path=[lng,ns];return key&&"string"!=typeof key&&(path=path.concat(key)),key&&"string"==typeof key&&(path=path.concat(keySeparator?key.split(keySeparator):key)),lng.indexOf(".")>-1&&(path=lng.split(".")),getPath(this.data,path)},ResourceStore.prototype.addResource=function(lng,ns,key,value){var options=arguments.length>4&&arguments[4]!==undefined?arguments[4]:{silent:!1},keySeparator=this.options.keySeparator;keySeparator===undefined&&(keySeparator=".");var path=[lng,ns];key&&(path=path.concat(keySeparator?key.split(keySeparator):key)),lng.indexOf(".")>-1&&(value=ns,ns=(path=lng.split("."))[1]),this.addNamespaces(ns),setPath(this.data,path,value),options.silent||this.emit("added",lng,ns,key,value)},ResourceStore.prototype.addResources=function(lng,ns,resources){for(var m in resources)"string"==typeof resources[m]&&this.addResource(lng,ns,m,resources[m],{silent:!0});this.emit("added",lng,ns,resources)},ResourceStore.prototype.addResourceBundle=function(lng,ns,resources,deep,overwrite){var path=[lng,ns];lng.indexOf(".")>-1&&(deep=resources,resources=ns,ns=(path=lng.split("."))[1]),this.addNamespaces(ns);var pack=getPath(this.data,path)||{};deep?deepExtend(pack,resources,overwrite):pack=_extends({},pack,resources),setPath(this.data,path,pack),this.emit("added",lng,ns,resources)},ResourceStore.prototype.removeResourceBundle=function(lng,ns){this.hasResourceBundle(lng,ns)&&delete this.data[lng][ns],this.removeNamespaces(ns),this.emit("removed",lng,ns)},ResourceStore.prototype.hasResourceBundle=function(lng,ns){return this.getResource(lng,ns)!==undefined},ResourceStore.prototype.getResourceBundle=function(lng,ns){return ns||(ns=this.options.defaultNS),"v1"===this.options.compatibilityAPI?_extends({},this.getResource(lng,ns)):this.getResource(lng,ns)},ResourceStore.prototype.toJSON=function(){return this.data},ResourceStore}(EventEmitter),postProcessor={processors:{},addPostProcessor:function(module){this.processors[module.name]=module},handle:function(processors,value,key,options,translator){var _this=this;return processors.forEach(function(processor){_this.processors[processor]&&(value=_this.processors[processor].process(value,key,options,translator))}),value}},Translator=function(_EventEmitter){function Translator(services){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};classCallCheck(this,Translator);var _this=possibleConstructorReturn(this,_EventEmitter.call(this));return copy(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector"],services,_this),_this.options=options,_this.logger=baseLogger.create("translator"),_this}return inherits(Translator,_EventEmitter),Translator.prototype.changeLanguage=function(lng){lng&&(this.language=lng)},Translator.prototype.exists=function(key){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{interpolation:{}};return"v1"===this.options.compatibilityAPI&&(options=convertTOptions(options)),this.resolve(key,options)!==undefined},Translator.prototype.extractFromKey=function(key,options){var nsSeparator=options.nsSeparator||this.options.nsSeparator;nsSeparator===undefined&&(nsSeparator=":");var keySeparator=options.keySeparator||this.options.keySeparator||".",namespaces=options.ns||this.options.defaultNS;if(nsSeparator&&key.indexOf(nsSeparator)>-1){var parts=key.split(nsSeparator);(nsSeparator!==keySeparator||nsSeparator===keySeparator&&this.options.ns.indexOf(parts[0])>-1)&&(namespaces=parts.shift()),key=parts.join(keySeparator)}return"string"==typeof namespaces&&(namespaces=[namespaces]),{key:key,namespaces:namespaces}},Translator.prototype.translate=function(keys){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if("object"!==(void 0===options?"undefined":_typeof(options))?options=this.options.overloadTranslationOptionHandler(arguments):"v1"===this.options.compatibilityAPI&&(options=convertTOptions(options)),keys===undefined||null===keys||""===keys)return"";"number"==typeof keys&&(keys=String(keys)),"string"==typeof keys&&(keys=[keys]);var keySeparator=options.keySeparator||this.options.keySeparator||".",_extractFromKey=this.extractFromKey(keys[keys.length-1],options),key=_extractFromKey.key,namespaces=_extractFromKey.namespaces,namespace=namespaces[namespaces.length-1],lng=options.lng||this.language,appendNamespaceToCIMode=options.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(lng&&"cimode"===lng.toLowerCase())return appendNamespaceToCIMode?namespace+(options.nsSeparator||this.options.nsSeparator)+key:key;var res=this.resolve(keys,options),resType=Object.prototype.toString.apply(res),noObject=["[object Number]","[object Function]","[object RegExp]"],joinArrays=options.joinArrays!==undefined?options.joinArrays:this.options.joinArrays;if(res&&"string"!=typeof res&&noObject.indexOf(resType)<0&&(!joinArrays||"[object Array]"!==resType)){if(!options.returnObjects&&!this.options.returnObjects)return this.logger.warn("accessing an object - but returnObjects options is not enabled!"),this.options.returnedObjectHandler?this.options.returnedObjectHandler(key,res,options):"key '"+key+" ("+this.language+")' returned an object instead of string.";if(options.keySeparator||this.options.keySeparator){var copy$$1="[object Array]"===resType?[]:{};for(var m in res)res.hasOwnProperty(m)&&(copy$$1[m]=this.translate(""+key+keySeparator+m,_extends({},options,{joinArrays:!1,ns:namespaces})));res=copy$$1}}else if(joinArrays&&"[object Array]"===resType)(res=res.join(joinArrays))&&(res=this.extendTranslation(res,key,options));else{var usedDefault=!1,usedKey=!1;if(this.isValidLookup(res)||options.defaultValue===undefined||(usedDefault=!0,res=options.defaultValue),this.isValidLookup(res)||(usedKey=!0,res=key),usedKey||usedDefault){this.logger.log("missingKey",lng,namespace,key,res);var lngs=[],fallbackLngs=this.languageUtils.getFallbackCodes(this.options.fallbackLng,options.lng||this.language);if("fallback"===this.options.saveMissingTo&&fallbackLngs&&fallbackLngs[0])for(var i=0;i<fallbackLngs.length;i++)lngs.push(fallbackLngs[i]);else"all"===this.options.saveMissingTo?lngs=this.languageUtils.toResolveHierarchy(options.lng||this.language):lngs.push(options.lng||this.language);this.options.saveMissing&&(this.options.missingKeyHandler?this.options.missingKeyHandler(lngs,namespace,key,res):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(lngs,namespace,key,res)),this.emit("missingKey",lngs,namespace,key,res)}res=this.extendTranslation(res,key,options),usedKey&&res===key&&this.options.appendNamespaceToMissingKey&&(res=namespace+":"+key),usedKey&&this.options.parseMissingKeyHandler&&(res=this.options.parseMissingKeyHandler(res))}return res},Translator.prototype.extendTranslation=function(res,key,options){var _this2=this;options.interpolation&&this.interpolator.init(_extends({},options,{interpolation:_extends({},this.options.interpolation,options.interpolation)}));var data=options.replace&&"string"!=typeof options.replace?options.replace:options;this.options.interpolation.defaultVariables&&(data=_extends({},this.options.interpolation.defaultVariables,data)),res=this.interpolator.interpolate(res,data,this.language),res=this.interpolator.nest(res,function(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this2.translate.apply(_this2,args)},options),options.interpolation&&this.interpolator.reset();var postProcess=options.postProcess||this.options.postProcess,postProcessorNames="string"==typeof postProcess?[postProcess]:postProcess;return res!==undefined&&postProcessorNames&&postProcessorNames.length&&!1!==options.applyPostProcessor&&(res=postProcessor.handle(postProcessorNames,res,key,options,this)),res},Translator.prototype.resolve=function(keys){var _this3=this,options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},found=void 0;return"string"==typeof keys&&(keys=[keys]),keys.forEach(function(k){if(!_this3.isValidLookup(found)){var _extractFromKey2=_this3.extractFromKey(k,options),key=_extractFromKey2.key,namespaces=_extractFromKey2.namespaces;_this3.options.fallbackNS&&(namespaces=namespaces.concat(_this3.options.fallbackNS));var needsPluralHandling=options.count!==undefined&&"string"!=typeof options.count,needsContextHandling=options.context!==undefined&&"string"==typeof options.context&&""!==options.context,codes=options.lngs?options.lngs:_this3.languageUtils.toResolveHierarchy(options.lng||_this3.language);namespaces.forEach(function(ns){_this3.isValidLookup(found)||codes.forEach(function(code){if(!_this3.isValidLookup(found)){var finalKey=key,finalKeys=[finalKey],pluralSuffix=void 0;needsPluralHandling&&(pluralSuffix=_this3.pluralResolver.getSuffix(code,options.count)),needsPluralHandling&&needsContextHandling&&finalKeys.push(finalKey+pluralSuffix),needsContextHandling&&finalKeys.push(finalKey+=""+_this3.options.contextSeparator+options.context),needsPluralHandling&&finalKeys.push(finalKey+=pluralSuffix);for(var possibleKey=void 0;possibleKey=finalKeys.pop();)_this3.isValidLookup(found)||(found=_this3.getResource(code,ns,possibleKey,options))}})})}}),found},Translator.prototype.isValidLookup=function(res){return!(res===undefined||!this.options.returnNull&&null===res||!this.options.returnEmptyString&&""===res)},Translator.prototype.getResource=function(code,ns,key){var options=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};return this.resourceStore.getResource(code,ns,key,options)},Translator}(EventEmitter),LanguageUtil=function(){function LanguageUtil(options){classCallCheck(this,LanguageUtil),this.options=options,this.whitelist=this.options.whitelist||!1,this.logger=baseLogger.create("languageUtils")}return LanguageUtil.prototype.getScriptPartFromCode=function(code){if(!code||code.indexOf("-")<0)return null;var p=code.split("-");return 2===p.length?null:(p.pop(),this.formatLanguageCode(p.join("-")))},LanguageUtil.prototype.getLanguagePartFromCode=function(code){if(!code||code.indexOf("-")<0)return code;var p=code.split("-");return this.formatLanguageCode(p[0])},LanguageUtil.prototype.formatLanguageCode=function(code){if("string"==typeof code&&code.indexOf("-")>-1){var specialCases=["hans","hant","latn","cyrl","cans","mong","arab"],p=code.split("-");return this.options.lowerCaseLng?p=p.map(function(part){return part.toLowerCase()}):2===p.length?(p[0]=p[0].toLowerCase(),p[1]=p[1].toUpperCase(),specialCases.indexOf(p[1].toLowerCase())>-1&&(p[1]=capitalize(p[1].toLowerCase()))):3===p.length&&(p[0]=p[0].toLowerCase(),2===p[1].length&&(p[1]=p[1].toUpperCase()),"sgn"!==p[0]&&2===p[2].length&&(p[2]=p[2].toUpperCase()),specialCases.indexOf(p[1].toLowerCase())>-1&&(p[1]=capitalize(p[1].toLowerCase())),specialCases.indexOf(p[2].toLowerCase())>-1&&(p[2]=capitalize(p[2].toLowerCase()))),p.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?code.toLowerCase():code},LanguageUtil.prototype.isWhitelisted=function(code){return("languageOnly"===this.options.load||this.options.nonExplicitWhitelist)&&(code=this.getLanguagePartFromCode(code)),!this.whitelist||!this.whitelist.length||this.whitelist.indexOf(code)>-1},LanguageUtil.prototype.getFallbackCodes=function(fallbacks,code){if(!fallbacks)return[];if("string"==typeof fallbacks&&(fallbacks=[fallbacks]),"[object Array]"===Object.prototype.toString.apply(fallbacks))return fallbacks;if(!code)return fallbacks["default"]||[];var found=fallbacks[code];return found||(found=fallbacks[this.getScriptPartFromCode(code)]),found||(found=fallbacks[this.formatLanguageCode(code)]),found||(found=fallbacks["default"]),found||[]},LanguageUtil.prototype.toResolveHierarchy=function(code,fallbackCode){var _this=this,fallbackCodes=this.getFallbackCodes(fallbackCode||this.options.fallbackLng||[],code),codes=[],addCode=function(code){code&&(_this.isWhitelisted(code)?codes.push(code):_this.logger.warn("rejecting non-whitelisted language code: "+code))};return"string"==typeof code&&code.indexOf("-")>-1?("languageOnly"!==this.options.load&&addCode(this.formatLanguageCode(code)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&addCode(this.getScriptPartFromCode(code)),"currentOnly"!==this.options.load&&addCode(this.getLanguagePartFromCode(code))):"string"==typeof code&&addCode(this.formatLanguageCode(code)),fallbackCodes.forEach(function(fc){codes.indexOf(fc)<0&&addCode(_this.formatLanguageCode(fc))}),codes},LanguageUtil}(),sets=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","tg","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","es_ar","et","eu","fi","fo","fur","fy","gl","gu","ha","he","hi","hu","hy","ia","it","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt","pt_br","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","id","ja","jbo","ka","kk","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21}],_rulesPluralsTypes={1:function(n){return Number(n>1)},2:function(n){return Number(1!=n)},3:function(){return 0},4:function(n){return Number(n%10==1&&n%100!=11?0:n%10>=2&&n%10<=4&&(n%100<10||n%100>=20)?1:2)},5:function(n){return Number(0===n?0:1==n?1:2==n?2:n%100>=3&&n%100<=10?3:n%100>=11?4:5)},6:function(n){return Number(1==n?0:n>=2&&n<=4?1:2)},7:function(n){return Number(1==n?0:n%10>=2&&n%10<=4&&(n%100<10||n%100>=20)?1:2)},8:function(n){return Number(1==n?0:2==n?1:8!=n&&11!=n?2:3)},9:function(n){return Number(n>=2)},10:function(n){return Number(1==n?0:2==n?1:n<7?2:n<11?3:4)},11:function(n){return Number(1==n||11==n?0:2==n||12==n?1:n>2&&n<20?2:3)},12:function(n){return Number(n%10!=1||n%100==11)},13:function(n){return Number(0!==n)},14:function(n){return Number(1==n?0:2==n?1:3==n?2:3)},15:function(n){return Number(n%10==1&&n%100!=11?0:n%10>=2&&(n%100<10||n%100>=20)?1:2)},16:function(n){return Number(n%10==1&&n%100!=11?0:0!==n?1:2)},17:function(n){return Number(1==n||n%10==1?0:1)},18:function(n){return Number(0==n?0:1==n?1:2)},19:function(n){return Number(1==n?0:0===n||n%100>1&&n%100<11?1:n%100>10&&n%100<20?2:3)},20:function(n){return Number(1==n?0:0===n||n%100>0&&n%100<20?1:2)},21:function(n){return Number(n%100==1?1:n%100==2?2:n%100==3||n%100==4?3:0)}},PluralResolver=function(){function PluralResolver(languageUtils){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};classCallCheck(this,PluralResolver),this.languageUtils=languageUtils,this.options=options,this.logger=baseLogger.create("pluralResolver"),this.rules=createRules()}return PluralResolver.prototype.addRule=function(lng,obj){this.rules[lng]=obj},PluralResolver.prototype.getRule=function(code){return this.rules[this.languageUtils.getLanguagePartFromCode(code)]},PluralResolver.prototype.needsPlural=function(code){var rule=this.getRule(code);return!(rule&&rule.numbers.length<=1)},PluralResolver.prototype.getSuffix=function(code,count){var _this=this,rule=this.getRule(code);if(rule){if(1===rule.numbers.length)return"";var idx=rule.noAbs?rule.plurals(count):rule.plurals(Math.abs(count)),suffix=rule.numbers[idx];this.options.simplifyPluralSuffix&&2===rule.numbers.length&&1===rule.numbers[0]&&(2===suffix?suffix="plural":1===suffix&&(suffix=""));var returnSuffix=function(){return _this.options.prepend&&suffix.toString()?_this.options.prepend+suffix.toString():suffix.toString()};return"v1"===this.options.compatibilityJSON?1===suffix?"":"number"==typeof suffix?"_plural_"+suffix.toString():returnSuffix():"v2"===this.options.compatibilityJSON||2===rule.numbers.length&&1===rule.numbers[0]?returnSuffix():2===rule.numbers.length&&1===rule.numbers[0]?returnSuffix():this.options.prepend&&idx.toString()?this.options.prepend+idx.toString():idx.toString()}return this.logger.warn("no plural rule found for: "+code),""},PluralResolver}(),Interpolator=function(){function Interpolator(){var options=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};classCallCheck(this,Interpolator),this.logger=baseLogger.create("interpolator"),this.init(options,!0)}return Interpolator.prototype.init=function(){var options=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};arguments[1]&&(this.options=options,this.format=options.interpolation&&options.interpolation.format||function(value){return value},this.escape=options.interpolation&&options.interpolation.escape||escape),options.interpolation||(options.interpolation={escapeValue:!0});var iOpts=options.interpolation;this.escapeValue=iOpts.escapeValue===undefined||iOpts.escapeValue,this.prefix=iOpts.prefix?regexEscape(iOpts.prefix):iOpts.prefixEscaped||"{{",this.suffix=iOpts.suffix?regexEscape(iOpts.suffix):iOpts.suffixEscaped||"}}",this.formatSeparator=iOpts.formatSeparator?iOpts.formatSeparator:iOpts.formatSeparator||",",this.unescapePrefix=iOpts.unescapeSuffix?"":iOpts.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":iOpts.unescapeSuffix||"",this.nestingPrefix=iOpts.nestingPrefix?regexEscape(iOpts.nestingPrefix):iOpts.nestingPrefixEscaped||regexEscape("$t("),this.nestingSuffix=iOpts.nestingSuffix?regexEscape(iOpts.nestingSuffix):iOpts.nestingSuffixEscaped||regexEscape(")"),this.resetRegExp()},Interpolator.prototype.reset=function(){this.options&&this.init(this.options)},Interpolator.prototype.resetRegExp=function(){var regexpStr=this.prefix+"(.+?)"+this.suffix;this.regexp=new RegExp(regexpStr,"g");var regexpUnescapeStr=this.prefix+this.unescapePrefix+"(.+?)"+this.unescapeSuffix+this.suffix;this.regexpUnescape=new RegExp(regexpUnescapeStr,"g");var nestingRegexpStr=this.nestingPrefix+"(.+?)"+this.nestingSuffix;this.nestingRegexp=new RegExp(nestingRegexpStr,"g")},Interpolator.prototype.interpolate=function(str,data,lng){function regexSafe(val){return val.replace(/\$/g,"$$$$")}var _this=this,match=void 0,value=void 0,handleFormat=function(key){if(key.indexOf(_this.formatSeparator)<0)return getPath(data,key);var p=key.split(_this.formatSeparator),k=p.shift().trim(),f=p.join(_this.formatSeparator).trim();return _this.format(getPath(data,k),f,lng)};for(this.resetRegExp();match=this.regexpUnescape.exec(str);){var _value=handleFormat(match[1].trim());str=str.replace(match[0],_value),this.regexpUnescape.lastIndex=0}for(;match=this.regexp.exec(str);)"string"!=typeof(value=handleFormat(match[1].trim()))&&(value=makeString(value)),value||(this.logger.warn("missed to pass in variable "+match[1]+" for interpolating "+str),value=""),value=this.escapeValue?regexSafe(this.escape(value)):regexSafe(value),str=str.replace(match[0],value),this.regexp.lastIndex=0;return str},Interpolator.prototype.nest=function(str,fc){function handleHasOptions(key){if(key.indexOf(",")<0)return key;var p=key.split(",");key=p.shift();var optionsString=p.join(",");optionsString=(optionsString=this.interpolate(optionsString,clonedOptions)).replace(/'/g,'"');try{clonedOptions=JSON.parse(optionsString)}catch(e){this.logger.error("failed parsing options string in nesting for key "+key,e)}return key}var options=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{},match=void 0,value=void 0,clonedOptions=_extends({},options);for(clonedOptions.applyPostProcessor=!1;match=this.nestingRegexp.exec(str);)"string"!=typeof(value=fc(handleHasOptions.call(this,match[1].trim()),clonedOptions))&&(value=makeString(value)),value||(this.logger.warn("missed to pass in variable "+match[1]+" for interpolating "+str),value=""),str=str.replace(match[0],value),this.regexp.lastIndex=0;return str},Interpolator}(),Connector=function(_EventEmitter){function Connector(backend,store,services){var options=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};classCallCheck(this,Connector);var _this=possibleConstructorReturn(this,_EventEmitter.call(this));return _this.backend=backend,_this.store=store,_this.services=services,_this.options=options,_this.logger=baseLogger.create("backendConnector"),_this.state={},_this.queue=[],_this.backend&&_this.backend.init&&_this.backend.init(services,options.backend,options),_this}return inherits(Connector,_EventEmitter),Connector.prototype.queueLoad=function(languages,namespaces,callback){var _this2=this,toLoad=[],pending=[],toLoadLanguages=[],toLoadNamespaces=[];return languages.forEach(function(lng){var hasAllNamespaces=!0;namespaces.forEach(function(ns){var name=lng+"|"+ns;_this2.store.hasResourceBundle(lng,ns)?_this2.state[name]=2:_this2.state[name]<0||(1===_this2.state[name]?pending.indexOf(name)<0&&pending.push(name):(_this2.state[name]=1,hasAllNamespaces=!1,pending.indexOf(name)<0&&pending.push(name),toLoad.indexOf(name)<0&&toLoad.push(name),toLoadNamespaces.indexOf(ns)<0&&toLoadNamespaces.push(ns)))}),hasAllNamespaces||toLoadLanguages.push(lng)}),(toLoad.length||pending.length)&&this.queue.push({pending:pending,loaded:{},errors:[],callback:callback}),{toLoad:toLoad,pending:pending,toLoadLanguages:toLoadLanguages,toLoadNamespaces:toLoadNamespaces}},Connector.prototype.loaded=function(name,err,data){var _this3=this,_name$split=name.split("|"),_name$split2=slicedToArray(_name$split,2),lng=_name$split2[0],ns=_name$split2[1];err&&this.emit("failedLoading",lng,ns,err),data&&this.store.addResourceBundle(lng,ns,data),this.state[name]=err?-1:2,this.queue.forEach(function(q){pushPath(q.loaded,[lng],ns),remove(q.pending,name),err&&q.errors.push(err),0!==q.pending.length||q.done||(_this3.emit("loaded",q.loaded),q.errors.length?q.callback(q.errors):q.callback(),q.done=!0)}),this.queue=this.queue.filter(function(q){return!q.done})},Connector.prototype.read=function(lng,ns,fcName,tried,wait,callback){var _this4=this;if(tried||(tried=0),wait||(wait=250),!lng.length)return callback(null,{});this.backend[fcName](lng,ns,function(err,data){err&&data&&tried<5?setTimeout(function(){_this4.read.call(_this4,lng,ns,fcName,++tried,2*wait,callback)},wait):callback(err,data)})},Connector.prototype.load=function(languages,namespaces,callback){var _this5=this;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),callback&&callback();var options=_extends({},this.backend.options,this.options.backend);"string"==typeof languages&&(languages=this.services.languageUtils.toResolveHierarchy(languages)),"string"==typeof namespaces&&(namespaces=[namespaces]);var toLoad=this.queueLoad(languages,namespaces,callback);if(toLoad.toLoad.length)if(options.allowMultiLoading&&this.backend.readMulti)this.read(toLoad.toLoadLanguages,toLoad.toLoadNamespaces,"readMulti",null,null,function(err,data){err&&_this5.logger.warn("loading namespaces "+toLoad.toLoadNamespaces.join(", ")+" for languages "+toLoad.toLoadLanguages.join(", ")+" via multiloading failed",err),!err&&data&&_this5.logger.log("loaded namespaces "+toLoad.toLoadNamespaces.join(", ")+" for languages "+toLoad.toLoadLanguages.join(", ")+" via multiloading",data),toLoad.toLoad.forEach(function(name){var _name$split3=name.split("|"),_name$split4=slicedToArray(_name$split3,2),l=_name$split4[0],n=_name$split4[1],bundle=getPath(data,[l,n]);if(bundle)_this5.loaded(name,err,bundle);else{var _err="loading namespace "+n+" for language "+l+" via multiloading failed";_this5.loaded(name,_err),_this5.logger.error(_err)}})});else{var readOne=function(name){var _this6=this,_name$split5=name.split("|"),_name$split6=slicedToArray(_name$split5,2),lng=_name$split6[0],ns=_name$split6[1];this.read(lng,ns,"read",null,null,function(err,data){err&&_this6.logger.warn("loading namespace "+ns+" for language "+lng+" failed",err),!err&&data&&_this6.logger.log("loaded namespace "+ns+" for language "+lng,data),_this6.loaded(name,err,data)})};toLoad.toLoad.forEach(function(name){readOne.call(_this5,name)})}else toLoad.pending.length||callback()},Connector.prototype.reload=function(languages,namespaces){var _this7=this;this.backend||this.logger.warn("No backend was added via i18next.use. Will not load resources.");var options=_extends({},this.backend.options,this.options.backend);if("string"==typeof languages&&(languages=this.services.languageUtils.toResolveHierarchy(languages)),"string"==typeof namespaces&&(namespaces=[namespaces]),options.allowMultiLoading&&this.backend.readMulti)this.read(languages,namespaces,"readMulti",null,null,function(err,data){err&&_this7.logger.warn("reloading namespaces "+namespaces.join(", ")+" for languages "+languages.join(", ")+" via multiloading failed",err),!err&&data&&_this7.logger.log("reloaded namespaces "+namespaces.join(", ")+" for languages "+languages.join(", ")+" via multiloading",data),languages.forEach(function(l){namespaces.forEach(function(n){var bundle=getPath(data,[l,n]);if(bundle)_this7.loaded(l+"|"+n,err,bundle);else{var _err2="reloading namespace "+n+" for language "+l+" via multiloading failed";_this7.loaded(l+"|"+n,_err2),_this7.logger.error(_err2)}})})});else{var readOne=function(name){var _this8=this,_name$split7=name.split("|"),_name$split8=slicedToArray(_name$split7,2),lng=_name$split8[0],ns=_name$split8[1];this.read(lng,ns,"read",null,null,function(err,data){err&&_this8.logger.warn("reloading namespace "+ns+" for language "+lng+" failed",err),!err&&data&&_this8.logger.log("reloaded namespace "+ns+" for language "+lng,data),_this8.loaded(name,err,data)})};languages.forEach(function(l){namespaces.forEach(function(n){
readOne.call(_this7,l+"|"+n)})})}},Connector.prototype.saveMissing=function(languages,namespace,key,fallbackValue){this.backend&&this.backend.create&&this.backend.create(languages,namespace,key,fallbackValue),languages&&languages[0]&&this.store.addResource(languages[0],namespace,key,fallbackValue)},Connector}(EventEmitter),Connector$1=function(_EventEmitter){function Connector(cache,store,services){var options=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};classCallCheck(this,Connector);var _this=possibleConstructorReturn(this,_EventEmitter.call(this));return _this.cache=cache,_this.store=store,_this.services=services,_this.options=options,_this.logger=baseLogger.create("cacheConnector"),_this.cache&&_this.cache.init&&_this.cache.init(services,options.cache,options),_this}return inherits(Connector,_EventEmitter),Connector.prototype.load=function(languages,namespaces,callback){var _this2=this;if(!this.cache)return callback&&callback();var options=_extends({},this.cache.options,this.options.cache);"string"==typeof languages&&(languages=this.services.languageUtils.toResolveHierarchy(languages)),"string"==typeof namespaces&&(namespaces=[namespaces]),options.enabled?this.cache.load(languages,function(err,data){if(err&&_this2.logger.error("loading languages "+languages.join(", ")+" from cache failed",err),data)for(var l in data)for(var n in data[l])if("i18nStamp"!==n){var bundle=data[l][n];bundle&&_this2.store.addResourceBundle(l,n,bundle)}callback&&callback()}):callback&&callback()},Connector.prototype.save=function(){this.cache&&this.options.cache&&this.options.cache.enabled&&this.cache.save(this.store.data)},Connector}(EventEmitter);return new(function(_EventEmitter){function I18n(){var options=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},callback=arguments[1];classCallCheck(this,I18n);var _this=possibleConstructorReturn(this,_EventEmitter.call(this));if(_this.options=transformOptions(options),_this.services={},_this.logger=baseLogger,_this.modules={external:[]},callback&&!_this.isInitialized&&!options.isClone){var _ret;if(!_this.options.initImmediate)return _ret=_this.init(options,callback),possibleConstructorReturn(_this,_ret);setTimeout(function(){_this.init(options,callback)},0)}return _this}return inherits(I18n,_EventEmitter),I18n.prototype.init=function(options,callback){function createClassOnDemand(ClassOrObject){if(ClassOrObject)return"function"==typeof ClassOrObject?new ClassOrObject:ClassOrObject}var _this2=this;if("function"==typeof options&&(callback=options,options={}),options||(options={}),"v1"===options.compatibilityAPI?this.options=_extends({},get$1(),transformOptions(convertAPIOptions(options)),{}):"v1"===options.compatibilityJSON?this.options=_extends({},get$1(),transformOptions(convertJSONOptions(options)),{}):this.options=_extends({},get$1(),this.options,transformOptions(options)),callback||(callback=noop),!this.options.isClone){this.modules.logger?baseLogger.init(createClassOnDemand(this.modules.logger),this.options):baseLogger.init(null,this.options);var lu=new LanguageUtil(this.options);this.store=new ResourceStore(this.options.resources,this.options);var s=this.services;s.logger=baseLogger,s.resourceStore=this.store,s.resourceStore.on("added removed",function(){s.cacheConnector.save()}),s.languageUtils=lu,s.pluralResolver=new PluralResolver(lu,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),s.interpolator=new Interpolator(this.options),s.backendConnector=new Connector(createClassOnDemand(this.modules.backend),s.resourceStore,s,this.options),s.backendConnector.on("*",function(event){for(var _len=arguments.length,args=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];_this2.emit.apply(_this2,[event].concat(args))}),s.backendConnector.on("loaded",function(){s.cacheConnector.save()}),s.cacheConnector=new Connector$1(createClassOnDemand(this.modules.cache),s.resourceStore,s,this.options),s.cacheConnector.on("*",function(event){for(var _len2=arguments.length,args=Array(_len2>1?_len2-1:0),_key2=1;_key2<_len2;_key2++)args[_key2-1]=arguments[_key2];_this2.emit.apply(_this2,[event].concat(args))}),this.modules.languageDetector&&(s.languageDetector=createClassOnDemand(this.modules.languageDetector),s.languageDetector.init(s,this.options.detection,this.options)),this.translator=new Translator(this.services,this.options),this.translator.on("*",function(event){for(var _len3=arguments.length,args=Array(_len3>1?_len3-1:0),_key3=1;_key3<_len3;_key3++)args[_key3-1]=arguments[_key3];_this2.emit.apply(_this2,[event].concat(args))}),this.modules.external.forEach(function(m){m.init&&m.init(_this2)})}["getResource","addResource","addResources","addResourceBundle","removeResourceBundle","hasResourceBundle","getResourceBundle"].forEach(function(fcName){_this2[fcName]=function(){return this.store[fcName].apply(this.store,arguments)}}),"v1"===this.options.compatibilityAPI&&appendBackwardsAPI(this);var load=function(){_this2.changeLanguage(_this2.options.lng,function(err,t){_this2.isInitialized=!0,_this2.logger.log("initialized",_this2.options),_this2.emit("initialized",_this2.options),callback(err,t)})};return this.options.resources||!this.options.initImmediate?load():setTimeout(load,0),this},I18n.prototype.loadResources=function(){var _this3=this,callback=arguments.length>0&&arguments[0]!==undefined?arguments[0]:noop;if(this.options.resources)callback(null);else{if(this.language&&"cimode"===this.language.toLowerCase())return callback();var toLoad=[],append=function(lng){lng&&_this3.services.languageUtils.toResolveHierarchy(lng).forEach(function(l){toLoad.indexOf(l)<0&&toLoad.push(l)})};if(this.language)append(this.language);else this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(function(l){return append(l)});this.options.preload&&this.options.preload.forEach(function(l){return append(l)}),this.services.cacheConnector.load(toLoad,this.options.ns,function(){_this3.services.backendConnector.load(toLoad,_this3.options.ns,callback)})}},I18n.prototype.reloadResources=function(lngs,ns){lngs||(lngs=this.languages),ns||(ns=this.options.ns),this.services.backendConnector.reload(lngs,ns)},I18n.prototype.use=function(module){return"backend"===module.type&&(this.modules.backend=module),"cache"===module.type&&(this.modules.cache=module),("logger"===module.type||module.log&&module.warn&&module.error)&&(this.modules.logger=module),"languageDetector"===module.type&&(this.modules.languageDetector=module),"postProcessor"===module.type&&postProcessor.addPostProcessor(module),"3rdParty"===module.type&&this.modules.external.push(module),this},I18n.prototype.changeLanguage=function(lng,callback){var _this4=this,done=function(err){lng&&(_this4.emit("languageChanged",lng),_this4.logger.log("languageChanged",lng)),callback&&callback(err,function(){for(var _len4=arguments.length,args=Array(_len4),_key4=0;_key4<_len4;_key4++)args[_key4]=arguments[_key4];return _this4.t.apply(_this4,args)})};!lng&&this.services.languageDetector&&(lng=this.services.languageDetector.detect()),lng&&(this.language=lng,this.languages=this.services.languageUtils.toResolveHierarchy(lng),this.translator.changeLanguage(lng),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage(lng)),this.loadResources(function(err){done(err)})},I18n.prototype.getFixedT=function(lng,ns){var _this5=this,fixedT=function fixedT(key){var opts=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},options=_extends({},opts);return options.lng=options.lng||fixedT.lng,options.ns=options.ns||fixedT.ns,_this5.t(key,options)};return fixedT.lng=lng,fixedT.ns=ns,fixedT},I18n.prototype.t=function(){return this.translator&&this.translator.translate.apply(this.translator,arguments)},I18n.prototype.exists=function(){return this.translator&&this.translator.exists.apply(this.translator,arguments)},I18n.prototype.setDefaultNamespace=function(ns){this.options.defaultNS=ns},I18n.prototype.loadNamespaces=function(ns,callback){var _this6=this;if(!this.options.ns)return callback&&callback();"string"==typeof ns&&(ns=[ns]),ns.forEach(function(n){_this6.options.ns.indexOf(n)<0&&_this6.options.ns.push(n)}),this.loadResources(callback)},I18n.prototype.loadLanguages=function(lngs,callback){"string"==typeof lngs&&(lngs=[lngs]);var preloaded=this.options.preload||[],newLngs=lngs.filter(function(lng){return preloaded.indexOf(lng)<0});if(!newLngs.length)return callback();this.options.preload=preloaded.concat(newLngs),this.loadResources(callback)},I18n.prototype.dir=function(lng){return lng||(lng=this.language),lng?["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam"].indexOf(this.services.languageUtils.getLanguagePartFromCode(lng))>=0?"rtl":"ltr":"rtl"},I18n.prototype.createInstance=function(){return new I18n(arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},arguments[1])},I18n.prototype.cloneInstance=function(){var _this7=this,options=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},callback=arguments.length>1&&arguments[1]!==undefined?arguments[1]:noop,mergedOptions=_extends({},options,this.options,{isClone:!0}),clone=new I18n(mergedOptions,callback);return["store","services","language"].forEach(function(m){clone[m]=_this7[m]}),clone.translator=new Translator(clone.services,clone.options),clone.translator.on("*",function(event){for(var _len5=arguments.length,args=Array(_len5>1?_len5-1:0),_key5=1;_key5<_len5;_key5++)args[_key5-1]=arguments[_key5];clone.emit.apply(clone,[event].concat(args))}),clone.init(mergedOptions,callback),clone},I18n}(EventEmitter))}),
/*!
 * clipboard.js v1.5.5
 * https://zenorocha.github.io/clipboard.js
 *
 * Licensed MIT  Zeno Rocha
 */
function(f){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=f();else if("function"==typeof define&&define.amd)define([],f);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Clipboard=f()}}(function(){return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n||e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module){var matches=require("matches-selector");module.exports=function(element,selector,checkYoSelf){for(var parent=checkYoSelf?element:element.parentNode;parent&&parent!==document;){if(matches(parent,selector))return parent;parent=parent.parentNode}}},{"matches-selector":2}],2:[function(require,module){function match(el,selector){if(vendor)return vendor.call(el,selector);for(var nodes=el.parentNode.querySelectorAll(selector),i=0;i<nodes.length;++i)if(nodes[i]==el)return!0;return!1}var proto=Element.prototype,vendor=proto.matchesSelector||proto.webkitMatchesSelector||proto.mozMatchesSelector||proto.msMatchesSelector||proto.oMatchesSelector;module.exports=match},{}],3:[function(require,module){function delegate(element,selector,type){var listenerFn=listener.apply(this,arguments);return element.addEventListener(type,listenerFn),{destroy:function(){element.removeEventListener(type,listenerFn)}}}function listener(element,selector,type,callback){return function(e){e.delegateTarget=closest(e.target,selector,!0),e.delegateTarget&&callback.call(element,e)}}var closest=require("closest");module.exports=delegate},{closest:1}],4:[function(require,module,exports){exports.node=function(value){return value!==undefined&&value instanceof HTMLElement&&1===value.nodeType},exports.nodeList=function(value){var type=Object.prototype.toString.call(value);return value!==undefined&&("[object NodeList]"===type||"[object HTMLCollection]"===type)&&"length"in value&&(0===value.length||exports.node(value[0]))},exports.string=function(value){return"string"==typeof value||value instanceof String},exports["function"]=function(value){return"[object Function]"===Object.prototype.toString.call(value)}},{}],5:[function(require,module){function listen(target,type,callback){if(!target&&!type&&!callback)throw new Error("Missing required arguments");if(!is.string(type))throw new TypeError("Second argument must be a String");if(!is["function"](callback))throw new TypeError("Third argument must be a Function");if(is.node(target))return listenNode(target,type,callback);if(is.nodeList(target))return listenNodeList(target,type,callback);if(is.string(target))return listenSelector(target,type,callback);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function listenNode(node,type,callback){return node.addEventListener(type,callback),{destroy:function(){node.removeEventListener(type,callback)}}}function listenNodeList(nodeList,type,callback){return Array.prototype.forEach.call(nodeList,function(node){node.addEventListener(type,callback)}),{destroy:function(){Array.prototype.forEach.call(nodeList,function(node){node.removeEventListener(type,callback)})}}}function listenSelector(selector,type,callback){return delegate(document.body,selector,type,callback)}var is=require("./is"),delegate=require("delegate");module.exports=listen},{"./is":4,delegate:3}],6:[function(require,module){function select(element){var selectedText;if("INPUT"===element.nodeName||"TEXTAREA"===element.nodeName)element.focus(),element.setSelectionRange(0,element.value.length),selectedText=element.value;else{element.hasAttribute("contenteditable")&&element.focus();var selection=window.getSelection(),range=document.createRange();range.selectNodeContents(element),selection.removeAllRanges(),selection.addRange(range),selectedText=selection.toString()}return selectedText}module.exports=select},{}],7:[function(require,module){function E(){}E.prototype={on:function(name,callback,ctx){var e=this.e||(this.e={});return(e[name]||(e[name]=[])).push({fn:callback,ctx:ctx}),this},once:function(name,callback,ctx){function listener(){self.off(name,listener),callback.apply(ctx,arguments)}var self=this;return listener._=callback,this.on(name,listener,ctx)},emit:function(name){for(var data=[].slice.call(arguments,1),evtArr=((this.e||(this.e={}))[name]||[]).slice(),i=0,len=evtArr.length;i<len;i++)evtArr[i].fn.apply(evtArr[i].ctx,data);return this},off:function(name,callback){var e=this.e||(this.e={}),evts=e[name],liveEvents=[];if(evts&&callback)for(var i=0,len=evts.length;i<len;i++)evts[i].fn!==callback&&evts[i].fn._!==callback&&liveEvents.push(evts[i]);return liveEvents.length?e[name]=liveEvents:delete e[name],this}},module.exports=E},{}],8:[function(require,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_select2=_interopRequireDefault(require("select")),ClipboardAction=function(){function ClipboardAction(options){_classCallCheck(this,ClipboardAction),this.resolveOptions(options),this.initSelection()}return ClipboardAction.prototype.resolveOptions=function(){var options=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];this.action=options.action,this.emitter=options.emitter,this.target=options.target,this.text=options.text,this.trigger=options.trigger,this.selectedText=""},ClipboardAction.prototype.initSelection=function(){if(this.text&&this.target)throw new Error('Multiple attributes declared, use either "target" or "text"');if(this.text)this.selectFake();else{if(!this.target)throw new Error('Missing required attributes, use either "target" or "text"');this.selectTarget()}},ClipboardAction.prototype.selectFake=function(){var _this=this;this.removeFake(),this.fakeHandler=document.body.addEventListener("click",function(){return _this.removeFake()}),this.fakeElem=document.createElement("textarea"),this.fakeElem.style.position="absolute",this.fakeElem.style.left="-9999px",this.fakeElem.style.top=(window.pageYOffset||document.documentElement.scrollTop)+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,document.body.appendChild(this.fakeElem),this.selectedText=_select2["default"](this.fakeElem),this.copyText()},ClipboardAction.prototype.removeFake=function(){this.fakeHandler&&(document.body.removeEventListener("click"),this.fakeHandler=null),this.fakeElem&&(document.body.removeChild(this.fakeElem),this.fakeElem=null)},ClipboardAction.prototype.selectTarget=function(){this.selectedText=_select2["default"](this.target),this.copyText()},ClipboardAction.prototype.copyText=function(){var succeeded=undefined;try{succeeded=document.execCommand(this.action)}catch(err){succeeded=!1}this.handleResult(succeeded)},ClipboardAction.prototype.handleResult=function(succeeded){succeeded?this.emitter.emit("success",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)}):this.emitter.emit("error",{action:this.action,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})},ClipboardAction.prototype.clearSelection=function(){this.target&&this.target.blur(),window.getSelection().removeAllRanges()},ClipboardAction.prototype.destroy=function(){this.removeFake()},_createClass(ClipboardAction,[{key:"action",set:function(){var action=arguments.length<=0||arguments[0]===undefined?"copy":arguments[0];if(this._action=action,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(target){if(target!==undefined){if(!target||"object"!=typeof target||1!==target.nodeType)throw new Error('Invalid "target" value, use a valid Element');this._target=target}},get:function(){return this._target}}]),ClipboardAction}();exports["default"]=ClipboardAction,module.exports=exports["default"]},{select:6}],9:[function(require,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function getAttributeValue(suffix,element){var attribute="data-clipboard-"+suffix;if(element.hasAttribute(attribute))return element.getAttribute(attribute)}exports.__esModule=!0;var _clipboardAction2=_interopRequireDefault(require("./clipboard-action")),_tinyEmitter2=_interopRequireDefault(require("tiny-emitter")),_goodListener2=_interopRequireDefault(require("good-listener")),Clipboard=function(_Emitter){function Clipboard(trigger,options){_classCallCheck(this,Clipboard),_Emitter.call(this),this.resolveOptions(options),this.listenClick(trigger)}return _inherits(Clipboard,_Emitter),Clipboard.prototype.resolveOptions=function(){var options=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];this.action="function"==typeof options.action?options.action:this.defaultAction,this.target="function"==typeof options.target?options.target:this.defaultTarget,this.text="function"==typeof options.text?options.text:this.defaultText},Clipboard.prototype.listenClick=function(trigger){var _this=this;this.listener=_goodListener2["default"](trigger,"click",function(e){return _this.onClick(e)})},Clipboard.prototype.onClick=function(e){var trigger=e.delegateTarget||e.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new _clipboardAction2["default"]({action:this.action(trigger),target:this.target(trigger),text:this.text(trigger),trigger:trigger,emitter:this})},Clipboard.prototype.defaultAction=function(trigger){return getAttributeValue("action",trigger)},Clipboard.prototype.defaultTarget=function(trigger){var selector=getAttributeValue("target",trigger);if(selector)return document.querySelector(selector)},Clipboard.prototype.defaultText=function(trigger){return getAttributeValue("text",trigger)},Clipboard.prototype.destroy=function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)},Clipboard}(_tinyEmitter2["default"]);exports["default"]=Clipboard,module.exports=exports["default"]},{"./clipboard-action":8,"good-listener":5,"tiny-emitter":7}]},{},[9])(9)}),function(e,i,n){"undefined"!=typeof module&&module.exports?module.exports=n():"function"==typeof define&&define.amd?define("bowser",n):e.bowser=n()}(this,0,function(){function e(e){function i(i){var n=e.match(i);return n&&n.length>1&&n[1]||""}function n(i){var n=e.match(i);return n&&n.length>1&&n[2]||""}var s,o=i(/(ipod|iphone|ipad)/i).toLowerCase(),r=!/like android/i.test(e)&&/android/i.test(e),a=/nexus\s*[0-6]\s*/i.test(e),d=!a&&/nexus\s*[0-9]+/i.test(e),m=/CrOS/.test(e),u=/silk/i.test(e),c=/sailfish/i.test(e),p=/tizen/i.test(e),f=/(web|hpw)os/i.test(e),l=/windows phone/i.test(e),v=(/SamsungBrowser/i.test(e),!l&&/windows/i.test(e)),h=!o&&!u&&/macintosh/i.test(e),w=!r&&!c&&!p&&!f&&/linux/i.test(e),b=n(/edg([ea]|ios)\/(\d+(\.\d+)?)/i),y=i(/version\/(\d+(\.\d+)?)/i),g=/tablet/i.test(e)&&!/tablet pc/i.test(e),k=!g&&/[^-]mobi/i.test(e),x=/xbox/i.test(e);/opera/i.test(e)?s={name:"Opera",opera:t,version:y||i(/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)}:/opr\/|opios/i.test(e)?s={name:"Opera",opera:t,version:i(/(?:opr|opios)[\s\/](\d+(\.\d+)?)/i)||y}:/SamsungBrowser/i.test(e)?s={name:"Samsung Internet for Android",samsungBrowser:t,version:y||i(/(?:SamsungBrowser)[\s\/](\d+(\.\d+)?)/i)}:/coast/i.test(e)?s={name:"Opera Coast",coast:t,version:y||i(/(?:coast)[\s\/](\d+(\.\d+)?)/i)}:/yabrowser/i.test(e)?s={name:"Yandex Browser",yandexbrowser:t,version:y||i(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/ucbrowser/i.test(e)?s={name:"UC Browser",ucbrowser:t,version:i(/(?:ucbrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/mxios/i.test(e)?s={name:"Maxthon",maxthon:t,version:i(/(?:mxios)[\s\/](\d+(?:\.\d+)+)/i)}:/epiphany/i.test(e)?s={name:"Epiphany",epiphany:t,version:i(/(?:epiphany)[\s\/](\d+(?:\.\d+)+)/i)}:/puffin/i.test(e)?s={name:"Puffin",puffin:t,version:i(/(?:puffin)[\s\/](\d+(?:\.\d+)?)/i)}:/sleipnir/i.test(e)?s={name:"Sleipnir",sleipnir:t,version:i(/(?:sleipnir)[\s\/](\d+(?:\.\d+)+)/i)}:/k-meleon/i.test(e)?s={name:"K-Meleon",kMeleon:t,version:i(/(?:k-meleon)[\s\/](\d+(?:\.\d+)+)/i)}:l?(s={name:"Windows Phone",osname:"Windows Phone",windowsphone:t},b?(s.msedge=t,s.version=b):(s.msie=t,s.version=i(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(e)?s={name:"Internet Explorer",msie:t,version:i(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:m?s={name:"Chrome",osname:"Chrome OS",chromeos:t,chromeBook:t,chrome:t,version:i(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/edg([ea]|ios)/i.test(e)?s={name:"Microsoft Edge",msedge:t,version:b}:/vivaldi/i.test(e)?s={name:"Vivaldi",vivaldi:t,version:i(/vivaldi\/(\d+(\.\d+)?)/i)||y}:c?s={name:"Sailfish",osname:"Sailfish OS",sailfish:t,version:i(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(e)?s={name:"SeaMonkey",seamonkey:t,version:i(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel|fxios/i.test(e)?(s={name:"Firefox",firefox:t,version:i(/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(e)&&(s.firefoxos=t,s.osname="Firefox OS")):u?s={name:"Amazon Silk",silk:t,version:i(/silk\/(\d+(\.\d+)?)/i)}:/phantom/i.test(e)?s={name:"PhantomJS",phantom:t,version:i(/phantomjs\/(\d+(\.\d+)?)/i)}:/slimerjs/i.test(e)?s={name:"SlimerJS",slimer:t,version:i(/slimerjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(e)||/rim\stablet/i.test(e)?s={name:"BlackBerry",osname:"BlackBerry OS",blackberry:t,version:y||i(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:f?(s={name:"WebOS",osname:"WebOS",webos:t,version:y||i(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(e)&&(s.touchpad=t)):/bada/i.test(e)?s={name:"Bada",osname:"Bada",bada:t,version:i(/dolfin\/(\d+(\.\d+)?)/i)}:p?s={name:"Tizen",osname:"Tizen",tizen:t,version:i(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||y}:/qupzilla/i.test(e)?s={name:"QupZilla",qupzilla:t,version:i(/(?:qupzilla)[\s\/](\d+(?:\.\d+)+)/i)||y}:/chromium/i.test(e)?s={name:"Chromium",chromium:t,version:i(/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i)||y}:/chrome|crios|crmo/i.test(e)?s={name:"Chrome",chrome:t,version:i(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:r?s={name:"Android",version:y}:/safari|applewebkit/i.test(e)?(s={name:"Safari",safari:t},y&&(s.version=y)):o?(s={name:"iphone"==o?"iPhone":"ipad"==o?"iPad":"iPod"},y&&(s.version=y)):s=/googlebot/i.test(e)?{name:"Googlebot",googlebot:t,version:i(/googlebot\/(\d+(\.\d+))/i)||y}:{name:i(/^(.*)\/(.*) /),version:n(/^(.*)\/(.*) /)},!s.msedge&&/(apple)?webkit/i.test(e)?(/(apple)?webkit\/537\.36/i.test(e)?(s.name=s.name||"Blink",s.blink=t):(s.name=s.name||"Webkit",s.webkit=t),!s.version&&y&&(s.version=y)):!s.opera&&/gecko\//i.test(e)&&(s.name=s.name||"Gecko",s.gecko=t,s.version=s.version||i(/gecko\/(\d+(\.\d+)?)/i)),s.windowsphone||!r&&!s.silk?!s.windowsphone&&o?(s[o]=t,s.ios=t,s.osname="iOS"):h?(s.mac=t,s.osname="macOS"):x?(s.xbox=t,s.osname="Xbox"):v?(s.windows=t,s.osname="Windows"):w&&(s.linux=t,s.osname="Linux"):(s.android=t,s.osname="Android");var S="";s.windows?S=function(){switch(i(/Windows ((NT|XP)( \d\d?.\d)?)/i)){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}():s.windowsphone?S=i(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):s.mac?S=(S=i(/Mac OS X (\d+([_\.\s]\d+)*)/i)).replace(/[_\s]/g,"."):o?S=(S=i(/os (\d+([_\s]\d+)*) like mac os x/i)).replace(/[_\s]/g,"."):r?S=i(/android[ \/-](\d+(\.\d+)*)/i):s.webos?S=i(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):s.blackberry?S=i(/rim\stablet\sos\s(\d+(\.\d+)*)/i):s.bada?S=i(/bada\/(\d+(\.\d+)*)/i):s.tizen&&(S=i(/tizen[\/\s](\d+(\.\d+)*)/i)),S&&(s.osversion=S);var T=!s.windows&&S.split(".")[0];return g||d||"ipad"==o||r&&(3==T||T>=4&&!k)||s.silk?s.tablet=t:(k||"iphone"==o||"ipod"==o||r||a||s.blackberry||s.webos||s.bada)&&(s.mobile=t),s.msedge||s.msie&&s.version>=10||s.yandexbrowser&&s.version>=15||s.vivaldi&&s.version>=1||s.chrome&&s.version>=20||s.samsungBrowser&&s.version>=4||s.firefox&&s.version>=20||s.safari&&s.version>=6||s.opera&&s.version>=10||s.ios&&s.osversion&&s.osversion.split(".")[0]>=6||s.blackberry&&s.version>=10.1||s.chromium&&s.version>=20?s.a=t:s.msie&&s.version<10||s.chrome&&s.version<20||s.firefox&&s.version<20||s.safari&&s.version<6||s.opera&&s.version<10||s.ios&&s.osversion&&s.osversion.split(".")[0]<6||s.chromium&&s.version<20?s.c=t:s.x=t,s}function i(e){return e.split(".").length}function n(e,i){var n,s=[];if(Array.prototype.map)return Array.prototype.map.call(e,i);for(n=0;n<e.length;n++)s.push(i(e[n]));return s}function s(e){for(var s=Math.max(i(e[0]),i(e[1])),o=n(e,function(e){var o=s-i(e);return n((e+=new Array(o+1).join(".0")).split("."),function(e){return new Array(20-e.length).join("0")+e}).reverse()});--s>=0;){if(o[0][s]>o[1][s])return 1;if(o[0][s]!==o[1][s])return-1;if(0===s)return 0}}function o(i,n,o){var t=r;"string"==typeof n&&(o=n,n=void 0),void 0===n&&(n=!1),o&&(t=e(o));var a=""+t.version;for(var d in i)if(i.hasOwnProperty(d)&&t[d]){if("string"!=typeof i[d])throw new Error("Browser version in the minVersion map should be a string: "+d+": "+String(i));return s([a,i[d]])<0}return n}var t=!0,r=e("undefined"!=typeof navigator&&navigator.userAgent||"");return r.test=function(e){for(var i=0;i<e.length;++i){var n=e[i];if("string"==typeof n&&n in r)return!0}return!1},r.isUnsupportedBrowser=o,r.compareVersions=s,r.check=function(e,i,n){return!o(e,i,n)},r._detect=e,r.detect=e,r}),function(e){"use strict";var browserTests=function(e){var i=[],n=this;if(this.pass=[],this.fail=[],this.warn=[],this.done=[],!e||"object"!=typeof e||Object.keys(e)<1)return Promise.reject(!1);Object.keys(e).forEach(function(s){"object"==typeof e[s]&&e[s].type&&"function"==typeof n._testFunctions[e[s].type]?i.push(n._testFunctionWrapper(s,e[s])):"string"==typeof e[s]&&"function"==typeof n._testFunctions[e[s]]&&i.push(n._testFunctionWrapper(s,{type:e[s]}))});var s={},o=new Promise(function(e,i){s.resolve=e,s.reject=i});return Promise.all(i).then(function(){browserTests.lastResult={pass:n.pass,fail:n.fail,warn:n.warn},n.fail.length?s.reject({pass:n.pass,fail:n.fail,warn:n.warn}):s.resolve({pass:n.pass,warn:n.warn})}),o};browserTests.prototype._testFunctionWrapper=function(i,n){var s,o=this,t=new Promise(function(e){s=function(s){o.done.indexOf(i)>-1||(o.done.push(i),s?o.pass.push(i):n.fail?o.fail.push(i):o.warn.push(i),e())}});e.setTimeout(function(){s(!1)},1e3*(n.timeout||browserTests.defaultTimeout));try{this._testFunctions[n.type](s,n)}catch(e){browserTests.showErrors&&console.error(e),s(!1)}return t},browserTests.prototype._testFunctions={},browserTests.list=function(){return Object.keys(browserTests.prototype._testFunctions)},browserTests.showErrors=!0,browserTests.defaultTimeout=10,e.browserTests=browserTests}(window),function(){"use strict";window.browserTests.prototype._testFunctions.ajax=function(e,i){if(!i.url||"string"!=typeof i.url)return e(!1);var n=new XMLHttpRequest;n.onreadystatechange=function(){4===n.readyState&&(200===n.status?e(!0):e(!1))},n.open("GET",i.url),n.send()}}(),function(){"use strict";window.browserTests.prototype._testFunctions.cookie=function(e){if(!navigator.cookieEnabled)return e(!1);e(!0)}}(),function(){"use strict";window.browserTests.prototype._testFunctions.version=function(e,i){if(!i.minimum||"object"!=typeof i.minimum)return e(!1);e(bowser.check(i.minimum,!0))}}(),function(e){"use strict";e.browserTests.prototype._testFunctions.viewport=function(i,n){if(!n.width||!n.height)return i(!1);if("number"!=typeof n.width||"number"!=typeof n.height)return i(!1);var s=Math.max(document.documentElement.clientWidth,e.innerWidth||0),o=Math.max(document.documentElement.clientHeight,e.innerHeight||0);if(s<n.width||o<n.height)return i(!1);i(!0)}}(window),require__.modules={},require__.aliases={},require__.resolve=function(path){"/"===path.charAt(0)&&(path=path.slice(1));for(var paths=[path,path+".js",path+".json",path+"/index.js",path+"/index.json"],i=0;i<paths.length;i++){path=paths[i];if(require__.modules.hasOwnProperty(path))return path;if(require__.aliases.hasOwnProperty(path))return require__.aliases[path]}},require__.normalize=function(curr,path){var segs=[];if("."!=path.charAt(0))return path;curr=curr.split("/"),path=path.split("/");for(var i=0;i<path.length;++i)".."==path[i]?curr.pop():"."!=path[i]&&""!=path[i]&&segs.push(path[i]);return curr.concat(segs).join("/")},require__.register=function(path,definition){require__.modules[path]=definition},require__.alias=function(from,to){if(!require__.modules.hasOwnProperty(from))throw new Error('Failed to alias "'+from+'", it does not exist');require__.aliases[to]=from},require__.relative=function(parent){function lastIndexOf(arr,obj){for(var i=arr.length;i--;)if(arr[i]===obj)return i;return-1}function localrequire__(path){return require__(localrequire__.resolve(path),parent,path)}var p=require__.normalize(parent,"..");return localrequire__.resolve=function(path){var c=path.charAt(0);if("/"==c)return path.slice(1);if("."==c)return require__.normalize(p,path);var segs=parent.split("/"),i=lastIndexOf(segs,"deps")+1;return i||(i=0),path=segs.slice(0,i+1).join("/")+"/deps/"+path},localrequire__.exists=function(path){return require__.modules.hasOwnProperty(localrequire__.resolve(path))},localrequire__},require__.register("switchery/switchery.js",function(exports,require__,module){function Switchery(element,options){if(!(this instanceof Switchery))return new Switchery(options);for(var i in this.element=element,this.options=options||{},defaults)i in this.options||(this.options[i]=defaults[i]);"checkbox"==this.element.type&&this.init()}
/**
 * Switchery 0.2.1
 * http://abpetkov.github.io/switchery/
 *
 * Authored by Alexander Petkov
 * https://github.com/abpetkov
 *
 * Copyright 2013, Alexander Petkov
 * License: The MIT License (MIT)
 * http://opensource.org/licenses/MIT
 *
 */
module.exports=Switchery;var defaults={color:"#29bb68",secondaryColor:"#C2C7D0",className:"switchery",disabled:!1,speed:"0.4s"};Switchery.prototype.hide=function(){this.element.style.display="none"},Switchery.prototype.show=function(){var switcher=this.create();this.element.parentNode.appendChild(switcher)},Switchery.prototype.create=function(){return this.switcher=document.createElement("span"),this.jack=document.createElement("small"),this.switcher.appendChild(this.jack),this.switcher.className=this.options.className,this.switcher},Switchery.prototype.isChecked=function(){return this.element.checked},Switchery.prototype.isDisabled=function(){return this.options.disabled||this.element.disabled},Switchery.prototype.setPosition=function(clicked){var checked=this.isChecked(),switcher=this.switcher,jack=this.jack;if(clicked&&checked?checked=!1:clicked&&!checked&&(checked=!0),this.element.checked!=checked)if("createEvent"in document){var event=document.createEvent("HTMLEvents");event.initEvent("change",!1,!0),this.element.dispatchEvent(event)}else this.element.fireEvent("onchange");!0===checked?(this.element.checked=!0,window.getComputedStyle?jack.style.left=parseInt(window.getComputedStyle(switcher).width)-(jack.offsetWidth+4)+"px":jack.style.left=parseInt(switcher.currentStyle.width)-jack.offsetWidth+"px",this.options.color&&this.colorize(),this.setSpeed()):(jack.style.left=0,this.element.checked=!1,this.switcher.style.boxShadow="inset 0 0 0 0 "+this.options.secondaryColor,this.switcher.style.borderColor=this.options.secondaryColor,this.switcher.style.backgroundColor="",this.setSpeed())},Switchery.prototype.setSpeed=function(){var switcherTransition=[],jackTransition=["left "+this.options.speed.replace(/[a-z]/,"")/2+"s"],isSafari=/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor);this.isChecked()?(switcherTransition.push("border "+this.options.speed),switcherTransition.push("box-shadow "+this.options.speed),switcherTransition.push("background-color "+3*this.options.speed.replace(/[a-z]/,"")+"s")):(switcherTransition.push("border "+this.options.speed),switcherTransition.push("box-shadow "+this.options.speed)),this.switcher.style.transition=switcherTransition.join(", "),isSafari&&(this.switcher.style.webkitTransition=switcherTransition.join(", ")),this.jack.style.transition=jackTransition,isSafari&&(this.jack.style.webkitTransition=jackTransition)},Switchery.prototype.setAttributes=function(){var id=this.element.getAttribute("id"),name=this.element.getAttribute("name");id&&this.switcher.setAttribute("id",id),name&&this.switcher.setAttribute("name",name)},Switchery.prototype.colorize=function(){this.switcher.style.backgroundColor=this.options.color,this.switcher.style.borderColor="#089243",this.switcher.style.boxShadow="inset 0 0 0 16px "+this.options.color},Switchery.prototype.handleClick=function(){var $this=this,switcher=this.switcher;!1===this.isDisabled()?switcher.addEventListener?switcher.addEventListener("click",function(){$this.setPosition(!0)}):switcher.attachEvent("onclick",function(){$this.setPosition(!0)}):this.element.disabled=!0},Switchery.prototype.init=function(){this.hide(),this.show(),this.setPosition(),this.setAttributes(),this.handleClick()}}),require__.alias("switchery/switchery.js","switchery/index.js"),
/*! loadCSS: load a CSS file asynchronously. [c]2016 @scottjehl, Filament Group, Inc. Licensed MIT */
function(w){"use strict";var loadCSS=function(href,before,media){function ready(cb){if(doc.body)return cb();setTimeout(function(){ready(cb)})}function loadCB(){ss.addEventListener&&ss.removeEventListener("load",loadCB),ss.media=media||"all"}var ref,doc=w.document,ss=doc.createElement("link");if(before)ref=before;else{var refs=(doc.body||doc.getElementsByTagName("head")[0]).childNodes;ref=refs[refs.length-1]}var sheets=doc.styleSheets;ss.rel="stylesheet",ss.href=href,ss.media="only x",ready(function(){ref.parentNode.insertBefore(ss,before?ref:ref.nextSibling)});var onloadcssdefined=function(cb){for(var resolvedHref=ss.href,i=sheets.length;i--;)if(sheets[i].href===resolvedHref)return cb();setTimeout(function(){onloadcssdefined(cb)})};return ss.addEventListener&&ss.addEventListener("load",loadCB),ss.onloadcssdefined=onloadcssdefined,onloadcssdefined(loadCB),ss};"undefined"!=typeof exports?exports.loadCSS=loadCSS:w.loadCSS=loadCSS}("undefined"!=typeof global?global:this),"function"!=typeof Object.create&&(Object.create=function(o){function F(){}return F.prototype=o,new F}),"function"!=typeof String.prototype.toTitleCase&&(String.prototype.toTitleCase=function(){return this.replace(/\w\S*/g,function(txt){return txt.charAt(0).toUpperCase()+txt.substr(1).toLowerCase()})}),"function"!=typeof String.prototype.toProperCase&&(String.prototype.toProperCase=function(){return this.replace(/\w\S*/g,function(txt){return txt.charAt(0).toUpperCase()+txt.substr(1).toLowerCase()})}),"function"!=typeof Number.prototype.round&&(Number.prototype.round=function(decimalPlaces){"number"!=typeof decimalPlaces&&(decimalPlaces=2);var multiplier=Math.pow(10,decimalPlaces);return Math.round(this*multiplier)/multiplier}),"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});
//# sourceMappingURL=https://staging.hackerrank.net/assets/sourcemaps/candidate_libraries-90ac377f3094ed092c20b43e4263d3f5.js.map